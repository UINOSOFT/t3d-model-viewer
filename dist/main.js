/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={700:e=>{e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var n,r=String(e),i="",a=!!t&&!!t.extended,s=!!t&&!!t.globstar,o=!1,l=t&&"string"==typeof t.flags?t.flags:"",u=0,c=r.length;u<c;u++)switch(n=r[u]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":i+="\\"+n;break;case"?":if(a){i+=".";break}case"[":case"]":if(a){i+=n;break}case"{":if(a){o=!0,i+="(";break}case"}":if(a){o=!1,i+=")";break}case",":if(o){i+="|";break}i+="\\"+n;break;case"*":for(var h=r[u-1],d=1;"*"===r[u+1];)d++,u++;var f=r[u+1];s?!(d>1)||"/"!==h&&void 0!==h||"/"!==f&&void 0!==f?i+="([^/]*)":(i+="((?:[^/]*(?:/|$))*)",u++):i+=".*";break;default:i+=n}return l&&~l.indexOf("g")||(i="^"+i+"$"),new RegExp(i,l)}},883:(e,t,n)=>{var r=void 0!==n.g?n.g:window,i=Object.create(r);i.scheduleImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},i.exports=t,"undefined"!=typeof process&&(i.process=process),i.__dirname="/",i.__filename="/index.js","undefined"!=typeof Buffer&&(i.Buffer=Buffer);var a=!r.window;try{"undefined"!=typeof WorkerGlobalScope&&r instanceof WorkerGlobalScope&&(a=!1),"undefined"!=typeof process&&process.versions&&process.versions.hasOwnProperty("electron")&&process.versions.hasOwnProperty("node")&&(a=!0)}catch(e){}if(a){var s=require("url");Object.defineProperty(i,"location",{value:{get href(){return s.pathToFileURL?s.pathToFileURL(process.cwd()).href+"/":"file://"+(e=process.cwd(),("win32"!=process.platform?e:"/"+e.replace(/\\/g,"/"))+"/");var e}}}),function(){function e(){try{throw new Error}catch(i){var e=i.stack,t=new RegExp("^ *at [^(]*\\((.*):[0-9]*:[0-9]*\\)$","mg"),n=null;do{var r=t.exec(e);null!=r&&(n=r)}while(null!=r);return n[1]}}var t=null;Object.defineProperty(i,"document",{value:{get currentScript(){return null==t&&(t={src:e()}),t}}})}(),i.dartDeferredLibraryLoader=function(e,t,n){try{load(e),t()}catch(e){n(e)}}}!function(){function e(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t[i]=e[i]}}var t=function(){var e=function(){};e.prototype={p:{}};var t=new e;if(!t.__proto__||t.__proto__.p!==e.prototype.p)return!1;try{if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Chrome/")>=0)return!0;if("function"==typeof version&&0==version.length){var n=version();if(/^\d+\.\d+\.\d+\.\d+$/.test(n))return!0}}catch(e){}return!1}();function n(n,r){if(n.prototype.constructor=n,n.prototype["$i"+n.name]=n,null!=r){if(t)return void(n.prototype.__proto__=r.prototype);var i=Object.create(r.prototype);e(n.prototype,i),n.prototype=i}}function r(e){function t(){}return t.prototype=e,new t,e}function a(e,t,n,r,i,a,s,o,l,u){return"number"==typeof o&&(o+=0),{co:e,iS:t,iI:n,rC:r,dV:i,cs:a,fs:s,fT:o,aI:l||0,nDA:u}}function s(e,t,n,r,i,s,o,l){var u=function(e){var t=null;return function(){return null===t&&(t=h.nF(e).prototype),t}}(a(e,!0,!1,n,r,i,s,o,l,!1));e[t]=u}function o(e,t,n,r,i,s,o,l,u,c){var d=function(e,t){var n=null;return e?function(e){return null===n&&(n=h.nF(t)),new n(e,this)}:function(){return null===n&&(n=h.nF(t)),new n(this,null)}}(n=!!n,a(e,!1,n,r,i,s,o,l,u,!!c));e[t]=d}var l,u,c=(l=function(e,t,n,r,i){return function(a,s,l,u){return o(a,s,e,t,n,r,[l],u,i,!1)}},u=function(e,t,n,r){return function(i,a,o,l){return s(i,a,e,t,n,[o],l,r)}},{inherit:n,inheritMany:function(e,t){for(var r=0;r<t.length;r++)n(t[r],e)},mixin:function(e,t){!function(e,t){Object.assign(t,e)}(t.prototype,e.prototype),e.prototype.constructor=e},mixinHard:function(e,t){!function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t.hasOwnProperty(i)||(t[i]=e[i])}}(t.prototype,e.prototype),e.prototype.constructor=e},installStaticTearOff:s,installInstanceTearOff:o,_instance_0u:l(0,0,null,["$0"],0),_instance_1u:l(0,1,null,["$1"],0),_instance_2u:l(0,2,null,["$2"],0),_instance_0i:l(1,0,null,["$0"],0),_instance_1i:l(1,1,null,["$1"],0),_instance_2i:l(1,2,null,["$2"],0),_static_0:u(0,null,["$0"],0),_static_1:u(1,null,["$1"],0),_static_2:u(2,null,["$2"],0),makeConstList:function(e){return e.immutable$list=Array,e.fixed$length=Array,e},lazy:function(e,t,n,r){var i=e;e[t]=i,e[n]=function(){return e[t]===i&&(e[t]=r()),e[n]=function(){return this[t]},e[t]}},lazyFinal:function(e,t,n,r){var i=e;e[t]=i,e[n]=function(){if(e[t]===i){var a=r();e[t]!==i&&h.xo(t),e[t]=a}var s=e[t];return e[n]=function(){return s},s}},lazyOld:function(e,t,n,r){var i=e;e[t]=i,e[n]=function(){var a;e[n]=function(){h.xn(t)};var s=r;try{e[t]===i?(a=e[t]=s,a=e[t]=r()):a=e[t]}finally{a===s&&(e[t]=null),e[n]=function(){return this[t]}}return a}},updateHolder:function(t,n){return e(n,t),t},convertToFastObject:r,updateTypes:function(e){var t=g.types,n=t.length;return t.push.apply(t,e),n},setOrUpdateInterceptorsByTag:function(t){var n=g.interceptorsByTag;n?e(t,n):g.interceptorsByTag=t},setOrUpdateLeafTags:function(t){var n=g.leafTags;n?e(t,n):g.leafTags=t}}),h={nk:function(){},hd:(e,t,n)=>t.h("p<0>").b(e)?new h.dV(e,t.h("@<0>").I(n).h("dV<1,2>")):new h.c4(e,t.h("@<0>").I(n).h("c4<1,2>")),ow:e=>new h.eY("Field '"+h.b(e)+"' has been assigned during initialization."),aW:e=>new h.fj(e),mP(e){var t,n=48^e;return n<=9?n:97<=(t=32|e)&&t<=102?t-87:-1},pP(e,t){var n=h.mP(f.a.B(e,t)),r=h.mP(f.a.B(e,t+1));return 16*n+r-(256&r)},bS(e,t,n){if(null==e)throw h.d(new h.dF(t,n.h("dF<0>")));return e},dM:(e,t,n,r)=>(h.aV(t,"start"),null!=n&&(h.aV(n,"end"),t>n&&h.a0(h.X(t,0,n,"start",null))),new h.dL(e,t,n,r.h("dL<0>"))),jM:(e,t,n,r)=>v.O.b(e)?new h.c7(e,t,n.h("@<0>").I(r).h("c7<1,2>")):new h.bc(e,t,n.h("@<0>").I(r).h("bc<1,2>")),oT(e,t,n){var r="count";return v.O.b(e)?(h.h6(t,r),h.aV(t,r),new h.cN(e,t,n.h("cN<0>"))):(h.h6(t,r),h.aV(t,r),new h.bf(e,t,n.h("bf<0>")))},ni:()=>new h.bG("No element"),u5:()=>new h.bG("Too few elements"),bJ:function(){},dk:function(e,t){this.a=e,this.$ti=t},c4:function(e,t){this.a=e,this.$ti=t},dV:function(e,t){this.a=e,this.$ti=t},dQ:function(){},b5:function(e,t){this.a=e,this.$ti=t},c5:function(e,t){this.a=e,this.$ti=t},he:function(e,t){this.a=e,this.b=t},eY:function(e){this.a=e},fj:function(e){this.a=e},cL:function(e){this.a=e},n6:function(){},dF:function(e,t){this.a=e,this.$ti=t},p:function(){},ag:function(){},dL:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.$ti=r},a9:function(e,t,n){var r=this;r.a=e,r.b=t,r.c=0,r.d=null,r.$ti=n},bc:function(e,t,n){this.a=e,this.b=t,this.$ti=n},c7:function(e,t,n){this.a=e,this.b=t,this.$ti=n},dB:function(e,t,n){var r=this;r.a=null,r.b=e,r.c=t,r.$ti=n},aa:function(e,t,n){this.a=e,this.b=t,this.$ti=n},lC:function(e,t,n){this.a=e,this.b=t,this.$ti=n},cC:function(e,t,n){this.a=e,this.b=t,this.$ti=n},bf:function(e,t,n){this.a=e,this.b=t,this.$ti=n},cN:function(e,t,n){this.a=e,this.b=t,this.$ti=n},dJ:function(e,t,n){this.a=e,this.b=t,this.$ti=n},b7:function(e){this.$ti=e},dn:function(e){this.$ti=e},dq:function(){},fu:function(){},d0:function(){},d_:function(e){this.a=e},el:function(){},tP(){throw h.d(h.ac("Cannot modify unmodifiable Map"))},tY:e=>"number"==typeof e?f.bV.gE(e):v.fo.b(e)?e.gE(e):v.dd.b(e)?h.cX(e):h.fX(e),tZ:e=>new h.hX(e),pW(e){var t=g.mangledGlobalNames[e];return null!=t?t:"minified:"+e},pN(e,t){var n;return null!=t&&null!=(n=t.x)?n:v.aU.b(e)},b(e){var t;if("string"==typeof e)return e;if("number"==typeof e){if(0!==e)return""+e}else{if(!0===e)return"true";if(!1===e)return"false";if(null==e)return"null"}if("string"!=typeof(t=d.aq(e)))throw h.d(h.h5(e,"object","toString method returned 'null'"));return t},cX(e){var t,n=m.oI;return null==n&&(n=m.oI=Symbol("identityHashCode")),null==(t=e[n])&&(t=1073741823*Math.random()|0,e[n]=t),t},oP(e,t){var n,r,i,a,s,o,l=null;if("string"!=typeof e&&h.a0(h.cG(e)),null==(n=/^\s*[+-]?((0x[a-f0-9]+)|(\d+)|([a-z0-9]+))\s*$/i.exec(e)))return l;if(r=n[3],null==t)return null!=r?parseInt(e,10):null!=n[2]?parseInt(e,16):l;if(t<2||t>36)throw h.d(h.X(t,2,36,"radix",l));if(10===t&&null!=r)return parseInt(e,10);if(t<10||null==r)for(i=t<=10?47+t:86+t,s=(a=n[1]).length,o=0;o<s;++o)if((32|f.a.J(a,o))>i)return l;return parseInt(e,t)},k5:e=>h.uH(e),uH(e){var t,n,r,i;if(e instanceof h.c)return h.aA(h.ai(e),null);if((t=d.bT(e))===f.bP||t===f.bX||v.ak.b(e)){if("Object"!==(n=f.a8(e))&&""!==n)return n;if("function"==typeof(r=e.constructor)&&"string"==typeof(i=r.name)&&"Object"!==i&&""!==i)return i}return h.aA(h.ai(e),null)},oH(e){var t,n,r,i,a=e.length;if(a<=500)return String.fromCharCode.apply(null,e);for(t="",n=0;n<a;n=r)i=(r=n+500)<a?r:a,t+=String.fromCharCode.apply(null,e.slice(n,i));return t},uK(e){var t,n,r,i=h.a([],v.Z);for(t=e.length,n=0;n<e.length;e.length===t||(0,h.cI)(e),++n){if(r=e[n],!h.aH(r))throw h.d(h.cG(r));if(r<=65535)i.push(r);else{if(!(r<=1114111))throw h.d(h.cG(r));i.push(55296+(1023&f.c.ag(r-65536,10))),i.push(56320+(1023&r))}}return h.oH(i)},uJ(e){var t,n,r;for(t=e.length,n=0;n<t;++n){if(r=e[n],!h.aH(r))throw h.d(h.cG(r));if(r<0)throw h.d(h.cG(r));if(r>65535)return h.uK(e)}return h.oH(e)},uL(e,t,n){var r,i,a,s;if(n<=500&&0===t&&n===e.length)return String.fromCharCode.apply(null,e);for(r=t,i="";r<n;r=a)s=(a=r+500)<n?a:n,i+=String.fromCharCode.apply(null,e.subarray(r,s));return i},bd(e){var t;if(0<=e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return t=e-65536,String.fromCharCode((55296|f.c.ag(t,10))>>>0,1023&t|56320)}throw h.d(h.X(e,0,1114111,null,null))},ax:e=>(void 0===e.date&&(e.date=new Date(e.a)),e.date),fh:e=>e.b?h.ax(e).getUTCFullYear()+0:h.ax(e).getFullYear()+0,oN:e=>e.b?h.ax(e).getUTCMonth()+1:h.ax(e).getMonth()+1,oJ:e=>e.b?h.ax(e).getUTCDate()+0:h.ax(e).getDate()+0,oK:e=>e.b?h.ax(e).getUTCHours()+0:h.ax(e).getHours()+0,oM:e=>e.b?h.ax(e).getUTCMinutes()+0:h.ax(e).getMinutes()+0,oO:e=>e.b?h.ax(e).getUTCSeconds()+0:h.ax(e).getSeconds()+0,oL:e=>e.b?h.ax(e).getUTCMilliseconds()+0:h.ax(e).getMilliseconds()+0,bB(e,t,n){var r,i,a={a:0};return r=[],i=[],a.a=t.length,f.d.F(r,t),a.b="",null!=n&&0!==n.a&&n.L(0,new h.k4(a,i,r)),d.tm(e,new h.iI(f.dA,0,r,i,0))},uI(e,t,n){var r,i;if(Array.isArray(t)&&(null==n||0===n.a)){if(0===(r=t.length)){if(e.$0)return e.$0()}else if(1===r){if(e.$1)return e.$1(t[0])}else if(2===r){if(e.$2)return e.$2(t[0],t[1])}else if(3===r){if(e.$3)return e.$3(t[0],t[1],t[2])}else if(4===r){if(e.$4)return e.$4(t[0],t[1],t[2],t[3])}else if(5===r&&e.$5)return e.$5(t[0],t[1],t[2],t[3],t[4]);if(null!=(i=e["$"+r]))return i.apply(e,t)}return h.uG(e,t,n)},uG(e,t,n){var r,i,a,s,o,l,u,c,p,m,g,_,b,x,y;if((i=(r=null!=t?Array.isArray(t)?t:h.ct(t,!0,v.z):[]).length)<(a=e.$R))return h.bB(e,r,n);if(l=(o=null==(s=e.$D))?null:s(),"string"==typeof(c=(u=d.bT(e)).$C)&&(c=u[c]),o)return null!=n&&0!==n.a?h.bB(e,r,n):i===a?c.apply(e,r):h.bB(e,r,n);if(Array.isArray(l))return null!=n&&0!==n.a?h.bB(e,r,n):i>(p=a+l.length)?h.bB(e,r,null):(i<p&&(m=l.slice(i-a),r===t&&(r=h.ct(r,!0,v.z)),f.d.F(r,m)),c.apply(e,r));if(i>a)return h.bB(e,r,n);if(r===t&&(r=h.ct(r,!0,v.z)),g=Object.keys(l),null==n)for(o=g.length,_=0;_<g.length;g.length===o||(0,h.cI)(g),++_){if(b=l[g[_]],f.ac===b)return h.bB(e,r,n);f.d.C(r,b)}else{for(o=g.length,x=0,_=0;_<g.length;g.length===o||(0,h.cI)(g),++_)if(y=g[_],n.v(y))++x,f.d.C(r,n.j(0,y));else{if(b=l[y],f.ac===b)return h.bB(e,r,n);f.d.C(r,b)}if(x!==n.a)return h.bB(e,r,n)}return c.apply(e,r)},ex(e,t){var n,r="index",i=null;return h.aH(t)?(n=d.a3(e),t<0||t>=n?h.eS(t,e,r,i,n):new h.dI(i,i,!0,t,r,"Value not in range")):new h.ar(!0,t,r,i)},wE:(e,t,n)=>e<0||e>n?h.X(e,0,n,"start",null):null!=t&&(t<e||t>n)?h.X(t,e,n,"end",null):new h.ar(!0,t,"end",null),cG:e=>new h.ar(!0,e,null,null),d(e){var t,n;return null==e&&(e=new h.fd),(t=new Error).dartException=e,n=h.xp,"defineProperty"in Object?(Object.defineProperty(t,"message",{get:n}),t.name=""):t.toString=n,t},xp(){return d.aq(this.dartException)},a0(e){throw h.d(e)},cI(e){throw h.d(h.af(e))},bj(e){var t,n,r,i,a,s;return null==(t=(e=h.pS(e.replace(String({}),"$receiver$"))).match(/\\\$[a-zA-Z]+\\\$/g))&&(t=h.a([],v.s)),n=t.indexOf("\\$arguments\\$"),r=t.indexOf("\\$argumentsExpr\\$"),i=t.indexOf("\\$expr\\$"),a=t.indexOf("\\$method\\$"),s=t.indexOf("\\$receiver\\$"),new h.ll(e.replace(new RegExp("\\\\\\$arguments\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$argumentsExpr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$expr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$method\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$receiver\\\\\\$","g"),"((?:x|[^x])*)"),n,r,i,a,s)},lm:e=>function(e){try{e.$method$("$arguments$")}catch(e){return e.message}}(e),oW:e=>function(e){try{e.$method$}catch(e){return e.message}}(e),nl(e,t){var n=null==t,r=n?null:t.method;return new h.eX(e,r,n?null:t.receiver)},K:e=>null==e?new h.fe(e):e instanceof h.dp?h.bU(e,e.a):"object"!=typeof e?e:"dartException"in e?h.bU(e,e.dartException):h.wk(e),bU:(e,t)=>(v.Q.b(t)&&null==t.$thrownJsError&&(t.$thrownJsError=e),t),wk(e){var t,n,r,i,a,s,o,l,u,c,d,p,g,_,v=null;if(!("message"in e))return e;if(t=e.message,"number"in e&&"number"==typeof e.number&&(r=65535&(n=e.number),10==(8191&f.c.ag(n,16))))switch(r){case 438:return h.bU(e,h.nl(h.b(t)+" (Error "+r+")",v));case 445:case 5007:return i=h.b(t),h.bU(e,new h.dG(i+" (Error "+r+")",v))}return e instanceof TypeError?(a=m.rY(),s=m.rZ(),o=m.t_(),l=m.t0(),u=m.t3(),c=m.t4(),d=m.t2(),m.t1(),p=m.t6(),g=m.t5(),null!=(_=a.a8(t))?h.bU(e,h.nl(t,_)):null!=(_=s.a8(t))?(_.method="call",h.bU(e,h.nl(t,_))):(i=null!=(_=o.a8(t))||null!=(_=l.a8(t))||null!=(_=u.a8(t))||null!=(_=c.a8(t))||null!=(_=d.a8(t))||null!=(_=l.a8(t))||null!=(_=p.a8(t))||null!=(_=g.a8(t)))?h.bU(e,new h.dG(t,null==_?v:_.method)):h.bU(e,new h.ft("string"==typeof t?t:""))):e instanceof RangeError?"string"==typeof t&&-1!==t.indexOf("call stack")?new h.dK:(t=function(e){try{return String(e)}catch(e){}return null}(e),h.bU(e,new h.ar(!1,v,v,"string"==typeof t?t.replace(/^RangeError:\s*/,""):t))):"function"==typeof InternalError&&e instanceof InternalError&&"string"==typeof t&&"too much recursion"===t?new h.dK:e},aR(e){var t;return e instanceof h.dp?e.b:null==e?new h.e8(e):null!=(t=e.$cachedTrace)?t:e.$cachedTrace=new h.e8(e)},fX:e=>null==e||"object"!=typeof e?d.bW(e):h.cX(e),pF(e,t){var n,r,i,a=e.length;for(n=0;n<a;n=i)i=(r=n+1)+1,t.m(0,e[n],e[r]);return t},wI(e,t){var n,r=e.length;for(n=0;n<r;++n)t.C(0,e[n]);return t},wT(e,t,n,r,i,a){switch(t){case 0:return e.$0();case 1:return e.$1(n);case 2:return e.$2(n,r);case 3:return e.$3(n,r,i);case 4:return e.$4(n,r,i,a)}throw h.d(h.tW("Unsupported number of arguments for wrapped closure"))},mH(e,t){var n,r,i,a;return null==e?null:((n=e.$identity)||(r=e,i=t,a=h.wT,n=function(e,t,n,s){return a(r,i,e,t,n,s)},e.$identity=n),n)},tO(e){var t,n,r,i,a,s,o,l,u,c=e.co,d=e.iS,f=e.iI,p=e.nDA,m=e.aI,g=e.fs,_=e.cs,v=g[0],b=_[0],x=c[v],y=e.fT;for(y.toString,(t=d?Object.create((new h.fn).constructor.prototype):Object.create(new h.cK(null,null).constructor.prototype)).$initialize=t.constructor,n=d?function(){this.$initialize()}:function(e,t){this.$initialize(e,t)},t.constructor=n,n.prototype=t,t.$_name=v,t.$_target=x,(r=!d)?i=h.oo(v,x,f,p):(t.$static_name=v,i=x),t.$S=h.tK(y,d,f),t[b]=i,a=i,s=1;s<g.length;++s)"string"==typeof(o=g[s])?(l=o,o=c[o]):l="",null!=(u=_[s])&&(r&&(o=h.oo(l,o,f,p)),t[u]=o),s===m&&(a=o);return t.$C=a,t.$R=e.rC,t.$D=e.dV,n},tK(e,t,n){if("number"==typeof e)return e;if("string"==typeof e){if(t)throw h.d("Cannot compute signature for static tearoff.");return r=e,i=h.tD,function(){return i(this,r)}}var r,i;throw h.d("Error in functionType of tearoff")},tL(e,t,n,r){var i,a,s=h.on;switch(t?-1:e){case 0:return i=n,a=s,function(){return a(this)[i]()};case 1:return function(e,t){return function(n){return t(this)[e](n)}}(n,s);case 2:return function(e,t){return function(n,r){return t(this)[e](n,r)}}(n,s);case 3:return function(e,t){return function(n,r,i){return t(this)[e](n,r,i)}}(n,s);case 4:return function(e,t){return function(n,r,i,a){return t(this)[e](n,r,i,a)}}(n,s);case 5:return function(e,t){return function(n,r,i,a,s){return t(this)[e](n,r,i,a,s)}}(n,s);default:return function(e,t){return function(){return e.apply(t(this),arguments)}}(r,s)}},oo(e,t,n,r){var i;return n?h.tN(e,t,r):(i=t.length,h.tL(i,r,e,t))},tM(e,t,n,r){var i,a,s,o=h.on,l=h.tE;switch(t?-1:e){case 0:throw h.d(new h.fm("Intercepted function with no arguments."));case 1:return i=n,a=l,s=o,function(){return a(this)[i](s(this))};case 2:return function(e,t,n){return function(r){return t(this)[e](n(this),r)}}(n,l,o);case 3:return function(e,t,n){return function(r,i){return t(this)[e](n(this),r,i)}}(n,l,o);case 4:return function(e,t,n){return function(r,i,a){return t(this)[e](n(this),r,i,a)}}(n,l,o);case 5:return function(e,t,n){return function(r,i,a,s){return t(this)[e](n(this),r,i,a,s)}}(n,l,o);case 6:return function(e,t,n){return function(r,i,a,s,o){return t(this)[e](n(this),r,i,a,s,o)}}(n,l,o);default:return function(e,t,n){return function(){var r=[n(this)];return Array.prototype.push.apply(r,arguments),e.apply(t(this),r)}}(r,l,o)}},tN(e,t,n){var r;return null==m.ol&&(m.ol=h.ok("interceptor")),null==m.om&&(m.om=h.ok("receiver")),r=t.length,h.tM(r,n,e,t)},nF:e=>h.tO(e),tD:(e,t)=>h.ml(g.typeUniverse,h.ai(e.a),t),on:e=>e.a,tE:e=>e.b,ok(e){var t,n,r,i=new h.cK("receiver","interceptor"),a=d.nj(Object.getOwnPropertyNames(i));for(t=a.length,n=0;n<t;++n)if(i[r=a[n]]===e)return r;throw h.d(h.R("Field name "+e+" not found.",null))},xn(e){throw h.d(new h.eM(e))},wN:e=>g.getIsolateTag(e),uq(e,t,n){var r=new h.cs(e,t,n.h("cs<0>"));return r.c=e.e,r},AK(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})},xa(e){var t,n,r,i,a,s=m.pK.$1(e),o=m.mI[s];if(null!=o)return Object.defineProperty(e,g.dispatchPropertyName,{value:o,enumerable:!1,writable:!0,configurable:!0}),o.i;if(null!=(t=m.mT[s]))return t;if(null==(n=g.interceptorsByTag[s])&&null!=(r=m.pB.$2(e,s))){if(null!=(o=m.mI[r]))return Object.defineProperty(e,g.dispatchPropertyName,{value:o,enumerable:!1,writable:!0,configurable:!0}),o.i;if(null!=(t=m.mT[r]))return t;n=g.interceptorsByTag[r],s=r}if(null==n)return null;if(t=n.prototype,"!"===(i=s[0]))return o=h.n5(t),m.mI[s]=o,Object.defineProperty(e,g.dispatchPropertyName,{value:o,enumerable:!1,writable:!0,configurable:!0}),o.i;if("~"===i)return m.mT[s]=t,t;if("-"===i)return a=h.n5(t),Object.defineProperty(Object.getPrototypeOf(e),g.dispatchPropertyName,{value:a,enumerable:!1,writable:!0,configurable:!0}),a.i;if("+"===i)return h.pQ(e,t);if("*"===i)throw h.d(h.oX(s));return!0===g.leafTags[s]?(a=h.n5(t),Object.defineProperty(Object.getPrototypeOf(e),g.dispatchPropertyName,{value:a,enumerable:!1,writable:!0,configurable:!0}),a.i):h.pQ(e,t)},pQ(e,t){var n=Object.getPrototypeOf(e);return Object.defineProperty(n,g.dispatchPropertyName,{value:d.nJ(t,n,null,null),enumerable:!1,writable:!0,configurable:!0}),t},n5:e=>d.nJ(e,!1,null,!!e.$iau),xc(e,t,n){var r=t.prototype;return!0===g.leafTags[e]?h.n5(r):d.nJ(r,n,null,null)},wR(){!0!==m.nH&&(m.nH=!0,h.wS())},wS(){var e,t,n,r,i,a,s,o;if(m.mI=Object.create(null),m.mT=Object.create(null),h.wQ(),e=g.interceptorsByTag,t=Object.getOwnPropertyNames(e),"undefined"!=typeof window)for(window,n=function(){},r=0;r<t.length;++r)i=t[r],null!=(a=m.pR.$1(i))&&null!=(s=h.xc(i,e[i],a))&&(Object.defineProperty(a,g.dispatchPropertyName,{value:s,enumerable:!1,writable:!0,configurable:!0}),n.prototype=a);for(r=0;r<t.length;++r)i=t[r],/^[A-Za-z_]/.test(i)&&(o=e[i],e["!"+i]=o,e["~"+i]=o,e["-"+i]=o,e["+"+i]=o,e["*"+i]=o)},wQ(){var e,t,n,r,i,a,s=f.ba();if(s=h.dg(f.bb,h.dg(f.bc,h.dg(f.a9,h.dg(f.a9,h.dg(f.bd,h.dg(f.be,h.dg(f.bf(f.a8),s))))))),"undefined"!=typeof dartNativeDispatchHooksTransformer&&("function"==typeof(e=dartNativeDispatchHooksTransformer)&&(e=[e]),e.constructor==Array))for(t=0;t<e.length;++t)"function"==typeof(n=e[t])&&(s=n(s)||s);r=s.getTag,i=s.getUnknownTag,a=s.prototypeForTag,m.pK=new h.mQ(r),m.pB=new h.mR(i),m.pR=new h.mS(a)},dg:(e,t)=>e(t)||t,u7(e,t,n,r,i,a){var s=function(e,t){try{return new RegExp(e,t)}catch(e){return e}}(e,(t?"m":"")+(n?"":"i")+(r?"u":"")+(i?"s":"")+(a?"g":""));if(s instanceof RegExp)return s;throw h.d(h.P("Illegal RegExp pattern ("+String(s)+")",e,null))},wF:e=>e.indexOf("$",0)>=0?e.replace(/\$/g,"$$$$"):e,pS:e=>/[[\]{}()*+?.\\^$|]/.test(e)?e.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&"):e,pU:(e,t,n)=>h.xl(e,t,n),xl(e,t,n){var r,i,a;if(""===t){if(""===e)return n;for(r=e.length,i=n,a=0;a<r;++a)i=i+e[a]+n;return i.charCodeAt(0),i}return e.indexOf(t,0)<0?e:e.length<500||n.indexOf("$",0)>=0?e.split(t).join(n):e.replace(new RegExp(h.pS(t),"g"),h.wF(n))},dl:function(e,t){this.a=e,this.$ti=t},cM:function(){},as:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.$ti=r},dS:function(e,t){this.a=e,this.$ti=t},Y:function(e,t){this.a=e,this.$ti=t},hX:function(e){this.a=e},iI:function(e,t,n,r,i){var a=this;a.a=e,a.c=t,a.d=n,a.e=r,a.f=i},k4:function(e,t,n){this.a=e,this.b=t,this.c=n},ll:function(e,t,n,r,i,a){var s=this;s.a=e,s.b=t,s.c=n,s.d=r,s.e=i,s.f=a},dG:function(e,t){this.a=e,this.b=t},eX:function(e,t,n){this.a=e,this.b=t,this.c=n},ft:function(e){this.a=e},fe:function(e){this.a=e},dp:function(e,t){this.a=e,this.b=t},e8:function(e){this.a=e,this.b=null},c6:function(){},eH:function(){},eI:function(){},fp:function(){},fn:function(){},cK:function(e,t){this.a=e,this.b=t},fm:function(e){this.a=e},me:function(){},aE:function(e){var t=this;t.a=0,t.f=t.e=t.d=t.c=t.b=null,t.r=0,t.$ti=e},iO:function(e){this.a=e},jJ:function(e,t){this.a=e,this.b=t,this.c=null},aM:function(e,t){this.a=e,this.$ti=t},cs:function(e,t,n){var r=this;r.a=e,r.b=t,r.d=r.c=null,r.$ti=n},mQ:function(e){this.a=e},mR:function(e){this.a=e},mS:function(e){this.a=e},iJ:function(e,t){var n=this;n.a=e,n.b=t,n.d=n.c=null},mc:function(e){this.b=e},db(e,t,n){if(!h.aH(t))throw h.d(h.R("Invalid view offsetInBytes "+h.b(t),null))},vO:e=>e,f3:(e,t,n)=>(h.db(e,t,n),null==n?new DataView(e,t):new DataView(e,t,n)),uz:e=>new Float32Array(e),uA:e=>new Int8Array(e),oE:(e,t,n)=>(h.db(e,t,n),new Uint16Array(e,t,n)),oF:(e,t,n)=>(h.db(e,t,n),new Uint32Array(e,t,n)),uB:e=>new Uint8Array(e),no:(e,t,n)=>(h.db(e,t,n),new Uint8Array(e,t,n)),bl(e,t,n){if(e>>>0!==e||e>=n)throw h.d(h.ex(t,e))},bP(e,t,n){if(e>>>0!==e||t>>>0!==t||e>t||t>n)throw h.d(h.wE(e,t,n));return t},dD:function(){},cW:function(){},dC:function(){},aw:function(){},f4:function(){},f5:function(){},f6:function(){},f7:function(){},f8:function(){},f9:function(){},fa:function(){},dE:function(){},cu:function(){},e4:function(){},e5:function(){},e6:function(){},e7:function(){},uO(e,t){var n=t.c;return null==n?t.c=h.nx(e,t.y,!0):n},oR(e,t){var n=t.c;return null==n?t.c=h.ef(e,"a5",[t.y]):n},oS(e){var t=e.x;return 6===t||7===t||8===t?h.oS(e.y):11===t||12===t},uN:e=>e.at,aB:e=>h.fR(g.typeUniverse,e,!1),bR(e,t,n,r){var i,a,s,o,l,u,c,d,f,p,m,g,_,v,b,x,y=t.x;switch(y){case 5:case 1:case 2:case 3:case 4:return t;case 6:return i=t.y,(a=h.bR(e,i,n,r))===i?t:h.pd(e,a,!0);case 7:return i=t.y,(a=h.bR(e,i,n,r))===i?t:h.nx(e,a,!0);case 8:return i=t.y,(a=h.bR(e,i,n,r))===i?t:h.pc(e,a,!0);case 9:return s=t.z,(o=h.ev(e,s,n,r))===s?t:h.ef(e,t.y,o);case 10:return l=t.y,u=h.bR(e,l,n,r),c=t.z,d=h.ev(e,c,n,r),u===l&&d===c?t:h.nv(e,u,d);case 11:return f=t.y,p=h.bR(e,f,n,r),m=t.z,g=h.wh(e,m,n,r),p===f&&g===m?t:h.pb(e,p,g);case 12:return r+=(_=t.z).length,v=h.ev(e,_,n,r),l=t.y,u=h.bR(e,l,n,r),v===_&&u===l?t:h.nw(e,u,v,!0);case 13:return(b=t.y)<r||null==(x=n[b-r])?t:x;default:throw h.d(h.h7("Attempted to substitute unexpected RTI kind "+y))}},ev(e,t,n,r){var i,a,s,o,l=t.length,u=h.mn(l);for(i=!1,a=0;a<l;++a)s=t[a],(o=h.bR(e,s,n,r))!==s&&(i=!0),u[a]=o;return i?u:t},wi(e,t,n,r){var i,a,s,o,l,u,c=t.length,d=h.mn(c);for(i=!1,a=0;a<c;a+=3)s=t[a],o=t[a+1],l=t[a+2],(u=h.bR(e,l,n,r))!==l&&(i=!0),d.splice(a,3,s,o,u);return i?d:t},wh(e,t,n,r){var i,a=t.a,s=h.ev(e,a,n,r),o=t.b,l=h.ev(e,o,n,r),u=t.c,c=h.wi(e,u,n,r);return s===a&&l===o&&c===u?t:((i=new h.fG).a=s,i.b=l,i.c=c,i)},a:(e,t)=>(e[g.arrayRti]=t,e),wB(e){var t=e.$S;return null!=t?"number"==typeof t?h.wO(t):e.$S():null},pM(e,t){var n;return h.oS(t)&&e instanceof h.c6&&null!=(n=h.wB(e))?n:h.ai(e)},ai(e){var t;return e instanceof h.c?null!=(t=e.$ti)?t:h.nA(e):Array.isArray(e)?h.Z(e):h.nA(d.bT(e))},Z(e){var t=e[g.arrayRti],n=v.b;return null==t||t.constructor!==n.constructor?n:t},C(e){var t=e.$ti;return null!=t?t:h.nA(e)},nA(e){var t=e.constructor,n=t.$ccache;return null!=n?n:h.vY(e,t)},vY(e,t){var n=e instanceof h.c6?e.__proto__.__proto__.constructor:t,r=h.vm(g.typeUniverse,n.name);return t.$ccache=r,r},wO(e){var t,n=g.types,r=n[e];return"string"==typeof r?(t=h.fR(g.typeUniverse,r,!1),n[e]=t,t):r},pD(e){var t,n,r,i=e.w;return null!=i?i:(n=(t=e.at).replace(/\*/g,""))===t?e.w=new h.ed(e):(i=(r=h.fR(g.typeUniverse,n,!0)).w,e.w=null==i?r.w=new h.ed(r):i)},u:e=>h.pD(h.fR(g.typeUniverse,e,!1)),vX(e){var t,n,r,i=this,a=v.K;if(i===a)return h.dc(i,e,h.w1);if(a=!!h.bo(i)||i===v._||i===a)return h.dc(i,e,h.w4);if(null!=(n=(t=6===(a=i.x)?i.y:i)===v.S?h.aH:t===v.gR||t===v.di?h.w0:t===v.R?h.w2:t===v.y?h.er:null))return h.dc(i,e,n);if(9===t.x){if(r=t.y,t.z.every(h.wU))return i.r="$i"+r,"o"===r?h.dc(i,e,h.w_):h.dc(i,e,h.w3)}else if(7===a)return h.dc(i,e,h.vR);return h.dc(i,e,h.vP)},dc:(e,t,n)=>(e.b=n,e.b(t)),vW(e){var t,n=this;return t=h.bo(n)||n===v._||n===v.K?h.vH:n===v.K?h.vG:h.vQ,n.a=t,n.a(e)},mC(e){var t=e.x;return!!h.bo(e)||e===v._||e===v.A||7===t||8===t&&h.mC(e.y)||e===v.P||e===v.T},vP(e){var t=this;return null==e?h.mC(t):h.ad(g.typeUniverse,h.pM(e,t),null,t,null)},vR(e){return null==e||this.y.b(e)},w3(e){var t;return null==e?h.mC(this):(t=this.r,e instanceof h.c?!!e[t]:!!d.bT(e)[t])},w_(e){var t;return null==e?h.mC(this):!("object"!=typeof e||!Array.isArray(e)&&(t=this.r,e instanceof h.c?!e[t]:!d.bT(e)[t]))},AD(e){return null==e||this.b(e)?e:void h.po(e,this)},vQ(e){return null==e||this.b(e)?e:void h.po(e,this)},po(e,t){throw h.d(h.vc(h.p5(e,h.pM(e,t),h.aA(t,null))))},p5:(e,t,n)=>h.cO(e)+": type '"+h.b(h.aA(null==t?h.ai(e):t,null))+"' is not a subtype of type '"+h.b(n)+"'",vc:e=>new h.ee("TypeError: "+e),ao:(e,t)=>new h.ee("TypeError: "+h.p5(e,null,t)),w1:e=>null!=e,vG:e=>e,w4:e=>!0,vH:e=>e,er:e=>!0===e||!1===e,An(e){if(!0===e)return!0;if(!1===e)return!1;throw h.d(h.ao(e,"bool"))},Ap(e){if(!0===e)return!0;if(!1===e)return!1;if(null==e)return e;throw h.d(h.ao(e,"bool"))},Ao(e){if(!0===e)return!0;if(!1===e)return!1;if(null==e)return e;throw h.d(h.ao(e,"bool?"))},Aq(e){if("number"==typeof e)return e;throw h.d(h.ao(e,"double"))},As(e){if("number"==typeof e)return e;if(null==e)return e;throw h.d(h.ao(e,"double"))},Ar(e){if("number"==typeof e)return e;if(null==e)return e;throw h.d(h.ao(e,"double?"))},aH:e=>"number"==typeof e&&Math.floor(e)===e,At(e){if("number"==typeof e&&Math.floor(e)===e)return e;throw h.d(h.ao(e,"int"))},Av(e){if("number"==typeof e&&Math.floor(e)===e)return e;if(null==e)return e;throw h.d(h.ao(e,"int"))},Au(e){if("number"==typeof e&&Math.floor(e)===e)return e;if(null==e)return e;throw h.d(h.ao(e,"int?"))},w0:e=>"number"==typeof e,Aw(e){if("number"==typeof e)return e;throw h.d(h.ao(e,"num"))},Ay(e){if("number"==typeof e)return e;if(null==e)return e;throw h.d(h.ao(e,"num"))},Ax(e){if("number"==typeof e)return e;if(null==e)return e;throw h.d(h.ao(e,"num?"))},w2:e=>"string"==typeof e,Az(e){if("string"==typeof e)return e;throw h.d(h.ao(e,"String"))},AB(e){if("string"==typeof e)return e;if(null==e)return e;throw h.d(h.ao(e,"String"))},AA(e){if("string"==typeof e)return e;if(null==e)return e;throw h.d(h.ao(e,"String?"))},wd(e,t){var n,r,i;for(n="",r="",i=0;i<e.length;++i,r=", ")n+=f.a.ak(r,h.aA(e[i],t));return n},pq(e,t,n){var r,i,a,s,o,l,u,c,p,m,g,_,b,x,y,w,A,E,S,T,M,P=", ";if(null!=n){for(r=n.length,null==t?(t=h.a([],v.s),i=null):i=t.length,a=t.length,s=r;s>0;--s)t.push("T"+(a+s));for(o=v.cK,l=v._,u=v.K,c="<",p="",s=0;s<r;++s,p=P)c=f.a.ak(c+p,t[t.length-1-s]),2===(g=(m=n[s]).x)||3===g||4===g||5===g||m===o||m===l||m===u||(c+=f.a.ak(" extends ",h.aA(m,t)));c+=">"}else c="",i=null;for(o=e.y,x=(b=(_=e.z).a).length,w=(y=_.b).length,E=(A=_.c).length,S=h.aA(o,t),T="",M="",s=0;s<x;++s,M=P)T+=f.a.ak(M,h.aA(b[s],t));if(w>0){for(T+=M+"[",M="",s=0;s<w;++s,M=P)T+=f.a.ak(M,h.aA(y[s],t));T+="]"}if(E>0){for(T+=M+"{",M="",s=0;s<E;s+=3,M=P)T+=M,A[s+1]&&(T+="required "),T+=d.oc(h.aA(A[s+2],t)," ")+A[s];T+="}"}return null!=i&&(t.toString,t.length=i),c+"("+T+") => "+h.b(S)},aA(e,t){var n,r,i,a,s,o,l=e.x;return 5===l?"erased":2===l?"dynamic":3===l?"void":1===l?"Never":4===l?"any":6===l?n=h.aA(e.y,t):7===l?(r=e.y,n=h.aA(r,t),i=r.x,d.oc(11===i||12===i?f.a.ak("(",n)+")":n,"?")):8===l?"FutureOr<"+h.b(h.aA(e.y,t))+">":9===l?(a=h.wj(e.y),(s=e.z).length>0?a+"<"+h.wd(s,t)+">":a):11===l?h.pq(e,t,null):12===l?h.pq(e.y,t,e.z):13===l?(t.toString,o=e.y,t[t.length-1-o]):"?"},wj(e){var t=g.mangledGlobalNames[e];return null!=t?t:"minified:"+e},vn(e,t){for(var n=e.tR[t];"string"==typeof n;)n=e.tR[n];return n},vm(e,t){var n,r,i,a,s,o=e.eT,l=o[t];if(null==l)return h.fR(e,t,!1);if("number"==typeof l){for(n=l,r=h.eg(e,5,"#"),i=h.mn(n),a=0;a<n;++a)i[a]=r;return s=h.ef(e,t,i),o[t]=s,s}return l},vk:(e,t)=>h.pl(e.tR,t),vj:(e,t)=>h.pl(e.eT,t),fR(e,t,n){var r,i=e.eC,a=i.get(t);return null!=a?a:(r=h.pa(h.p8(e,null,t,n)),i.set(t,r),r)},ml(e,t,n){var r,i,a=t.Q;return null==a&&(a=t.Q=new Map),null!=(r=a.get(n))?r:(i=h.pa(h.p8(e,t,n,!0)),a.set(n,i),i)},vl(e,t,n){var r,i,a,s=t.as;return null==s&&(s=t.as=new Map),r=n.at,null!=(i=s.get(r))?i:(a=h.nv(e,t,10===n.x?n.z:[n]),s.set(r,a),a)},bO:(e,t)=>(t.a=h.vW,t.b=h.vX,t),eg(e,t,n){var r,i,a=e.eC.get(n);return null!=a?a:((r=new h.aQ(null,null)).x=t,r.at=n,i=h.bO(e,r),e.eC.set(n,i),i)},pd(e,t,n){var r,i=t.at+"*",a=e.eC.get(i);return null!=a?a:(r=h.vh(e,t,i,n),e.eC.set(i,r),r)},vh(e,t,n,r){var i,a;return r&&(i=t.x,h.bo(t)||t===v.P||t===v.T||7===i||6===i)?t:((a=new h.aQ(null,null)).x=6,a.y=t,a.at=n,h.bO(e,a))},nx(e,t,n){var r,i=t.at+"?",a=e.eC.get(i);return null!=a?a:(r=h.vg(e,t,i,n),e.eC.set(i,r),r)},vg(e,t,n,r){var i,a,s;if(r){if(i=t.x,h.bo(t)||t===v.P||t===v.T||7===i||8===i&&h.mU(t.y))return t;if(1===i||t===v.A)return v.P;if(6===i)return 8===(a=t.y).x&&h.mU(a.y)?a:h.uO(e,t)}return(s=new h.aQ(null,null)).x=7,s.y=t,s.at=n,h.bO(e,s)},pc(e,t,n){var r,i=t.at+"/",a=e.eC.get(i);return null!=a?a:(r=h.ve(e,t,i,n),e.eC.set(i,r),r)},ve(e,t,n,r){var i,a;if(r){if(i=t.x,h.bo(t)||t===v._||t===v.K||t===v.K)return t;if(1===i)return h.ef(e,"a5",[t]);if(t===v.P||t===v.T)return v.eH}return(a=new h.aQ(null,null)).x=8,a.y=t,a.at=n,h.bO(e,a)},vi(e,t){var n,r,i=t+"^",a=e.eC.get(i);return null!=a?a:((n=new h.aQ(null,null)).x=13,n.y=t,n.at=i,r=h.bO(e,n),e.eC.set(i,r),r)},fQ(e){var t,n,r,i=e.length;for(t="",n="",r=0;r<i;++r,n=",")t+=n+e[r].at;return t},vd(e){var t,n,r,i=e.length;for(t="",n="",r=0;r<i;r+=3,n=",")t+=n+e[r]+(e[r+1]?"!":":")+e[r+2].at;return t},ef(e,t,n){var r,i,a,s=t;return n.length>0&&(s+="<"+h.fQ(n)+">"),null!=(r=e.eC.get(s))?r:((i=new h.aQ(null,null)).x=9,i.y=t,i.z=n,n.length>0&&(i.c=n[0]),i.at=s,a=h.bO(e,i),e.eC.set(s,a),a)},nv(e,t,n){var r,i,a,s,o,l;return 10===t.x?(r=t.y,i=t.z.concat(n)):(i=n,r=t),a=r.at+";<"+h.fQ(i)+">",null!=(s=e.eC.get(a))?s:((o=new h.aQ(null,null)).x=10,o.y=r,o.z=i,o.at=a,l=h.bO(e,o),e.eC.set(a,l),l)},pb(e,t,n){var r,i,a,s,o=t.at,l=n.a,u=l.length,c=n.b,d=c.length,f=n.c,p=f.length,m="("+h.fQ(l);return d>0&&(m+=(u>0?",":"")+"["+h.fQ(c)+"]"),p>0&&(m+=(u>0?",":"")+"{"+h.vd(f)+"}"),r=o+(m+")"),null!=(i=e.eC.get(r))?i:((a=new h.aQ(null,null)).x=11,a.y=t,a.z=n,a.at=r,s=h.bO(e,a),e.eC.set(r,s),s)},nw(e,t,n,r){var i,a=t.at+"<"+h.fQ(n)+">",s=e.eC.get(a);return null!=s?s:(i=h.vf(e,t,n,a,r),e.eC.set(a,i),i)},vf(e,t,n,r,i){var a,s,o,l,u,c,d,f;if(i){for(a=n.length,s=h.mn(a),o=0,l=0;l<a;++l)1===(u=n[l]).x&&(s[l]=u,++o);if(o>0)return c=h.bR(e,t,s,0),d=h.ev(e,n,s,0),h.nw(e,c,d,n!==d)}return(f=new h.aQ(null,null)).x=12,f.y=t,f.z=n,f.at=r,h.bO(e,f)},p8:(e,t,n,r)=>({u:e,e:t,r:n,s:[],p:0,n:r}),pa(e){var t,n,r,i,a,s,o,l,u,c,d,f,p=e.r,m=e.s;for(t=p.length,n=0;n<t;)if((r=p.charCodeAt(n))>=48&&r<=57)n=h.v7(n+1,r,p,m);else if((((32|r)>>>0)-97&65535)<26||95===r||36===r)n=h.p9(e,n,p,m,!1);else if(46===r)n=h.p9(e,n,p,m,!0);else switch(++n,r){case 44:break;case 58:m.push(!1);break;case 33:m.push(!0);break;case 59:m.push(h.bN(e.u,e.e,m.pop()));break;case 94:m.push(h.vi(e.u,m.pop()));break;case 35:m.push(h.eg(e.u,5,"#"));break;case 64:m.push(h.eg(e.u,2,"@"));break;case 126:m.push(h.eg(e.u,3,"~"));break;case 60:case 40:case 91:case 123:m.push(e.p),e.p=m.length;break;case 62:i=e.u,a=m.splice(e.p),h.nu(e.u,e.e,a),e.p=m.pop(),"string"==typeof(s=m.pop())?m.push(h.ef(i,s,a)):11===(o=h.bN(i,e.e,s)).x?m.push(h.nw(i,o,a,e.n)):m.push(h.nv(i,o,a));break;case 38:h.v8(e,m);break;case 42:l=e.u,m.push(h.pd(l,h.bN(l,e.e,m.pop()),e.n));break;case 63:l=e.u,m.push(h.nx(l,h.bN(l,e.e,m.pop()),e.n));break;case 47:l=e.u,m.push(h.pc(l,h.bN(l,e.e,m.pop()),e.n));break;case 41:if(i=e.u,u=new h.fG,c=i.sEA,d=i.sEA,"number"==typeof(s=m.pop()))switch(s){case-1:c=m.pop();break;case-2:d=m.pop();break;default:m.push(s)}else m.push(s);a=m.splice(e.p),h.nu(e.u,e.e,a),e.p=m.pop(),u.a=a,u.b=c,u.c=d,m.push(h.pb(i,h.bN(i,e.e,m.pop()),u));break;case 93:a=m.splice(e.p),h.nu(e.u,e.e,a),e.p=m.pop(),m.push(a),m.push(-1);break;case 125:a=m.splice(e.p),h.va(e.u,e.e,a),e.p=m.pop(),m.push(a),m.push(-2);break;default:throw"Bad character "+r}return f=m.pop(),h.bN(e.u,e.e,f)},v7(e,t,n,r){var i,a,s=t-48;for(i=n.length;e<i&&(a=n.charCodeAt(e))>=48&&a<=57;++e)s=10*s+(a-48);return r.push(s),e},p9(e,t,n,r,i){var a,s,o,l,u,c=t+1;for(a=n.length;c<a;++c)if(46===(s=n.charCodeAt(c))){if(i)break;i=!0}else if(!((((32|s)>>>0)-97&65535)<26||95===s||36===s||s>=48&&s<=57))break;return o=n.substring(t,c),i?(a=e.u,10===(l=e.e).x&&(l=l.y),null==(u=h.vn(a,l.y)[o])&&h.a0('No "'+o+'" in "'+h.uN(l)+'"'),r.push(h.ml(a,l,u))):r.push(o),c},v8(e,t){var n=t.pop();if(0!==n){if(1!==n)throw h.d(h.h7("Unexpected extended operation "+h.b(n)));t.push(h.eg(e.u,4,"1&"))}else t.push(h.eg(e.u,1,"0&"))},bN:(e,t,n)=>"string"==typeof n?h.ef(e,n,e.sEA):"number"==typeof n?h.v9(e,t,n):n,nu(e,t,n){var r,i=n.length;for(r=0;r<i;++r)n[r]=h.bN(e,t,n[r])},va(e,t,n){var r,i=n.length;for(r=2;r<i;r+=3)n[r]=h.bN(e,t,n[r])},v9(e,t,n){var r,i,a=t.x;if(10===a){if(0===n)return t.y;if(n<=(i=(r=t.z).length))return r[n-1];n-=i,a=(t=t.y).x}else if(0===n)return t;if(9!==a)throw h.d(h.h7("Indexed base must be an interface type"));if(n<=(r=t.z).length)return r[n-1];throw h.d(h.h7("Bad index "+n+" for "+t.k(0)))},ad(e,t,n,r,i){var a,s,o,l,u,c,d,f,p,m;if(t===r)return!0;if(a=!!h.bo(r)||r===v._||r===v.K)return!0;if(4===(s=t.x))return!0;if(h.bo(t))return!1;if(a=1===t.x||t===v.P||t===v.T)return!0;if((o=13===s)&&h.ad(e,n[t.y],n,r,i))return!0;if(l=r.x,6===s)return h.ad(e,t.y,n,r,i);if(6===l)return a=r.y,h.ad(e,t,n,a,i);if(8===s)return!!h.ad(e,t.y,n,r,i)&&h.ad(e,h.oR(e,t),n,r,i);if(7===s)return h.ad(e,t.y,n,r,i);if(8===l)return!!h.ad(e,t,n,r.y,i)||h.ad(e,t,n,h.oR(e,r),i);if(7===l)return h.ad(e,t,n,r.y,i);if(o)return!1;if((!(a=11!==s)||12===s)&&r===v.b8)return!0;if(12===l){if(t===v.g)return!0;if(12!==s)return!1;if(u=t.z,c=r.z,(d=u.length)!==c.length)return!1;for(n=null==n?u:u.concat(n),i=null==i?c:c.concat(i),f=0;f<d;++f)if(p=u[f],m=c[f],!h.ad(e,p,n,m,i)||!h.ad(e,m,i,p,n))return!1;return h.ps(e,t.y,n,r.y,i)}return 11===l?t===v.g||!a&&h.ps(e,t,n,r,i):9===s&&9===l&&h.vZ(e,t,n,r,i)},ps(e,t,n,r,i){var a,s,o,l,u,c,d,f,p,m,g,_,v,b,x,y,w,A,E,S;if(!h.ad(e,t.y,n,r.y,i))return!1;if(a=t.z,s=r.z,o=a.a,l=s.a,(u=o.length)>(c=l.length))return!1;if(d=c-u,f=a.b,p=s.b,u+f.length<c+(m=p.length))return!1;for(g=0;g<u;++g)if(_=o[g],!h.ad(e,l[g],i,_,n))return!1;for(g=0;g<d;++g)if(_=f[g],!h.ad(e,l[u+g],i,_,n))return!1;for(g=0;g<m;++g)if(_=f[d+g],!h.ad(e,p[g],i,_,n))return!1;for(v=a.c,b=s.c,x=v.length,y=b.length,w=0,A=0;A<y;A+=3)for(E=b[A];;){if(w>=x)return!1;if(S=v[w],w+=3,E<S)return!1;if(!(S<E)){if(_=v[w-1],!h.ad(e,b[A+2],i,_,n))return!1;break}}return!0},vZ(e,t,n,r,i){for(var a,s,o,l,u,c,d,f=t.y,p=r.y;f!==p;){if(null==(a=e.tR[f]))return!1;if("string"!=typeof a){if(null==(s=a[p]))return!1;for(l=(o=s.length)>0?new Array(o):g.typeUniverse.sEA,u=0;u<o;++u)l[u]=h.ml(e,t,s[u]);return h.pm(e,l,null,n,r.z,i)}f=a}return c=t.z,d=r.z,h.pm(e,c,null,n,d,i)},pm(e,t,n,r,i,a){var s,o,l,u=t.length;for(s=0;s<u;++s)if(o=t[s],l=i[s],!h.ad(e,o,r,l,a))return!1;return!0},mU(e){var t=e.x;return e===v.P||e===v.T||!!h.bo(e)||7===t||!(6!==t||!h.mU(e.y))||8===t&&h.mU(e.y)},wU:e=>!!h.bo(e)||e===v._||e===v.K,bo(e){var t=e.x;return 2===t||3===t||4===t||5===t||e===v.cK},pl(e,t){var n,r,i=Object.keys(t),a=i.length;for(n=0;n<a;++n)e[r=i[n]]=t[r]},mn:e=>e>0?new Array(e):g.typeUniverse.sEA,aQ:function(e,t){var n=this;n.a=e,n.b=t,n.w=n.r=n.c=null,n.x=0,n.at=n.as=n.Q=n.z=n.y=null},fG:function(){this.c=this.b=this.a=null},ed:function(e){this.a=e},fF:function(){},ee:function(e){this.a=e},uZ(){var e,t,n={};return null!=i.scheduleImmediate?h.ws():null!=i.MutationObserver&&null!=i.document?(e=i.document.createElement("div"),t=i.document.createElement("span"),n.a=null,new i.MutationObserver(h.mH(new h.lO(n),1)).observe(e,{childList:!0}),new h.lN(n,e,t)):null!=i.setImmediate?h.wt():h.wu()},v_(e){i.scheduleImmediate(h.mH(new h.lP(e),0))},v0(e){i.setImmediate(h.mH(new h.lQ(e),0))},v1(e){h.vb(0,e)},vb(e,t){var n=new h.mj;return n.dc(e,t),n},eu:e=>new h.fz(new h.B(m.A,e.h("B<0>")),e.h("fz<0>")),eq:(e,t)=>(e.$2(0,null),t.b=!0,t.a),da(e,t){h.vI(e,t)},ep(e,t){t.a2(e)},eo(e,t){t.bH(h.K(e),h.aR(e))},vI(e,t){var n,r,i=new h.mp(t),a=new h.mq(t);e instanceof h.B?e.cs(i,a,v.z):(n=v.z,v.d.b(e)?e.ar(0,i,a,n):((r=new h.B(m.A,v.eI)).a=8,r.c=e,r.cs(i,a,n)))},ew(e){var t,n=(t=e,function(e,n){for(;;)try{t(e,n);break}catch(t){n=t,e=1}});return m.A.bX(new h.mG(n))},m7:e=>new h.d3(e,1),bL:()=>f.ea,bM:e=>new h.d3(e,3),bQ:(e,t)=>new h.ec(e,t.h("ec<0>")),h8(e,t){var n=h.bS(e,"error",v.K);return new h.eD(n,null==t?h.eE(e):t)},eE(e){var t;return v.Q.b(e)&&null!=(t=e.gaZ())?t:f.bj},nr(e,t){for(var n,r;0!=(4&(n=e.a));)e=e.c;0!=(24&n)?(r=t.b7(),t.bv(e),h.d2(t,r)):(r=t.c,t.a=1&t.a|4,t.c=e,e.cn(r))},d2(e,t){var n,r,i,a,s,o,l,u,c,d,f,p,g,_={},b=_.a=e;for(n=v.d;;){if(r={},s=!(a=0==(16&(i=b.a))),null==t)return void(s&&0==(1&i)&&(b=b.c,h.de(b.a,b.b)));for(r.a=t,o=t.a,b=t;null!=o;b=o,o=l)b.a=null,h.d2(_.a,b),r.a=o,l=o.a;if(u=(i=_.a).c,r.b=s,r.c=u,c=!a||0!=(1&(c=b.c))||8==(15&c)){if(d=b.b.b,i=!!s&&!((i=i.b===d)||i))return void h.de(u.a,u.b);if((f=m.A)!==d?m.A=d:f=null,8==(15&(b=b.c))?new h.m5(r,_,s).$0():a?0!=(1&b)&&new h.m4(r,u).$0():0!=(2&b)&&new h.m3(_,r).$0(),null!=f&&(m.A=f),b=r.c,i=!!n.b(b)&&((i=r.a.$ti).h("a5<2>").b(b)||!i.z[1].b(b))){if(p=r.a.b,b instanceof h.B){if(0!=(24&b.a)){g=p.c,p.c=null,t=p.b8(g),p.a=30&b.a|1&p.a,p.c=b.c,_.a=b;continue}h.nr(b,p)}else p.c9(b);return}}g=(p=r.a.b).c,p.c=null,t=p.b8(g),b=r.b,i=r.c,b?(p.a=1&p.a|16,p.c=i):(p.a=8,p.c=i),_.a=p,b=p}},wc(e,t){if(v.C.b(e))return t.bX(e);if(v.v.b(e))return e;throw h.d(h.h5(e,"onError",_.c))},w8(){var e,t;for(e=m.dd;null!=e;e=m.dd)m.et=null,t=e.b,m.dd=t,null==t&&(m.es=null),e.a.$0()},wf(){m.nB=!0;try{h.w8()}finally{m.et=null,m.nB=!1,null!=m.dd&&m.o9().$1(h.pC())}},pz(e){var t=new h.fA(e),n=m.es;null==n?(m.dd=m.es=t,m.nB||m.o9().$1(h.pC())):m.es=n.b=t},we(e){var t,n,r,i=m.dd;if(null==i)return h.pz(e),void(m.et=m.es);t=new h.fA(e),null==(n=m.et)?(t.b=i,m.dd=m.et=t):(r=n.b,t.b=r,m.et=n.b=t,null==r&&(m.es=t))},pT(e){var t=null,n=m.A;f.i!==n?h.df(t,t,n,n.cu(e)):h.df(t,t,f.i,e)},np(e,t){var n=null,r=t.h("b_<0>"),i=new h.b_(n,n,n,n,r);return i.aH(e),i.aI(),new h.ah(i,r.h("ah<1>"))},uS(e,t){var n=null,r=t.h("d8<0>"),i=new h.d8(n,n,n,n,r);return e.ar(0,new h.lf(i,t),new h.lg(i),v.P),new h.ah(i,r.h("ah<1>"))},A7:e=>(h.bS(e,"stream",v.K),new h.fN),oU:(e,t,n,r)=>new h.b_(null,t,n,e,r.h("b_<0>")),nD(e){var t,n,r;if(null!=e)try{e.$0()}catch(r){t=h.K(r),n=h.aR(r),h.de(t,n)}},v5(e,t){if(null==t&&(t=h.wv()),v.k.b(t))return e.bX(t);if(v.d5.b(t))return t;throw h.d(h.R("handleError callback must take either an Object (the error), or both an Object (the error) and a StackTrace.",null))},w9(e,t){h.de(e,t)},de(e,t){h.we(new h.mD(e,t))},pv(e,t,n,r){var i,a=m.A;if(a===n)return r.$0();m.A=n,i=a;try{return a=r.$0()}finally{m.A=i}},px(e,t,n,r,i){var a,s=m.A;if(s===n)return r.$1(i);m.A=n,a=s;try{return s=r.$1(i)}finally{m.A=a}},pw(e,t,n,r,i,a){var s,o=m.A;if(o===n)return r.$2(i,a);m.A=n,s=o;try{return o=r.$2(i,a)}finally{m.A=s}},df(e,t,n,r){f.i!==n&&(r=n.cu(r)),h.pz(r)},lO:function(e){this.a=e},lN:function(e,t,n){this.a=e,this.b=t,this.c=n},lP:function(e){this.a=e},lQ:function(e){this.a=e},mj:function(){},mk:function(e,t){this.a=e,this.b=t},fz:function(e,t){this.a=e,this.b=!1,this.$ti=t},mp:function(e){this.a=e},mq:function(e){this.a=e},mG:function(e){this.a=e},d3:function(e,t){this.a=e,this.b=t},aG:function(e,t){var n=this;n.a=e,n.d=n.c=n.b=null,n.$ti=t},ec:function(e,t){this.a=e,this.$ti=t},eD:function(e,t){this.a=e,this.b=t},fC:function(){},ay:function(e,t){this.a=e,this.$ti=t},bK:function(e,t,n,r,i){var a=this;a.a=null,a.b=e,a.c=t,a.d=n,a.e=r,a.$ti=i},B:function(e,t){var n=this;n.a=0,n.b=e,n.c=null,n.$ti=t},lW:function(e,t){this.a=e,this.b=t},m2:function(e,t){this.a=e,this.b=t},lZ:function(e){this.a=e},m_:function(e){this.a=e},m0:function(e,t,n){this.a=e,this.b=t,this.c=n},lY:function(e,t){this.a=e,this.b=t},m1:function(e,t){this.a=e,this.b=t},lX:function(e,t,n){this.a=e,this.b=t,this.c=n},m5:function(e,t,n){this.a=e,this.b=t,this.c=n},m6:function(e){this.a=e},m4:function(e,t){this.a=e,this.b=t},m3:function(e,t){this.a=e,this.b=t},fA:function(e){this.a=e,this.b=null},bg:function(){},lf:function(e,t){this.a=e,this.b=t},lg:function(e){this.a=e},lh:function(e,t){this.a=e,this.b=t},li:function(e,t){this.a=e,this.b=t},fo:function(){},d7:function(){},mi:function(e){this.a=e},mh:function(e){this.a=e},fP:function(){},fB:function(){},b_:function(e,t,n,r,i){var a=this;a.a=null,a.b=0,a.c=null,a.d=e,a.e=t,a.f=n,a.r=r,a.$ti=i},d8:function(e,t,n,r,i){var a=this;a.a=null,a.b=0,a.c=null,a.d=e,a.e=t,a.f=n,a.r=r,a.$ti=i},ah:function(e,t){this.a=e,this.$ti=t},dT:function(e,t,n,r,i,a){var s=this;s.w=e,s.a=t,s.b=n,s.c=r,s.d=i,s.e=a,s.r=s.f=null},dP:function(){},lT:function(e,t,n){this.a=e,this.b=t,this.c=n},lS:function(e){this.a=e},e9:function(){},fE:function(){},cD:function(e){this.b=e,this.a=null},dU:function(e,t){this.b=e,this.c=t,this.a=null},lU:function(){},fK:function(){},md:function(e,t){this.a=e,this.b=t},ea:function(){this.c=this.b=null,this.a=0},fN:function(){},mo:function(){},mD:function(e,t){this.a=e,this.b=t},mf:function(){},mg:function(e,t){this.a=e,this.b=t},p6(e,t){var n=e[t];return n===e?null:n},ns(e,t,n){e[t]=null==n?e:n},p7(){var e=Object.create(null);return h.ns(e,"<non-identifier-key>",e),delete e["<non-identifier-key>"],e},ur:(e,t,n,r)=>h.v6(h.wC(),e,t,n,r),nm:(e,t,n)=>h.pF(e,new h.aE(t.h("@<0>").I(n).h("aE<1,2>"))),a8:(e,t)=>new h.aE(e.h("@<0>").I(t).h("aE<1,2>")),v6(e,t,n,r,i){var a=null!=n?n:new h.ma(r);return new h.e1(e,t,a,r.h("@<0>").I(i).h("e1<1,2>"))},ox:e=>new h.b0(e.h("b0<0>")),aN:e=>new h.b0(e.h("b0<0>")),aO:(e,t)=>h.wI(e,new h.b0(t.h("b0<0>"))),nt(){var e=Object.create(null);return e["<non-identifier-key>"]=e,delete e["<non-identifier-key>"],e},vN:(e,t)=>d.aj(e,t),u4(e,t,n){var r,i;if(h.nC(e))return"("===t&&")"===n?"(...)":t+"..."+n;r=h.a([],v.s),m.cE.push(e);try{h.w5(e,r)}finally{m.cE.pop()}return(i=h.nq(t,r,", ")+n).charCodeAt(0),i},iH(e,t,n){var r,i;if(h.nC(e))return t+"..."+n;r=new h.ab(t),m.cE.push(e);try{(i=r).a=h.nq(i.a,e,", ")}finally{m.cE.pop()}return r.a+=n,(i=r.a).charCodeAt(0),i},nC(e){var t,n;for(t=m.cE.length,n=0;n<t;++n)if(e===m.cE[n])return!0;return!1},w5(e,t){for(var n,r,i,a,s,o,l,u=e.gD(e),c=0,d=0;c<80||d<3;){if(!u.p())return;n=h.b(u.gt()),t.push(n),c+=n.length+2,++d}if(u.p())if(a=u.gt(),++d,u.p()){for(s=u.gt(),++d;u.p();a=s,s=o)if(o=u.gt(),++d>100){for(;c>75&&d>3;)c-=t.pop().length+2,--d;return void t.push("...")}i=h.b(a),c+=(r=h.b(s)).length+i.length+4}else{if(d<=4)return void t.push(h.b(a));r=h.b(a),i=t.pop(),c+=r.length+2}else{if(d<=5)return;r=t.pop(),i=t.pop()}for(d>t.length+2?(c+=5,l="..."):l=null;c>80&&t.length>3;)c-=t.pop().length+2,null==l&&(c+=5,l="...");null!=l&&t.push(l),t.push(i),t.push(r)},us(e,t){var n,r,i=h.ox(t);for(n=e.length,r=0;r<e.length;e.length===n||(0,h.cI)(e),++r)i.C(0,t.a(e[r]));return i},nn(e){var t,n={};if(h.nC(e))return"{...}";t=new h.ab("");try{m.cE.push(e),t.a+="{",n.a=!0,e.L(0,new h.jK(n,t)),t.a+="}"}finally{m.cE.pop()}return(n=t.a).charCodeAt(0),n},vo(){throw h.d(h.ac("Cannot change an unmodifiable set"))},dY:function(){},e0:function(e){var t=this;t.a=0,t.e=t.d=t.c=t.b=null,t.$ti=e},dZ:function(e,t){this.a=e,this.$ti=t},e_:function(e,t,n){var r=this;r.a=e,r.b=t,r.c=0,r.d=null,r.$ti=n},e1:function(e,t,n,r){var i=this;i.w=e,i.x=t,i.y=n,i.a=0,i.f=i.e=i.d=i.c=i.b=null,i.r=0,i.$ti=r},ma:function(e){this.a=e},b0:function(e){var t=this;t.a=0,t.f=t.e=t.d=t.c=t.b=null,t.r=0,t.$ti=e},mb:function(e){this.a=e,this.c=this.b=null},e2:function(e,t,n){var r=this;r.a=e,r.b=t,r.d=r.c=null,r.$ti=n},aY:function(e,t){this.a=e,this.$ti=t},du:function(){},dy:function(){},n:function(){},dz:function(){},jK:function(e,t){this.a=e,this.b=t},I:function(){},jL:function(e){this.a=e},fS:function(){},dA:function(){},bk:function(e,t){this.a=e,this.$ti=t},cY:function(){},d5:function(){},fT:function(){},ei:function(e,t){this.a=e,this.$ti=t},e3:function(){},eh:function(){},em:function(){},en:function(){},pu(e,t){var n,r,i,a=null;try{a=JSON.parse(e)}catch(r){throw n=h.K(r),i=h.P(String(n),null,null),h.d(i)}return h.ms(a)},ms(e){var t;if(null==e)return null;if("object"!=typeof e)return e;if(Object.getPrototypeOf(e)!==Array.prototype)return new h.fI(e,Object.create(null));for(t=0;t<e.length;++t)e[t]=h.ms(e[t]);return e},uX(e,t,n,r){var i,a;return t instanceof Uint8Array?(r=(i=t).length)-n<15||null!=(a=h.uY(e,i,n,r))&&e&&a.indexOf("�")>=0?null:a:null},uY(e,t,n,r){var i=e?m.t8():m.t7();return null==i?null:0===n&&r===t.length?h.p0(i,t):h.p0(i,t.subarray(n,h.aP(n,r,t.length)))},p0(e,t){try{return e.decode(t)}catch(e){}return null},oj(e,t,n,r,i,a){if(0!==f.c.bo(a,4))throw h.d(h.P("Invalid base64 padding, padded length must be multiple of four, is "+a,e,n));if(r+i!==a)throw h.d(h.P("Invalid base64 padding, '=' not at the end",e,t));if(i>2)throw h.d(h.P("Invalid base64 padding, more than two '=' characters",e,t))},v4(e,t,n,r,i,a){var s,o,l,u,c,d,p="Invalid encoding before padding",g="Invalid character",_=f.c.ag(a,2),v=3&a,b=m.oa();for(s=t,o=0;s<n;++s){if(o|=l=f.a.B(e,s),!((u=b[127&l])>=0)){if(-1===u&&v>1){if(o>127)break;if(3===v){if(0!=(3&_))throw h.d(h.P(p,e,s));r[i]=_>>>10,r[i+1]=_>>>2}else{if(0!=(15&_))throw h.d(h.P(p,e,s));r[i]=_>>>4}return d=3*(3-v),37===l&&(d+=2),h.p4(e,s+1,n,-d-1)}throw h.d(h.P(g,e,s))}_=16777215&(_<<6|u),0==(v=v+1&3)&&(c=i+1,r[i]=_>>>16&255,i=c+1,r[c]=_>>>8&255,c=i+1,r[i]=255&_,i=c,_=0)}if(o>=0&&o<=127)return(_<<2|v)>>>0;for(s=t;s<n&&!((l=f.a.B(e,s))>127);++s);throw h.d(h.P(g,e,s))},v2(e,t,n,r){var i=h.v3(e,t,n),a=i-t+(3&r),s=3*f.c.ag(a,2),o=3&a;return 0!==o&&i<n&&(s+=o-1),s>0?new Uint8Array(s):m.t9()},v3(e,t,n){for(var r,i=n,a=i,s=0;a>t&&s<2;)if(--a,61!==(r=f.a.B(e,a))){if(100==(32|r)){if(a===t)break;--a,r=f.a.B(e,a)}if(51===r){if(a===t)break;--a,r=f.a.B(e,a)}if(37!==r)break;++s,i=a}else++s,i=a;return i},p4(e,t,n,r){var i,a;if(t===n)return r;for(i=-r-1;i>0;){if(a=f.a.B(e,t),3===i){if(61===a){i-=3,++t;break}if(37!==a)break;if(--i,++t===n)break;a=f.a.B(e,t)}if(2===(i>3?i-3:i)){if(51!==a)break;if(--i,++t===n)break;a=f.a.B(e,t)}if(100!=(32|a))break;if(--i,++t===n)break}if(t!==n)throw h.d(h.P("Invalid padding character",e,t));return-i-1},pk(e){switch(e){case 65:return"Missing extension byte";case 67:return"Unexpected extension byte";case 69:return"Invalid UTF-8 byte";case 71:return"Overlong encoding";case 73:return"Out of unicode range";case 75:return"Encoded surrogate";case 77:return"Unfinished UTF-8 octet sequence";default:return""}},vF(e,t,n){var r,i,a,s=n-t,o=new Uint8Array(s);for(r=d.T(e),i=0;i<s;++i)a=r.j(e,t+i),o[i]=(4294967040&a)>>>0!=0?255:a;return o},fI:function(e,t){this.a=e,this.b=t,this.c=null},fJ:function(e){this.a=e},m9:function(e,t,n){this.b=e,this.c=t,this.a=n},lv:function(){},lu:function(){},h9:function(){},hb:function(){},ha:function(){},lR:function(){this.a=0},hc:function(){},eF:function(){},fL:function(e,t,n){this.a=e,this.b=t,this.$ti=n},eJ:function(){},eL:function(){},hV:function(){},iP:function(){},iQ:function(e){this.a=e},lj:function(){},lk:function(){},eb:function(){},mm:function(e,t,n){this.a=e,this.b=t,this.c=n},ls:function(){},lt:function(e){this.a=e},fU:function(e){this.a=e,this.b=16,this.c=0},cH(e,t){var n=h.oP(e,t);if(null!=n)return n;throw h.d(h.P(e,null,null))},tT:e=>e instanceof h.c6?e.k(0):"Instance of '"+h.b(h.k5(e))+"'",tU(e,t){throw(e=h.d(e)).stack=d.aq(t),e},S(e,t,n,r){var i,a=d.b8(e,r);if(0!==e&&null!=t)for(i=0;i<e;++i)a[i]=t;return a},ut(e,t){var n,r=h.a([],t.h("D<0>"));for(n=e.gD(e);n.p();)r.push(n.gt());return r},ct:(e,t,n)=>t?h.oy(e,n):d.nj(h.oy(e,n)),oy(e,t){var n,r;if(Array.isArray(e))return h.a(e.slice(0),t.h("D<0>"));for(n=h.a([],t.h("D<0>")),r=d.aC(e);r.p();)n.push(r.gt());return n},oz(e,t,n,r){var i,a=d.b8(e,r);for(i=0;i<e;++i)a[i]=t.$1(i);return a},oV:(e,t,n)=>v.bm.b(e)?h.uL(e,t,h.aP(t,n,e.length)):h.uT(e,t,n),uT(e,t,n){var r,i,a,s,o=null;if(t<0)throw h.d(h.X(t,0,e.length,o,o));if(!(r=null==n)&&n<t)throw h.d(h.X(n,t,e.length,o,o));for(i=new h.a9(e,e.length,h.ai(e).h("a9<n.E>")),a=0;a<t;++a)if(!i.p())throw h.d(h.X(t,0,a,o,o));if(s=[],r)for(;i.p();)s.push(i.d);else for(a=t;a<n;++a){if(!i.p())throw h.d(h.X(n,t,a,o,o));s.push(i.d)}return h.uJ(s)},oQ:e=>new h.iJ(e,h.u7(e,!1,!0,!1,!1,!1)),nq(e,t,n){var r=d.aC(t);if(!r.p())return e;if(0===n.length)do{e+=h.b(r.gt())}while(r.p());else for(e+=h.b(r.gt());r.p();)e=e+n+h.b(r.gt());return e},oG:(e,t,n,r)=>new h.fb(e,t,n,r),op(e){var t=Math.abs(e),n=e<0?"-":"";return t>=1e3?""+e:t>=100?n+"0"+t:t>=10?n+"00"+t:n+"000"+t},tS(e){var t=Math.abs(e),n=e<0?"-":"+";return t>=1e5?n+t:n+"0"+t},oq:e=>e>=100?""+e:e>=10?"0"+e:"00"+e,b6:e=>e>=10?""+e:"0"+e,cO:e=>"number"==typeof e||h.er(e)||null==e?d.aq(e):"string"==typeof e?JSON.stringify(e):h.tT(e),tV(e,t){h.bS(e,"error",v.K),h.bS(t,"stackTrace",v.gm),h.tU(e,t),h.aW(_.g)},h7:e=>new h.eC(e),R:(e,t)=>new h.ar(!1,null,t,e),h5:(e,t,n)=>new h.ar(!0,e,t,n),h6:(e,t)=>e,X:(e,t,n,r,i)=>new h.dI(t,n,!0,e,r,"Invalid value"),aP(e,t,n){if(0>e||e>n)throw h.d(h.X(e,0,n,"start",null));if(null!=t){if(e>t||t>n)throw h.d(h.X(t,e,n,"end",null));return t}return n},aV(e,t){if(e<0)throw h.d(h.X(e,0,null,t,null));return e},eS(e,t,n,r,i){var a=null==i?d.a3(t):i;return new h.eR(a,!0,e,n,"Index out of range")},ac:e=>new h.fv(e),oX:e=>new h.fq(e),cZ:e=>new h.bG(e),af:e=>new h.eK(e),tW:e=>new h.dW(e),P:(e,t,n)=>new h.aI(e,t,n),ot:(e,t,n)=>e<=0?new h.b7(n.h("b7<0>")):new h.dX(e,t,n.h("dX<0>")),oA:(e,t,n,r,i)=>new h.c5(e,t.h("@<0>").I(n).I(r).I(i).h("c5<1,2,3,4>")),k1(e){var t,n,r=m.ta();for(t=e.length,n=0;n<t;++n)r=(r=r+d.bW(e[n])&536870911)+((524287&r)<<10)&536870911,r^=r>>>6;return r=r+((67108863&r)<<3)&536870911,(r^=r>>>11)+((16383&r)<<15)&536870911},oZ(e){var t,n,r,i,a,s,o,l,u,c,d,p,m,g,b,x,y,w,A,E,S,T,M=null,P=e.length;if(P>=5){if(0===(t=h.pA(e,0)))return(n=h.lo(P<P?f.a.u(e,0,P):e,5,M)).gbl(n);if(32===t)return(n=h.lo(f.a.u(e,5,P),0,M)).gbl(n)}return(r=h.S(8,0,!1,v.S))[0]=0,r[1]=-1,r[2]=-1,r[7]=-1,r[3]=0,r[4]=0,r[5]=P,r[6]=P,h.py(e,0,P,0,r)>=14&&(r[7]=P),(i=r[1])>=0&&20===h.py(e,0,i,20,r)&&(r[7]=i),a=r[2]+1,s=r[3],o=r[4],l=r[5],(u=r[6])<l&&(l=u),o<a?o=l:o<=i&&(o=i+1),s<a&&(s=o),(c=r[7]<0)?a>i+3||(n=s>0)&&s+1===o||l<P&&l===o+2&&f.a.X(e,"..",o)||l>o+2&&f.a.X(e,"/..",l-3)?(d=M,c=!1):(4===i?f.a.X(e,"file",0)?(a<=0?(f.a.X(e,"/",o)?(p="file://",m=2):(p="file:///",m=3),i-=0,l+=n=m-0,u+=n,P=(e=p+f.a.u(e,o,P)).length,a=7,s=7,o=7):o===l&&(++u,g=l+1,e=f.a.aF(e,o,l,"/"),++P,l=g),d="file"):f.a.X(e,"http",0)?(n&&s+3===o&&f.a.X(e,"80",s+1)&&(u-=3,b=o-3,l-=3,e=f.a.aF(e,s,o,""),P-=3,o=b),d="http"):d=M:5===i&&f.a.X(e,"https",0)?(n&&s+4===o&&f.a.X(e,"443",s+1)&&(u-=4,b=o-4,l-=4,e=f.a.aF(e,s,o,""),P-=3,o=b),d="https"):d=M,c=!0):d=M,c?(P<e.length&&(e=f.a.u(e,0,P),i-=0,a-=0,s-=0,o-=0,l-=0,u-=0),new h.fM(e,i,a,s,o,l,u,d)):(null==d&&(i>0?d=h.vy(e,0,i):(0===i&&(h.d9(e,0,"Invalid empty scheme"),h.aW(_.g)),d="")),a>0?(y=(x=i+3)<a?h.vz(e,x,a-1):"",w=h.vu(e,a,s,!1),(n=s+1)<o?(A=h.oP(f.a.u(e,n,o),M),E=h.vw(null==A?h.a0(h.P("Invalid port",e,n)):A,d)):E=M):(w=E=M,y=""),S=h.vv(e,o,l,M,d,null!=w),T=l<u?h.vx(e,l+1,u,M):M,h.vp(d,y,w,E,S,T,u<P?h.vt(e,u+1,P):M))},uW(e,t,n){var r,i,a,s,o,l,u="IPv4 address should contain exactly 4 parts",c="each part must be in the range 0..255",d=new h.lp(e),p=new Uint8Array(4);for(i=r=t,a=0;r<n;++r)46!==(s=f.a.B(e,r))?(48^s)>9&&d.$2("invalid character",r):(3===a&&d.$2(u,r),(o=h.cH(f.a.u(e,i,r),null))>255&&d.$2(c,i),l=a+1,p[a]=o,i=r+1,a=l);return 3!==a&&d.$2(u,n),(o=h.cH(f.a.u(e,i,n),null))>255&&d.$2(c,i),p[a]=o,p},p_(e,t,n){var r,i,a,s,o,l,u,c,d,p,m,g,_,b,x=null,y=new h.lq(e),w=new h.lr(y,e);for(e.length<2&&y.$2("address is too short",x),r=h.a([],v.Z),a=i=t,s=!1,o=!1;i<n;++i)58===(l=f.a.B(e,i))?(i===t&&(++i,58!==f.a.B(e,i)&&y.$2("invalid start colon.",i),a=i),i===a?(s&&y.$2("only one wildcard `::` is allowed",i),r.push(-1),s=!0):r.push(w.$2(a,i)),a=i+1):46===l&&(o=!0);for(0===r.length&&y.$2("too few parts",x),u=a===n,c=f.d.gaS(r),u&&-1!==c&&y.$2("expected a part after last `:`",n),u||(o?(d=h.uW(e,a,n),r.push((d[0]<<8|d[1])>>>0),r.push((d[2]<<8|d[3])>>>0)):r.push(w.$2(a,n))),s?r.length>7&&y.$2("an address with a wildcard must have less than 7 parts",x):8!==r.length&&y.$2("an address without a wildcard must contain exactly 8 parts",x),p=new Uint8Array(16),m=9-(c=r.length),i=0,g=0;i<c;++i)if(-1===(_=r[i]))for(b=0;b<m;++b)p[g]=0,p[g+1]=0,g+=2;else p[g]=f.c.ag(_,8),p[g+1]=255&_,g+=2;return p},vp:(e,t,n,r,i,a,s)=>new h.ej(e,t,n,r,i,a,s),pe:e=>"http"===e?80:"https"===e?443:0,d9(e,t,n){throw h.d(h.P(n,e,t))},vw:(e,t)=>e===h.pe(t)?null:e,vu(e,t,n,r){var i,a,s,o,l,u;if(t===n)return"";if(91===f.a.B(e,t))return i=n-1,93!==f.a.B(e,i)&&(h.d9(e,t,"Missing end `]` to match `[` in host"),h.aW(_.g)),a=t+1,(s=h.vr(e,a,i))<i?(o=s+1,l=h.pj(e,f.a.X(e,"25",o)?s+3:o,i,"%25")):l="",h.p_(e,a,s),f.a.u(e,t,s).toLowerCase()+l+"]";for(u=t;u<n;++u)if(58===f.a.B(e,u))return(s=(s=f.a.bd(e,"%",t))>=t&&s<n?s:n)<n?(o=s+1,l=h.pj(e,f.a.X(e,"25",o)?s+3:o,n,"%25")):l="",h.p_(e,t,s),"["+f.a.u(e,t,s)+l+"]";return h.vB(e,t,n)},vr(e,t,n){var r=f.a.bd(e,"%",t);return r>=t&&r<n?r:n},pj(e,t,n,r){var i,a,s,o,l,u,c,d,p,m,g=""!==r?new h.ab(r):null;for(a=i=t,s=!0;i<n;)if(37===(o=f.a.B(e,i))){if((u=null==(l=h.nz(e,i,!0)))&&s){i+=3;continue}null==g&&(g=new h.ab("")),c=g.a+=f.a.u(e,a,i),u?l=f.a.u(e,i,i+3):"%"===l&&(h.d9(e,i,"ZoneID should not contain % anymore"),h.aW(_.g)),g.a=c+l,a=i+=3,s=!0}else o<127&&0!=(f.au[o>>>4]&1<<(15&o))?(s&&65<=o&&90>=o&&(null==g&&(g=new h.ab("")),a<i&&(g.a+=f.a.u(e,a,i),a=i),s=!1),++i):(55296==(64512&o)&&i+1<n&&56320==(64512&(d=f.a.B(e,i+1)))?(o=(1023&o)<<10|1023&d|65536,p=2):p=1,m=f.a.u(e,a,i),(u=null==g?g=new h.ab(""):g).a+=m,u.a+=h.ny(o),a=i+=p);return null==g?f.a.u(e,t,n):(a<n&&(g.a+=f.a.u(e,a,n)),(u=g.a).charCodeAt(0),u)},vB(e,t,n){var r,i,a,s,o,l,u,c,d,p,m;for(i=r=t,a=null,s=!0;r<n;)if(37===(o=f.a.B(e,r))){if((u=null==(l=h.nz(e,r,!0)))&&s){r+=3;continue}null==a&&(a=new h.ab("")),c=f.a.u(e,i,r),d=a.a+=s?c:c.toLowerCase(),u?(l=f.a.u(e,r,r+3),p=3):"%"===l?(l="%25",p=1):p=3,a.a=d+l,i=r+=p,s=!0}else o<127&&0!=(f.d_[o>>>4]&1<<(15&o))?(s&&65<=o&&90>=o&&(null==a&&(a=new h.ab("")),i<r&&(a.a+=f.a.u(e,i,r),i=r),s=!1),++r):o<=93&&0!=(f.am[o>>>4]&1<<(15&o))?(h.d9(e,r,"Invalid character"),h.aW(_.g)):(55296==(64512&o)&&r+1<n&&56320==(64512&(m=f.a.B(e,r+1)))?(o=(1023&o)<<10|1023&m|65536,p=2):p=1,c=f.a.u(e,i,r),s||(c=c.toLowerCase()),(u=null==a?a=new h.ab(""):a).a+=c,u.a+=h.ny(o),i=r+=p);return null==a?f.a.u(e,t,n):(i<n&&(c=f.a.u(e,i,n),a.a+=s?c:c.toLowerCase()),(u=a.a).charCodeAt(0),u)},vy(e,t,n){var r,i,a,s=_.g;if(t===n)return"";for(h.pg(f.a.J(e,t))||(h.d9(e,t,"Scheme not starting with alphabetic character"),h.aW(s)),r=t,i=!1;r<n;++r)(a=f.a.J(e,r))<128&&0!=(f.ar[a>>>4]&1<<(15&a))||(h.d9(e,r,"Illegal scheme character"),h.aW(s)),65<=a&&a<=90&&(i=!0);return e=f.a.u(e,t,n),h.vq(i?e.toLowerCase():e)},vq:e=>"http"===e?"http":"file"===e?"file":"https"===e?"https":"package"===e?"package":e,vz:(e,t,n)=>h.ek(e,t,n,f.cF,!1),vv(e,t,n,r,i,a){var s="file"===i,o=s||a,l=h.ek(e,t,n,f.aw,!0);if(0===l.length){if(s)return"/"}else o&&!f.a.W(l,"/")&&(l="/"+l);return h.vA(l,i,a)},vA(e,t,n){var r=0===t.length;return!r||n||f.a.W(e,"/")?h.vD(e):h.vC(e,!r||n)},vx:(e,t,n,r)=>h.ek(e,t,n,f.D,!0),vt:(e,t,n)=>h.ek(e,t,n,f.D,!0),nz(e,t,n){var r,i,a,s,o,l=t+2;return l>=e.length?"%":(r=f.a.B(e,t+1),i=f.a.B(e,l),a=h.mP(r),s=h.mP(i),a<0||s<0?"%":(o=16*a+s)<127&&0!=(f.au[f.c.ag(o,4)]&1<<(15&o))?h.bd(n&&65<=o&&90>=o?(32|o)>>>0:o):r>=97||i>=97?f.a.u(e,t,t+3).toUpperCase():null)},ny(e){var t,n,r,i,a,s="0123456789ABCDEF";if(e<128)(t=new Uint8Array(3))[0]=37,t[1]=f.a.J(s,e>>>4),t[2]=f.a.J(s,15&e);else for(e>2047?e>65535?(n=240,r=4):(n=224,r=3):(n=192,r=2),t=new Uint8Array(3*r),i=0;--r>=0;n=128)a=63&f.c.dP(e,6*r)|n,t[i]=37,t[i+1]=f.a.J(s,a>>>4),t[i+2]=f.a.J(s,15&a),i+=3;return h.oV(t,0,null)},ek(e,t,n,r,i){var a=h.pi(e,t,n,r,i);return null==a?f.a.u(e,t,n):a},pi(e,t,n,r,i){var a,s,o,l,u,c,d,p,m,g,v=null;for(a=!i,o=s=t,l=v;s<n;)if((u=f.a.B(e,s))<127&&0!=(r[u>>>4]&1<<(15&u)))++s;else{if(37===u){if(null==(c=h.nz(e,s,!1))){s+=3;continue}"%"===c?(c="%25",d=1):d=3}else a&&u<=93&&0!=(f.am[u>>>4]&1<<(15&u))?(h.d9(e,s,"Invalid character"),h.aW(_.g),c=d=v):(55296==(64512&u)&&(p=s+1)<n&&56320==(64512&(m=f.a.B(e,p)))?(u=(1023&u)<<10|1023&m|65536,d=2):d=1,c=h.ny(u));g=(p=null==l?l=new h.ab(""):l).a+=f.a.u(e,o,s),p.a=g+h.b(c),o=s+=d}return null==l?v:(o<n&&(l.a+=f.a.u(e,o,n)),(a=l.a).charCodeAt(0),a)},ph:e=>!!f.a.W(e,".")||-1!==f.a.bN(e,"/."),vD(e){var t,n,r,i,a,s;if(!h.ph(e))return e;for(t=h.a([],v.s),r=(n=e.split("/")).length,i=!1,a=0;a<r;++a)s=n[a],d.aj(s,"..")?(0!==t.length&&(t.pop(),0===t.length&&t.push("")),i=!0):"."===s?i=!0:(t.push(s),i=!1);return i&&t.push(""),f.d.cM(t,"/")},vC(e,t){var n,r,i,a,s,o;if(!h.ph(e))return t?e:h.pf(e);for(n=h.a([],v.s),i=(r=e.split("/")).length,a=!1,s=0;s<i;++s)".."===(o=r[s])?0!==n.length&&".."!==f.d.gaS(n)?(n.pop(),a=!0):(n.push(".."),a=!1):"."===o?a=!0:(n.push(o),a=!1);return(r=0===(r=n.length)||1===r&&0===n[0].length)?"./":((a||".."===f.d.gaS(n))&&n.push(""),t||(n[0]=h.pf(n[0])),f.d.cM(n,"/"))},pf(e){var t,n,r=e.length;if(r>=2&&h.pg(f.a.J(e,0)))for(t=1;t<r;++t){if(58===(n=f.a.J(e,t)))return f.a.u(e,0,t)+"%3A"+f.a.br(e,t+1);if(n>127||0==(f.ar[n>>>4]&1<<(15&n)))break}return e},vs(e,t){var n,r,i;for(n=0,r=0;r<2;++r)if(48<=(i=f.a.B(e,t+r))&&i<=57)n=16*n+i-48;else{if(!(97<=(i|=32)&&i<=102))throw h.d(h.R("Invalid URL encoding",null));n=16*n+i-87}return n},vE(e,t,n,r,i){for(var a,s,o,l,u=t;;){if(!(u<n)){a=!0;break}if(o=!((s=f.a.B(e,u))<=127)||37===s){a=!1;break}++u}if(a){if(o=f.ab===r)return f.a.u(e,t,n);l=new h.cL(f.a.u(e,t,n))}else for(l=h.a([],v.Z),o=e.length,u=t;u<n;++u){if((s=f.a.B(e,u))>127)throw h.d(h.R("Illegal percent encoding in URI",null));if(37===s){if(u+3>o)throw h.d(h.R("Truncated URI",null));l.push(h.vs(e,u+1)),u+=2}else l.push(s)}return f.e8.dW(l)},pg(e){var t=32|e;return 97<=t&&t<=122},oY(e){var t;if(e.length>=5){if(0===(t=h.pA(e,0)))return h.lo(e,5,null);if(32===t)return h.lo(f.a.br(e,5),0,null)}throw h.d(h.P("Does not start with 'data:'",e,0))},lo(e,t,n){var r,i,a,s,o,l,u,c,d="Invalid MIME type",p=h.a([t-1],v.Z);for(r=e.length,i=t,a=-1,s=null;i<r&&44!==(s=f.a.J(e,i))&&59!==s;++i)if(47===s){if(a<0){a=i;continue}throw h.d(h.P(d,e,i))}if(a<0&&i>t)throw h.d(h.P(d,e,i));for(;44!==s;){for(p.push(i),++i,o=-1;i<r;++i)if(61===(s=f.a.J(e,i)))o<0&&(o=i);else if(59===s||44===s)break;if(!(o>=0)){if(l=f.d.gaS(p),44!==s||i!==l+7||!f.a.X(e,"base64",l+1))throw h.d(h.P("Expecting '='",e,i));break}p.push(o)}return p.push(i),u=i+1,1==(1&p.length)?e=f.b6.ea(e,u,r):null!=(c=h.pi(e,u,r,f.D,!0))&&(e=f.a.aF(e,u,r,c)),new h.ln(e,p,n)},vM(){var e,t,n,r,i,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-._~!$&'()*+,;=",s=".",o=":",l="/",u="?",c="#",d=h.a(new Array(22),v.gN);for(e=0;e<22;++e)d[e]=new Uint8Array(96);return t=new h.mt(d),n=new h.mu,r=new h.mv,i=t.$2(0,225),n.$3(i,a,1),n.$3(i,s,14),n.$3(i,o,34),n.$3(i,l,3),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(14,225),n.$3(i,a,1),n.$3(i,s,15),n.$3(i,o,34),n.$3(i,l,234),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(15,225),n.$3(i,a,1),n.$3(i,"%",225),n.$3(i,o,34),n.$3(i,l,9),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(1,225),n.$3(i,a,1),n.$3(i,o,34),n.$3(i,l,10),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(2,235),n.$3(i,a,139),n.$3(i,l,131),n.$3(i,s,146),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(3,235),n.$3(i,a,11),n.$3(i,l,68),n.$3(i,s,18),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(4,229),n.$3(i,a,5),r.$3(i,"AZ",229),n.$3(i,o,102),n.$3(i,"@",68),n.$3(i,"[",232),n.$3(i,l,138),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(5,229),n.$3(i,a,5),r.$3(i,"AZ",229),n.$3(i,o,102),n.$3(i,"@",68),n.$3(i,l,138),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(6,231),r.$3(i,"19",7),n.$3(i,"@",68),n.$3(i,l,138),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(7,231),r.$3(i,"09",7),n.$3(i,"@",68),n.$3(i,l,138),n.$3(i,u,172),n.$3(i,c,205),n.$3(t.$2(8,8),"]",5),i=t.$2(9,235),n.$3(i,a,11),n.$3(i,s,16),n.$3(i,l,234),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(16,235),n.$3(i,a,11),n.$3(i,s,17),n.$3(i,l,234),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(17,235),n.$3(i,a,11),n.$3(i,l,9),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(10,235),n.$3(i,a,11),n.$3(i,s,18),n.$3(i,l,234),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(18,235),n.$3(i,a,11),n.$3(i,s,19),n.$3(i,l,234),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(19,235),n.$3(i,a,11),n.$3(i,l,234),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(11,235),n.$3(i,a,11),n.$3(i,l,10),n.$3(i,u,172),n.$3(i,c,205),i=t.$2(12,236),n.$3(i,a,12),n.$3(i,u,12),n.$3(i,c,205),i=t.$2(13,237),n.$3(i,a,13),n.$3(i,u,13),r.$3(t.$2(20,245),"az",21),i=t.$2(21,245),r.$3(i,"az",21),r.$3(i,"09",21),n.$3(i,"+-.",21),d},py(e,t,n,r,i){var a,s,o,l=m.te();for(a=t;a<n;++a)r=31&(o=l[r][(s=96^f.a.J(e,a))>95?31:s]),i[o>>>5]=a;return r},pA:(e,t)=>(3*(58^f.a.J(e,t+4))|100^f.a.J(e,t)|97^f.a.J(e,t+1)|116^f.a.J(e,t+2)|97^f.a.J(e,t+3))>>>0,jY:function(e,t){this.a=e,this.b=t},dm:function(e,t){this.a=e,this.b=t},lV:function(){},G:function(){},eC:function(e){this.a=e},aX:function(){},fd:function(){},ar:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},dI:function(e,t,n,r,i,a){var s=this;s.e=e,s.f=t,s.a=n,s.b=r,s.c=i,s.d=a},eR:function(e,t,n,r,i){var a=this;a.f=e,a.a=t,a.b=n,a.c=r,a.d=i},fb:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},fv:function(e){this.a=e},fq:function(e){this.a=e},bG:function(e){this.a=e},eK:function(e){this.a=e},ff:function(){},dK:function(){},eM:function(e){this.a=e},dW:function(e){this.a=e},aI:function(e,t,n){this.a=e,this.b=t,this.c=n},j:function(){},dX:function(e,t,n){this.a=e,this.b=t,this.$ti=n},M:function(){},cU:function(e,t,n){this.a=e,this.b=t,this.$ti=n},k:function(){},c:function(){},fO:function(){},ab:function(e){this.a=e},lp:function(e){this.a=e},lq:function(e){this.a=e},lr:function(e,t){this.a=e,this.b=t},ej:function(e,t,n,r,i,a,s){var o=this;o.a=e,o.b=t,o.c=n,o.d=r,o.e=i,o.f=a,o.r=s,o.y=o.w=m},ln:function(e,t,n){this.a=e,this.b=t,this.c=n},mt:function(e){this.a=e},mu:function(){},mv:function(){},fM:function(e,t,n,r,i,a,s,o){var l=this;l.a=e,l.b=t,l.c=n,l.d=r,l.e=i,l.f=a,l.r=s,l.w=o,l.x=null},fD:function(e,t,n,r,i,a,s){var o=this;o.a=e,o.b=t,o.c=n,o.d=r,o.e=i,o.f=a,o.r=s,o.y=o.w=m},nI(e){if(!v.I.b(e)&&!v.j.b(e))throw h.d(h.R("object must be a Map or Iterable",null));return h.vL(e)},vL(e){var t=new h.mr(new h.e0(v.aH)).$1(e);return t.toString,t},mr:function(e){this.a=e},tz(e,t){var n,r,i,a,s,o,l,u,c,p,g,_,b,x="byteOffset",y=null,w="normalized";switch(h.w(e,f.cO,t),-1===(n=h.W(e,"bufferView",t,!1))?((r=e.v(x))&&t.l(m.cJ(),h.a(["bufferView"],v.M),x),i=0):i=h.a_(e,x,t,0,y,-1,0,!1),a=h.a_(e,"componentType",t,-1,f.cl,-1,0,!0),s=h.a_(e,"count",t,-1,y,-1,1,!0),o=h.J(e,"type",t,y,f.m.gM(),y,!0),l=h.pG(e,w,t),null!=o&&-1!==a&&null!=(u=f.m.j(0,o))?5126===a?(r=v.V,c=h.ae(e,"min",t,y,h.a([u],r),1/0,-1/0,!0),p=h.ae(e,"max",t,y,h.a([u],r),1/0,-1/0,!0)):(c=h.pH(e,"min",t,a,u),p=h.pH(e,"max",t,a,u)):p=c=y,g=h.U(e,"sparse",t,h.wn(),!1),(r=!!l&&(5126===a||5125===a))&&t.n(m.rj(),w),"MAT2"!==o&&"MAT3"!==o&&"MAT4"!==o||-1===i||0==(3&i)||t.n(m.ri(),x),a){case 5120:case 5121:case 5122:case 5123:case 5125:(r=v.w).a(p),r.a(c),h.J(e,"name",t,y,y,y,!1),r=h.t(e,f.S,t,y),_=h.x(e,t),b=new h.fy(n,i,a,s,o,l,p,c,g,h.b1(a),r,_,!1),null!=c&&(r=t.R(),_=v.e,t.Z(b,new h.f2(h.S(c.length,0,!1,_),h.S(c.length,0,!1,_),d.h2(c,!1),r))),null!=p&&(r=t.R(),_=v.e,t.Z(b,new h.f0(h.S(p.length,0,!1,_),h.S(p.length,0,!1,_),d.h2(p,!1),r)));break;default:(r=v.fy).a(p),r.a(c),h.J(e,"name",t,y,y,y,!1),r=h.t(e,f.S,t,y),_=h.x(e,t),b=new h.fx(n,i,a,s,o,l,p,c,g,h.b1(a),r,_,!1),t.Z(b,new h.eU(t.R())),null!=c&&(r=t.R(),t.Z(b,new h.f1(h.S(c.length,0,!1,v.e),h.S(c.length,0,!1,v.F),d.h2(c,!1),r))),null!=p&&(r=t.R(),t.Z(b,new h.f_(h.S(p.length,0,!1,v.e),h.S(p.length,0,!1,v.F),d.h2(p,!1),r)))}return b},bs(e,t,n,r,i,a){var s,o,l="byteOffset";if(-1===e)return!1;if(e%t!=0){if(null==a)return!1;a.l(m.rk(),h.a([e,t],v.M),l)}if(-1===(s=r.x))return!1;if((o=s+e)%t!=0){if(null==a)return!1;a.G(m.qE(),h.a([o,t],v.M))}if(e>(s=r.y)){if(null==a)return!1;a.l(m.nU(),h.a([e,n,i,s],v.M),l)}else if(e+n>s){if(null==a)return!1;a.G(m.nU(),h.a([e,n,i,s],v.M))}return!0},nh(e,t,n,r){if(t.byteLength<n+h.b1(e)*r)return null;switch(e){case 5121:return h.no(t,n,r);case 5123:return h.oE(t,n,r);case 5125:return h.oF(t,n,r);default:return null}},oh:(e,t,n,r)=>t.byteLength<n+h.b1(e)*r?null:5126===e?(h.db(t,n,r),new Float32Array(t,n,r)):null,oi(e,t,n,r){var i=t.byteLength;if(i<n+h.b1(e)*r)return null;switch(e){case 5120:return h.db(t,n,r),new Int8Array(t,n,r);case 5121:return h.no(t,n,r);case 5122:return h.db(t,n,r),new Int16Array(t,n,r);case 5123:return h.oE(t,n,r);case 5125:return h.oF(t,n,r);default:return null}},ty(e,t){var n,r,i;return h.w(e,f.cx,t),n=h.a_(e,"count",t,-1,null,-1,1,!0),r=h.U(e,"indices",t,h.wl(),!0),i=h.U(e,"values",t,h.wm(),!0),-1===n||null==r||null==i?null:new h.bX(n,r,i,h.t(e,f.dD,t,null),h.x(e,t),!1)},tw:(e,t)=>(h.w(e,f.cq,t),new h.bY(h.W(e,"bufferView",t,!0),h.a_(e,"byteOffset",t,0,null,-1,0,!1),h.a_(e,"componentType",t,-1,f.c7,-1,0,!0),h.t(e,f.dB,t,null),h.x(e,t),!1)),tx:(e,t)=>(h.w(e,f.ct,t),new h.bZ(h.W(e,"bufferView",t,!0),h.a_(e,"byteOffset",t,0,null,-1,0,!1),h.t(e,f.dC,t,null),h.x(e,t),!1)),a4:function(){},fy:function(e,t,n,r,i,a,s,o,l,u,c,h,d){var f=this;f.w=e,f.x=t,f.y=n,f.z=r,f.Q=i,f.as=a,f.at=s,f.ax=o,f.ay=l,f.ch=u,f.CW=null,f.cx=0,f.fr=f.dy=null,f.a=c,f.b=h,f.a$=d},lJ:function(e,t,n,r,i){var a=this;a.a=e,a.b=t,a.c=n,a.d=r,a.e=i},lK:function(e){this.a=e},lL:function(){},lM:function(e,t,n,r,i){var a=this;a.a=e,a.b=t,a.c=n,a.d=r,a.e=i},lH:function(e){this.a=e},lI:function(e){this.a=e},fx:function(e,t,n,r,i,a,s,o,l,u,c,h,d){var f=this;f.w=e,f.x=t,f.y=n,f.z=r,f.Q=i,f.as=a,f.at=s,f.ax=o,f.ay=l,f.ch=u,f.CW=null,f.cx=0,f.fr=f.dy=null,f.a=c,f.b=h,f.a$=d},lD:function(e,t,n,r,i){var a=this;a.a=e,a.b=t,a.c=n,a.d=r,a.e=i},lE:function(e){this.a=e},lF:function(){},lG:function(e,t,n,r,i){var a=this;a.a=e,a.b=t,a.c=n,a.d=r,a.e=i},bX:function(e,t,n,r,i,a){var s=this;s.d=e,s.e=t,s.f=n,s.a=r,s.b=i,s.a$=a},bY:function(e,t,n,r,i,a){var s=this;s.d=e,s.e=t,s.f=n,s.r=null,s.a=r,s.b=i,s.a$=a},bZ:function(e,t,n,r,i){var a=this;a.d=e,a.e=t,a.f=null,a.a=n,a.b=r,a.a$=i},eU:function(e){this.a=e},f1:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},f_:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},f2:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},f0:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},tB(e,t){var n,r,i,a,s,o,l,u,c,d,p,g,_,b,x,y=null,w="channels",A="extras",E="samplers";if(h.w(e,f.cv,t),null!=(n=h.ey(e,w,t))){for(r=n.gi(n),i=h.S(r,y,!1,v.aA),a=new h.E(i,r,w,v.eq),(r=t.c).push(w),s=v.h,o=0;o<n.gi(n);++o)l=n.j(0,o),r.push(f.c.k(o)),h.w(l,f.d7,t),u=h.W(l,"sampler",t,!0),c=h.U(l,"target",t,h.wp(),!0),d=h.t(l,f.dF,t,y),(g=null!=(p=l.j(0,A))&&!s.b(p))&&t.n(m.di(),A),i[o]=new h.b2(u,c,d,p,!1),r.pop();r.pop()}else a=y;if(null!=(_=h.ey(e,E,t))){for(r=_.gi(_),i=h.S(r,y,!1,v.gW),b=new h.E(i,r,E,v.az),(r=t.c).push(E),s=v.h,o=0;o<_.gi(_);++o)x=_.j(0,o),r.push(f.c.k(o)),h.w(x,f.cL,t),u=h.W(x,"input",t,!0),c=h.J(x,"interpolation",t,"LINEAR",f.ci,y,!1),d=h.W(x,"output",t,!0),g=h.t(x,f.dG,t,y),null!=(p=x.j(0,A))&&!s.b(p)&&t.n(m.di(),A),i[o]=new h.b3(u,c,d,g,p,!1),r.pop();r.pop()}else b=y;return h.J(e,"name",t,y,y,y,!1),new h.bt(a,b,h.t(e,f.aB,t,y),h.x(e,t),!1)},tA:(e,t)=>(h.w(e,f.cT,t),new h.c0(h.W(e,"node",t,!1),h.J(e,"path",t,null,f.R,null,!0),h.t(e,f.dE,t,null),h.x(e,t),!1)),bt:function(e,t,n,r,i){var a=this;a.w=e,a.x=t,a.a=n,a.b=r,a.a$=i},h3:function(e,t){this.a=e,this.b=t},h4:function(e,t,n){this.a=e,this.b=t,this.c=n},b2:function(e,t,n,r,i){var a=this;a.d=e,a.e=t,a.f=null,a.a=n,a.b=r,a.a$=i},c0:function(e,t,n,r,i){var a=this;a.d=e,a.e=t,a.f=null,a.a=n,a.b=r,a.a$=i},b3:function(e,t,n,r,i,a){var s=this;s.d=e,s.e=t,s.f=n,s.w=s.r=null,s.a=r,s.b=i,s.a$=a},eB:function(e){this.a=0,this.b=e},dH:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.e=i.d=0,i.$ti=r},tC(e,t){var n,r,i,a,s=null,o="minVersion";return h.w(e,f.cs,t),h.J(e,"copyright",t,s,s,s,!1),n=h.J(e,"generator",t,s,s,s,!1),r=m.bp(),i=h.J(e,"version",t,s,s,r,!0),r=h.J(e,o,t,s,s,r,!1),a=new h.bu(n,i,r,h.t(e,f.dH,t,s),h.x(e,t),!1),(n=null!=r&&null!=i)&&(n=!(a.gcO()<=a.gbg())||a.gcO()===a.gbg()&&a.ge9()>a.gbR())&&t.l(m.rG(),h.a([r,i],v.M),o),a},bu:function(e,t,n,r,i,a){var s=this;s.e=e,s.f=t,s.r=n,s.a=r,s.b=i,s.a$=a},tG(e,t){var n,r,i,a,s,o,l,u,c=null,d="uri";if(h.w(e,f.d9,t),a=h.a_(e,"byteLength",t,-1,c,-1,1,!0),n=null,s=e.v(d)){if(null!=(r=h.J(e,d,t,c,c,c,!1))){t.dx&&t.n(m.nT(),d),i=null;try{i=h.oY(r)}catch(o){if(!(h.K(o)instanceof h.aI))throw o;n=h.pL(r,t)}if(null!=i)switch(t.dx&&t.n(m.nS(),d),i.gbQ().toLowerCase()){case"application/gltf-buffer":case"application/octet-stream":l=i.cz();break;default:t.l(m.rn(),h.a([i.gbQ()],v.M),d),l=c}else l=c}else l=c;s=!0}else l=c;return u=n,h.J(e,"name",t,c,c,c,!1),new h.aS(u,a,s,l,h.t(e,f.dI,t,c),h.x(e,t),!1)},aS:function(e,t,n,r,i,a,s){var o=this;o.w=e,o.x=t,o.y=n,o.z=r,o.a=i,o.b=a,o.a$=s},tF(e,t){var n,r,i,a,s,o=null,l="byteStride";return h.w(e,f.ch,t),n=h.a_(e,"byteLength",t,-1,o,-1,1,!0),r=h.a_(e,l,t,-1,o,252,4,!1),i=h.a_(e,"target",t,-1,f.c4,-1,0,!1),-1!==r&&(-1!==n&&r>n&&t.l(m.ro(),h.a([r,n],v.M),l),r%4!=0&&t.l(m.rg(),h.a([r,4],v.M),l),34963===i&&t.n(m.nc(),l)),a=h.W(e,"buffer",t,!0),s=h.a_(e,"byteOffset",t,0,o,-1,0,!1),h.J(e,"name",t,o,o,o,!1),new h.bv(a,s,n,r,i,h.t(e,f.aC,t,o),h.x(e,t),!1)},bv:function(e,t,n,r,i,a,s,o){var l=this;l.w=e,l.x=t,l.y=n,l.z=r,l.Q=i,l.at=l.as=null,l.ax=-1,l.a=a,l.b=s,l.a$=o},tJ(e,t){var n=null,r="orthographic",i="perspective";switch(h.w(e,f.d8,t),e.v(r)&&e.v(i)&&t.G(m.o4(),f.av),h.J(e,"type",t,n,f.av,n,!0)){case"orthographic":h.U(e,r,t,h.wy(),!0);break;case"perspective":h.U(e,i,t,h.wz(),!0)}return h.J(e,"name",t,n,n,n,!1),new h.bw(h.t(e,f.dL,t,n),h.x(e,t),!1)},tH(e,t){var n,r,i="xmag",a="ymag";return h.w(e,f.de,t),n=h.H(e,i,t,NaN,1/0,-1/0,1/0,-1/0,!0,NaN),r=h.H(e,a,t,NaN,1/0,-1/0,1/0,-1/0,!0,NaN),h.H(e,"zfar",t,NaN,1/0,0,1/0,-1/0,!0,NaN)<=h.H(e,"znear",t,NaN,1/0,-1/0,1/0,0,!0,NaN)&&t.O(m.o7()),0===n?t.n(m.o6(),i):n<0&&t.n(m.o5(),i),0===r?t.n(m.o6(),a):r<0&&t.n(m.o5(),a),new h.c2(h.t(e,f.dJ,t,null),h.x(e,t),!1)},tI:(e,t)=>(h.w(e,f.cr,t),h.H(e,"yfov",t,NaN,1/0,0,1/0,-1/0,!0,NaN)>=3.141592653589793&&t.O(m.rp()),h.H(e,"zfar",t,NaN,1/0,0,1/0,-1/0,!1,NaN)<=h.H(e,"znear",t,NaN,1/0,0,1/0,-1/0,!0,NaN)&&t.O(m.o7()),h.H(e,"aspectRatio",t,NaN,1/0,0,1/0,-1/0,!1,NaN),new h.c3(h.t(e,f.dK,t,null),h.x(e,t),!1)),bw:function(e,t,n){this.a=e,this.b=t,this.a$=n},c2:function(e,t,n){this.a=e,this.b=t,this.a$=n},c3:function(e,t,n){this.a=e,this.b=t,this.a$=n},or(e,t){var n,r,i,a,s,o,l,u,c,d,p,g,_,b,x,y,w,A,E,S,T,M,P,C,F,L,N,I,R,D,U,O,k,$,z,B="extensionsRequired",G="extensionsUsed",j=null,V=new h.iv(t);if(V.$0(),h.w(e,f.df,t),e.v(B)&&!e.v(G)&&t.l(m.cJ(),h.a(["extensionsUsed"],v.M),B),null==(n=h.pJ(e,G,t))&&(n=h.a([],v.i)),null==(r=h.pJ(e,B,t))&&(r=h.a([],v.i)),t.e5(n,r),i=new h.iw(e,V,t),null==(null==(a=new h.ix(V,e,t).$1$3$req("asset",h.wr(),!0,v.gP))?j:a.f))return j;if(2!==a.gbg())return s=m.rU(),o=a.gbg(),t.l(s,h.a([o],v.M),"version"),j;for(a.gbR()>0&&(s=m.rV(),o=a.gbR(),t.l(s,h.a([o],v.M),"version")),l=i.$1$2("accessors",h.wo(),v.W),u=i.$1$2("animations",h.wq(),v.bj),c=i.$1$2("buffers",h.ww(),v.cT),d=i.$1$2("bufferViews",h.wx(),v.r),p=i.$1$2("cameras",h.wA(),v.h2),g=i.$1$2("images",h.wP(),v.ec),_=i.$1$2("materials",h.xd(),v.fC),b=i.$1$2("meshes",h.xg(),v.eM),s=v.L,x=i.$1$2("nodes",h.xh(),s),y=i.$1$2("samplers",h.xi(),v.c2),w=i.$1$2("scenes",h.xj(),v.bn),V.$0(),A=h.W(e,"scene",t,!1),E=w.j(0,A),(o=-1!==A&&null==E)&&t.l(m.N(),h.a([A],v.M),"scene"),S=i.$1$2("skins",h.xk(),v.aV),T=i.$1$2("textures",h.xm(),v.ai),V.$0(),M=h.t(e,f.T,t,j),V.$0(),P=new h.ds(n,r,l,u,a,c,d,p,g,_,b,x,y,E,S,T,M,h.x(e,t),!1),(C=new h.it(t,P)).$2(d,f.aC),C.$2(l,f.S),C.$2(g,f.aD),C.$2(T,f.V),C.$2(_,f.h),C.$2(b,f.aF),C.$2(x,f.U),C.$2(S,f.aJ),C.$2(u,f.aB),C.$2(w,f.aI),0!==M.a&&((o=t.c).push("extensions"),M.L(0,new h.ir(t,P)),o.pop()),(o=t.c).push("nodes"),x.a3(new h.is(t,h.aN(s))),o.pop(),F=[l,c,d,p,g,_,b,x,y,S,T],L=0;L<11;++L)if(0!==(N=F[L]).gi(N)){for(o.push(N.c),s=N.b,R=(I=N.a).length,D=0;D<s;++D)!1===(null==(U=(U=D>=R)?j:I[D])?j:U.a$)&&t.Y(m.h_(),D);o.pop()}if(0!==(s=t.x).a){for(I=h.uq(s,s.r,h.C(s).c);I.p();)if(0!==(R=I.d).gi(R))for(O=s.j(0,R),f.d.si(o,0),f.d.F(o,O),U=R.b,k=(R=R.a).length,D=0;D<U;++D)!1===(null==($=($=D>=k)?j:R[D])?j:$.a$)&&t.Y(m.h_(),D);f.d.si(o,0)}for(o.push("meshes"),s=b.b,R=(I=b.a).length,D=0;D<s;++D)null!=(null==(z=(U=D>=R)?j:I[D])?j:z.x)&&z.a$&&!z.y&&(o.push(f.c.k(D)),t.n(m.rd(),"weights"),o.pop());return f.d.si(o,0),P},ds:function(e,t,n,r,i,a,s,o,l,u,c,h,d,f,p,m,g,_,v){var b=this;b.d=e,b.e=t,b.f=n,b.r=r,b.w=i,b.x=a,b.y=s,b.z=o,b.Q=l,b.as=u,b.at=c,b.ax=h,b.ay=d,b.ch=f,b.cx=p,b.cy=m,b.a=g,b.b=_,b.a$=v},iv:function(e){this.a=e},iw:function(e,t,n){this.a=e,this.b=t,this.c=n},ix:function(e,t,n){this.a=e,this.b=t,this.c=n},it:function(e,t){this.a=e,this.b=t},iu:function(e,t){this.a=e,this.b=t},ir:function(e,t){this.a=e,this.b=t},is:function(e,t){this.a=e,this.b=t},ip:function(){},iq:function(){},iy:function(e,t){this.a=e,this.b=t},iz:function(e,t){this.a=e,this.b=t},m:function(){},l:function(){},eN:function(){},fH:function(){},u3(e,t){var n,r,i,a,s,o,l,u,c,d="bufferView",p=null,g="uri";if(h.w(e,f.cu,t),a=h.W(e,d,t,!1),s=h.J(e,"mimeType",t,p,t.dy,p,!1),n=h.J(e,g,t,p,p,p,!1),(l=!(o=-1===a))&&null==s&&t.l(m.cJ(),h.a(["mimeType"],v.M),d),(o=!(!l||null==n)||o&&null==n)&&t.G(m.o4(),h.a(["bufferView","uri"],v.M)),r=null,null!=n){t.dx&&t.n(m.nT(),g),i=null;try{i=h.oY(n)}catch(u){if(!(h.K(u)instanceof h.aI))throw u;r=h.pL(n,t)}null!=i?(t.dx&&t.n(m.nS(),g),c=i.cz(),(o=(o=null==(o=h.os(c))?p:f.cb[o.a])!==i.gbQ().toLowerCase())&&(t.l(m.o3(),h.a([n,"The declared mediatype does not match the embedded content."],v.M),g),c=p)):c=p}else c=p;return o=r,h.J(e,"name",t,p,p,p,!1),new h.aT(a,s,o,c,h.t(e,f.aD,t,p),h.x(e,t),!1)},aT:function(e,t,n,r,i,a,s){var o=this;o.w=e,o.x=t,o.y=n,o.z=r,o.as=o.Q=null,o.a=i,o.b=a,o.a$=s},uu(e,t){var n,r,i,a,s,o,l,u,c,d,p=null,g="alphaCutoff";return h.w(e,f.ck,t),n=h.U(e,"pbrMetallicRoughness",t,h.xf(),!1),r=h.U(e,"normalTexture",t,h.pO(),!1),i=h.U(e,"occlusionTexture",t,h.xe(),!1),a=h.U(e,"emissiveTexture",t,h.ap(),!1),s=h.ae(e,"emissiveFactor",t,f.aj,f.l,1,0,!1),o=h.J(e,"alphaMode",t,"OPAQUE",f.cj,p,!1),h.H(e,g,t,.5,1/0,-1/0,1/0,0,!1,NaN),"MASK"!==o&&e.v(g)&&t.n(m.rz(),g),u=h.pG(e,"doubleSided",t),c=h.t(e,f.h,t,p),h.J(e,"name",t,p,p,p,!1),d=new h.av(n,r,i,a,s,u,h.a8(v.X,v.e),c,h.x(e,t),!1),l=h.a([n,r,i,a],v.M),f.d.F(l,c.gV()),t.U(d,l),d},uF(e,t){var n,r,i,a,s;return h.w(e,f.cw,t),h.ae(e,"baseColorFactor",t,f.ak,f.P,1,0,!1),n=h.U(e,"baseColorTexture",t,h.ap(),!1),h.H(e,"metallicFactor",t,1,1/0,-1/0,1,0,!1,NaN),h.H(e,"roughnessFactor",t,1,1/0,-1/0,1,0,!1,NaN),r=h.U(e,"metallicRoughnessTexture",t,h.ap(),!1),i=h.t(e,f.e5,t,null),a=new h.cx(n,r,i,h.x(e,t),!1),s=h.a([n,r],v.M),f.d.F(s,i.gV()),t.U(a,s),a},uE(e,t){var n,r,i,a;return h.w(e,f.cJ,t),n=h.t(e,f.aH,t,f.h),r=h.W(e,"index",t,!0),i=h.a_(e,"texCoord",t,0,null,-1,0,!1),h.H(e,"strength",t,1,1/0,-1/0,1,0,!1,NaN),a=new h.cw(r,i,n,h.x(e,t),!1),t.U(a,n.gV()),a},uD(e,t){var n,r,i,a;return h.w(e,f.cI,t),n=h.t(e,f.aG,t,f.h),r=h.W(e,"index",t,!0),i=h.a_(e,"texCoord",t,0,null,-1,0,!1),h.H(e,"scale",t,1,1/0,-1/0,1/0,-1/0,!1,NaN),a=new h.cv(r,i,n,h.x(e,t),!1),t.U(a,n.gV()),a},uU(e,t){var n,r;return h.w(e,f.cH,t),n=h.t(e,f.aK,t,f.h),r=new h.bh(h.W(e,"index",t,!0),h.a_(e,"texCoord",t,0,null,-1,0,!1),n,h.x(e,t),!1),t.U(r,n.gV()),r},av:function(e,t,n,r,i,a,s,o,l,u){var c=this;c.w=e,c.x=t,c.y=n,c.z=r,c.Q=i,c.ax=a,c.ay=!1,c.ch=s,c.a=o,c.b=l,c.a$=u},jN:function(e,t){this.a=e,this.b=t},cx:function(e,t,n,r,i){var a=this;a.e=e,a.w=t,a.a=n,a.b=r,a.a$=i},cw:function(e,t,n,r,i){var a=this;a.d=e,a.e=t,a.f=null,a.a=n,a.b=r,a.a$=i},cv:function(e,t,n,r,i){var a=this;a.d=e,a.e=t,a.f=null,a.a=n,a.b=r,a.a$=i},bh:function(e,t,n,r,i){var a=this;a.d=e,a.e=t,a.f=null,a.a=n,a.b=r,a.a$=i},dj:e=>new h.y(e.Q,e.y,e.as),c1:function(e){this.a=e},c_:function(e){this.a=e},y:function(e,t,n){this.a=e,this.b=t,this.c=n},uy(e,t){var n,r,i,a,s,o,l,u,c,d,p=null,g="primitives";if(h.w(e,f.cZ,t),n=h.ae(e,"weights",t,p,p,1/0,-1/0,!1),null!=(r=h.ey(e,g,t))){for(i=r.gi(r),a=h.S(i,p,!1,v.ft),s=new h.E(a,i,g,v.b_),(i=t.c).push(g),o=0,l=0;l<r.gi(r);++l)i.push(f.c.k(l)),null==(d=null==(c=(u=h.ux(r.j(0,l),t)).w)?p:c.length)&&(d=0),0===l?o=d:o!==d&&(c=m.rF(),t.n(c,d>0?"targets":p)),a[l]=u,i.pop();i.pop(),(i=null!=n&&o!==n.length)&&t.l(m.rA(),h.a([n.length,o],v.M),"weights")}else s=p;return h.J(e,"name",t,p,p,p,!1),new h.aU(s,n,h.t(e,f.aF,t,p),h.x(e,t),!1)},uw(e,t,n,r,i,a,s,o,l,u,c,f,p,m){var g,_=d.ou(f,v.e);for(g=0;g<f;++g)_[g]=g;return new h.aF(e,t,n,r,i,o,u,c,f,h.a8(v.X,v.W),_,p,m,!1)},ux(e,t){var n,r,i,a,s,o,l,u="attributes",c={};return h.w(e,f.cN,t),c.a=c.b=c.c=!1,c.d=0,c.e=-1,c.f=0,c.r=-1,c.w=0,c.x=-1,c.y=0,c.z=-1,n=h.a_(e,"mode",t,4,null,6,0,!1),null!=(r=h.wJ(e,u,t,new h.jO(c,t)))&&((i=t.c).push(u),c.c||t.O(m.rD()),!c.b&&c.a&&t.n(m.rE(),"TANGENT"),a=new h.jP(t),c.d=a.$3(c.e,c.d,"COLOR"),c.f=a.$3(c.r,c.f,"JOINTS"),c.w=a.$3(c.x,c.w,"WEIGHTS"),c.y=a.$3(c.z,c.y,"TEXCOORD"),(a=c.f)!==(s=c.w)&&(t.G(m.rC(),h.a([a,s],v.M)),c.w=c.f=0),i.pop()),o=h.wK(e,"targets",t,new h.jQ(t)),l=h.uw(r,h.W(e,"indices",t,!1),h.W(e,"material",t,!1),n,o,c.c,c.b,c.a,c.d,c.f,c.w,c.y,h.t(e,f.aE,t,null),h.x(e,t)),t.U(l,l.a.gV()),l},aU:function(e,t,n,r,i){var a=this;a.w=e,a.x=t,a.y=!1,a.a=n,a.b=r,a.a$=i},jX:function(e,t){this.a=e,this.b=t},jW:function(e,t){this.a=e,this.b=t},aF:function(e,t,n,r,i,a,s,o,l,u,c,h,d,f){var p=this;p.d=e,p.e=t,p.f=n,p.r=r,p.w=i,p.z=a,p.as=s,p.at=o,p.ax=l,p.ay=u,p.CW=p.ch=-1,p.db=p.cy=p.cx=null,p.dx=c,p.a=h,p.b=d,p.a$=f},jO:function(e,t){this.a=e,this.b=t},jP:function(e){this.a=e},jQ:function(e){this.a=e},jS:function(e,t,n){this.a=e,this.b=t,this.c=n},jT:function(e,t){this.a=e,this.b=t},jU:function(){},jV:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},jR:function(){},eQ:function(e,t,n,r,i,a){var s=this;s.a=e,s.b=t,s.c=n,s.w=r,s.Q=s.z=0,s.as=i,s.at=a},uC(e,t){var n,r,i,a,s,o,l,u,c,d,p,g,_,b,x,y,w,A,E,S,T,M,P,C,F,L,N,I,R,D=null,U="matrix",O="translation",k="rotation";return h.w(e,f.cc,t),e.v(U)&&null!=(n=h.ae(e,U,t,D,f.c_,1/0,-1/0,!1))?(r=new Float32Array(16),i=new h.cV(r),a=n[0],s=n[1],o=n[2],l=n[3],u=n[4],c=n[5],d=n[6],p=n[7],g=n[8],_=n[9],b=n[10],x=n[11],y=n[12],w=n[13],A=n[14],r[15]=n[15],r[14]=A,r[13]=w,r[12]=y,r[11]=x,r[10]=b,r[9]=_,r[8]=g,r[7]=p,r[6]=d,r[5]=c,r[4]=u,r[3]=l,r[2]=o,r[1]=s,r[0]=a):i=D,S=e.v(O)&&null!=(E=h.ae(e,O,t,D,f.l,1/0,-1/0,!1))?h.p3(E):D,e.v(k)&&null!=(T=h.ae(e,k,t,D,f.P,1,-1,!1))?(r=T[0],a=T[1],s=T[2],o=T[3],l=new Float32Array(4),M=new h.fi(l),l[0]=r,l[1]=a,l[2]=s,l[3]=o,r=Math.sqrt(M.gaT()),Math.abs(1-r)>.00769&&t.n(m.rR(),k)):M=D,C=e.v("scale")&&null!=(P=h.ae(e,"scale",t,D,f.l,1/0,-1/0,!1))?h.p3(P):D,F=h.W(e,"camera",t,!1),L=h.mK(e,"children",t,!1),N=h.W(e,"mesh",t,!1),I=h.W(e,"skin",t,!1),R=h.ae(e,"weights",t,D,D,1/0,-1/0,!1),-1===N&&(-1!==I&&t.l(m.cJ(),h.a(["mesh"],v.M),"skin"),null!=R&&t.l(m.cJ(),h.a(["mesh"],v.M),"weights")),null!=i&&(null==S&&null==M&&null==C||t.n(m.rK(),U),i.cL()?t.n(m.rI(),U):h.wV(i)||t.n(m.rL(),U)),h.J(e,"name",t,D,D,D,!1),new h.an(F,L,I,i,N,S,M,C,R,h.aN(v.bn),h.t(e,f.U,t,D),h.x(e,t),!1)},an:function(e,t,n,r,i,a,s,o,l,u,c,h,d){var f=this;f.w=e,f.x=t,f.y=n,f.z=r,f.Q=i,f.as=a,f.at=s,f.ax=o,f.ay=l,f.ch=u,f.dx=f.db=f.cy=f.cx=f.CW=null,f.dy=!1,f.a=c,f.b=h,f.a$=d},jZ:function(){},k_:function(){},k0:function(e,t){this.a=e,this.b=t},uP(e,t){var n=null;return h.w(e,f.d0,t),h.a_(e,"magFilter",t,-1,f.c9,-1,0,!1),h.a_(e,"minFilter",t,-1,f.cd,-1,0,!1),h.a_(e,"wrapS",t,10497,f.an,-1,0,!1),h.a_(e,"wrapT",t,10497,f.an,-1,0,!1),h.J(e,"name",t,n,n,n,!1),new h.bC(h.t(e,f.e6,t,n),h.x(e,t),!1)},bC:function(e,t,n){this.a=e,this.b=t,this.a$=n},uQ(e,t){var n,r=null;return h.w(e,f.cU,t),n=h.mK(e,"nodes",t,!1),h.J(e,"name",t,r,r,r,!1),new h.bD(n,h.t(e,f.aI,t,r),h.x(e,t),!1)},bD:function(e,t,n,r){var i=this;i.w=e,i.x=null,i.a=t,i.b=n,i.a$=r},k9:function(e,t){this.a=e,this.b=t},uR(e,t){var n,r,i,a=null;return h.w(e,f.cm,t),n=h.W(e,"inverseBindMatrices",t,!1),r=h.W(e,"skeleton",t,!1),i=h.mK(e,"joints",t,!0),h.J(e,"name",t,a,a,a,!1),new h.bF(n,r,i,h.aN(v.L),h.t(e,f.aJ,t,a),h.x(e,t),!1)},bF:function(e,t,n,r,i,a,s){var o=this;o.w=e,o.x=t,o.y=n,o.as=o.Q=o.z=null,o.at=r,o.a=i,o.b=a,o.a$=s},le:function(e){this.a=e},eP:function(e){this.a=e},uV(e,t){var n,r,i=null;return h.w(e,f.d3,t),n=h.W(e,"sampler",t,!1),r=h.W(e,"source",t,!1),h.J(e,"name",t,i,i,i,!1),new h.bH(n,r,h.t(e,f.V,t,i),h.x(e,t),!1)},bH:function(e,t,n,r,i){var a=this;a.w=e,a.x=t,a.z=a.y=null,a.a=n,a.b=r,a.a$=i},p1(e,t,n){var r=h.aN(v.X),i=null==t?0:t;return null!=e&&r.F(0,e),new h.lw(i,r,n)},tR:()=>new h.aa(f.as,new h.hg,v.gw),tQ(e){var t,n,r,i,a=v.i,s=h.a([],a),o=v._,l=h.a([],v.d6),u=h.a8(v.al,v.f9),c=h.a([],a),d=h.a([],a),p=h.a([],v.fh),m=h.a([],v.a9);return a=h.a(["image/jpeg","image/png"],a),t=v.aD,n=v.X,r=v.cn,i=h.nm(["POSITION",h.aO([f.k],t),"NORMAL",h.aO([f.k],t),"TANGENT",h.aO([f.n],t),"TEXCOORD",h.aO([f.a3,f.a_,f.a2],t),"COLOR",h.aO([f.k,f.H,f.I,f.n,f.y,f.z],t),"JOINTS",h.aO([f.aZ,f.b_],t),"WEIGHTS",h.aO([f.n,f.y,f.z],t)],n,r),r=h.nm(["POSITION",h.aO([f.k],t),"NORMAL",h.aO([f.k],t),"TANGENT",h.aO([f.k],t),"TEXCOORD",h.aO([f.a3,f.Z,f.a_,f.a1,f.a2],t),"COLOR",h.aO([f.k,f.w,f.H,f.x,f.I,f.n,f.J,f.y,f.K,f.z],t)],n,r),t=null==e?h.p1(null,null,null):e,r=new h.i(t,s,h.a8(v.W,v.b7),h.a8(o,o),h.a8(v.f7,v.an),l,h.a8(v.r,v.gz),h.a8(v.b5,v.eG),u,c,d,p,h.aN(v.af),m,new h.ab(""),a,i,r),i=v.em,r.ay=new h.aY(d,i),r.at=new h.aY(c,i),r.Q=new h.bk(u,v.f8),r.CW=new h.aY(p,v.go),r},lw:function(e,t,n){this.a=e,this.b=t,this.c=n},i:function(e,t,n,r,i,a,s,o,l,u,c,h,d,f,p,m,g,_){var v=this;v.b=e,v.c=t,v.d=n,v.e=r,v.f=i,v.r=a,v.w=s,v.x=o,v.y=!1,v.z=l,v.Q=null,v.as=u,v.at=null,v.ax=c,v.ay=null,v.ch=h,v.CW=null,v.cx=d,v.cy=f,v.db=p,v.dx=!1,v.dy=m,v.fr=g,v.fx=_},hg:function(){},hf:function(){},hh:function(){},hk:function(e){this.a=e},hl:function(e){this.a=e},hi:function(e){this.a=e},hj:function(){},hm:function(e,t){this.a=e,this.b=t},bx:function(){},u2(e){var t,n,r={};return r.a=r.b=null,t=new h.B(m.A,v.dD),n=new h.ay(t,v.eP),r.c=!1,r.a=e.bO(new h.iB(r,n),new h.iC(r),new h.iD(r,n)),t},os(e){var t,n;return e.length<14?null:16767231==(16777215&(n=(t=h.f3(e.buffer,e.byteOffset,14)).getUint32(0,!0)))?f.af:1196314761===n&&169478669===t.getUint32(4,!0)?f.ag:1179011410===n&&1346520407===t.getUint32(8,!0)&&20566===t.getUint16(12,!0)?f.ah:1481919403===n&&3140497952===t.getUint32(4,!0)&&169478669===t.getUint32(8,!0)?f.bO:null},cQ:function(e,t){this.a=e,this.b=t},dR:function(e,t){this.a=e,this.b=t},d1:function(e,t){this.a=e,this.b=t},ca:function(e,t){this.a=e,this.b=t},cb:function(e,t,n,r,i,a,s,o,l){var u=this;u.a=e,u.b=t,u.c=n,u.d=r,u.e=i,u.f=a,u.r=s,u.w=o,u.x=l},iB:function(e,t){this.a=e,this.b=t},iD:function(e,t){this.a=e,this.b=t},iC:function(e){this.a=e},iA:function(){},iL:function(e,t){var n=this;n.f=n.e=n.d=n.c=0,n.r=null,n.a=e,n.b=t},iN:function(){},iM:function(){},k2:function(e,t,n,r,i,a){var s=this;s.x=s.w=s.r=s.f=s.e=s.d=s.c=0,s.z=s.y=!1,s.Q=e,s.as=t,s.at=!1,s.ax=n,s.ay=r,s.a=i,s.b=a},k3:function(e){this.a=e},lB:function(e,t,n){var r=this;r.c=e,r.d=0,r.a=t,r.b=n},dO:function(){},dN:function(){},aJ:function(e){this.a=e},d6:function(e,t){this.a=e,this.b=t},fk:function(e){var t=this;t.a=e,t.f=t.e=t.d=t.c=t.b=null},k6:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},k7:function(e,t,n){this.a=e,this.b=t,this.c=n},k8:function(e,t){this.a=e,this.b=t},mB:e=>null==e||null==e.Q||-1===e.y||-1===e.z||null==e.CW&&null==e.ay?null:e,xr(e,t){var n,r,i,a,s,o,l,u,c,d,p,m,g,_,b,x,y,w,A;for(e.f.a3(new h.n7(t)),h.wa(t),n=h.a([],v.b2),r=h.a([],v.bd),i=t.c,f.d.si(i,0),i.push("meshes"),s=(a=e.at).b,l=(o=e.ax).$ti.h("a9<n.E>"),u=e.cx,c=(a=a.a).length,d=0;d<s;++d)if(p={},null!=(null==(g=(m=d>=c)?null:a[d])?null:g.w)&&!(m=g.w).ba(m,new h.n8)){for(p.a=p.b=-1,_=new h.a9(o,o.gi(o),l);_.p();)(x=(b=_.d).cy==g&&null!=(null==(x=b.dx)?null:x.Q))&&(y=(b=b.dx).Q.length,(-1===(x=p.b)||y<x)&&(p.b=y,p.a=u.bN(u,b)));p.b<1||(i.push(f.c.k(d)),i.push("primitives"),m.a3(new h.n9(p,t,n,r)),i.pop(),i.pop())}if(i.pop(),0!==n.length)for(;h.wg(n);)for(i=r.length,w=0;w<r.length;r.length===i||(0,h.cI)(r),++w)(A=r[w]).w||A.dU(t)},wg(e){var t,n;for(t=e.length,n=0;n<e.length;e.length===t||(0,h.cI)(e),++n)e[n].p();return e.fixed$length&&h.a0(h.ac("removeWhere")),f.d.dL(e,new h.mE,!0),0!==e.length},wa(e){var t,n,r,i,a,s,o,l,u,c,p,m;for(t=(t=e.d.ge0()).gD(t),n=e.c;t.p();)if(r=t.gt(),null!=(i=h.mB(r.a))){for(null==(a=f.m.j(0,i.Q))&&(a=0),s=r.b,f.d.si(n,0),r=i.ad(),r=new h.aG(r.a(),h.C(r).h("aG<1>")),o=d.T(s),l=0,u=0,c=!1;r.p();c=!0){for(p=r.gt(),m=0;m<o.gi(s);++m)if(!o.j(s,m).a_(e,l,u,p))continue;++u===a&&(u=0),++l}if(c)for(m=0;m<o.gi(s);++m)o.j(s,m).aD(e)}},n7:function(e){this.a=e},n8:function(){},n9:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},mE:function(){},eT:function(e,t,n,r,i,a){var s=this;s.a=e,s.b=t,s.c=n,s.d=r,s.e=i,s.r=s.f=0,s.w=!1,s.y=s.x=0,s.z=a},F:(e,t,n)=>new h.hn(n,e,t),al:(e,t,n)=>new h.ka(n,e,t),r:(e,t,n)=>new h.kr(n,e,t),v:(e,t,n)=>new h.iX(n,e,t),ak:(e,t,n)=>new h.hY(n,e,t),wb:e=>"'"+h.b(e)+"'",w7:e=>"string"==typeof e?"'"+e+"'":d.aq(e),bE:function(e,t){this.a=e,this.b=t},iG:function(){},hn:function(e,t,n){this.a=e,this.b=t,this.c=n},hK:function(){},hL:function(){},hD:function(){},hC:function(){},hs:function(){},hr:function(){},hH:function(){},hy:function(){},hq:function(){},hE:function(){},hw:function(){},ht:function(){},hv:function(){},hu:function(){},ho:function(){},hp:function(){},hG:function(){},hF:function(){},hx:function(){},hN:function(){},hP:function(){},hS:function(){},hT:function(){},hQ:function(){},hR:function(){},hO:function(){},hU:function(){},hM:function(){},hA:function(){},hz:function(){},hI:function(){},hJ:function(){},hB:function(){},iE:function(e,t,n){this.a=e,this.b=t,this.c=n},iF:function(){},ka:function(e,t,n){this.a=e,this.b=t,this.c=n},kc:function(){},kd:function(){},kb:function(){},kf:function(){},kg:function(){},kh:function(){},ke:function(){},ki:function(){},kj:function(){},kk:function(){},kp:function(){},kq:function(){},ko:function(){},kl:function(){},km:function(){},kn:function(){},kr:function(e,t,n){this.a=e,this.b=t,this.c=n},la:function(){},lb:function(){},kW:function(){},kG:function(){},kt:function(){},ku:function(){},ks:function(){},kv:function(){},kw:function(){},kx:function(){},kz:function(){},ky:function(){},kA:function(){},kB:function(){},kC:function(){},kD:function(){},kO:function(){},kR:function(){},kV:function(){},kT:function(){},kQ:function(){},kU:function(){},kS:function(){},kP:function(){},l_:function(){},kY:function(){},l0:function(){},l7:function(){},ld:function(){},l6:function(){},lc:function(){},kF:function(){},kZ:function(){},l3:function(){},l2:function(){},l1:function(){},l8:function(){},l9:function(){},l5:function(){},kX:function(){},l4:function(){},kE:function(){},kH:function(){},kI:function(){},kN:function(){},kM:function(){},kK:function(){},kJ:function(){},kL:function(){},iX:function(e,t,n){this.a=e,this.b=t,this.c=n},j_:function(){},iY:function(){},iZ:function(){},j0:function(){},j3:function(){},j1:function(){},j2:function(){},j7:function(){},j5:function(){},j9:function(){},j6:function(){},j8:function(){},j4:function(){},ja:function(){},jd:function(){},jc:function(){},jb:function(){},je:function(){},jf:function(){},jj:function(){},jk:function(){},jq:function(){},ji:function(){},jh:function(){},jn:function(){},jm:function(){},jl:function(){},jr:function(){},js:function(){},jp:function(){},jo:function(){},jt:function(){},ju:function(){},jx:function(){},jv:function(){},jw:function(){},jy:function(){},jA:function(){},jz:function(){},jB:function(){},jC:function(){},jD:function(){},jE:function(){},jF:function(){},jI:function(){},jH:function(){},jG:function(){},jg:function(){},hY:function(e,t,n){this.a=e,this.b=t,this.c=n},i4:function(){},i5:function(){},i7:function(){},hZ:function(){},i6:function(){},i_:function(){},i2:function(){},i1:function(){},i0:function(){},ia:function(){},i9:function(){},ib:function(){},ic:function(){},i8:function(){},id:function(){},i3:function(){},cS:function(e,t,n,r,i){var a=this;a.a=e,a.b=t,a.c=n,a.d=r,a.e=i},vU(e){e.dy.push("image/webp")},tX:(e,t)=>(t.toString,h.w(e,f.d4,t),new h.c8(h.W(e,"source",t,!1),h.t(e,f.dN,t,null),h.x(e,t),!1)),c8:function(e,t,n,r){var i=this;i.d=e,i.e=null,i.a=t,i.b=n,i.a$=r},ua(e,t){var n,r,i,a,s,o,l,u,c,p,g,_=null,b="lights",x="spot";if(t.toString,h.w(e,f.cQ,t),n=h.ey(e,b,t),r=v.cp,null!=n){for(i=n.gi(n),r=h.S(i,_,!1,r),a=new h.E(r,i,b,v.E),(i=t.c).push(b),s=v.h,o=0;o<n.gi(n);++o)l=n.j(0,o),i.push(f.c.k(o)),h.w(l,f.cg,t),h.ae(l,"color",t,f.C,f.l,1,0,!1),h.H(l,"intensity",t,1,1/0,-1/0,1/0,0,!1,NaN),"spot"===(u=h.J(l,"type",t,_,f.cz,_,!0))?h.U(l,x,t,h.wX(),!0):(c=l.v(x))&&t.n(m.o8(),x),p=h.H(l,"range",t,NaN,1/0,0,1/0,-1/0,!1,NaN),(c="directional"===u&&!isNaN(p))&&t.n(m.o8(),"range"),h.J(l,"name",t,_,_,_,!1),c=h.t(l,f.dQ,t,_),null!=(g=l.j(0,"extras"))&&!s.b(g)&&t.n(m.di(),"extras"),r[o]=new h.ba(c,g,!1),i.pop();i.pop()}else r=d.b8(0,r),a=new h.E(r,0,b,v.E);return new h.bz(a,h.t(e,f.dO,t,_),h.x(e,t),!1)},ub(e,t){var n,r,i="outerConeAngle";return h.w(e,f.cK,t),n=h.H(e,"innerConeAngle",t,0,1.5707963267948966,-1/0,1/0,0,!1,NaN),(r=h.H(e,i,t,.7853981633974483,1/0,0,1.5707963267948966,-1/0,!1,NaN))<=n&&t.l(m.rs(),h.a([n,r],v.M),i),new h.cd(h.t(e,f.dP,t,null),h.x(e,t),!1)},uc:(e,t)=>(t.toString,h.w(e,f.cP,t),new h.ce(h.W(e,"light",t,!0),h.t(e,f.dR,t,null),h.x(e,t),!1)),bz:function(e,t,n,r){var i=this;i.d=e,i.a=t,i.b=n,i.a$=r},iR:function(e,t){this.a=e,this.b=t},ba:function(e,t,n){this.a=e,this.b=t,this.a$=n},cd:function(e,t,n){this.a=e,this.b=t,this.a$=n},ce:function(e,t,n,r){var i=this;i.d=e,i.e=null,i.a=t,i.b=n,i.a$=r},ud(e,t){var n,r,i,a,s,o;return t.toString,h.w(e,f.c3,t),h.H(e,"clearcoatFactor",t,0,1/0,-1/0,1,0,!1,NaN),n=h.U(e,"clearcoatTexture",t,h.ap(),!1),h.H(e,"clearcoatRoughnessFactor",t,0,1/0,-1/0,1,0,!1,NaN),r=h.U(e,"clearcoatRoughnessTexture",t,h.ap(),!1),i=h.U(e,"clearcoatNormalTexture",t,h.pO(),!1),a=h.t(e,f.dS,t,null),s=new h.cf(n,r,i,a,h.x(e,t),!1),o=h.a([n,r,i],v.M),f.d.F(o,a.gV()),t.U(s,o),s},cf:function(e,t,n,r,i,a){var s=this;s.e=e,s.r=t,s.w=n,s.a=r,s.b=i,s.a$=a},ue:(e,t)=>(t.toString,h.w(e,f.cA,t),new h.cg(h.H(e,"emissiveStrength",t,1,1/0,-1/0,1/0,0,!1,NaN),h.t(e,f.dT,t,null),h.x(e,t),!1)),cg:function(e,t,n,r){var i=this;i.d=e,i.a=t,i.b=n,i.a$=r},uf:(e,t)=>(t.toString,h.w(e,f.cM,t),h.H(e,"ior",t,1.5,1/0,-1/0,1/0,1,!1,0),new h.ch(h.t(e,f.dU,t,null),h.x(e,t),!1)),ch:function(e,t,n){this.a=e,this.b=t,this.a$=n},ug(e,t){var n,r,i,a,s,o,l,u="iridescenceThicknessMinimum",c="iridescenceThicknessMaximum",d="iridescenceThicknessTexture";return t.toString,h.w(e,f.d5,t),h.H(e,"iridescenceFactor",t,0,1/0,-1/0,1,0,!1,NaN),n=h.U(e,"iridescenceTexture",t,h.ap(),!1),h.H(e,"iridescenceIor",t,1.3,1/0,-1/0,1/0,1,!1,NaN),r=h.H(e,u,t,100,1/0,-1/0,1/0,0,!1,NaN),i=h.H(e,c,t,400,1/0,-1/0,1/0,0,!1,NaN),a=h.U(e,d,t,h.ap(),!1),r>i&&(s=m.ru(),t.n(s,e.v(u)?u:c)),null!=a?r===i&&t.n(m.rw(),d):!isNaN(r)&&e.v(u)&&t.n(m.rv(),u),o=h.t(e,f.dV,t,null),l=new h.ci(n,a,o,h.x(e,t),!1),s=h.a([n,a],v.M),f.d.F(s,o.gV()),t.U(l,s),l},ci:function(e,t,n,r,i){var a=this;a.e=e,a.x=t,a.a=n,a.b=r,a.a$=i},uh(e,t){var n,r,i,a,s;return t.toString,h.w(e,f.cy,t),h.ae(e,"diffuseFactor",t,f.ak,f.P,1,0,!1),n=h.U(e,"diffuseTexture",t,h.ap(),!1),h.ae(e,"specularFactor",t,f.C,f.l,1,0,!1),h.H(e,"glossinessFactor",t,1,1/0,-1/0,1,0,!1,NaN),r=h.U(e,"specularGlossinessTexture",t,h.ap(),!1),i=h.t(e,f.dM,t,null),a=new h.cj(n,r,i,h.x(e,t),!1),s=h.a([n,r],v.M),f.d.F(s,i.gV()),t.U(a,s),a},cj:function(e,t,n,r,i){var a=this;a.e=e,a.w=t,a.a=n,a.b=r,a.a$=i},ui(e,t){var n,r,i,a,s;return t.toString,h.w(e,f.c2,t),h.ae(e,"sheenColorFactor",t,f.aj,f.l,1,0,!1),n=h.U(e,"sheenColorTexture",t,h.ap(),!1),h.H(e,"sheenRoughnessFactor",t,0,1/0,-1/0,1,0,!1,NaN),r=h.U(e,"sheenRoughnessTexture",t,h.ap(),!1),i=h.t(e,f.dW,t,null),a=new h.ck(n,r,i,h.x(e,t),!1),s=h.a([n,r],v.M),f.d.F(s,i.gV()),t.U(a,s),a},ck:function(e,t,n,r,i){var a=this;a.e=e,a.r=t,a.a=n,a.b=r,a.a$=i},uj(e,t){var n,r,i,a,s;return t.toString,h.w(e,f.c5,t),h.H(e,"specularFactor",t,1,1/0,-1/0,1,0,!1,NaN),n=h.U(e,"specularTexture",t,h.ap(),!1),h.ae(e,"specularColorFactor",t,f.C,f.l,1/0,0,!1),r=h.U(e,"specularColorTexture",t,h.ap(),!1),i=h.t(e,f.dX,t,null),a=new h.cl(n,r,i,h.x(e,t),!1),s=h.a([n,r],v.M),f.d.F(s,i.gV()),t.U(a,s),a},cl:function(e,t,n,r,i){var a=this;a.e=e,a.r=t,a.a=n,a.b=r,a.a$=i},uk(e,t){var n,r,i,a;return t.toString,h.w(e,f.c8,t),h.H(e,"transmissionFactor",t,0,1/0,-1/0,1,0,!1,NaN),n=h.U(e,"transmissionTexture",t,h.ap(),!1),r=h.t(e,f.dY,t,null),i=new h.cm(n,r,h.x(e,t),!1),a=h.a([n],v.M),f.d.F(a,r.gV()),t.U(i,a),i},cm:function(e,t,n,r){var i=this;i.e=e,i.a=t,i.b=n,i.a$=r},ul:(e,t)=>(t.toString,h.w(e,f.cB,t),new h.cn(h.t(e,f.dZ,t,null),h.x(e,t),!1)),cn:function(e,t,n){this.a=e,this.b=t,this.a$=n},um(e,t){var n,r,i,a,s,o,l,u,c,p=null,g="variants";if(t.toString,h.w(e,f.da,t),n=h.ey(e,g,t),r=v.J,null!=n){for(i=n.gi(n),r=h.S(i,p,!1,r),a=new h.E(r,i,g,v.u),(i=t.c).push(g),s=v.h,o=0;o<n.gi(n);++o)l=n.j(0,o),i.push(f.c.k(o)),h.w(l,f.cS,t),h.J(l,"name",t,p,p,p,!0),u=h.t(l,f.e1,t,p),null!=(c=l.j(0,"extras"))&&!s.b(c)&&t.n(m.di(),"extras"),r[o]=new h.aK(u,c,!1),i.pop();i.pop()}else r=d.b8(0,r),a=new h.E(r,0,g,v.u);return new h.bA(a,h.t(e,f.e_,t,p),h.x(e,t),!1)},un(e,t){var n,r,i,a,s,o,l,u,c,p,g,_,b=null,x="mappings";if(t.toString,h.w(e,f.cR,t),n=h.ey(e,x,t),r=v.aa,null!=n){for(i=n.gi(n),r=h.S(i,b,!1,r),a=new h.E(r,i,x,v.B),(i=t.c).push(x),s=v.h,o=0;o<n.gi(n);++o)l=n.j(0,o),i.push(f.c.k(o)),h.w(l,f.db,t),u=h.mK(l,"variants",t,!0),c=h.W(l,"material",t,!0),h.J(l,"name",t,b,b,b,!1),p=h.t(l,f.e0,t,b),null!=(g=l.j(0,"extras"))&&!s.b(g)&&t.n(m.di(),"extras"),r[o]=new h.bb(u,c,p,g,!1),i.pop();i.pop()}else r=d.b8(0,r),a=new h.E(r,0,x,v.B);return _=new h.co(a,h.t(e,f.e7,t,b),h.x(e,t),!1),t.U(_,h.ct(a,!0,v._)),_},bA:function(e,t,n,r){var i=this;i.d=e,i.a=t,i.b=n,i.a$=r},iS:function(e,t){this.a=e,this.b=t},aK:function(e,t,n){this.a=e,this.b=t,this.a$=n},co:function(e,t,n,r){var i=this;i.d=e,i.a=t,i.b=n,i.a$=r},iV:function(e,t,n){this.a=e,this.b=t,this.c=n},bb:function(e,t,n,r,i){var a=this;a.d=e,a.e=t,a.r=null,a.a=n,a.b=r,a.a$=i},iT:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},iU:function(e,t){this.a=e,this.b=t},uo(e,t){var n,r,i,a,s;return t.toString,h.w(e,f.dd,t),h.ae(e,"attenuationColor",t,f.C,f.l,1,0,!1),h.H(e,"attenuationDistance",t,NaN,1/0,0,1/0,-1/0,!1,NaN),n=h.H(e,"thicknessFactor",t,0,1/0,-1/0,1/0,0,!1,NaN),r=h.U(e,"thicknessTexture",t,h.ap(),!1),i=h.t(e,f.e2,t,null),a=new h.cp(n,r,i,h.x(e,t),!1),s=h.a([r],v.M),f.d.F(s,i.gV()),t.U(a,s),a},cp:function(e,t,n,r,i){var a=this;a.f=e,a.r=t,a.a=n,a.b=r,a.a$=i},iW:function(){},up:(e,t)=>(t.toString,h.w(e,f.cY,t),h.ae(e,"offset",t,f.bZ,f.al,1/0,-1/0,!1),h.H(e,"rotation",t,0,1/0,-1/0,1/0,-1/0,!1,NaN),h.ae(e,"scale",t,f.c0,f.al,1/0,-1/0,!1),new h.cq(h.a_(e,"texCoord",t,-1,null,-1,0,!1),h.t(e,f.e3,t,null),h.x(e,t),!1)),cq:function(e,t,n,r){var i=this;i.r=e,i.a=t,i.b=n,i.a$=r},O:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},V:function(e,t,n){this.a=e,this.b=t,this.c=n},c9:function(e,t){this.a=e,this.b=t},cr:function(e,t){this.a=e,this.b=t},fl:function(e,t){this.a=e,this.b=t},dr:function(e,t,n){var r=this;r.a=e,r.b=null,r.c=t,r.d=null,r.e=n,r.f=null,r.as=r.Q=r.z=r.y=r.x=r.w=r.r=0,r.at=!1,r.ch=r.ay=r.ax=null,r.CW=!1,r.cx=null},ih:function(e){this.a=e},ii:function(e){this.a=e},ie:function(e){this.a=e},ig:function(e){this.a=e},u1(e,t){var n,r={},i=new h.B(m.A,v.eD);return r.a=!1,r.b=null,n=h.oU(new h.ik(r),new h.il(r),new h.im(r),v.w),r.b=e.e6(new h.io(r,n,new h.ay(i,v.a_),t),n.gdV()),i},u_(e,t){var n=new h.cP(e,new h.ay(new h.B(m.A,v.f),v.G));return n.e=t,n},u0(e,t){var n,r,i,a,s=null,o=null;try{o=f.aa.dY(e)}catch(i){if((a=h.K(i))instanceof h.aI)return n=a,t.aC(m.h1(),h.a([n],v.M),!0),s;throw i}if(!v.t.b(o))return t.aC(m.a2(),h.a([o,"object"],v.M),!0),s;try{return r=h.or(o,t),new h.at("model/gltf+json",r,s)}catch(i){if(h.K(i)instanceof h.bx)return s;throw i}},at:function(e,t,n){this.a=e,this.b=t,this.c=n},il:function(e){this.a=e},im:function(e){this.a=e},ik:function(e){this.a=e},io:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},cP:function(e,t){var n=this;n.a=e,n.b=null,n.c=t,n.e=n.d=null,n.f=!0},ij:function(e){this.a=e},dt:function(){},az(e,t,n,r){var i=e.j(0,t);return null==i&&e.v(t)&&r.l(m.a2(),h.a([null,n],v.M),t),i},mF:e=>"number"==typeof e&&Math.floor(e)===e?d.ng(e):e,W(e,t,n,r){var i=h.mF(h.az(e,t,"integer",n));if(h.aH(i)){if(i>=0)return i;n.n(m.h0(),t)}else null==i?r&&n.G(m.bq(),h.a([t],v.M)):n.l(m.a2(),h.a([i,"integer"],v.M),t);return-1},pG(e,t,n){var r=h.az(e,t,"boolean",n);return null!=r&&(h.er(r)?r:(n.l(m.a2(),h.a([r,"boolean"],v.M),t),!1))},a_(e,t,n,r,i,a,s,o){var l=h.mF(h.az(e,t,"integer",n));if(h.aH(l)){if(null!=i){if(!h.nE(t,l,i,n,!1))return-1}else if(l<s||-1!==a&&l>a)return n.l(m.nb(),h.a([l],v.M),t),-1;return l}if(null==l){if(!o)return r;n.G(m.bq(),h.a([t],v.M))}else n.l(m.a2(),h.a([l,"integer"],v.M),t);return-1},H(e,t,n,r,i,a,s,o,l,u){var c=h.az(e,t,"number",n);if("number"==typeof c)return c!==u&&(c<o||c<=a||c>s||c>=i)?(n.l(m.nb(),h.a([c],v.M),t),NaN):c;if(null==c){if(!l)return r;n.G(m.bq(),h.a([t],v.M))}else n.l(m.a2(),h.a([c,"number"],v.M),t);return NaN},J(e,t,n,r,i,a,s){var o=h.az(e,t,"string",n);if("string"==typeof o){if(null!=i)h.nE(t,o,i,n,!1);else if(!1===(null==a?null:a.b.test(o)))return n.l(m.re(),h.a([o,a.a],v.M),t),null;return o}if(null==o){if(!s)return r;n.G(m.bq(),h.a([t],v.M))}else n.l(m.a2(),h.a([o,"string"],v.M),t);return null},pL(e,t){var n,r,i,a;try{return((i=n=h.oZ(e)).gcG()||i.gbJ()||i.gcF()||i.gbL()||i.gbK())&&t.l(m.rP(),h.a([e],v.M),"uri"),n}catch(a){if((i=h.K(a))instanceof h.aI)return r=i,t.l(m.o3(),h.a([e,r],v.M),"uri"),null;throw a}},nG(e,t,n,r){var i=h.az(e,t,"object",n);if(v.t.b(i))return i;if(null==i){if(r)return n.G(m.bq(),h.a([t],v.M)),null}else if(n.l(m.a2(),h.a([i,"object"],v.M),t),r)return null;return h.a8(v.X,v._)},U(e,t,n,r,i){var a,s,o=h.az(e,t,"object",n);return v.t.b(o)?((a=n.c).push(t),s=r.$2(o,n),a.pop(),s):(null==o?i&&n.G(m.bq(),h.a([t],v.M)):n.l(m.a2(),h.a([o,"object"],v.M),t),null)},mK(e,t,n,r){var i,a,s,o,l,u,c=h.az(e,t,"array",n);if(v.m.b(c)){if((i=d.T(c)).gA(c))return n.n(m.bV(),t),null;for((a=n.c).push(t),s=v.e,o=h.aN(s),l=0;l<i.gi(c);++l)"number"==typeof(u=i.j(c,l))&&Math.floor(u)===u&&(u=d.ng(u)),h.aH(u)&&u>=0?(o.C(0,u)||n.Y(m.o1(),l),i.m(c,l,u)):(i.m(c,l,-1),n.Y(m.h0(),l));return a.pop(),i.ah(c,s)}return null==c?r&&n.G(m.bq(),h.a([t],v.M)):n.l(m.a2(),h.a([c,"array"],v.M),t),null},wJ(e,t,n,r){var i,a=h.az(e,t,"object",n);return v.t.b(a)?a.gA(a)?(n.n(m.bV(),t),null):((i=n.c).push(t),a.L(0,new h.mL(r,a,n)),i.pop(),a.ai(0,v.X,v.e)):(i=v.M,null==a?n.G(m.bq(),h.a([t],i)):n.l(m.a2(),h.a([a,"object"],i),t),null)},wK(e,t,n,r){var i,a,s,o,l,u,c,p=h.az(e,t,"array",n);if(v.m.b(p)){if((i=d.T(p)).gA(p))return n.n(m.bV(),t),null;for((a=n.c).push(t),s=v.M,o=v.t,l=!1,u=0;u<i.gi(p);++u)c=i.j(p,u),o.b(c)?c.gA(c)?(n.Y(m.bV(),u),l=!0):(a.push(f.c.k(u)),c.L(0,new h.mM(r,c,n)),a.pop()):(n.G(m.ez(),h.a([c,"object"],s)),l=!0);return a.pop(),l?null:(i=d.nf(p,v.h),a=h.C(i).h("aa<n.E,h<e*,f*>*>"),h.ct(new h.aa(i,new h.mN,a),!1,a.h("ag.E")))}return null!=p&&n.l(m.a2(),h.a([p,"array"],v.M),t),null},ae(e,t,n,r,i,a,s,o){var l,u,c,f,p,g,_,b,x=null,y=h.az(e,t,"array",n);if(v.m.b(y)){if((l=d.T(y)).gA(y))return n.n(m.bV(),t),x;if(null!=i&&!h.nE(t,l.gi(y),i,n,!0))return x;for(u=h.S(l.gi(y),0,!1,v.F),c=v.M,f=n.c,p=!1,g=0;g<l.gi(y);++g)"number"==typeof(_=l.j(y,g))?((b=_==1/0||_==-1/0||_<s||_>a)&&(f.push(t),n.an(m.nb(),h.a([_],c),g),f.pop(),p=!0),o?((b=m.ob())[0]=_,u[g]=b[0]):u[g]=_):(n.l(m.ez(),h.a([_,"number"],c),t),p=!0);return p?x:u}return null==y?l=null==r?x:d.cT(r.slice(0),h.Z(r).c):(n.l(m.a2(),h.a([y,"array"],v.M),t),x)},pH(e,t,n,r,i){var a,s,o,l,u,c,p,g,_=h.az(e,t,"array",n);if(v.m.b(_)){if((a=d.T(_)).gi(_)!==i)return n.l(m.o2(),h.a([a.gi(_),h.a([i],v.V)],v.M),t),null;for(s=h.xq(r),o=h.pV(r),l=h.wD(r,i),u=v.M,c=!1,p=0;p<a.gi(_);++p)"number"==typeof(g=a.j(_,p))&&Math.floor(g)===g&&(g=d.ng(g)),h.aH(g)?((g<s||g>o)&&(n.l(m.rr(),h.a([g,f.ax.j(0,r)],u),t),c=!0),l[p]=g):(n.l(m.ez(),h.a([g,"integer"],u),t),c=!0);return c?null:l}return null!=_&&n.l(m.a2(),h.a([_,"array"],v.M),t),null},pJ(e,t,n){var r,i,a,s,o,l,u,c,f=h.az(e,t,"array",n);if(v.m.b(f)){if((r=d.T(f)).gA(f))return n.n(m.bV(),t),null;for((i=n.c).push(t),a=v.X,s=h.aN(a),o=v.M,l=!1,u=0;u<r.gi(f);++u)"string"==typeof(c=r.j(f,u))?s.C(0,c)||n.Y(m.o1(),u):(n.an(m.ez(),h.a([c,"string"],o),u),l=!0);return i.pop(),l?null:r.ah(f,a)}return null!=f&&n.l(m.a2(),h.a([f,"array"],v.M),t),null},ey(e,t,n){var r,i,a,s,o,l,u=h.az(e,t,"array",n);if(v.m.b(u)){if((r=d.T(u)).gA(u))return n.n(m.bV(),t),null;for(i=r.gD(u),a=v.t,s=v.M,o=!1;i.p();)l=i.gt(),a.b(l)||(n.l(m.ez(),h.a([l,"object"],s),t),o=!0);return o?null:r.ah(u,a)}return r=v.M,null==u?n.G(m.bq(),h.a([t],r)):n.l(m.a2(),h.a([u,"array"],r),t),null},t(e,t,n,r){var i,a,s,o,l,u,c,f,p,g,_,b,x="extensions",y=h.a8(v.X,v._),w=h.nG(e,x,n,!1);if(w.gA(w))return y;for((i=n.c).push(x),a=(a=w.gM()).gD(a),s=v.ax,o=v.c,l=null==r,u=n.f,c=n.r;a.p();)f=a.gt(),p=h.nG(w,f,n,!1),(g=n.ay).H(g,f)?null!=(_=n.Q.a.j(0,new h.c9(t,f)))?(w.gi(w)>1&&_.b&&n.n(m.rH(),f),null!=p&&(i.push(f),b=_.a.$2(p,n),y.m(0,f,b),!_.c&&o.b(b)&&(f=l?t:r,f=u.bV(f,new h.mJ),(g=h.a(i.slice(0),h.Z(i))).fixed$length=Array,d.ne(f,new h.cr(b,g))),s.b(b)&&((f=h.a(i.slice(0),h.Z(i))).fixed$length=Array,c.push(new h.fl(b,f))),i.pop())):n.n(m.ra(),f):((g=(g=n.at).H(g,f))||n.n(m.r9(),f),y.m(0,f,p));return i.pop(),y},x(e,t){var n=e.j(0,"extras");return null!=n&&!v.h.b(n)&&t.n(m.di(),"extras"),n},nE(e,t,n,r,i){var a;return!!d.oe(n,t)||(a=i?m.o2():m.rh(),r.l(a,h.a([t,n],v.M),e),!1)},w(e,t,n){var r,i;for(r=(r=e.gM()).gD(r);r.p();)i=r.gt(),!f.d.H(t,i)&&!f.d.H(f.cE,i)&&n.n(m.rf(),i)},nK(e,t,n,r,i,a){var s,o,l,u,c,d,f=i.c;for(f.push(r),s=v.M,l=(o=n.a).length,u=0;u<e.gi(e);++u)-1!==(c=e.j(0,u))&&(null!=(d=null==c||c<0||c>=l?null:o[c])?(d.a$=!0,t[u]=d,a.$3(d,c,u)):i.an(m.N(),h.a([c],s),u));f.pop()},wV(e){var t,n,r,i,a,s,o,l,u,c,d,f,p,g,_,v,b,x,y,w,A,E,S,T,M,P,C,F,L,N,I,R,D,U,O,k,$=e.a;return 0===$[3]&&0===$[7]&&0===$[11]&&1===$[15]&&0!==e.cC()&&(t=m.tf(),n=m.tc(),r=m.td(),null==(i=m.oD)&&(i=m.oD=new h.cB(new Float32Array(3))),i.bq($[0],$[1],$[2]),a=Math.sqrt(i.gaT()),i.bq($[4],$[5],$[6]),s=Math.sqrt(i.gaT()),i.bq($[8],$[9],$[10]),o=Math.sqrt(i.gaT()),e.cC()<0&&(a=-a),(t=t.a)[0]=$[12],t[1]=$[13],t[2]=$[14],l=1/a,u=1/s,c=1/o,null==(d=m.oB)&&(d=m.oB=new h.cV(new Float32Array(16))),(f=d.a)[15]=$[15],f[14]=$[14],f[13]=$[13],f[12]=$[12],f[11]=$[11],f[10]=$[10],f[9]=$[9],f[8]=$[8],f[7]=$[7],f[6]=$[6],f[5]=$[5],f[4]=$[4],f[3]=$[3],f[2]=$[2],f[1]=$[1],f[0]=$[0],f[0]=f[0]*l,f[1]=f[1]*l,f[2]=f[2]*l,f[4]=f[4]*u,f[5]=f[5]*u,f[6]=f[6]*u,f[8]=f[8]*c,f[9]=f[9]*c,f[10]=f[10]*c,null==(p=m.oC)&&(p=m.oC=new h.eZ(new Float32Array(9))),(g=p.a)[0]=f[0],g[1]=f[1],g[2]=f[2],g[3]=f[4],g[4]=f[5],g[5]=f[6],g[6]=f[8],g[7]=f[9],g[8]=f[10],n.toString,(v=0+($=g[0])+(f=g[4])+(_=g[8]))>0?(b=Math.sqrt(v+1),($=n.a)[3]=.5*b,b=.5/b,$[0]=(g[5]-g[7])*b,$[1]=(g[6]-g[2])*b,$[2]=(g[1]-g[3])*b):($=3*(x=$<f?f<_?2:1:$<_?2:0),f=3*(y=(x+1)%3),_=3*(w=(x+2)%3),b=Math.sqrt(g[$+x]-g[f+y]-g[_+w]+1),(n=n.a)[x]=.5*b,b=.5/b,n[3]=(g[f+w]-g[_+y])*b,n[y]=(g[$+y]+g[f+x])*b,n[w]=(g[$+w]+g[_+x])*b,$=n),(r=r.a)[0]=a,r[1]=s,r[2]=o,n=m.tb(),F=(A=$[0])*(M=A+A),L=A*(P=(E=$[1])+E),N=A*(C=(S=$[2])+S),I=E*P,R=E*C,D=S*C,U=(T=$[3])*M,O=T*P,k=T*C,($=n.a)[0]=1-(I+D),$[1]=L+k,$[2]=N-O,$[3]=0,$[4]=L-k,$[5]=1-(F+D),$[6]=R+U,$[7]=0,$[8]=N+O,$[9]=R-U,$[10]=1-(F+I),$[11]=0,$[12]=t[0],$[13]=t[1],$[14]=t[2],$[15]=1,a=r[0],s=r[1],o=r[2],$[0]=$[0]*a,$[1]=$[1]*a,$[2]=$[2]*a,$[3]=$[3]*a,$[4]=$[4]*s,$[5]=$[5]*s,$[6]=$[6]*s,$[7]=$[7]*s,$[8]=$[8]*o,$[9]=$[9]*o,$[10]=$[10]*o,$[11]=$[11]*o,$[12]=$[12],$[13]=$[13],$[14]=$[14],$[15]=$[15],Math.abs(n.cH()-e.cH())<5e-5)},wD(e,t){switch(e){case 5120:return new Int8Array(t);case 5121:return new Uint8Array(t);case 5122:return new Int16Array(t);case 5123:return new Uint16Array(t);case 5124:return new Int32Array(t);case 5125:return new Uint32Array(t);default:throw h.d(h.R(null,null))}},mL:function(e,t,n){this.a=e,this.b=t,this.c=n},mM:function(e,t,n){this.a=e,this.b=t,this.c=n},mN:function(){},mJ:function(){},E:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.$ti=r},a1:function(){},fr:function(e,t){this.a=0,this.b=e,this.c=t},fs:function(e,t){this.a=0,this.b=e,this.c=t},eG:function(e){this.a=e},lx:function(e,t,n,r){var i=this;i.a=e,i.b=t,i.c=n,i.d=r},lA:function(e,t){this.a=e,this.b=t},lz:function(){},ly:function(){},uv:()=>new h.cV(new Float32Array(16)),uM:()=>new h.fi(new Float32Array(4)),p3(e){var t=new Float32Array(3);return t[2]=e[2],t[1]=e[1],t[0]=e[0],new h.cB(t)},p2:()=>new h.cB(new Float32Array(3)),eZ:function(e){this.a=e},cV:function(e){this.a=e},fi:function(e){this.a=e},cB:function(e){this.a=e},fw:function(e){this.a=e},xb(){var e=new h.n4;d.tp(i.exports,h.cF(new h.n0(e))),d.tq(i.exports,h.cF(new h.n1(e))),d.tr(i.exports,h.cF(new h.n2)),d.to(i.exports,h.cF(new h.n3))},fY:(e,t)=>h.xs(e,t),xs(e,t){var n,r,i,a,s,o,l,u=0,c=h.eu(v.t),d=2,f=h.ew((function(p,m){for(1===p&&(r=m,u=d);;)switch(u){case 0:if(!v.a.b(e))throw h.d(h.R("data: Argument must be a Uint8Array.",null));return o=h.pn(t),i=h.pr(o),a=null,d=4,u=7,h.da(h.u1(h.np(e,v.w),i),f);case 7:return s=m,u=8,h.da(s.bW(),f);case 8:a=m,d=2,u=6;break;case 4:throw d=3,l=r,h.K(l),h.dt,l;case 3:u=2;break;case 6:n=h.fW(o,i,a),u=1;break;case 1:return h.ep(n,c);case 2:return h.eo(r,c)}}));return h.eq(f,c)},nL(e,t){var n,r,i,a=0,s=h.eu(v.t),o=h.ew((function(o,l){if(1===o)return h.eo(l,s);for(;;)switch(a){case 0:if("string"!=typeof e)throw h.d(h.R("json: Argument must be a string.",null));r=h.pn(t),i=h.pr(r),n=h.fW(r,i,h.u0(e,i)),a=1;break;case 1:return h.ep(n,s)}}));return h.eq(o,s)},pn(e){if(null!=e&&("number"==typeof e||h.er(e)||"string"==typeof e||v.l.b(e)))throw h.d(h.R("options: Value must be an object.",null));return v.bv.a(e)},fW(e,t,n){var r,i,a,s,o,l=0,u=h.eu(v.t),c=h.ew((function(f,p){if(1===f)return h.eo(p,u);for(;;)switch(l){case 0:if(o=null==e)a=null,s=null;else{if(i=d.bn(e),a=h.vT(i.gbl(e)),null!=i.gbI(e)&&!v.b1.b(i.gbI(e)))throw h.d(h.R("options.externalResourceFunction: Value must be a function.",null));if(s=i.gbI(e),null!=i.gc1(e)&&!h.er(i.gc1(e)))throw h.d(h.R("options.writeTimestamp: Value must be a boolean.",null))}l=null!=(null==n?null:n.b)?3:4;break;case 3:return l=5,h.da(h.vS(t,n,s).aU(),c);case 5:case 4:o=o?null:d.tk(e),r=new h.lx(a,t,n,null==o||o).bk(),l=1;break;case 1:return h.ep(r,u)}}));return h.eq(c,u)},vT(e){var t,n,r;if(null!=e){if("string"!=typeof e)throw h.d(h.R("options.uri: Value must be a string.",null));try{return h.oZ(e)}catch(r){throw(n=h.K(r))instanceof h.aI?(t=n,h.d(h.R("options.uri: "+h.b(t)+".",null))):r}}return null},pr(e){var t,n,r,a,s,o,l,u,c,p=null;if(null!=e){if(n=null!=(t=d.bn(e)).gbh(e)&&(!h.aH(t.gbh(e))||t.gbh(e)<0))throw h.d(h.R("options.maxIssues: Value must be a non-negative integer.",p));if(null!=t.gbc(e)){if(!v.l.b(t.gbc(e)))throw h.d(h.R("options.ignoredIssues: Value must be an array.",p));for(r=h.a([],v.i),a=0;a<d.a3(t.gbc(e));++a){if("string"!=typeof(s=d.od(t.gbc(e),a))||0===s.length)throw h.d(h.R("options.ignoredIssues["+a+"]: Value must be a non-empty String.",p));r.push(s)}}else r=p;if(null!=t.gal(e)){if("number"==typeof t.gal(e)||h.er(t.gal(e))||"string"==typeof t.gal(e)||v.l.b(t.gal(e)))throw h.d(h.R("options.severityOverrides: Value must be an object.",p));for(n=v.X,o=h.a8(n,v.dz),n=d.nf(i.Object.keys(t.gal(e)),n),n=new h.a9(n,n.gi(n),h.C(n).h("a9<n.E>"));n.p();){if(l=n.d,u=t.gal(e)[l],!(h.aH(u)&&u>=0&&u<=3))throw h.d(h.R('options.severityOverrides["'+h.b(l)+'"]: Value must be one of [0, 1, 2, 3].',p));o.m(0,l,f.cf[u])}}else o=p;c=h.p1(r,t.gbh(e),o)}else c=p;return h.tQ(c)},vS(e,t,n){var r=new h.my(n),i=new h.dW("options.externalResourceFunction is required to load this resource.");return new h.k6(t.b,e,new h.mw(e,t,n,r,i),new h.mx(n,r,i))},be:function(){},hW:function(){},d4:function(){},n4:function(){},n0:function(e){this.a=e},n_:function(e,t,n){this.a=e,this.b=t,this.c=n},mX:function(e){this.a=e},mY:function(e,t){this.a=e,this.b=t},n1:function(e){this.a=e},mZ:function(e,t,n){this.a=e,this.b=t,this.c=n},mV:function(e){this.a=e},mW:function(e,t){this.a=e,this.b=t},n2:function(){},n3:function(){},my:function(e){this.a=e},mz:function(e){this.a=e},mA:function(e){this.a=e},mw:function(e,t,n,r,i){var a=this;a.a=e,a.b=t,a.c=n,a.d=r,a.e=i},mx:function(e,t,n){this.a=e,this.b=t,this.c=n},fc:function(e){this.a=e},xo:e=>h.a0(h.ow(e)),pt(e,t){if(e!==m)throw h.d(h.ow(t))},vK(e){var t,n,r,i=e.$dart_jsFunction;return null!=i?i:(n=h.vJ,r=e,t=function(){return n(r,Array.prototype.slice.apply(arguments))},t[m.nM()]=e,e.$dart_jsFunction=t,t)},vJ:(e,t)=>h.uI(e,t,null),cF:e=>"function"==typeof e?e:h.vK(e),vV(e){var t="POSITION",n="TEXCOORD",r=e.fr;r.j(0,t).F(0,f.d6),r.j(0,"NORMAL").F(0,f.Q),r.j(0,"TANGENT").F(0,f.dg),r.j(0,n).F(0,f.c6),(r=e.fx).j(0,t).F(0,f.cn),r.j(0,"NORMAL").F(0,f.Q),r.j(0,"TANGENT").F(0,f.Q),r.j(0,n).F(0,f.dc)},b1(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return-1}},xq(e){switch(e){case 5121:case 5123:case 5125:return 0;case 5120:return-128;case 5122:return-32768;case 5124:return-2147483648;default:throw h.d(h.R(null,null))}},pV(e){switch(e){case 5120:return 127;case 5121:return 255;case 5122:return 32767;case 5123:return 65535;case 5124:return 2147483647;case 5125:return 4294967295;default:throw h.d(h.R(null,null))}},fV(e,t){var n=e+t&536870911;return(n=n+((524287&n)<<10)&536870911)^n>>>6},pp(e){var t=e+((67108863&e)<<3)&536870911;return(t^=t>>>11)+((16383&t)<<15)&536870911}},d={nJ:(e,t,n,r)=>({i:e,p:t,e:n,x:r}),mO(e){var t,n,r,i,a,s=e[g.dispatchPropertyName];if(null==s&&null==m.nH&&(h.wR(),s=e[g.dispatchPropertyName]),null!=s){if(!1===(t=s.p))return s.i;if(!0===t)return e;if(t===(n=Object.getPrototypeOf(e)))return s.i;if(s.e===n)throw h.d(h.oX("Return interceptor for "+h.b(t(e,s))))}return null==(r=e.constructor)?i=null:(null==(a=m.m8)&&(a=m.m8=g.getIsolateTag("_$dart_js")),i=r[a]),null!=i||null!=(i=h.xa(e))?i:"function"==typeof e?f.bW:null==(t=Object.getPrototypeOf(e))||t===Object.prototype?f.az:"function"==typeof r?(null==(a=m.m8)&&(a=m.m8=g.getIsolateTag("_$dart_js")),Object.defineProperty(r,a,{value:f.W,enumerable:!1,writable:!0,configurable:!0}),f.W):f.W},b8(e,t){if(e<0||e>4294967295)throw h.d(h.X(e,0,4294967295,"length",null));return d.cT(new Array(e),t)},ou(e,t){if(e>4294967295)throw h.d(h.X(e,0,4294967295,"length",null));return d.cT(new Array(e),t)},cT:(e,t)=>d.nj(h.a(e,t.h("D<0>"))),nj:e=>(e.fixed$length=Array,e),u6(e){if(e<256)switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 133:case 160:return!0;default:return!1}switch(e){case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}},ov(e,t){for(var n,r;t>0&&(n=t-1,32===(r=f.a.B(e,n))||13===r||d.u6(r));t=n);return t},bT:e=>"number"==typeof e?Math.floor(e)==e?d.dw.prototype:d.eV.prototype:"string"==typeof e?d.by.prototype:null==e?d.dx.prototype:"boolean"==typeof e?d.dv.prototype:e.constructor==Array?d.D.prototype:"object"!=typeof e?"function"==typeof e?d.b9.prototype:e:e instanceof h.c?e:d.mO(e),T:e=>"string"==typeof e?d.by.prototype:null==e?e:e.constructor==Array?d.D.prototype:"object"!=typeof e?"function"==typeof e?d.b9.prototype:e:e instanceof h.c?e:d.mO(e),bm:e=>null==e?e:e.constructor==Array?d.D.prototype:"object"!=typeof e?"function"==typeof e?d.b9.prototype:e:e instanceof h.c?e:d.mO(e),wL:e=>"number"==typeof e?d.cc.prototype:null==e||e instanceof h.c?e:d.bI.prototype,wM:e=>"number"==typeof e?d.cc.prototype:"string"==typeof e?d.by.prototype:null==e||e instanceof h.c?e:d.bI.prototype,pI:e=>"string"==typeof e?d.by.prototype:null==e||e instanceof h.c?e:d.bI.prototype,bn:e=>null==e?e:"object"!=typeof e?"function"==typeof e?d.b9.prototype:e:e instanceof h.c?e:d.mO(e),oc:(e,t)=>"number"==typeof e&&"number"==typeof t?e+t:d.wM(e).ak(e,t),aj:(e,t)=>null==e?null==t:"object"!=typeof e?null!=t&&e===t:d.bT(e).N(e,t),od:(e,t)=>"number"==typeof t&&(e.constructor==Array||"string"==typeof e||h.pN(e,e[g.dispatchPropertyName]))&&t>>>0===t&&t<e.length?e[t]:d.T(e).j(e,t),th:(e,t,n)=>"number"==typeof t&&(e.constructor==Array||h.pN(e,e[g.dispatchPropertyName]))&&!e.immutable$list&&t>>>0===t&&t<e.length?e[t]=n:d.bm(e).m(e,t,n),ne:(e,t)=>d.bm(e).C(e,t),nf:(e,t)=>d.bm(e).ah(e,t),oe:(e,t)=>d.bm(e).H(e,t),eA:(e,t)=>d.bm(e).T(e,t),bW:e=>d.bT(e).gE(e),of:e=>d.T(e).gA(e),ti:e=>d.T(e).ga7(e),aC:e=>d.bm(e).gD(e),a3:e=>d.T(e).gi(e),tj:e=>d.bn(e).gen(e),tk:e=>d.bn(e).gc1(e),tl:(e,t,n)=>d.bm(e).aX(e,t,n),br:(e,t,n)=>d.bm(e).aj(e,t,n),tm:(e,t)=>d.bT(e).bj(e,t),tn:(e,t)=>d.T(e).si(e,t),to:(e,t)=>d.bn(e).sda(e,t),tp:(e,t)=>d.bn(e).sex(e,t),tq:(e,t)=>d.bn(e).sez(e,t),tr:(e,t)=>d.bn(e).seA(e,t),og:(e,t)=>d.bm(e).a5(e,t),ts:(e,t)=>d.pI(e).W(e,t),tt:(e,t,n)=>d.bn(e).cY(e,t,n),tu:(e,t,n)=>d.bn(e).eo(e,t,n),ng:e=>d.wL(e).ep(e),h2:(e,t)=>d.bm(e).aW(e,t),aq:e=>d.bT(e).k(e),tv:e=>d.pI(e).eu(e),cR:function(){},dv:function(){},dx:function(){},eW:function(){},aL:function(){},fg:function(){},bI:function(){},b9:function(){},D:function(e){this.$ti=e},iK:function(e){this.$ti=e},b4:function(e,t,n){var r=this;r.a=e,r.b=t,r.c=0,r.d=null,r.$ti=n},cc:function(){},dw:function(){},eV:function(){},by:function(){}},f={},p=[h,d,f],m={};h.nk.prototype={},d.cR.prototype={N:(e,t)=>e===t,gE:e=>h.cX(e),k:e=>"Instance of '"+h.b(h.k5(e))+"'",bj(e,t){throw h.d(h.oG(e,t.gcP(),t.gcT(),t.gcQ()))}},d.dv.prototype={k:e=>String(e),gE:e=>e?519018:218159,$iQ:1},d.dx.prototype={N:(e,t)=>null==t,k:e=>"null",gE:e=>0,bj(e,t){return this.d2(e,t)},$ik:1},d.eW.prototype={},d.aL.prototype={gE:e=>0,k:e=>String(e),$ibe:1,$id4:1,gen:e=>e.then,cY:(e,t)=>e.then(t),eo:(e,t,n)=>e.then(t,n),sex:(e,t)=>e.validateBytes=t,sez:(e,t)=>e.validateString=t,seA:(e,t)=>e.version=t,sda:(e,t)=>e.supportedExtensions=t,gbl:e=>e.uri,gbI:e=>e.externalResourceFunction,gc1:e=>e.writeTimestamp,gbh:e=>e.maxIssues,gbc:e=>e.ignoredIssues,gal:e=>e.severityOverrides},d.fg.prototype={},d.bI.prototype={},d.b9.prototype={k(e){var t=e[m.nM()];return null==t?this.d6(e):"JavaScript function for "+h.b(d.aq(t))},$iaD:1},d.D.prototype={ah:(e,t)=>new h.b5(e,h.Z(e).h("@<1>").I(t).h("b5<1,2>")),C(e,t){e.fixed$length&&h.a0(h.ac("add")),e.push(t)},dL(e,t,n){var r,i,a,s=[],o=e.length;for(r=0;r<o;++r)if(i=e[r],t.$1(i)||s.push(i),e.length!==o)throw h.d(h.af(e));if((a=s.length)!==o)for(this.si(e,a),r=0;r<s.length;++r)e[r]=s[r]},F(e,t){var n;if(e.fixed$length&&h.a0(h.ac("addAll")),Array.isArray(t))this.de(e,t);else for(n=d.aC(t);n.p();)e.push(n.gt())},de(e,t){var n,r=t.length;if(0!==r){if(e===t)throw h.d(h.af(e));for(n=0;n<r;++n)e.push(t[n])}},aj:(e,t,n)=>new h.aa(e,t,h.Z(e).h("@<1>").I(n).h("aa<1,2>")),cM(e,t){var n,r=h.S(e.length,"",!1,v.R);for(n=0;n<e.length;++n)r[n]=h.b(e[n]);return r.join(t)},a5:(e,t)=>h.dM(e,t,null,h.Z(e).c),bb(e,t,n){var r,i,a=e.length;for(r=0;r<a;++r){if(i=e[r],t.$1(i))return i;if(e.length!==a)throw h.d(h.af(e))}return n.$0()},T:(e,t)=>e[t],a0(e,t,n){if(t<0||t>e.length)throw h.d(h.X(t,0,e.length,"start",null));if(n<t||n>e.length)throw h.d(h.X(n,t,e.length,"end",null));return t===n?h.a([],h.Z(e)):h.a(e.slice(t,n),h.Z(e))},aX:(e,t,n)=>(h.aP(t,n,e.length),h.dM(e,t,n,h.Z(e).c)),gaS(e){var t=e.length;if(t>0)return e[t-1];throw h.d(h.ni())},H(e,t){var n;for(n=0;n<e.length;++n)if(d.aj(e[n],t))return!0;return!1},gA:e=>0===e.length,ga7:e=>0!==e.length,k:e=>h.iH(e,"[","]"),aW:(e,t)=>d.cT(e.slice(0),h.Z(e).c),bZ:e=>h.us(e,h.Z(e).c),gD:e=>new d.b4(e,e.length,h.Z(e).h("b4<1>")),gE:e=>h.cX(e),gi:e=>e.length,si(e,t){if(e.fixed$length&&h.a0(h.ac("set length")),t<0)throw h.d(h.X(t,0,null,"newLength",null));e.length=t},j(e,t){if(!(t>=0&&t<e.length))throw h.d(h.ex(e,t));return e[t]},m(e,t,n){if(e.immutable$list&&h.a0(h.ac("indexed set")),!(t>=0&&t<e.length))throw h.d(h.ex(e,t));e[t]=n},$ip:1,$ij:1,$io:1},d.iK.prototype={},d.b4.prototype={gt(){return this.d},p(){var e,t=this,n=t.a,r=n.length;if(t.b!==r)throw h.d(h.cI(n));return(e=t.c)>=r?(t.d=null,!1):(t.d=n[e],t.c=e+1,!0)},$iM:1},d.cc.prototype={ep(e){if(e>=-2147483648&&e<=2147483647)return 0|e;if(isFinite(e))return(e<0?Math.ceil(e):Math.floor(e))+0;throw h.d(h.ac(e+".toInt()"))},au(e,t){var n,r,i,a;if(t<2||t>36)throw h.d(h.X(t,2,36,"radix",null));return n=e.toString(t),41!==f.a.B(n,n.length-1)?n:(null==(r=/^([\da-z]+)(?:\.([\da-z]+))?\(e\+(\d+)\)$/.exec(n))&&h.a0(h.ac("Unexpected toString result: "+n)),n=r[1],i=+r[3],null!=(a=r[2])&&(n+=a,i-=a.length),n+f.a.bp("0",i))},k:e=>0===e&&1/e<0?"-0.0":""+e,gE(e){var t,n,r,i,a=0|e;return e===a?536870911&a:(t=Math.abs(e),n=Math.log(t)/.6931471805599453|0,r=Math.pow(2,n),599197*((9007199254740992*(i=t<1?t/r:r/t)|0)+(0xc95a6c285a6c9*i|0))+1259*n&536870911)},bo(e,t){var n=e%t;return 0===n?0:n>0?n:n+t},av(e,t){return(0|e)===e&&(t>=1||t<-1)?e/t|0:this.cq(e,t)},bG(e,t){return(0|e)===e?e/t|0:this.cq(e,t)},cq(e,t){var n=e/t;if(n>=-2147483648&&n<=2147483647)return 0|n;if(n>0){if(n!==1/0)return Math.floor(n)}else if(n>-1/0)return Math.ceil(n);throw h.d(h.ac("Result of truncating division is "+h.b(n)+": "+h.b(e)+" ~/ "+t))},aG(e,t){if(t<0)throw h.d(h.cG(t));return t>31?0:e<<t>>>0},ag(e,t){return e>0?this.cp(e,t):e>>(t>31?31:t)>>>0},dP(e,t){if(0>t)throw h.d(h.cG(t));return this.cp(e,t)},cp:(e,t)=>t>31?0:e>>>t,$iz:1,$iL:1},d.dw.prototype={$if:1},d.eV.prototype={},d.by.prototype={B(e,t){if(t<0)throw h.d(h.ex(e,t));return t>=e.length&&h.a0(h.ex(e,t)),e.charCodeAt(t)},J(e,t){if(t>=e.length)throw h.d(h.ex(e,t));return e.charCodeAt(t)},ak(e,t){if("string"!=typeof t)throw h.d(h.h5(t,null,null));return e+t},aF(e,t,n,r){var i=h.aP(t,n,e.length);return e.substring(0,t)+r+e.substring(i)},X(e,t,n){var r;if(n<0||n>e.length)throw h.d(h.X(n,0,e.length,null,null));return!((r=n+t.length)>e.length)&&t===e.substring(n,r)},W(e,t){return this.X(e,t,0)},u:(e,t,n)=>e.substring(t,h.aP(t,n,e.length)),br(e,t){return this.u(e,t,null)},eu(e){var t,n,r;if(void 0!==e.trimRight){if(0===(n=(t=e.trimRight()).length))return t;r=n-1,133===this.B(t,r)&&(n=d.ov(t,r))}else n=d.ov(e,e.length),t=e;return n===t.length?t:0===n?"":t.substring(0,n)},bp(e,t){var n,r;if(0>=t)return"";if(1===t||0===e.length)return e;if(t!==t>>>0)throw h.d(f.bg);for(n=e,r="";1==(1&t)&&(r=n+r),0!=(t>>>=1);)n+=n;return r},ap(e,t,n){var r=t-e.length;return r<=0?e:this.bp(n,r)+e},bd(e,t,n){if(n<0||n>e.length)throw h.d(h.X(n,0,e.length,null,null));return e.indexOf(t,n)},bN(e,t){return this.bd(e,t,0)},k:e=>e,gE(e){var t,n,r;for(t=e.length,n=0,r=0;r<t;++r)n=(n=n+e.charCodeAt(r)&536870911)+((524287&n)<<10)&536870911,n^=n>>6;return n=n+((67108863&n)<<3)&536870911,(n^=n>>11)+((16383&n)<<15)&536870911},gi:e=>e.length,$ie:1},h.bJ.prototype={gD(e){var t=h.C(this);return new h.dk(d.aC(this.ga9()),t.h("@<1>").I(t.z[1]).h("dk<1,2>"))},gi(e){return d.a3(this.ga9())},gA(e){return d.of(this.ga9())},ga7(e){return d.ti(this.ga9())},a5(e,t){var n=h.C(this);return h.hd(d.og(this.ga9(),t),n.c,n.z[1])},T(e,t){return h.C(this).z[1].a(d.eA(this.ga9(),t))},H(e,t){return d.oe(this.ga9(),t)},k(e){return d.aq(this.ga9())}},h.dk.prototype={p(){return this.a.p()},gt(){return this.$ti.z[1].a(this.a.gt())},$iM:1},h.c4.prototype={ga9(){return this.a}},h.dV.prototype={$ip:1},h.dQ.prototype={j(e,t){return this.$ti.z[1].a(d.od(this.a,t))},m(e,t,n){d.th(this.a,t,this.$ti.c.a(n))},si(e,t){d.tn(this.a,t)},C(e,t){d.ne(this.a,this.$ti.c.a(t))},aX(e,t,n){var r=this.$ti;return h.hd(d.tl(this.a,t,n),r.c,r.z[1])},$ip:1,$io:1},h.b5.prototype={ah(e,t){return new h.b5(this.a,this.$ti.h("@<1>").I(t).h("b5<1,2>"))},ga9(){return this.a}},h.c5.prototype={ai(e,t,n){var r=this.$ti;return new h.c5(this.a,r.h("@<1>").I(r.z[1]).I(t).I(n).h("c5<1,2,3,4>"))},v(e){return this.a.v(e)},j(e,t){return this.$ti.h("4?").a(this.a.j(0,t))},m(e,t,n){var r=this.$ti;this.a.m(0,r.c.a(t),r.z[1].a(n))},L(e,t){this.a.L(0,new h.he(this,t))},gM(){var e=this.$ti;return h.hd(this.a.gM(),e.c,e.z[2])},gi(e){var t=this.a;return t.gi(t)},gA(e){var t=this.a;return t.gA(t)}},h.he.prototype={$2(e,t){var n=this.a.$ti;this.b.$2(n.z[2].a(e),n.z[3].a(t))},$S(){return this.a.$ti.h("~(1,2)")}},h.eY.prototype={k(e){return"LateInitializationError: "+this.a}},h.fj.prototype={k(e){return"ReachabilityError: "+this.a}},h.cL.prototype={gi(e){return this.a.length},j(e,t){return f.a.B(this.a,t)}},h.n6.prototype={$0(){var e=new h.B(m.A,v.U);return e.af(null),e},$S:46},h.dF.prototype={k(e){return"Null is not a valid value for '"+this.a+"' of type '"+h.pD(this.$ti.c).k(0)+"'"},$iaX:1},h.p.prototype={},h.ag.prototype={gD(e){var t=this;return new h.a9(t,t.gi(t),h.C(t).h("a9<ag.E>"))},gA(e){return 0===this.gi(this)},H(e,t){var n,r=this,i=r.gi(r);for(n=0;n<i;++n){if(d.aj(r.T(0,n),t))return!0;if(i!==r.gi(r))throw h.d(h.af(r))}return!1},aj(e,t,n){return new h.aa(this,t,h.C(this).h("@<ag.E>").I(n).h("aa<1,2>"))},a5(e,t){return h.dM(this,t,null,h.C(this).h("ag.E"))}},h.dL.prototype={gdq(){var e=d.a3(this.a),t=this.c;return null==t||t>e?e:t},gdQ(){var e=d.a3(this.a),t=this.b;return t>e?e:t},gi(e){var t,n=d.a3(this.a),r=this.b;return r>=n?0:null==(t=this.c)||t>=n?n-r:t-r},T(e,t){var n=this,r=n.gdQ()+t;if(t<0||r>=n.gdq())throw h.d(h.eS(t,n,"index",null,null));return d.eA(n.a,r)},a5(e,t){var n,r,i=this;return h.aV(t,"count"),n=i.b+t,null!=(r=i.c)&&n>=r?new h.b7(i.$ti.h("b7<1>")):h.dM(i.a,n,r,i.$ti.c)},aW(e,t){var n,r,i,a=this,s=a.b,o=a.a,l=d.T(o),u=l.gi(o),c=a.c;if(null!=c&&c<u&&(u=c),(n=u-s)<=0)return d.b8(0,a.$ti.c);for(r=h.S(n,l.T(o,s),!1,a.$ti.c),i=1;i<n;++i)if(r[i]=l.T(o,s+i),l.gi(o)<u)throw h.d(h.af(a));return r}},h.a9.prototype={gt(){return this.d},p(){var e,t=this,n=t.a,r=d.T(n),i=r.gi(n);if(t.b!==i)throw h.d(h.af(n));return(e=t.c)>=i?(t.d=null,!1):(t.d=r.T(n,e),++t.c,!0)},$iM:1},h.bc.prototype={gD(e){var t=h.C(this);return new h.dB(d.aC(this.a),this.b,t.h("@<1>").I(t.z[1]).h("dB<1,2>"))},gi(e){return d.a3(this.a)},gA(e){return d.of(this.a)},T(e,t){return this.b.$1(d.eA(this.a,t))}},h.c7.prototype={$ip:1},h.dB.prototype={p(){var e=this,t=e.b;return t.p()?(e.a=e.c.$1(t.gt()),!0):(e.a=null,!1)},gt(){return this.a}},h.aa.prototype={gi(e){return d.a3(this.a)},T(e,t){return this.b.$1(d.eA(this.a,t))}},h.lC.prototype={gD(e){return new h.cC(d.aC(this.a),this.b,this.$ti.h("cC<1>"))},aj(e,t,n){return new h.bc(this,t,this.$ti.h("@<1>").I(n).h("bc<1,2>"))}},h.cC.prototype={p(){var e,t;for(e=this.a,t=this.b;e.p();)if(t.$1(e.gt()))return!0;return!1},gt(){return this.a.gt()}},h.bf.prototype={a5(e,t){return h.h6(t,"count"),h.aV(t,"count"),new h.bf(this.a,this.b+t,h.C(this).h("bf<1>"))},gD(e){return new h.dJ(d.aC(this.a),this.b,h.C(this).h("dJ<1>"))}},h.cN.prototype={gi(e){var t=d.a3(this.a)-this.b;return t>=0?t:0},a5(e,t){return h.h6(t,"count"),h.aV(t,"count"),new h.cN(this.a,this.b+t,this.$ti)},$ip:1},h.dJ.prototype={p(){var e,t;for(e=this.a,t=0;t<this.b;++t)e.p();return this.b=0,e.p()},gt(){return this.a.gt()}},h.b7.prototype={gD:e=>f.b8,gA:e=>!0,gi:e=>0,T(e,t){throw h.d(h.X(t,0,0,"index",null))},H:(e,t)=>!1,aj:(e,t,n)=>new h.b7(n.h("b7<0>")),a5(e,t){return h.aV(t,"count"),this}},h.dn.prototype={p:()=>!1,gt(){throw h.d(h.ni())},$iM:1},h.dq.prototype={si(e,t){throw h.d(h.ac("Cannot change the length of a fixed-length list"))},C(e,t){throw h.d(h.ac("Cannot add to a fixed-length list"))}},h.fu.prototype={m(e,t,n){throw h.d(h.ac("Cannot modify an unmodifiable list"))},si(e,t){throw h.d(h.ac("Cannot change the length of an unmodifiable list"))},C(e,t){throw h.d(h.ac("Cannot add to an unmodifiable list"))}},h.d0.prototype={},h.d_.prototype={gE(e){var t=this._hashCode;return null!=t||(t=664597*d.bW(this.a)&536870911,this._hashCode=t),t},k(e){return'Symbol("'+h.b(this.a)+'")'},N(e,t){return null!=t&&t instanceof h.d_&&this.a==t.a},$icA:1},h.el.prototype={},h.dl.prototype={},h.cM.prototype={ai(e,t,n){var r=h.C(this);return h.oA(this,r.c,r.z[1],t,n)},gA(e){return 0===this.gi(this)},k(e){return h.nn(this)},m(e,t,n){h.tP(),h.aW(_.g)},$ih:1},h.as.prototype={gi(e){return this.a},v(e){return"string"==typeof e&&"__proto__"!==e&&this.b.hasOwnProperty(e)},j(e,t){return this.v(t)?this.b[t]:null},L(e,t){var n,r,i,a,s=this.c;for(n=s.length,r=this.b,i=0;i<n;++i)a=s[i],t.$2(a,r[a])},gM(){return new h.dS(this,this.$ti.h("dS<1>"))}},h.dS.prototype={gD(e){var t=this.a.c;return new d.b4(t,t.length,h.Z(t).h("b4<1>"))},gi(e){return this.a.c.length}},h.Y.prototype={aK(){var e,t,n=this,r=n.$map;return null==r&&(e=n.$ti,t=h.tZ(e.h("1?")),r=h.ur(h.w6(),t,e.c,e.z[1]),h.pF(n.a,r),n.$map=r),r},v(e){return this.aK().v(e)},j(e,t){return this.aK().j(0,t)},L(e,t){this.aK().L(0,t)},gM(){var e=this.aK();return new h.aM(e,h.C(e).h("aM<1>"))},gi(e){return this.aK().a}},h.hX.prototype={$1(e){return this.a.b(e)},$S:14},h.iI.prototype={gcP(){return this.a},gcT(){var e,t,n,r,i=this;if(1===i.c)return f.at;if(0==(t=(e=i.d).length-i.e.length-i.f))return f.at;for(n=[],r=0;r<t;++r)n.push(e[r]);return n.fixed$length=Array,n.immutable$list=Array,n},gcQ(){var e,t,n,r,i,a,s=this;if(0!==s.c)return f.ay;if(t=(e=s.e).length,r=(n=s.d).length-t-s.f,0===t)return f.ay;for(i=new h.aE(v.eo),a=0;a<t;++a)i.m(0,new h.d_(e[a]),n[r+a]);return new h.dl(i,v.gF)}},h.k4.prototype={$2(e,t){var n=this.a;n.b=n.b+"$"+h.b(e),this.b.push(e),this.c.push(t),++n.a},$S:68},h.ll.prototype={a8(e){var t,n,r=this,i=new RegExp(r.a).exec(e);return null==i?null:(t=Object.create(null),-1!==(n=r.b)&&(t.arguments=i[n+1]),-1!==(n=r.c)&&(t.argumentsExpr=i[n+1]),-1!==(n=r.d)&&(t.expr=i[n+1]),-1!==(n=r.e)&&(t.method=i[n+1]),-1!==(n=r.f)&&(t.receiver=i[n+1]),t)}},h.dG.prototype={k(e){var t=this.b;return null==t?"NoSuchMethodError: "+h.b(this.a):"NoSuchMethodError: method not found: '"+t+"' on null"}},h.eX.prototype={k(e){var t,n=this,r="NoSuchMethodError: method not found: '",i=n.b;return null==i?"NoSuchMethodError: "+h.b(n.a):null==(t=n.c)?r+i+"' ("+h.b(n.a)+")":r+i+"' on '"+t+"' ("+h.b(n.a)+")"}},h.ft.prototype={k(e){var t=this.a;return 0===t.length?"Error":"Error: "+t}},h.fe.prototype={k(e){return"Throw of null ('"+(null===this.a?"null":"undefined")+"' from JavaScript)"},$ia7:1},h.dp.prototype={},h.e8.prototype={k(e){var t,n=this.b;return null!=n?n:(t=null!==(n=this.a)&&"object"==typeof n?n.stack:null,this.b=null==t?"":t)},$iam:1},h.c6.prototype={k(e){var t=this.constructor,n=null==t?null:t.name;return"Closure '"+h.pW(null==n?"unknown":n)+"'"},$iaD:1,geB(){return this},$C:"$1",$R:1,$D:null},h.eH.prototype={$C:"$0",$R:0},h.eI.prototype={$C:"$2",$R:2},h.fp.prototype={},h.fn.prototype={k(e){var t=this.$static_name;return null==t?"Closure of unknown static method":"Closure '"+h.pW(t)+"'"}},h.cK.prototype={N(e,t){return null!=t&&(this===t||t instanceof h.cK&&this.$_target===t.$_target&&this.a===t.a)},gE(e){return(h.fX(this.a)^h.cX(this.$_target))>>>0},k(e){return"Closure '"+h.b(this.$_name)+"' of Instance of '"+h.b(h.k5(this.a))+"'"}},h.fm.prototype={k(e){return"RuntimeError: "+this.a}},h.me.prototype={},h.aE.prototype={gi(e){return this.a},gA(e){return 0===this.a},gM(){return new h.aM(this,h.C(this).h("aM<1>"))},gV(){var e=h.C(this);return h.jM(new h.aM(this,e.h("aM<1>")),new h.iO(this),e.c,e.z[1])},v(e){var t,n;return"string"==typeof e?null!=(t=this.b)&&null!=t[e]:"number"==typeof e&&(1073741823&e)===e?null!=(n=this.c)&&null!=n[e]:this.cI(e)},cI(e){var t=this.d;return null!=t&&this.bf(t[this.be(e)],e)>=0},j(e,t){var n,r,i,a=null;return"string"==typeof t?null==(n=this.b)||null==(r=n[t])?a:r.b:"number"==typeof t&&(1073741823&t)===t?null==(i=this.c)||null==(r=i[t])?a:r.b:this.cJ(t)},cJ(e){var t,n,r=this.d;return null==r?null:(t=r[this.be(e)],(n=this.bf(t,e))<0?null:t[n].b)},m(e,t,n){var r,i,a=this;"string"==typeof t?(r=a.b,a.c5(null==r?a.b=a.bE():r,t,n)):"number"==typeof t&&(1073741823&t)===t?(i=a.c,a.c5(null==i?a.c=a.bE():i,t,n)):a.cK(t,n)},cK(e,t){var n,r,i,a=this,s=a.d;null==s&&(s=a.d=a.bE()),null==(r=s[n=a.be(e)])?s[n]=[a.bF(e,t)]:(i=a.bf(r,e))>=0?r[i].b=t:r.push(a.bF(e,t))},bV(e,t){var n;return this.v(e)?this.j(0,e):(n=t.$0(),this.m(0,e,n),n)},L(e,t){for(var n=this,r=n.e,i=n.r;null!=r;){if(t.$2(r.a,r.b),i!==n.r)throw h.d(h.af(n));r=r.c}},c5(e,t,n){var r=e[t];null==r?e[t]=this.bF(t,n):r.b=n},bF(e,t){var n=this,r=new h.jJ(e,t);return null==n.e?n.e=n.f=r:n.f=n.f.c=r,++n.a,n.r=n.r+1&1073741823,r},be:e=>1073741823&d.bW(e),bf(e,t){var n,r;if(null==e)return-1;for(n=e.length,r=0;r<n;++r)if(d.aj(e[r].a,t))return r;return-1},k(e){return h.nn(this)},bE(){var e=Object.create(null);return e["<non-identifier-key>"]=e,delete e["<non-identifier-key>"],e}},h.iO.prototype={$1(e){return this.a.j(0,e)},$S(){return h.C(this.a).h("2(1)")}},h.jJ.prototype={},h.aM.prototype={gi(e){return this.a.a},gA(e){return 0===this.a.a},gD(e){var t=this.a,n=new h.cs(t,t.r,this.$ti.h("cs<1>"));return n.c=t.e,n},H(e,t){return this.a.v(t)}},h.cs.prototype={gt(){return this.d},p(){var e,t=this,n=t.a;if(t.b!==n.r)throw h.d(h.af(n));return null==(e=t.c)?(t.d=null,!1):(t.d=e.a,t.c=e.c,!0)},$iM:1},h.mQ.prototype={$1(e){return this.a(e)},$S:30},h.mR.prototype={$2(e,t){return this.a(e,t)},$S:33},h.mS.prototype={$1(e){return this.a(e)},$S:49},h.iJ.prototype={k(e){return"RegExp/"+this.a+"/"+this.b.flags},aR(e){var t;return"string"!=typeof e&&h.a0(h.cG(e)),null==(t=this.b.exec(e))?null:new h.mc(t)}},h.mc.prototype={},h.dD.prototype={dA(e,t,n,r){var i=h.X(t,0,n,r,null);throw h.d(i)},cc(e,t,n,r){(t>>>0!==t||t>n)&&this.dA(e,t,n,r)}},h.cW.prototype={gi:e=>e.length,dO(e,t,n,r,i){var a,s,o=e.length;if(this.cc(e,t,o,"start"),this.cc(e,n,o,"end"),t>n)throw h.d(h.X(t,0,n,null,null));if(a=n-t,i<0)throw h.d(h.R(i,null));if((s=r.length)-i<a)throw h.d(h.cZ("Not enough elements"));0===i&&s===a||(r=r.subarray(i,i+a)),e.set(r,t)},$iau:1},h.dC.prototype={j:(e,t)=>(h.bl(t,e,e.length),e[t]),m(e,t,n){h.bl(t,e,e.length),e[t]=n},$ip:1,$ij:1,$io:1},h.aw.prototype={m(e,t,n){h.bl(t,e,e.length),e[t]=n},a4(e,t,n,r,i){v.eB.b(r)?this.dO(e,t,n,r,i):this.d7(e,t,n,r,i)},d1(e,t,n,r){return this.a4(e,t,n,r,0)},$ip:1,$ij:1,$io:1},h.f4.prototype={a0:(e,t,n)=>new Float32Array(e.subarray(t,h.bP(t,n,e.length)))},h.f5.prototype={a0:(e,t,n)=>new Float64Array(e.subarray(t,h.bP(t,n,e.length)))},h.f6.prototype={j:(e,t)=>(h.bl(t,e,e.length),e[t]),a0:(e,t,n)=>new Int16Array(e.subarray(t,h.bP(t,n,e.length)))},h.f7.prototype={j:(e,t)=>(h.bl(t,e,e.length),e[t]),a0:(e,t,n)=>new Int32Array(e.subarray(t,h.bP(t,n,e.length)))},h.f8.prototype={j:(e,t)=>(h.bl(t,e,e.length),e[t]),a0:(e,t,n)=>new Int8Array(e.subarray(t,h.bP(t,n,e.length)))},h.f9.prototype={j:(e,t)=>(h.bl(t,e,e.length),e[t]),a0:(e,t,n)=>new Uint16Array(e.subarray(t,h.bP(t,n,e.length)))},h.fa.prototype={j:(e,t)=>(h.bl(t,e,e.length),e[t]),a0:(e,t,n)=>new Uint32Array(e.subarray(t,h.bP(t,n,e.length)))},h.dE.prototype={gi:e=>e.length,j:(e,t)=>(h.bl(t,e,e.length),e[t]),a0:(e,t,n)=>new Uint8ClampedArray(e.subarray(t,h.bP(t,n,e.length)))},h.cu.prototype={gi:e=>e.length,j:(e,t)=>(h.bl(t,e,e.length),e[t]),a0:(e,t,n)=>new Uint8Array(e.subarray(t,h.bP(t,n,e.length))),$icu:1,$ia6:1},h.e4.prototype={},h.e5.prototype={},h.e6.prototype={},h.e7.prototype={},h.aQ.prototype={h(e){return h.ml(g.typeUniverse,this,e)},I(e){return h.vl(g.typeUniverse,this,e)}},h.fG.prototype={},h.ed.prototype={k(e){return h.aA(this.a,null)},$ibi:1},h.fF.prototype={k(e){return this.a}},h.ee.prototype={$iaX:1},h.lO.prototype={$1(e){var t=this.a,n=t.a;t.a=null,n.$0()},$S:15},h.lN.prototype={$1(e){var t,n;this.a.a=e,t=this.b,n=this.c,t.firstChild?t.removeChild(n):t.appendChild(n)},$S:121},h.lP.prototype={$0(){this.a.$0()},$S:2},h.lQ.prototype={$0(){this.a.$0()},$S:2},h.mj.prototype={dc(e,t){if(null==i.setTimeout)throw h.d(h.ac("`setTimeout()` not found."));i.setTimeout(h.mH(new h.mk(this,t),0),e)}},h.mk.prototype={$0(){this.b.$0()},$S:1},h.fz.prototype={a2(e){var t,n=this;n.b?(t=n.a,n.$ti.h("a5<1>").b(e)?t.ca(e):t.bx(e)):n.a.af(e)},bH(e,t){var n;null==t&&(t=h.eE(e)),n=this.a,this.b?n.az(e,t):n.b1(e,t)}},h.mp.prototype={$1(e){return this.a.$2(0,e)},$S:34},h.mq.prototype={$2(e,t){this.a.$2(1,new h.dp(e,t))},$S:42},h.mG.prototype={$2(e,t){this.a(e,t)},$S:48},h.d3.prototype={k(e){return"IterationMarker("+this.b+", "+h.b(this.a)+")"}},h.aG.prototype={gt(){var e=this.c;return null==e?this.b:e.gt()},p(){for(var e,t,n,r,i,a=this;;){if(null!=(e=a.c)){if(e.p())return!0;a.c=null}if(!((t=function(e,t,n){for(var r,i=0;;)try{return e(i,r)}catch(e){r=e,i=1}}(a.a))instanceof h.d3))return a.b=t,!0;if(2!==(n=t.b)){if(e=t.a,3===n)throw e;(i=d.aC(e))instanceof h.aG?(null==(e=a.d)&&(e=a.d=[]),e.push(a.a),a.a=i.a):a.c=i}else{if(null==(r=a.d)||0===r.length)return a.b=null,!1;a.a=r.pop()}}return!1},$iM:1},h.ec.prototype={gD(e){return new h.aG(this.a(),this.$ti.h("aG<1>"))}},h.eD.prototype={k(e){return h.b(this.a)},$iG:1,gaZ(){return this.b}},h.fC.prototype={bH(e,t){var n;if(h.bS(e,"error",v.K),0!=(30&(n=this.a).a))throw h.d(h.cZ("Future already completed"));null==t&&(t=h.eE(e)),n.b1(e,t)},P(e){return this.bH(e,null)}},h.ay.prototype={a2(e){var t=this.a;if(0!=(30&t.a))throw h.d(h.cZ("Future already completed"));t.af(e)},b9(){return this.a2(null)}},h.bK.prototype={e8(e){return 6!=(15&this.c)||this.b.b.bY(this.d,e.a)},e3(e){var t,n,r=this.e,i=this.b.b;n=v.C.b(r)?i.eh(r,e.a,e.b):i.bY(r,e.a);try{return n}catch(t){if(v.eK.b(h.K(t))){if(0!=(1&this.c))throw h.d(h.R("The error handler of Future.then must return a value of the returned future's type","onError"));throw h.d(h.R("The error handler of Future.catchError must return a value of the future's type","onError"))}throw t}}},h.B.prototype={ar(e,t,n,r){var i,a,s=m.A;if(s===f.i){if(null!=n&&!v.C.b(n)&&!v.v.b(n))throw h.d(h.h5(n,"onError",_.c))}else null!=n&&(n=h.wc(n,s));return i=new h.B(s,r.h("B<0>")),a=null==n?1:3,this.b0(new h.bK(i,a,t,n,this.$ti.h("@<1>").I(r).h("bK<1,2>"))),i},cY(e,t,n){return this.ar(e,t,null,n)},cs(e,t,n){var r=new h.B(m.A,n.h("B<0>"));return this.b0(new h.bK(r,3,e,t,this.$ti.h("@<1>").I(n).h("bK<1,2>"))),r},bm(e){var t=this.$ti,n=new h.B(m.A,t);return this.b0(new h.bK(n,8,e,null,t.h("@<1>").I(t.c).h("bK<1,2>"))),n},dM(e){this.a=1&this.a|16,this.c=e},bv(e){this.a=30&e.a|1&this.a,this.c=e.c},b0(e){var t=this,n=t.a;if(n<=3)e.a=t.c,t.c=e;else{if(0!=(4&n)){if(0==(24&(n=t.c).a))return void n.b0(e);t.bv(n)}h.df(null,null,t.b,new h.lW(t,e))}},cn(e){var t,n,r,i,a,s=this,o={};if(o.a=e,null!=e)if((t=s.a)<=3){if(n=s.c,s.c=e,null!=n){for(r=e.a,i=e;null!=r;i=r,r=a)a=r.a;i.a=n}}else{if(0!=(4&t)){if(0==(24&(t=s.c).a))return void t.cn(e);s.bv(t)}o.a=s.b8(e),h.df(null,null,s.b,new h.m2(o,s))}},b7(){var e=this.c;return this.c=null,this.b8(e)},b8(e){var t,n,r;for(t=e,n=null;null!=t;n=t,t=r)r=t.a,t.a=n;return n},c9(e){var t,n,r,i=this;i.a^=2;try{e.ar(0,new h.lZ(i),new h.m_(i),v.P)}catch(r){t=h.K(r),n=h.aR(r),h.pT(new h.m0(i,t,n))}},bx(e){var t=this,n=t.b7();t.a=8,t.c=e,h.d2(t,n)},az(e,t){var n=this.b7();this.dM(h.h8(e,t)),h.d2(this,n)},af(e){this.$ti.h("a5<1>").b(e)?this.ca(e):this.dg(e)},dg(e){this.a^=2,h.df(null,null,this.b,new h.lY(this,e))},ca(e){var t=this;t.$ti.b(e)?0!=(16&e.a)?(t.a^=2,h.df(null,null,t.b,new h.m1(t,e))):h.nr(e,t):t.c9(e)},b1(e,t){this.a^=2,h.df(null,null,this.b,new h.lX(this,e,t))},$ia5:1},h.lW.prototype={$0(){h.d2(this.a,this.b)},$S:1},h.m2.prototype={$0(){h.d2(this.b,this.a.a)},$S:1},h.lZ.prototype={$1(e){var t,n,r,i=this.a;i.a^=2;try{i.bx(i.$ti.c.a(e))}catch(r){t=h.K(r),n=h.aR(r),i.az(t,n)}},$S:15},h.m_.prototype={$2(e,t){this.a.az(e,t)},$S:51},h.m0.prototype={$0(){this.a.az(this.b,this.c)},$S:1},h.lY.prototype={$0(){this.a.bx(this.b)},$S:1},h.m1.prototype={$0(){h.nr(this.b,this.a)},$S:1},h.lX.prototype={$0(){this.a.az(this.b,this.c)},$S:1},h.m5.prototype={$0(){var e,t,n,r,i,a,s=this,o=null;try{o=(n=s.a.a).b.b.cV(n.d)}catch(r){return e=h.K(r),t=h.aR(r),s.c?(i=e,n=i=null==(n=s.b.a.c.a)?null==i:n===i):n=!1,(i=s.a).c=n?s.b.a.c:h.h8(e,t),void(i.b=!0)}o instanceof h.B&&0!=(24&o.a)?0!=(16&o.a)&&((n=s.a).c=o.c,n.b=!0):v.d.b(o)&&(a=s.b.a,(n=s.a).c=d.tt(o,new h.m6(a),v.z),n.b=!1)},$S:1},h.m6.prototype={$1(e){return this.a},$S:52},h.m4.prototype={$0(){var e,t,n,r,i;try{r=(n=this.a).a,n.c=r.b.b.bY(r.d,this.b)}catch(i){e=h.K(i),t=h.aR(i),(n=this.a).c=h.h8(e,t),n.b=!0}},$S:1},h.m3.prototype={$0(){var e,t,n,r,i,a,s,o,l=this;try{e=l.a.a.c,(r=l.b).a.e8(e)&&null!=r.a.e&&(r.c=r.a.e3(e),r.b=!1)}catch(i){t=h.K(i),n=h.aR(i),a=(r=l.a.a.c).a,s=t,(o=l.b).c=(null==a?null==s:a===s)?r:h.h8(t,n),o.b=!0}},$S:1},h.fA.prototype={},h.bg.prototype={gi(e){var t={},n=new h.B(m.A,v.fJ);return t.a=0,this.bP(new h.lh(t,this),!0,new h.li(t,n),n.gdk()),n}},h.lf.prototype={$1(e){var t=this.a;t.aH(e),t.aI()},$S(){return this.b.h("k(0)")}},h.lg.prototype={$2(e,t){var n=this.a;n.b_(e,t),n.aI()},$S:54},h.lh.prototype={$1(e){++this.a.a},$S(){return this.b.$ti.h("~(1)")}},h.li.prototype={$0(){var e=this.b,t=this.a.a,n=e.b7();e.a=8,e.c=t,h.d2(e,n)},$S:1},h.fo.prototype={},h.d7.prototype={gdH(){return 0==(8&this.b)?this.a:this.a.gc0()},b2(){var e,t=this;return 0==(8&t.b)?null==(e=t.a)?t.a=new h.ea:e:e=t.a.gc0()},gaB(){var e=this.a;return 0!=(8&this.b)?e.gc0():e},bs(){return 0!=(4&this.b)?new h.bG("Cannot add event after closing"):new h.bG("Cannot add event while adding a stream")},ce(){var e=this.c;return null==e&&(e=this.c=0!=(2&this.b)?m.fZ():new h.B(m.A,v.D)),e},C(e,t){if(this.b>=4)throw h.d(this.bs());this.aH(t)},a6(){var e=this,t=e.b;if(0!=(4&t))return e.ce();if(t>=4)throw h.d(e.bs());return e.aI(),e.ce()},aI(){var e=this.b|=4;0!=(1&e)?this.aM():0==(3&e)&&this.b2().C(0,f.M)},aH(e){var t=this.b;0!=(1&t)?this.aA(e):0==(3&t)&&this.b2().C(0,new h.cD(e))},b_(e,t){var n=this.b;0!=(1&n)?this.aN(e,t):0==(3&n)&&this.b2().C(0,new h.dU(e,t))},dR(e,t,n,r){var i,a,s,o,l,u,c=this;if(0!=(3&c.b))throw h.d(h.cZ("Stream has already been listened to."));return i=m.A,a=r?1:0,s=h.v5(i,t),o=new h.dT(c,e,s,n,i,a),l=c.gdH(),0!=(8&(i=c.b|=1))?((u=c.a).sc0(o),u.aq()):c.a=o,o.dN(l),o.bC(new h.mi(c)),o},dJ(e){var t,n,r,i,a,s,o,l=this,u=null;if(0!=(8&l.b)&&(u=l.a.K()),l.a=null,l.b=4294967286&l.b|2,null!=(t=l.r))if(null==u)try{n=t.$0(),v.bq.b(n)&&(u=n)}catch(a){r=h.K(a),i=h.aR(a),(s=new h.B(m.A,v.D)).b1(r,i),u=s}else u=u.bm(t);return o=new h.mh(l),null!=u?u=u.bm(o):o.$0(),u}},h.mi.prototype={$0(){h.nD(this.a.d)},$S:1},h.mh.prototype={$0(){var e=this.a.c;null!=e&&0==(30&e.a)&&e.af(null)},$S:1},h.fP.prototype={aA(e){this.gaB().aH(e)},aN(e,t){this.gaB().b_(e,t)},aM(){this.gaB().dj()}},h.fB.prototype={aA(e){this.gaB().aw(new h.cD(e))},aN(e,t){this.gaB().aw(new h.dU(e,t))},aM(){this.gaB().aw(f.M)}},h.b_.prototype={},h.d8.prototype={},h.ah.prototype={gE(e){return(892482866^h.cX(this.a))>>>0},N(e,t){return null!=t&&(this===t||t instanceof h.ah&&t.a===this.a)}},h.dT.prototype={ck(){return this.w.dJ(this)},b5(){var e=this.w;0!=(8&e.b)&&e.a.aV(),h.nD(e.e)},b6(){var e=this.w;0!=(8&e.b)&&e.a.aq(),h.nD(e.f)}},h.dP.prototype={dN(e){var t=this;null!=e&&(t.r=e,null!=e.c&&(t.e=(64|t.e)>>>0,e.aY(t)))},cS(e){var t,n,r=this,i=r.e;0==(8&i)&&(t=(i+128|4)>>>0,r.e=t,i<128&&null!=(n=r.r)&&1===n.a&&(n.a=3),0==(4&i)&&0==(32&t)&&r.bC(r.gcl()))},aV(){return this.cS(null)},aq(){var e=this,t=e.e;0==(8&t)&&t>=128&&(t=e.e=t-128)<128&&(0!=(64&t)&&null!=e.r.c?e.r.aY(e):(t=(4294967291&t)>>>0,e.e=t,0==(32&t)&&e.bC(e.gcm())))},K(){var e=this,t=(4294967279&e.e)>>>0;return e.e=t,0==(8&t)&&e.bt(),null==(t=e.f)?m.fZ():t},bt(){var e,t=this,n=t.e=(8|t.e)>>>0;0!=(64&n)&&1===(e=t.r).a&&(e.a=3),0==(32&n)&&(t.r=null),t.f=t.ck()},aH(e){var t=this.e;0==(8&t)&&(t<32?this.aA(e):this.aw(new h.cD(e)))},b_(e,t){var n=this.e;0==(8&n)&&(n<32?this.aN(e,t):this.aw(new h.dU(e,t)))},dj(){var e=this,t=e.e;0==(8&t)&&(t=(2|t)>>>0,e.e=t,t<32?e.aM():e.aw(f.M))},b5(){},b6(){},ck:()=>null,aw(e){var t,n=this,r=n.r;null==r&&(r=new h.ea),n.r=r,r.C(0,e),0==(64&(t=n.e))&&(t=(64|t)>>>0,n.e=t,t<128&&r.aY(n))},aA(e){var t=this,n=t.e;t.e=(32|n)>>>0,t.d.cX(t.a,e),t.e=(4294967263&t.e)>>>0,t.bu(0!=(4&n))},aN(e,t){var n,r=this,i=r.e,a=new h.lT(r,e,t);0!=(1&i)?(r.e=(16|i)>>>0,r.bt(),null!=(n=r.f)&&n!==m.fZ()?n.bm(a):a.$0()):(a.$0(),r.bu(0!=(4&i)))},aM(){var e,t=this,n=new h.lS(t);t.bt(),t.e=(16|t.e)>>>0,null!=(e=t.f)&&e!==m.fZ()?e.bm(n):n.$0()},bC(e){var t=this,n=t.e;t.e=(32|n)>>>0,e.$0(),t.e=(4294967263&t.e)>>>0,t.bu(0!=(4&n))},bu(e){var t,n,r=this,i=r.e;for(0!=(64&i)&&null==r.r.c&&(t=0!=(4&(i=r.e=(4294967231&i)>>>0))&&i<128&&!1!==(t=null==(t=r.r)?null:null==t.c))&&(i=(4294967291&i)>>>0,r.e=i);;e=n){if(0!=(8&i))return void(r.r=null);if(e===(n=0!=(4&i)))break;r.e=(32^i)>>>0,n?r.b5():r.b6(),i=(4294967263&r.e)>>>0,r.e=i}0!=(64&i)&&i<128&&r.r.aY(r)}},h.lT.prototype={$0(){var e,t,n=this.a,r=n.e;0!=(8&r)&&0==(16&r)||(n.e=(32|r)>>>0,e=n.b,r=this.b,t=n.d,v.k.b(e)?t.ek(e,r,this.c):t.cX(e,r),n.e=(4294967263&n.e)>>>0)},$S:1},h.lS.prototype={$0(){var e=this.a,t=e.e;0!=(16&t)&&(e.e=(42|t)>>>0,e.d.cW(e.c),e.e=(4294967263&e.e)>>>0)},$S:1},h.e9.prototype={bP(e,t,n,r){return this.a.dR(e,r,n,!0===t)},bO(e,t,n){return this.bP(e,null,t,n)},e6(e,t){return this.bP(e,null,t,null)}},h.fE.prototype={gaE(){return this.a},saE(e){return this.a=e}},h.cD.prototype={bT(e){e.aA(this.b)}},h.dU.prototype={bT(e){e.aN(this.b,this.c)}},h.lU.prototype={bT(e){e.aM()},gaE:()=>null,saE(e){throw h.d(h.cZ("No events after a done."))}},h.fK.prototype={aY(e){var t=this,n=t.a;1!==n&&(n>=1||h.pT(new h.md(t,e)),t.a=1)}},h.md.prototype={$0(){var e,t,n=this.a,r=n.a;n.a=0,3!==r&&(t=(e=n.b).gaE(),n.b=t,null==t&&(n.c=null),e.bT(this.b))},$S:1},h.ea.prototype={C(e,t){var n=this,r=n.c;null==r?n.b=n.c=t:(r.saE(t),n.c=t)}},h.fN.prototype={},h.mo.prototype={},h.mD.prototype={$0(){h.tV(this.a,this.b),h.aW(_.g)},$S:1},h.mf.prototype={cW(e){var t,n,r;try{if(f.i===m.A)return void e.$0();h.pv(null,null,this,e)}catch(r){t=h.K(r),n=h.aR(r),h.de(t,n)}},em(e,t){var n,r,i;try{if(f.i===m.A)return void e.$1(t);h.px(null,null,this,e,t)}catch(i){n=h.K(i),r=h.aR(i),h.de(n,r)}},cX(e,t){return this.em(e,t,v.z)},ej(e,t,n){var r,i,a;try{if(f.i===m.A)return void e.$2(t,n);h.pw(null,null,this,e,t,n)}catch(a){r=h.K(a),i=h.aR(a),h.de(r,i)}},ek(e,t,n){return this.ej(e,t,n,v.z,v.z)},cu(e){return new h.mg(this,e)},eg(e){return m.A===f.i?e.$0():h.pv(null,null,this,e)},cV(e){return this.eg(e,v.z)},el(e,t){return m.A===f.i?e.$1(t):h.px(null,null,this,e,t)},bY(e,t){return this.el(e,t,v.z,v.z)},ei(e,t,n){return m.A===f.i?e.$2(t,n):h.pw(null,null,this,e,t,n)},eh(e,t,n){return this.ei(e,t,n,v.z,v.z,v.z)},ed:e=>e,bX(e){return this.ed(e,v.z,v.z,v.z)}},h.mg.prototype={$0(){return this.a.cW(this.b)},$S:1},h.dY.prototype={gi(e){return this.a},gA(e){return 0===this.a},gM(){return new h.dZ(this,this.$ti.h("dZ<1>"))},v(e){var t,n;return"string"==typeof e&&"__proto__"!==e?null!=(t=this.b)&&null!=t[e]:"number"==typeof e&&(1073741823&e)===e?null!=(n=this.c)&&null!=n[e]:this.dn(e)},dn(e){var t=this.d;return null!=t&&this.am(this.cf(t,e),e)>=0},j(e,t){var n,r;return"string"==typeof t&&"__proto__"!==t?null==(n=this.b)?null:h.p6(n,t):"number"==typeof t&&(1073741823&t)===t?null==(r=this.c)?null:h.p6(r,t):this.ds(t)},ds(e){var t,n,r=this.d;return null==r?null:(t=this.cf(r,e),(n=this.am(t,e))<0?null:t[n+1])},m(e,t,n){var r,i,a,s,o,l=this;"string"==typeof t&&"__proto__"!==t?(r=l.b,l.df(null==r?l.b=h.p7():r,t,n)):(null==(i=l.d)&&(i=l.d=h.p7()),null==(s=i[a=1073741823&h.fX(t)])?(h.ns(i,a,[t,n]),++l.a,l.e=null):(o=l.am(s,t))>=0?s[o+1]=n:(s.push(t,n),++l.a,l.e=null))},L(e,t){var n,r,i,a=this,s=a.cd();for(n=s.length,r=0;r<n;++r)if(i=s[r],t.$2(i,a.j(0,i)),s!==a.e)throw h.d(h.af(a))},cd(){var e,t,n,r,i,a,s,o,l,u,c=this,d=c.e;if(null!=d)return d;if(d=h.S(c.a,null,!1,v.z),null!=(e=c.b))for(n=(t=Object.getOwnPropertyNames(e)).length,r=0,i=0;i<n;++i)d[r]=t[i],++r;else r=0;if(null!=(a=c.c))for(n=(t=Object.getOwnPropertyNames(a)).length,i=0;i<n;++i)d[r]=+t[i],++r;if(null!=(s=c.d))for(n=(t=Object.getOwnPropertyNames(s)).length,i=0;i<n;++i)for(l=(o=s[t[i]]).length,u=0;u<l;u+=2)d[r]=o[u],++r;return c.e=d},df(e,t,n){null==e[t]&&(++this.a,this.e=null),h.ns(e,t,n)},cf:(e,t)=>e[1073741823&h.fX(t)]},h.e0.prototype={am(e,t){var n,r,i;if(null==e)return-1;for(n=e.length,r=0;r<n;r+=2)if(null==(i=e[r])?null==t:i===t)return r;return-1}},h.dZ.prototype={gi(e){return this.a.a},gA(e){return 0===this.a.a},gD(e){var t=this.a;return new h.e_(t,t.cd(),this.$ti.h("e_<1>"))},H(e,t){return this.a.v(t)}},h.e_.prototype={gt(){return this.d},p(){var e=this,t=e.b,n=e.c,r=e.a;if(t!==r.e)throw h.d(h.af(r));return n>=t.length?(e.d=null,!1):(e.d=t[n],e.c=n+1,!0)},$iM:1},h.e1.prototype={j(e,t){return this.y.$1(t)?this.d4(t):null},m(e,t,n){this.d5(t,n)},v(e){return!!this.y.$1(e)&&this.d3(e)},be(e){return 1073741823&this.x.$1(e)},bf(e,t){var n,r,i;if(null==e)return-1;for(n=e.length,r=this.w,i=0;i<n;++i)if(r.$2(e[i].a,t))return i;return-1}},h.ma.prototype={$1(e){return this.a.b(e)},$S:62},h.b0.prototype={gD(e){var t=this,n=new h.e2(t,t.r,h.C(t).h("e2<1>"));return n.c=t.e,n},gi(e){return this.a},gA(e){return 0===this.a},ga7(e){return 0!==this.a},H(e,t){var n,r;return"string"==typeof t&&"__proto__"!==t?null!=(n=this.b)&&null!=n[t]:"number"==typeof t&&(1073741823&t)===t?null!=(r=this.c)&&null!=r[t]:this.dm(t)},dm(e){var t=this.d;return null!=t&&this.am(t[this.by(e)],e)>=0},C(e,t){var n,r,i=this;return"string"==typeof t&&"__proto__"!==t?(n=i.b,i.c7(null==n?i.b=h.nt():n,t)):"number"==typeof t&&(1073741823&t)===t?(r=i.c,i.c7(null==r?i.c=h.nt():r,t)):i.dd(t)},dd(e){var t,n,r=this,i=r.d;if(null==i&&(i=r.d=h.nt()),null==(n=i[t=r.by(e)]))i[t]=[r.bw(e)];else{if(r.am(n,e)>=0)return!1;n.push(r.bw(e))}return!0},ee(e,t){var n=this;return"string"==typeof t&&"__proto__"!==t?n.co(n.b,t):"number"==typeof t&&(1073741823&t)===t?n.co(n.c,t):n.dK(t)},dK(e){var t,n,r,i,a=this,s=a.d;return null!=s&&(n=s[t=a.by(e)],!((r=a.am(n,e))<0||(i=n.splice(r,1)[0],0===n.length&&delete s[t],a.ct(i),0)))},dr(e,t){for(var n,r,i,a,s=this,o=s.e;null!=o;o=r){if(n=o.a,r=o.b,i=s.r,a=e.$1(n),i!==s.r)throw h.d(h.af(s));!1===a&&s.ee(0,n)}},cv(e){var t=this;t.a>0&&(t.b=t.c=t.d=t.e=t.f=null,t.a=0,t.bD())},c7(e,t){return null==e[t]&&(e[t]=this.bw(t),!0)},co(e,t){var n;return null!=e&&null!=(n=e[t])&&(this.ct(n),delete e[t],!0)},bD(){this.r=this.r+1&1073741823},bw(e){var t,n=this,r=new h.mb(e);return null==n.e?n.e=n.f=r:((t=n.f).toString,r.c=t,n.f=t.b=r),++n.a,n.bD(),r},ct(e){var t=this,n=e.c,r=e.b;null==n?t.e=r:n.b=r,null==r?t.f=n:r.c=n,--t.a,t.bD()},by:e=>1073741823&d.bW(e),am(e,t){var n,r;if(null==e)return-1;for(n=e.length,r=0;r<n;++r)if(d.aj(e[r].a,t))return r;return-1}},h.mb.prototype={},h.e2.prototype={gt(){return this.d},p(){var e=this,t=e.c,n=e.a;if(e.b!==n.r)throw h.d(h.af(n));return null==t?(e.d=null,!1):(e.d=t.a,e.c=t.b,!0)},$iM:1},h.aY.prototype={ah(e,t){return new h.aY(d.nf(this.a,t),t.h("aY<0>"))},gi(e){return d.a3(this.a)},j(e,t){return d.eA(this.a,t)}},h.du.prototype={},h.dy.prototype={$ip:1,$ij:1,$io:1},h.n.prototype={gD(e){return new h.a9(e,this.gi(e),h.ai(e).h("a9<n.E>"))},T(e,t){return this.j(e,t)},gA(e){return 0===this.gi(e)},ga7(e){return!this.gA(e)},gcD(e){if(0===this.gi(e))throw h.d(h.ni());return this.j(e,0)},H(e,t){var n,r=this.gi(e);for(n=0;n<r;++n){if(d.aj(this.j(e,n),t))return!0;if(r!==this.gi(e))throw h.d(h.af(e))}return!1},ba(e,t){var n,r=this.gi(e);for(n=0;n<r;++n){if(!t.$1(this.j(e,n)))return!1;if(r!==this.gi(e))throw h.d(h.af(e))}return!0},aP(e,t){var n,r=this.gi(e);for(n=0;n<r;++n){if(t.$1(this.j(e,n)))return!0;if(r!==this.gi(e))throw h.d(h.af(e))}return!1},aj:(e,t,n)=>new h.aa(e,t,h.ai(e).h("@<n.E>").I(n).h("aa<1,2>")),a5:(e,t)=>h.dM(e,t,null,h.ai(e).h("n.E")),aW(e,t){var n,r,i,a=this;if(a.gA(e))return d.b8(0,h.ai(e).h("n.E"));for(n=a.j(e,0),r=h.S(a.gi(e),n,!1,h.ai(e).h("n.E")),i=1;i<a.gi(e);++i)r[i]=a.j(e,i);return r},bZ(e){var t,n=h.ox(h.ai(e).h("n.E"));for(t=0;t<this.gi(e);++t)n.C(0,this.j(e,t));return n},C(e,t){var n=this.gi(e);this.si(e,n+1),this.m(e,n,t)},ah:(e,t)=>new h.b5(e,h.ai(e).h("@<n.E>").I(t).h("b5<1,2>")),a0(e,t,n){var r=this.gi(e);return h.aP(t,n,r),h.ut(this.aX(e,t,n),h.ai(e).h("n.E"))},aX(e,t,n){return h.aP(t,n,this.gi(e)),h.dM(e,t,n,h.ai(e).h("n.E"))},e1(e,t,n,r){var i;for(h.aP(t,n,this.gi(e)),i=t;i<n;++i)this.m(e,i,r)},a4(e,t,n,r,i){var a,s,o,l,u;if(h.aP(t,n,this.gi(e)),0!=(a=n-t)){if(h.aV(i,"skipCount"),h.ai(e).h("o<n.E>").b(r)?(s=i,o=r):(o=d.og(r,i).aW(0,!1),s=0),s+a>(l=d.T(o)).gi(o))throw h.d(h.u5());if(s<t)for(u=a-1;u>=0;--u)this.m(e,t+u,l.j(o,s+u));else for(u=0;u<a;++u)this.m(e,t+u,l.j(o,s+u))}},bN(e,t){var n;for(n=0;n<this.gi(e);++n)if(d.aj(this.j(e,n),t))return n;return-1},k:e=>h.iH(e,"[","]")},h.dz.prototype={},h.jK.prototype={$2(e,t){var n,r=this.a;r.a||(this.b.a+=", "),r.a=!1,n=(r=this.b).a+=h.b(e),r.a=n+": ",r.a+=h.b(t)},$S:63},h.I.prototype={ai(e,t,n){var r=h.C(this);return h.oA(this,r.h("I.K"),r.h("I.V"),t,n)},L(e,t){var n,r;for(n=(n=this.gM()).gD(n);n.p();)r=n.gt(),t.$2(r,this.j(0,r))},ge0(){return this.gM().aj(0,new h.jL(this),h.C(this).h("cU<I.K,I.V>"))},v(e){return this.gM().H(0,e)},gi(e){var t=this.gM();return t.gi(t)},gA(e){var t=this.gM();return t.gA(t)},k(e){return h.nn(this)},$ih:1},h.jL.prototype={$1(e){var t=this.a,n=h.C(t);return new h.cU(e,t.j(0,e),n.h("@<I.K>").I(n.h("I.V")).h("cU<1,2>"))},$S(){return h.C(this.a).h("cU<I.K,I.V>(I.K)")}},h.fS.prototype={m(e,t,n){throw h.d(h.ac("Cannot modify unmodifiable map"))}},h.dA.prototype={ai(e,t,n){return this.a.ai(0,t,n)},j(e,t){return this.a.j(0,t)},m(e,t,n){this.a.m(0,t,n)},v(e){return this.a.v(e)},L(e,t){this.a.L(0,t)},gA(e){var t=this.a;return t.gA(t)},gi(e){var t=this.a;return t.gi(t)},gM(){return this.a.gM()},k(e){return this.a.k(0)},$ih:1},h.bk.prototype={ai(e,t,n){return new h.bk(this.a.ai(0,t,n),t.h("@<0>").I(n).h("bk<1,2>"))}},h.cY.prototype={gA(e){return 0===this.gi(this)},ga7(e){return 0!==this.gi(this)},F(e,t){var n;for(n=d.aC(t);n.p();)this.C(0,n.gt())},aj(e,t,n){return new h.c7(this,t,h.C(this).h("@<1>").I(n).h("c7<1,2>"))},k(e){return h.iH(this,"{","}")},ba(e,t){var n;for(n=this.gD(this);n.p();)if(!t.$1(n.gt()))return!1;return!0},a5(e,t){return h.oT(this,t,h.C(this).c)},bb(e,t,n){var r,i;for(r=this.gD(this);r.p();)if(i=r.gt(),t.$1(i))return i;return n.$0()},T(e,t){var n,r,i,a="index";for(h.bS(t,a,v.S),h.aV(t,a),n=this.gD(this),r=0;n.p();){if(i=n.gt(),t===r)return i;++r}throw h.d(h.eS(t,this,a,null,r))}},h.d5.prototype={$ip:1,$ij:1,$icz:1},h.fT.prototype={C:(e,t)=>(h.vo(),h.aW(_.g))},h.ei.prototype={H(e,t){return this.a.v(t)},gD(e){var t=this.a.gM();return t.gD(t)},gi(e){var t=this.a;return t.gi(t)}},h.e3.prototype={},h.eh.prototype={},h.em.prototype={},h.en.prototype={},h.fI.prototype={j(e,t){var n,r=this.b;return null==r?this.c.j(0,t):"string"!=typeof t?null:void 0===(n=r[t])?this.dI(t):n},gi(e){return null==this.b?this.c.a:this.aJ().length},gA(e){return 0===this.gi(this)},gM(){if(null==this.b){var e=this.c;return new h.aM(e,h.C(e).h("aM<1>"))}return new h.fJ(this)},m(e,t,n){var r,i,a=this;null==a.b?a.c.m(0,t,n):a.v(t)?((r=a.b)[t]=n,(null==(i=a.a)?null!=r:i!==r)&&(i[t]=null)):a.dS().m(0,t,n)},v(e){return null==this.b?this.c.v(e):"string"==typeof e&&Object.prototype.hasOwnProperty.call(this.a,e)},L(e,t){var n,r,i,a,s=this;if(null==s.b)return s.c.L(0,t);for(n=s.aJ(),r=0;r<n.length;++r)if(i=n[r],void 0===(a=s.b[i])&&(a=h.ms(s.a[i]),s.b[i]=a),t.$2(i,a),n!==s.c)throw h.d(h.af(s))},aJ(){var e=this.c;return null==e&&(e=this.c=h.a(Object.keys(this.a),v.s)),e},dS(){var e,t,n,r,i,a=this;if(null==a.b)return a.c;for(e=h.a8(v.R,v.z),t=a.aJ(),n=0;n<(r=t.length);++n)i=t[n],e.m(0,i,a.j(0,i));return 0===r?t.push(""):f.d.si(t,0),a.a=a.b=null,a.c=e},dI(e){var t;return Object.prototype.hasOwnProperty.call(this.a,e)?(t=h.ms(this.a[e]),this.b[e]=t):null}},h.fJ.prototype={gi(e){var t=this.a;return t.gi(t)},T(e,t){var n=this.a;return null==n.b?n.gM().T(0,t):n.aJ()[t]},gD(e){var t=this.a;return null==t.b?t=(t=t.gM()).gD(t):(t=t.aJ(),t=new d.b4(t,t.length,h.Z(t).h("b4<1>"))),t},H(e,t){return this.a.v(t)}},h.m9.prototype={a6(){var e,t,n,r=this;r.d9(),t=(e=r.a).a,e.a="",(n=(e=r.c).b).push(h.pu((t.charCodeAt(0),t),r.b)),e.a.$1(n)}},h.lv.prototype={$0(){try{return new TextDecoder("utf-8",{fatal:!0})}catch(e){}return null},$S:6},h.lu.prototype={$0(){try{return new TextDecoder("utf-8",{fatal:!1})}catch(e){}return null},$S:6},h.h9.prototype={ea(e,t,n){var r,i,a,s,o,l,u,c,d,p,g,_,v,b,x,y,w="Invalid base64 encoding length ";for(n=h.aP(t,n,e.length),r=m.oa(),a=i=t,s=null,o=-1,l=-1,u=0;i<n;i=c){if(c=i+1,37===(d=f.a.J(e,i))?(p=c+2)<=n?(37===(g=h.pP(e,c))&&(g=-1),c=p):g=-1:g=d,0<=g&&g<=127){if((_=r[g])>=0){if((g=f.a.B("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_))===d)continue;d=g}else{if(-1===_&&(o<0&&(null==(v=null==s?null:s.a.length)&&(v=0),o=v+(i-a),l=i),++u,61===d))continue;d=g}if(-2!==_){b=(v=null==s?s=new h.ab(""):s).a+=f.a.u(e,a,i),v.a=b+h.bd(d),a=c;continue}}throw h.d(h.P("Invalid base64 data",e,i))}if(null!=s){if(b=(v=s.a+=f.a.u(e,a,n)).length,o>=0)h.oj(e,l,n,o,u,b);else{if(1===(x=f.c.bo(b-1,4)+1))throw h.d(h.P(w,e,n));for(;x<4;)v+="=",s.a=v,++x}return v=s.a,f.a.aF(e,t,n,(v.charCodeAt(0),v))}if(y=n-t,o>=0)h.oj(e,l,n,o,u,y);else{if(1===(x=f.c.bo(y,4)))throw h.d(h.P(w,e,n));x>1&&(e=f.a.aF(e,n,n,2===x?"==":"="))}return e}},h.hb.prototype={},h.ha.prototype={dX(e,t){var n,r,i,a=h.aP(t,null,e.length);return t===a?new Uint8Array(0):((r=(n=new h.lR).dZ(e,t,a)).toString,(i=n.a)<-1&&h.a0(h.P("Missing padding character",e,a)),i>0&&h.a0(h.P("Invalid length, must be multiple of four",e,a)),n.a=-1,r)}},h.lR.prototype={dZ(e,t,n){var r,i=this,a=i.a;return a<0?(i.a=h.p4(e,t,n,a),null):t===n?new Uint8Array(0):(r=h.v2(e,t,n,a),i.a=h.v4(e,t,n,r,0,i.a),r)}},h.hc.prototype={},h.eF.prototype={},h.fL.prototype={},h.eJ.prototype={},h.eL.prototype={},h.hV.prototype={},h.iP.prototype={dY(e){return h.pu(e,this.gcB().a)},gcB:()=>f.bY},h.iQ.prototype={},h.lj.prototype={},h.lk.prototype={},h.eb.prototype={a6(){}},h.mm.prototype={a6(){this.a.e2(this.c),this.b.a6()},dT(e,t,n,r){this.c.a+=this.a.cA(e,t,n,!1)}},h.ls.prototype={},h.lt.prototype={dW(e){var t=this.a,n=h.uX(t,e,0,null);return null!=n?n:new h.fU(t).cA(e,0,null,!0)}},h.fU.prototype={cA(e,t,n,r){var i,a,s,o,l,u=this,c=h.aP(t,n,d.a3(e));if(t===c)return"";if(v.gc.b(e)?(i=e,a=0):(i=h.vF(e,t,c),c-=t,a=t,t=0),s=u.bz(i,t,c,r),0!=(1&(o=u.b)))throw l=h.pk(o),u.b=0,h.d(h.P(l,e,a+u.c));return s},bz(e,t,n,r){var i,a,s=this;return n-t>1e3?(i=f.c.bG(t+n,2),a=s.bz(e,t,i,!1),0!=(1&s.b)?a:a+s.bz(e,i,n,r)):s.e_(e,t,n,r)},e2(e){var t=this.b;if(this.b=0,!(t<=32)){if(!this.a)throw h.d(h.P(h.pk(77),null,null));e.a+=h.bd(65533)}},e_(e,t,n,r){var i,a,s,o,l,u,c,d=this,p=65533,m=d.b,g=d.c,_=new h.ab(""),v=t+1,b=e[t];e:for(i=d.a;;){for(;;v=o){if(a=31&f.a.J("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFFFFFFFFFFFFFGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHHHHIHHHJEEBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBKCCCCCCCCCCCCDCLONNNMEEEEEEEEEEE",b),g=m<=32?b&61694>>>a:(63&b|g<<6)>>>0,0===(m=f.a.J(" \x000:XECCCCCN:lDb \x000:XECCCCCNvlDb \x000:XECCCCCN:lDb AAAAA\0\0\0\0\0AAAAA00000AAAAA:::::AAAAAGG000AAAAA00KKKAAAAAG::::AAAAA:IIIIAAAAA0000AAAAA\0\0\0\0 AAAAA",m+a))){if(_.a+=h.bd(g),v===n)break e;break}if(0!=(1&m)){if(!i)return d.b=m,d.c=v-1,"";switch(m){case 69:case 67:_.a+=h.bd(p);break;case 65:_.a+=h.bd(p),--v;break;default:s=_.a+=h.bd(p),_.a=s+h.bd(p)}m=0}if(v===n)break e;o=v+1,b=e[v]}if(o=v+1,(b=e[v])<128){for(;;){if(!(o<n)){l=n;break}if(u=o+1,(b=e[o])>=128){l=u-1,o=u;break}o=u}if(l-v<20)for(c=v;c<l;++c)_.a+=h.bd(e[c]);else _.a+=h.oV(e,v,l);if(l===n)break e;v=o}else v=o}if(r&&m>32){if(!i)return d.b=77,d.c=n,"";_.a+=h.bd(p)}return d.b=m,d.c=g,(i=_.a).charCodeAt(0),i}},h.jY.prototype={$2(e,t){var n=this.b,r=this.a,i=n.a+=r.a;i+=h.b(e.a),n.a=i,n.a=i+": ",n.a+=h.cO(t),r.a=", "},$S:74},h.dm.prototype={N(e,t){return null!=t&&t instanceof h.dm&&this.a===t.a&&this.b===t.b},gE(e){var t=this.a;return 1073741823&(t^f.c.ag(t,30))},er(){var e;return this.b?this:(e=this.a,!(Math.abs(e)<=864e13)&&h.a0(h.R("DateTime is outside valid range: "+e,null)),h.bS(!0,"isUtc",v.y),new h.dm(e,!0))},k(e){var t=this,n=h.op(h.fh(t)),r=h.b6(h.oN(t)),i=h.b6(h.oJ(t)),a=h.b6(h.oK(t)),s=h.b6(h.oM(t)),o=h.b6(h.oO(t)),l=h.oq(h.oL(t)),u=n+"-"+r;return t.b?u+"-"+i+" "+a+":"+s+":"+o+"."+l+"Z":u+"-"+i+" "+a+":"+s+":"+o+"."+l},eq(){var e=this,t=h.fh(e)>=-9999&&h.fh(e)<=9999?h.op(h.fh(e)):h.tS(h.fh(e)),n=h.b6(h.oN(e)),r=h.b6(h.oJ(e)),i=h.b6(h.oK(e)),a=h.b6(h.oM(e)),s=h.b6(h.oO(e)),o=h.oq(h.oL(e)),l=t+"-"+n;return e.b?l+"-"+r+"T"+i+":"+a+":"+s+"."+o+"Z":l+"-"+r+"T"+i+":"+a+":"+s+"."+o}},h.lV.prototype={},h.G.prototype={gaZ(){return h.aR(this.$thrownJsError)}},h.eC.prototype={k(e){var t=this.a;return null!=t?"Assertion failed: "+h.cO(t):"Assertion failed"}},h.aX.prototype={},h.fd.prototype={k:e=>"Throw of null."},h.ar.prototype={gbB(){return"Invalid argument"+(this.a?"":"(s)")},gbA:()=>"",k(e){var t=this,n=t.c,r=null==n?"":" ("+n+")",i=t.d,a=null==i?"":": "+h.b(i),s=t.gbB()+r+a;return t.a?s+t.gbA()+": "+h.cO(t.b):s}},h.dI.prototype={gbB:()=>"RangeError",gbA(){var e=this.e,t=this.f;return null==e?null!=t?": Not less than or equal to "+h.b(t):"":null==t?": Not greater than or equal to "+h.b(e):t>e?": Not in inclusive range "+h.b(e)+".."+h.b(t):t<e?": Valid value range is empty":": Only valid value is "+h.b(e)}},h.eR.prototype={gbB:()=>"RangeError",gbA(){if(this.b<0)return": index must not be negative";var e=this.f;return 0===e?": no indices are valid":": index should be less than "+e},gi(e){return this.f}},h.fb.prototype={k(e){var t,n,r,i,a,s,o,l,u=this,c={},d=new h.ab("");for(c.a="",n=(t=u.c).length,r=0,i="",a="";r<n;++r,a=", ")s=t[r],d.a=i+a,i=d.a+=h.cO(s),c.a=", ";return u.d.L(0,new h.jY(c,d)),o=h.cO(u.a),l=d.k(0),"NoSuchMethodError: method not found: '"+h.b(u.b.a)+"'\nReceiver: "+o+"\nArguments: ["+l+"]"}},h.fv.prototype={k(e){return"Unsupported operation: "+this.a}},h.fq.prototype={k(e){var t=this.a;return null!=t?"UnimplementedError: "+t:"UnimplementedError"}},h.bG.prototype={k(e){return"Bad state: "+this.a}},h.eK.prototype={k(e){var t=this.a;return null==t?"Concurrent modification during iteration.":"Concurrent modification during iteration: "+h.cO(t)+"."}},h.ff.prototype={k:e=>"Out of Memory",gaZ:()=>null,$iG:1},h.dK.prototype={k:e=>"Stack Overflow",gaZ:()=>null,$iG:1},h.eM.prototype={k(e){var t=this.a;return null==t?"Reading static variable during its initialization":"Reading static variable '"+t+"' during its initialization"}},h.dW.prototype={k(e){return"Exception: "+this.a},$ia7:1},h.aI.prototype={k(e){var t,n,r,i,a,s,o,l,u,c,d=this.a,p=null!=d&&""!==d?"FormatException: "+h.b(d):"FormatException",m=this.c,g=this.b;if("string"==typeof g){if(null!=m&&(m<0||m>g.length)&&(m=null),null==m)return g.length>78&&(g=f.a.u(g,0,75)+"..."),p+"\n"+g;for(t=1,n=0,r=!1,i=0;i<m;++i)10===(a=f.a.J(g,i))?(n===i&&r||++t,n=i+1,r=!1):13===a&&(++t,n=i+1,r=!0);for(p=t>1?p+" (at line "+t+", character "+(m-n+1)+")\n":p+" (at character "+(m+1)+")\n",s=g.length,i=m;i<s;++i)if(10===(a=f.a.B(g,i))||13===a){s=i;break}return s-n>78?m-n<75?(o=n+75,l=n,u="",c="..."):(s-m<75?(l=s-75,o=s,c=""):(l=m-36,o=m+36,c="..."),u="..."):(o=s,l=n,u="",c=""),p+u+f.a.u(g,l,o)+c+"\n"+f.a.bp(" ",m-l+u.length)+"^\n"}return null!=m?p+" (at offset "+h.b(m)+")":p},$ia7:1},h.j.prototype={ah(e,t){return h.hd(this,h.C(this).h("j.E"),t)},aj(e,t,n){return h.jM(this,t,h.C(this).h("j.E"),n)},H(e,t){var n;for(n=this.gD(this);n.p();)if(d.aj(n.gt(),t))return!0;return!1},aP(e,t){var n;for(n=this.gD(this);n.p();)if(t.$1(n.gt()))return!0;return!1},aW(e,t){return h.ct(this,!1,h.C(this).h("j.E"))},gi(e){var t,n=this.gD(this);for(t=0;n.p();)++t;return t},gA(e){return!this.gD(this).p()},ga7(e){return!this.gA(this)},a5(e,t){return h.oT(this,t,h.C(this).h("j.E"))},T(e,t){var n,r,i;for(h.aV(t,"index"),n=this.gD(this),r=0;n.p();){if(i=n.gt(),t===r)return i;++r}throw h.d(h.eS(t,this,"index",null,r))},k(e){return h.u4(this,"(",")")}},h.dX.prototype={T(e,t){var n=this.a;return(0>t||t>=n)&&h.a0(h.eS(t,this,"index",null,n)),this.b.$1(t)},gi(e){return this.a}},h.M.prototype={},h.cU.prototype={k(e){return"MapEntry("+h.b(this.a)+": "+h.b(this.b)+")"}},h.k.prototype={gE(e){return h.c.prototype.gE.call(this,this)},k:e=>"null"},h.c.prototype={$ic:1,N(e,t){return this===t},gE(e){return h.cX(this)},k(e){return"Instance of '"+h.b(h.k5(this))+"'"},bj(e,t){throw h.d(h.oG(this,t.gcP(),t.gcT(),t.gcQ()))},toString(){return this.k(this)}},h.fO.prototype={k:e=>"",$iam:1},h.ab.prototype={gi(e){return this.a.length},k(e){var t=this.a;return t.charCodeAt(0),t}},h.lp.prototype={$2(e,t){throw h.d(h.P("Illegal IPv4 address, "+e,this.a,t))},$S:86},h.lq.prototype={$2(e,t){throw h.d(h.P("Illegal IPv6 address, "+e,this.a,t))},$S:87},h.lr.prototype={$2(e,t){var n;return t-e>4&&this.a.$2("an IPv6 part can only contain a maximum of 4 hex digits",e),((n=h.cH(f.a.u(this.b,e,t),16))<0||n>65535)&&this.a.$2("each part must be in the range of `0x0..0xFFFF`",e),n},$S:88},h.ej.prototype={gcr(){var e,t,n,r,i=this,a=i.w;return a===m&&(t=0!==(e=i.a).length?e+":":"",(r=null==(n=i.c))&&"file"!==e?e=t:(e=t+"//",0!==(t=i.b).length&&(e=e+t+"@"),r||(e+=n),null!=(t=i.d)&&(e=e+":"+h.b(t))),e+=i.e,null!=(t=i.f)&&(e=e+"?"+t),null!=(t=i.r)&&(e=e+"#"+t),h.pt(a,"_text"),a=i.w=(e.charCodeAt(0),e)),a},gE(e){var t,n=this,r=n.y;return r===m&&(t=f.a.gE(n.gcr()),h.pt(n.y,"hashCode"),n.y=t,r=t),r},gcZ(){return this.b},gbM(){var e=this.c;return null==e?"":f.a.W(e,"[")?f.a.u(e,1,e.length-1):e},gbU(){var e=this.d;return null==e?h.pe(this.a):e},gcU(){var e=this.f;return null==e?"":e},gcE(){var e=this.r;return null==e?"":e},gcG(){return 0!==this.a.length},gbJ(){return null!=this.c},gbL(){return null!=this.f},gbK(){return null!=this.r},gcF(){return f.a.W(this.e,"/")},k(e){return this.gcr()},N(e,t){var n,r,i=this;return null!=t&&(i===t||(v.n.b(t)&&i.a===t.gc3()&&null!=i.c===t.gbJ()&&i.b===t.gcZ()&&i.gbM()===t.gbM()&&i.gbU()===t.gbU()&&i.e===t.gcR()&&!(r=null==(n=i.f))===t.gbL()?(r&&(n=""),n===t.gcU()&&!(r=null==(n=i.r))===t.gbK()?(r&&(n=""),n=n===t.gcE()):n=!1):n=!1,n))},$iaZ:1,gc3(){return this.a},gcR(){return this.e}},h.ln.prototype={gbl(e){var t,n,r,i,a=this,s=null,o=a.c;return null==o&&(o=a.a,t=a.b[0]+1,n=f.a.bd(o,"?",t),r=o.length,n>=0?(i=h.ek(o,n+1,r,f.D,!1),r=n):i=s,o=a.c=new h.fD("data","",s,s,h.ek(o,t,r,f.aw,!1),i,s)),o},gbQ(){var e=this.b,t=e[0]+1,n=e[1];return t===n?"text/plain":h.vE(this.a,t,n,f.ab,!1)},cz(){var e,t,n,r,i,a,s,o,l=this.a,u=this.b,c=f.d.gaS(u)+1;if(1==(1&u.length))return f.b7.dX(l,c);for(e=(u=l.length)-c,t=c;t<u;++t)37===f.a.B(l,t)&&(t+=2,e-=2);if(n=new Uint8Array(e),e===u)return f.j.a4(n,0,e,new h.cL(l),c),n;for(t=c,r=0;t<u;++t){if(37===(i=f.a.B(l,t))){if((s=t+2)<u&&(o=h.pP(l,t+1))>=0){a=r+1,n[r]=o,t=s,r=a;continue}throw h.d(h.P("Invalid percent escape",l,t))}a=r+1,n[r]=i,r=a}return n},k(e){var t=this.a;return-1===this.b[0]?"data:"+t:t}},h.mt.prototype={$2(e,t){var n=this.a[e];return f.j.e1(n,0,96,t),n},$S:95},h.mu.prototype={$3(e,t,n){var r,i;for(r=t.length,i=0;i<r;++i)e[96^f.a.J(t,i)]=n},$S:17},h.mv.prototype={$3(e,t,n){var r,i;for(r=f.a.J(t,0),i=f.a.J(t,1);r<=i;++r)e[(96^r)>>>0]=n},$S:17},h.fM.prototype={gcG(){return this.b>0},gbJ(){return this.c>0},gbL(){return this.f<this.r},gbK(){return this.r<this.a.length},gcF(){return f.a.X(this.a,"/",this.e)},gc3(){var e=this.w;return null==e?this.w=this.dl():e},dl(){var e,t=this,n=t.b;return n<=0?"":(e=4===n)&&f.a.W(t.a,"http")?"http":5===n&&f.a.W(t.a,"https")?"https":e&&f.a.W(t.a,"file")?"file":7===n&&f.a.W(t.a,"package")?"package":f.a.u(t.a,0,n)},gcZ(){var e=this.c,t=this.b+3;return e>t?f.a.u(this.a,t,e-1):""},gbM(){var e=this.c;return e>0?f.a.u(this.a,e,this.d):""},gbU(){var e,t=this;return t.c>0&&t.d+1<t.e?h.cH(f.a.u(t.a,t.d+1,t.e),null):4===(e=t.b)&&f.a.W(t.a,"http")?80:5===e&&f.a.W(t.a,"https")?443:0},gcR(){return f.a.u(this.a,this.e,this.f)},gcU(){var e=this.f,t=this.r;return e<t?f.a.u(this.a,e+1,t):""},gcE(){var e=this.r,t=this.a;return e<t.length?f.a.br(t,e+1):""},gE(e){var t=this.x;return null==t?this.x=f.a.gE(this.a):t},N(e,t){return null!=t&&(this===t||v.n.b(t)&&this.a===t.k(0))},k(e){return this.a},$iaZ:1},h.fD.prototype={},h.mr.prototype={$1(e){var t,n,r,i=this.a;if(i.v(e))return i.j(0,e);if(v.I.b(e)){for(t={},i.m(0,e,t),i=(i=e.gM()).gD(i);i.p();)t[n=i.gt()]=this.$1(e.j(0,n));return t}return v.j.b(e)?(r=[],i.m(0,e,r),f.d.F(r,d.br(e,this,v.z)),r):e},$S:122},h.a4.prototype={gcj(){var e,t=this.y;return!!(e=!(5121!==t&&5120!==t||"MAT2"!==(e=this.Q)&&"MAT3"!==e))||(5123===t||5122===t)&&"MAT3"===this.Q},gab(){var e=f.m.j(0,this.Q);return null==e?0:e},gac(){var e=this,t=e.y;return 5121===t||5120===t?"MAT2"===(t=e.Q)?6:"MAT3"===t?11:e.gab():5123===t||5122===t?"MAT3"===e.Q?22:2*e.gab():4*e.gab()},gao(){var e=this,t=e.cx;return 0!==t?t:5121===(t=e.y)||5120===t?"MAT2"===(t=e.Q)?8:"MAT3"===t?12:e.gab():5123===t||5122===t?"MAT3"===e.Q?24:2*e.gab():4*e.gab()},gaQ(){return this.gao()*(this.z-1)+this.gac()},q(e,t){var n,r,i,a=this,s="bufferView",o=e.y,l=a.w,u=a.CW=o.j(0,l),c=null==u;if(c||-1===u.z||(a.cx=u.z),-1!==a.y&&-1!==a.z&&null!=a.Q&&(-1!==l&&(c?t.l(m.N(),h.a([l],v.M),s):(u.a$=!0,-1!==(u=u.z)&&u<a.gac()&&t.G(m.qD(),h.a([a.CW.z,a.gac()],v.M)),h.bs(a.x,a.ch,a.gaQ(),a.CW,l,t))),null!=(l=a.ay))){if(c=-1===(u=l.d))return;(c=t.c).push("sparse"),u>(n=a.z)&&t.l(m.rl(),h.a([u,n],v.M),"count"),r=(n=l.f).d,n.f=o.j(0,r),c.push("indices"),-1!==(l=(i=l.e).d)&&(null==(o=i.r=o.j(0,l))?t.l(m.N(),h.a([l],v.M),s):(o.S(f.o,s,t),-1!==i.r.z&&t.n(m.nc(),s),-1!==(o=i.f)&&h.bs(i.e,h.b1(o),h.b1(o)*u,i.r,l,t))),c.pop(),c.push("values"),-1!==r&&(null==(o=n.f)?t.l(m.N(),h.a([r],v.M),s):(o.S(f.o,s,t),-1!==n.f.z&&t.n(m.nc(),s),o=a.ch,null==(l=f.m.j(0,a.Q))&&(l=0),h.bs(n.e,o,o*l*u,n.f,r,t))),c.pop(),c.pop()}},S(e,t,n){var r;this.a$=!0,null==(r=this.fr)?this.fr=e:r!==e&&n.l(m.qF(),h.a([r,e],v.M),t)},ew(e){var t=this.dy;if(null==t)this.dy=e;else if(t!==e)return!1;return!0},eb(e){var t,n,r=this;return r.as&&5126!==r.y?(t=8*r.ch,5120===(n=r.y)||5122===n||5124===n?Math.max(e/(f.c.aG(1,t-1)-1),-1):e/(f.c.aG(1,t)-1)):(e.toString,e)}},h.fy.prototype={ad(){var e=this;return h.bQ((function(){var t,n,r,i,a,s,o,l,u,c,d,p,m,g,_,b,x,y=0;return function(w,A){for(1===w&&(t=A,y=2);;)switch(y){case 0:if(-1===(x=e.y)||-1===e.z||null==e.Q){y=1;break}if(n=e.gab(),r=e.z,null!=(i=e.CW)){if(null==(null==(i=i.as)?null:i.z)){y=1;break}if(e.gao()<e.gac()){y=1;break}if(i=e.x,a=e.ch,!h.bs(i,a,e.gaQ(),e.CW,null,null)){y=1;break}if(s=e.CW,null==(o=h.oi(x,s.as.z.buffer,s.x+i,f.c.av(e.gaQ(),a)))){y=1;break}l=o.length,e.gcj()?(i=f.c.av(e.gao(),a),a="MAT2"===e.Q,s=a?8:12,u=a?2:3,c=new h.lJ(l,o,u,u,i-s).$0()):c=new h.lK(o).$3(l,n,f.c.av(e.gao(),a)-n)}else c=h.ot(r*n,new h.lL,v.e);if(null!=(i=e.ay)){if(a=i.f,s=a.e,d=-1===s||null==(d=a.f)||-1===d.y||-1===d.x||null==(null==(d=d.as)?null:d.z)||-1===(d=i.e).f||-1===d.e||null==(d=d.r)||-1===d.y||-1===d.x||null==(null==(d=d.as)?null:d.z)){y=1;break}if((d=i.d)>r){y=1;break}if(r=i.e,i=r.e,p=r.f,h.bs(i,h.b1(p),h.b1(p)*d,r.r,null,null)?(m=e.ch,null==(g=f.m.j(0,e.Q))&&(g=0),g=!h.bs(s,m,m*g*d,a.f,null,null),m=g):m=!0,m){y=1;break}if(r=r.r,_=h.nh(p,r.as.z.buffer,r.x+i,d),a=a.f,b=h.oi(x,a.as.z.buffer,a.x+s,d*n),null==_||null==b){y=1;break}c=new h.lM(e,_,c,n,b).$0()}return y=3,h.m7(c);case 3:case 1:return h.bL();case 2:return h.bM(t)}}}),v.e)},bn(){var e=this;return h.bQ((function(){var t,n,r,i,a,s=0;return function(o,l){for(1===o&&(t=l,s=1);;)switch(s){case 0:i=8*e.ch,a=5120===(a=e.y)||5122===a||5124===a,n=v.F,s=a?2:4;break;case 2:return a=f.c.aG(1,i-1),(r=e.ad()).toString,s=5,h.m7(h.jM(r,new h.lH(1/(a-1)),r.$ti.h("j.E"),n));case 5:s=3;break;case 4:return a=f.c.aG(1,i),(r=e.ad()).toString,s=6,h.m7(h.jM(r,new h.lI(1/(a-1)),r.$ti.h("j.E"),n));case 6:case 3:return h.bL();case 1:return h.bM(t)}}}),v.F)}},h.lJ.prototype={$0(){var e=this;return h.bQ((function(){var t,n,r,i,a,s,o,l,u,c=0;return function(d,f){for(1===d&&(t=f,c=1);;)switch(c){case 0:n=e.a,r=e.c,i=e.b,a=e.d,s=e.e,o=0,l=0,u=0;case 2:if(!(o<n)){c=3;break}return c=4,i[o];case 4:++o,++l===r&&(o+=4-l,++u===a&&(o+=s,u=0),l=0),c=2;break;case 3:return h.bL();case 1:return h.bM(t)}}}),v.e)},$S:18},h.lK.prototype={$3(e,t,n){return this.d0(e,t,n)},d0(e,t,n){var r=this;return h.bQ((function(){var i,a,s,o,l=e,u=t,c=n,d=0;return function(e,t){for(1===e&&(i=t,d=1);;)switch(d){case 0:a=r.a,s=0,o=0;case 2:if(!(s<l)){d=3;break}return d=4,a[s];case 4:++s,++o===u&&(s+=c,o=0),d=2;break;case 3:return h.bL();case 1:return h.bM(i)}}}),v.e)},$S:31},h.lL.prototype={$1:e=>0,$S:32},h.lM.prototype={$0(){var e=this;return h.bQ((function(){var t,n,r,i,a,s,o,l,u,c,f,p=0;return function(m,g){for(1===m&&(t=g,p=1);;)switch(p){case 0:c=e.b,f=c[0],n=d.aC(e.c),r=e.d,i=e.a.ay,a=e.e,s=0,o=0,l=0;case 2:if(!n.p()){p=3;break}u=n.gt(),o===r&&(s===f&&l!==i.d-1&&(++l,f=c[l]),++s,o=0),p=s===f?4:6;break;case 4:return p=7,a[l*r+o];case 7:p=5;break;case 6:return p=8,u;case 8:case 5:++o,p=2;break;case 3:return h.bL();case 1:return h.bM(t)}}}),v.e)},$S:18},h.lH.prototype={$1(e){return Math.max(e*this.a,-1)},$S:7},h.lI.prototype={$1(e){return e*this.a},$S:7},h.fx.prototype={ad(){var e=this;return h.bQ((function(){var t,n,r,i,a,s,o,l,u,c,d,p,m,g,_,b,x,y=0;return function(w,A){for(1===w&&(t=A,y=2);;)switch(y){case 0:if(-1===(x=e.y)||-1===e.z||null==e.Q){y=1;break}if(n=e.gab(),r=e.z,null!=(i=e.CW)){if(null==(null==(i=i.as)?null:i.z)){y=1;break}if(e.gao()<e.gac()){y=1;break}if(i=e.x,a=e.ch,!h.bs(i,a,e.gaQ(),e.CW,null,null)){y=1;break}if(s=e.CW,null==(o=h.oh(x,s.as.z.buffer,s.x+i,f.c.av(e.gaQ(),a)))){y=1;break}l=o.length,e.gcj()?(i=f.c.av(e.gao(),a),a="MAT2"===e.Q,s=a?8:12,u=a?2:3,c=new h.lD(l,o,u,u,i-s).$0()):c=new h.lE(o).$3(l,n,f.c.av(e.gao(),a)-n)}else c=h.ot(r*n,new h.lF,v.F);if(null!=(i=e.ay)){if(a=i.f,s=a.e,d=-1===s||null==(d=a.f)||-1===d.y||-1===d.x||null==(null==(d=d.as)?null:d.z)||-1===(d=i.e).f||-1===d.e||null==(d=d.r)||-1===d.y||-1===d.x||null==(null==(d=d.as)?null:d.z)){y=1;break}if((d=i.d)>r){y=1;break}if(r=i.e,i=r.e,p=r.f,h.bs(i,h.b1(p),h.b1(p)*d,r.r,null,null)?(m=e.ch,null==(g=f.m.j(0,e.Q))&&(g=0),g=!h.bs(s,m,m*g*d,a.f,null,null),m=g):m=!0,m){y=1;break}if(r=r.r,_=h.nh(p,r.as.z.buffer,r.x+i,d),a=a.f,b=h.oh(x,a.as.z.buffer,a.x+s,d*n),null==_||null==b){y=1;break}c=new h.lG(e,_,c,n,b).$0()}return y=3,h.m7(c);case 3:case 1:return h.bL();case 2:return h.bM(t)}}}),v.F)},bn(){return this.ad()}},h.lD.prototype={$0(){var e=this;return h.bQ((function(){var t,n,r,i,a,s,o,l,u,c=0;return function(d,f){for(1===d&&(t=f,c=1);;)switch(c){case 0:n=e.a,r=e.c,i=e.b,a=e.d,s=e.e,o=0,l=0,u=0;case 2:if(!(o<n)){c=3;break}return c=4,i[o];case 4:++o,++l===r&&(o+=4-l,++u===a&&(o+=s,u=0),l=0),c=2;break;case 3:return h.bL();case 1:return h.bM(t)}}}),v.F)},$S:19},h.lE.prototype={$3(e,t,n){return this.d_(e,t,n)},d_(e,t,n){var r=this;return h.bQ((function(){var i,a,s,o,l=e,u=t,c=n,d=0;return function(e,t){for(1===e&&(i=t,d=1);;)switch(d){case 0:a=r.a,s=0,o=0;case 2:if(!(s<l)){d=3;break}return d=4,a[s];case 4:++s,++o===u&&(s+=c,o=0),d=2;break;case 3:return h.bL();case 1:return h.bM(i)}}}),v.F)},$S:35},h.lF.prototype={$1:e=>0,$S:7},h.lG.prototype={$0(){var e=this;return h.bQ((function(){var t,n,r,i,a,s,o,l,u,c,f,p=0;return function(m,g){for(1===m&&(t=g,p=1);;)switch(p){case 0:c=e.b,f=c[0],n=d.aC(e.c),r=e.d,i=e.a.ay,a=e.e,s=0,o=0,l=0;case 2:if(!n.p()){p=3;break}u=n.gt(),o===r&&(s===f&&l!==i.d-1&&(++l,f=c[l]),++s,o=0),p=s===f?4:6;break;case 4:return p=7,a[l*r+o];case 7:p=5;break;case 6:return p=8,u;case 8:case 5:++o,p=2;break;case 3:return h.bL();case 1:return h.bM(t)}}}),v.F)},$S:19},h.bX.prototype={ge4(){var e=this.e,t=e.r,n=null==t?null:t.as;return null==(null==n?null:n.z)?null:h.nh(e.f,t.as.z.buffer,t.x+e.e,this.d)}},h.bY.prototype={q(e,t){this.r=e.y.j(0,this.d)}},h.bZ.prototype={q(e,t){this.f=e.y.j(0,this.d)}},h.eU.prototype={a_(e,t,n,r){return r.toString,r!=1/0&&r!=-1/0&&!isNaN(r)||(e.l(m.q3(),h.a([t,r],v.M),this.a),!1)}},h.f1.prototype={a_(e,t,n,r){var i,a=this;return(t===n||a.b[n]>r)&&(a.b[n]=r),r<a.c[n]&&((i=a.a)[n]=i[n]+1),!0},aD(e){var t,n,r,i,a,s,o,l,u,c=this;for(n=(t=c.b).length,r=c.c,i=c.a,a=c.d+"/min/",s=v.M,o=0;o<n;++o)d.aj(r[o],t[o])||(l=a+o,e.l(m.nQ(),h.a([r[o],t[o]],s),l),(u=i[o])>0&&e.l(m.nO(),h.a([u,r[o]],s),l));return!0}},h.f_.prototype={a_(e,t,n,r){var i,a=this;return(t===n||a.b[n]<r)&&(a.b[n]=r),r>a.c[n]&&((i=a.a)[n]=i[n]+1),!0},aD(e){var t,n,r,i,a,s,o,l,u,c=this;for(n=(t=c.b).length,r=c.c,i=c.a,a=c.d+"/max/",s=v.M,o=0;o<n;++o)d.aj(r[o],t[o])||(l=a+o,e.l(m.nP(),h.a([r[o],t[o]],s),l),(u=i[o])>0&&e.l(m.nN(),h.a([u,r[o]],s),l));return!0}},h.f2.prototype={a_(e,t,n,r){var i,a=this;return(t===n||a.b[n]>r)&&(a.b[n]=r),r<a.c[n]&&((i=a.a)[n]=i[n]+1),!0},aD(e){var t,n,r,i,a,s,o,l,u,c=this;for(n=(t=c.b).length,r=c.c,i=c.a,a=c.d+"/min/",s=v.M,o=0;o<n;++o)d.aj(r[o],t[o])||(l=a+o,e.l(m.nQ(),h.a([r[o],t[o]],s),l),(u=i[o])>0&&e.l(m.nO(),h.a([u,r[o]],s),l));return!0}},h.f0.prototype={a_(e,t,n,r){var i,a=this;return(t===n||a.b[n]<r)&&(a.b[n]=r),r>a.c[n]&&((i=a.a)[n]=i[n]+1),!0},aD(e){var t,n,r,i,a,s,o,l,u,c=this;for(n=(t=c.b).length,r=c.c,i=c.a,a=c.d+"/max/",s=v.M,o=0;o<n;++o)d.aj(r[o],t[o])||(l=a+o,e.l(m.nP(),h.a([r[o],t[o]],s),l),(u=i[o])>0&&e.l(m.nN(),h.a([u,r[o]],s),l));return!0}},h.bt.prototype={q(e,t){var n,r,i,a,s=this,o="samplers",l=s.x;if(null!=l&&null!=s.w){for((n=t.c).push(o),l.a3(new h.h3(t,e)),n.pop(),n.push("channels"),s.w.a3(new h.h4(s,t,e)),n.pop(),n.push(o),r=l.b,i=(l=l.a).length,a=0;a<r;++a)(a>=i?null:l[a]).a$||t.Y(m.h_(),a);n.pop()}}},h.h3.prototype={$2(e,t){var n,r,i,a,s,o,l="input",u="output",c=this.a,d=c.c;d.push(f.c.k(e)),n=this.b.f,r=t.d,t.r=n.j(0,r),i=t.f,t.w=n.j(0,i),-1!==r&&(null==(n=t.r)?c.l(m.N(),h.a([r],v.M),l):(n.S(f.b0,l,c),null!=(a=t.r.CW)&&(a.S(f.o,l,c),-1!==(n=a.z)&&c.n(m.nV(),l)),d.push(l),(s=h.dj(t.r)).N(0,f.G)?c.Z(t.r,new h.eB(c.R())):c.G(m.qJ(),h.a([s,h.a([f.G],v.p)],v.M)),null!=(n=t.r).ax&&null!=n.at||c.O(m.qL()),"CUBICSPLINE"===t.e&&t.r.z<2&&c.G(m.qK(),h.a(["CUBICSPLINE",2,t.r.z],v.M)),d.pop())),-1!==i&&(null==(n=t.w)?c.l(m.N(),h.a([i],v.M),u):(n.S(f.b1,u,c),null!=(o=t.w.CW)&&(o.S(f.o,u,c),-1!==(n=o.z)&&c.n(m.nV(),u)),null!=(n=t.w.CW)&&n.S(f.o,u,c),t.w.ew("CUBICSPLINE"===t.e))),d.pop()},$S:36},h.h4.prototype={$2(e,t){var n,r,i,a,s,o,l,u,c,d,p,g,_,b,x=null,y="sampler",w=this.b,A=w.c;if(A.push(f.c.k(e)),n=this.a,r=t.d,t.f=n.x.j(0,r),(a=null!=(i=t.e))&&(s=i.d,i.f=this.c.ax.j(0,s),-1!==s)){if(A.push("target"),null==(o=i.f))w.l(m.N(),h.a([s],v.M),"node");else switch(o.a$=!0,i.e){case"translation":case"rotation":case"scale":null!=o.z&&w.O(m.qG()),null!=i.f.dx&&w.n(m.rm(),"path");break;case"weights":null==(null==(s=null==(s=null==(s=o.cy)?x:s.w)?x:s.gcD(s))?x:s.cx)&&w.O(m.qH())}A.pop()}if(-1!==r){for(null==(s=t.f)?w.l(m.N(),h.a([r],v.M),y):(s.a$=!0,a&&null!=s.w&&("rotation"===(r=i.e)&&(4===(l=s.w).gab()&&(A.push(y),s=w.R(),o=5126===l.y?x:l.gbS(),w.Z(l,new h.dH("CUBICSPLINE"===t.f.e,o,s,v.ed)),A.pop()),(s=t.f).w.toString),u=h.dj(s.w),!1===(null==(c=f.dh.j(0,r))?x:f.d.H(c,u))&&w.l(m.qN(),h.a([u,c,r],v.M),y),null!=(o=(s=t.f).r)&&-1!==o.z&&-1!==s.w.z&&null!=s.e&&(d=o.z,"CUBICSPLINE"===s.e&&(d*=3),"weights"===r?d*=null==(p=null==(r=null==(r=null==(r=null==(r=null==(r=i.f)?x:r.cy)?x:r.w)?x:r.gcD(r))?x:r.cx)?x:r.length)?0:p:f.d.H(f.R,r)||(d=0),0!==d&&d!==t.f.w.z&&w.l(m.qM(),h.a([d,t.f.w.z],v.M),y)))),g=e+1,r=(n=n.w).b,s=v.M,o=(n=n.a).length;g<r;++g)(_=!!a&&null!=(b=((_=g>=o)?x:n[g]).e)&&-1!==(_=i.d)&&_===b.d&&i.e==b.e)&&w.l(m.qI(),h.a([g],s),"target");A.pop()}},$S:37},h.b2.prototype={},h.c0.prototype={},h.b3.prototype={},h.eB.prototype={a_(e,t,n,r){var i=this;return r<0?e.l(m.pY(),h.a([t,r],v.M),i.b):(0!==t&&r<=i.a&&e.l(m.pZ(),h.a([t,r,i.a],v.M),i.b),i.a=r),!0}},h.dH.prototype={a_(e,t,n,r){var i,a,s=this;return s.a&&4!=(4&s.d)||(a=null!=(i=s.b)?i.$1(r):r,i=s.e+a*a,s.e=i,3===n&&(Math.abs(Math.sqrt(i)-1)>.00769&&e.l(m.q_(),h.a([t-3,t,Math.sqrt(s.e)],v.M),s.c),s.e=0)),12==++s.d&&(s.d=0),!0}},h.bu.prototype={gbg(){var e=this.f;return null!=e&&m.bp().b.test(e)?h.cH(m.bp().aR(e).b[1],null):0},gbR(){var e=this.f;return null!=e&&m.bp().b.test(e)?h.cH(m.bp().aR(e).b[2],null):0},gcO(){var e=this.r;return null!=e&&m.bp().b.test(e)?h.cH(m.bp().aR(e).b[1],null):2},ge9(){var e=this.r;return null!=e&&m.bp().b.test(e)?h.cH(m.bp().aR(e).b[2],null):0}},h.aS.prototype={},h.bv.prototype={S(e,t,n){var r;this.a$=!0,null==(r=this.at)?(this.at=e,e!==f.L&&e!==f.A||n.n(m.qP(),t)):r!==e&&n.l(m.qQ(),h.a([r,e],v.M),t)},q(e,t){var n,r=this,i=r.w,a=r.as=e.x.j(0,i);r.ax=r.z,34962===(n=r.Q)?r.at=f.A:34963===n&&(r.at=f.L),-1!==i&&(null==a?t.l(m.N(),h.a([i],v.M),"buffer"):(a.a$=!0,-1!==(a=a.x)&&((n=r.x)>=a?t.l(m.nW(),h.a([i,a],v.M),"byteOffset"):n+r.y>a&&t.l(m.nW(),h.a([i,a],v.M),"byteLength"))))}},h.bw.prototype={},h.c2.prototype={},h.c3.prototype={},h.ds.prototype={ey(e){var t,n,r,i,a;for(new h.iy(this,e).$1(this.cy),n=(t=e.r).length,r=e.c,i=0;i<t.length;t.length===n||(0,h.cI)(t),++i)a=t[i],f.d.si(r,0),f.d.F(r,a.b),a.a.c_(this,e);f.d.si(r,0)}},h.iv.prototype={$0(){return f.d.si(this.a.c,0),null},$S:1},h.iw.prototype={$1$2(e,t,n){var r,i,a,s,o,l,u,c,p,g=this,_=g.a;if(!_.v(e))return _=d.b8(0,n.h("0*")),new h.E(_,0,e,n.h("E<0*>"));if(g.b.$0(),r=_.j(0,e),v.m.b(r)){if(_=d.T(r),i=g.c,a=n.h("0*"),_.ga7(r)){for(s=_.gi(r),a=h.S(s,null,!1,a),(o=i.c).push(e),l=v.M,u=v.t,c=0;c<_.gi(r);++c)p=_.j(r,c),u.b(p)?(o.push(f.c.k(c)),a[c]=t.$2(p,i),o.pop()):i.an(m.a2(),h.a([p,"object"],l),c);return new h.E(a,s,e,n.h("E<0*>"))}return i.n(m.bV(),e),_=d.b8(0,a),new h.E(_,0,e,n.h("E<0*>"))}return g.c.l(m.a2(),h.a([r,"array"],v.M),e),_=d.b8(0,n.h("0*")),new h.E(_,0,e,n.h("E<0*>"))},$2(e,t){return this.$1$2(e,t,v.z)},$S:38},h.ix.prototype={$1$3$req(e,t,n,r){var i,a;return this.a.$0(),i=this.c,null==(a=h.nG(this.b,e,i,!0))?null:(i.c.push(e),t.$2(a,i))},$2(e,t){return this.$1$3$req(e,t,!1,v.z)},$1$2(e,t,n){return this.$1$3$req(e,t,!1,n)},$S:39},h.it.prototype={$2(e,t){var n,r,i,a,s,o=this.a,l=o.c;if(l.push(e.c),n=this.b,e.a3(new h.iu(o,n)),null!=(r=o.f.j(0,t))){for(i=d.cT(l.slice(0),h.Z(l).c),a=d.aC(r);a.p();)s=a.gt(),f.d.si(l,0),f.d.F(l,s.b),s.a.q(n,o);f.d.si(l,0),f.d.F(l,i)}l.pop()},$S:40},h.iu.prototype={$2(e,t){var n=this.a,r=n.c;r.push(f.c.k(e)),t.q(this.b,n),r.pop()},$S:41},h.ir.prototype={$2(e,t){var n,r;v.c.b(t)&&((r=(n=this.a).c).push(e),t.q(this.b,n),r.pop())},$S:3},h.is.prototype={$2(e,t){var n,r,i,a=this;if(t.dy||null!=t.cx||null!=t.cy||null!=t.CW||0!==t.a.a||null!=t.b||a.a.Y(m.rJ(),e),null!=t.db)for((n=a.b).cv(0),r=t;null!=r.db;){if(!n.C(0,r)){r===t&&a.a.Y(m.r1(),e);break}r=r.db}null!=t.dx&&(null!=t.db&&a.a.Y(m.rO(),e),(n=!(null!=(n=t.z)&&!n.cL()||!(n=null==(n=t.as)||0===(n=n.a)[0]&&0===n[1]&&0===n[2])||!(n=null==(n=t.at)||0===(n=n.a)[0]&&0===n[1]&&0===n[2]&&1===n[3])||null!=(n=t.ax)&&(1!==(n=n.a)[0]||1!==n[1]||1!==n[2])))||a.a.Y(m.rN(),e),null!=(i=t.dx.at.bb(0,new h.ip,new h.iq))?(n=i.ch,n=!t.ch.ba(0,n.gcw(n))):n=!1,n&&a.a.Y(m.rM(),e))},$S:43},h.ip.prototype={$1:e=>null==e.db,$S:44},h.iq.prototype={$0:()=>null,$S:2},h.iy.prototype={$1(e){var t=this.b,n=t.c;f.d.si(n,0),n.push(e.c),e.a3(new h.iz(this.a,t)),n.pop()},$S:45},h.iz.prototype={$2(e,t){var n=this.b,r=n.c;r.push(f.c.k(e)),t.c_(this.a,n),r.pop()},$S:28},h.m.prototype={},h.l.prototype={q(e,t){},$iq:1},h.eN.prototype={},h.fH.prototype={},h.aT.prototype={q(e,t){var n,r="bufferView",i=this.w;-1!==i&&(null==(n=this.Q=e.y.j(0,i))?t.l(m.N(),h.a([i],v.M),r):(n.S(f.b5,r,t),-1!==this.Q.z&&t.n(m.qR(),r)))},ev(){var e,t=this.Q,n=null==t?null:t.as;if(null!=(null==n?null:n.z))try{this.z=h.no(t.as.z.buffer,t.x,t.y)}catch(e){if(!(h.K(e)instanceof h.ar))throw e}}},h.av.prototype={q(e,t){var n=this,r=new h.jN(t,e);r.$2(n.w,"pbrMetallicRoughness"),r.$2(n.x,"normalTexture"),r.$2(n.y,"occlusionTexture"),r.$2(n.z,"emissiveTexture")}},h.jN.prototype={$2(e,t){var n,r;null!=e&&((r=(n=this.a).c).push(t),e.q(this.b,n),r.pop())},$S:47},h.cx.prototype={q(e,t){var n,r=this.e;null!=r&&((n=t.c).push("baseColorTexture"),r.q(e,t),n.pop()),null!=(r=this.w)&&((n=t.c).push("metallicRoughnessTexture"),r.q(e,t),n.pop())}},h.cw.prototype={},h.cv.prototype={q(e,t){var n,r;for(this.d8(e,t),n=t.e,r=this;null!=r;)if((r=n.j(0,r))instanceof h.av){r.ay=!0;break}}},h.bh.prototype={q(e,t){var n,r=this,i=r.d,a=r.f=e.cy.j(0,i);for(-1!==i&&(null==a?t.l(m.N(),h.a([i],v.M),"index"):a.a$=!0),i=t.e,n=r;null!=n;)if((n=i.j(0,n))instanceof h.av){n.ch.m(0,t.R(),r.e);break}}},h.c1.prototype={k(e){return this.a}},h.c_.prototype={k(e){return this.a}},h.y.prototype={k(e){var t=f.ax.j(0,this.b),n=this.c?" normalized":"";return"{"+h.b(this.a)+", "+h.b(t)+n+"}"},N(e,t){return null!=t&&t instanceof h.y&&t.a==this.a&&t.b===this.b&&t.c===this.c},gE(e){return h.pp(h.fV(h.fV(h.fV(0,d.bW(this.a)),f.c.gE(this.b)),f.bU.gE(this.c)))}},h.aU.prototype={q(e,t){var n,r=t.c;r.push("primitives"),null!=(n=this.w)&&n.a3(new h.jX(t,e)),r.pop()}},h.jX.prototype={$2(e,t){var n,r=this.a,i=r.c;i.push(f.c.k(e)),i.push("extensions"),n=this.b,t.a.L(0,new h.jW(r,n)),i.pop(),t.q(n,r),i.pop()},$S:20},h.jW.prototype={$2(e,t){var n,r;v.c.b(t)&&((r=(n=this.a).c).push(e),t.q(this.b,n),r.pop())},$S:3},h.aF.prototype={ges(){switch(this.r){case 4:return f.c.bG(this.ch,3);case 5:case 6:var e=this.ch;return e>2?e-2:0;default:return 0}},q(e,t){var n,r,i,a,s,o,l,u,c,p,g,_,b,x=this,y="attributes",w="indices",A=x.d;for(null!=A&&((n=t.c).push(y),A.L(0,new h.jS(x,e,t)),n.pop()),-1!==(A=x.e)&&(null==(n=x.cy=e.f.j(0,A))?t.l(m.N(),h.a([A],v.M),w):(x.ch=n.z,n.S(f.b3,w,t),null!=(A=x.cy.CW)&&A.S(f.L,w,t),(A=t.c).push(w),null!=(n=x.cy.CW)&&-1!==n.z&&t.O(m.qY()),r=h.dj(x.cy),f.d.H(f.ap,r)?(i=-1!==(n=x.CW)?n-1:-1,0!==(a=-1!==(n=x.r)?f.c.aG(1,n):-1)&&i>=-1&&(n=x.cy,s=t.R(),o=f.c.bG(x.ch,3),l=x.cy.y,u=new Uint32Array(3),t.Z(n,new h.eQ(i,o,h.pV(l),16==(16&a),u,s)))):t.G(m.qX(),h.a([r,f.ap],v.M)),A.pop())),(A=-1!==(A=x.ch)&&(1===(n=x.r)&&A%2!=0||(2===n||3===n)&&A<2||4===n&&A%3!=0||(5===n||6===n)&&A<3))&&t.G(m.qW(),h.a([x.ch,f.cp[x.r]],v.M)),A=x.f,n=x.db=e.as.j(0,A),-1!==A&&(null==n?t.l(m.N(),h.a([A],v.M),"material"):(n.a$=!0,n.ch.L(0,new h.jT(x,t)))),(A=!(!x.z||null!=(A=x.db)&&A.ay))&&((A=t.c).push(y),t.n(m.rc(),"TANGENT"),A.pop()),A=x.dx,n=f.d.gD(A),A=new h.cC(n,new h.jU,h.Z(A).h("cC<1>")),s=t.c;A.p();)o=n.gt(),s.push(y),t.n(m.h_(),"TEXCOORD_"+h.b(o)),s.pop();if(null!=(A=x.w)){for((n=t.c).push("targets"),c=A.length,p=d.ou(c,v.gj),s=v.X,o=v.W,g=0;g<c;++g)p[g]=h.a8(s,o);for(x.cx=p,_=0;_<A.length;++_)b=A[_],n.push(f.c.k(_)),b.L(0,new h.jV(x,e,t,_)),n.pop();n.pop()}},cb(e,t,n){var r,i=e.CW;-1===i.z&&(r=n.w.bV(i,new h.jR)).C(0,e)&&r.gi(r)>1&&n.n(m.qU(),t)}},h.jO.prototype={$1(e){var t,n,r,i,a,s,o,l,u,c,d,p,g,_=this;if(0===e.length||95!==f.a.J(e,0))switch(e){case"POSITION":_.a.c=!0;break;case"NORMAL":_.a.b=!0;break;case"TANGENT":_.a.a=!0;break;default:if(n=(t=e.split("_"))[0],!f.d.H(f.ce,n)||2!==t.length){_.b.n(m.nd(),e);break}if((r=t[1]).toString,0===(i=new h.cL(r)).gi(i))a=0,s=!1;else if(1===(o=r.length))s=!((a=f.a.J(r,0)-48)<0||a>9)||!1;else for(a=0,l=0;;){if(!(l<o)){s=!0;break}if(!((u=f.a.J(r,l)-48)<=9&&u>=0&&(0!==l||0!==u))){s=!1;break}a=10*a+u,++l}if(s)switch(n){case"COLOR":++(r=_.a).d,c=r.e,r.e=a>c?a:c;break;case"JOINTS":++(r=_.a).f,d=r.r,r.r=a>d?a:d;break;case"TEXCOORD":++(r=_.a).y,p=r.z,r.z=a>p?a:p;break;case"WEIGHTS":++(r=_.a).w,g=r.x,r.x=a>g?a:g}else _.b.n(m.nd(),e)}},$S:21},h.jP.prototype={$3(e,t,n){var r=e+1;return r!==t?(this.a.G(m.rB(),h.a([n,r,t],v.M)),0):t},$S:50},h.jQ.prototype={$1(e){var t=this.a;t.fx.v(e)||d.ts(e,"_")||t.n(m.nd(),e)},$S:21},h.jS.prototype={$2(e,t){var n,r,i,a,s,o,l,u=this;-1!==t&&(null!=(n=u.b.f.j(0,t))?((r=u.a).ay.m(0,e,n),i=u.c,n.S(f.a6,e,i),null!=(a=n.CW)&&a.S(f.A,e,i),(a="POSITION"===e&&(null==n.ax||null==n.at))&&i.n(m.nZ(),"POSITION"),s=h.dj(n),null!=(o=i.fr.j(0,h.a(e.split("_"),v.s)[0]))?o.H(0,s)?"NORMAL"===e?((a=i.c).push("NORMAL"),l=i.R(),i.Z(n,new h.fr(l,5126===n.y?null:n.gbS())),a.pop()):"TANGENT"===e?((a=i.c).push("TANGENT"),l=i.R(),i.Z(n,new h.fs(l,5126===n.y?null:n.gbS())),a.pop()):"COLOR_0"===e&&5126===n.y&&((a=i.c).push(e),i.Z(n,new h.eG(i.R())),a.pop()):i.l(m.nY(),h.a([s,o],v.M),e):5125===n.y&&i.n(m.qV(),e),(a=-1!==(a=n.x)&&a%4!=0||n.gac()%4!=0&&null!=(a=n.CW)&&-1===a.z)&&i.n(m.nX(),e),-1===(a=r.CW)?r.ch=r.CW=n.z:a!==n.z&&i.n(m.r0(),e),null!=(a=n.CW)&&-1===a.z&&(-1===a.ax&&(a.ax=n.gac()),r.cb(n,e,i))):u.c.l(m.N(),h.a([t],v.M),e))},$S:4},h.jT.prototype={$2(e,t){var n;-1!==t&&(t+1>(n=this.a).ax?this.b.l(m.o_(),h.a([e,t],v.M),"material"):n.dx[t]=-1)},$S:4},h.jU.prototype={$1:e=>-1!==e,$S:8},h.jV.prototype={$2(e,t){var n,r,i,a,s,o,l=this;-1!==t&&(null==(n=l.b.f.j(0,t))?l.c.l(m.N(),h.a([t],v.M),e):(r=l.c,n.S(f.a6,e,r),null!=(i=n.CW)&&i.S(f.A,e,r),null==(a=l.a.ay.j(0,e))?r.n(m.r_(),e):a.z!==n.z&&r.n(m.qZ(),e),(i="POSITION"===e&&(null==n.ax||null==n.at))&&r.n(m.nZ(),"POSITION"),s=h.dj(n),null==(o=r.fx.j(0,e))||o.H(0,s)||r.l(m.nY(),h.a([s,o],v.M),e),(i=-1!==(i=n.x)&&i%4!=0||n.gac()%4!=0&&null!=(i=n.CW)&&-1===i.z)&&r.n(m.nX(),e),null!=(i=n.CW)&&-1===i.z&&(-1===i.ax&&(i.ax=n.gac()),l.a.cb(n,e,r))),l.a.cx[l.d].m(0,e,n))},$S:4},h.jR.prototype={$0:()=>h.aN(v.W),$S:53},h.eQ.prototype={a_(e,t,n,r){var i,a,s=this,o=s.a;return r>o&&e.l(m.q0(),h.a([t,r,o],v.M),s.at),r===s.c&&e.l(m.q1(),h.a([r,t],v.M),s.at),s.w&&((o=s.as)[i=s.z]=r,++i,s.z=i,3===i&&(s.z=0,(o=(i=o[0])===(a=o[1])||a===(o=o[2])||o===i)&&++s.Q)),!0},aD(e){var t=this.Q;return t>0&&e.l(m.q2(),h.a([t,this.b],v.M),this.at),!0}},h.an.prototype={q(e,t){var n,r,i,a=this,s=a.w;a.CW=e.z.j(0,s),n=a.y,a.dx=e.cx.j(0,n),r=a.Q,a.cy=e.at.j(0,r),-1!==s&&(null==(i=a.CW)?t.l(m.N(),h.a([s],v.M),"camera"):i.a$=!0),-1!==n&&(null==(s=a.dx)?t.l(m.N(),h.a([n],v.M),"skin"):s.a$=!0),-1!==r&&(null==(s=a.cy)?t.l(m.N(),h.a([r],v.M),"mesh"):(s.a$=!0,null!=(s=s.w)&&((s=!(r=null==(n=a.ay))&&(s=null==(s=s.j(0,0).cx)?null:s.length)!==n.length)&&(s=m.r5(),n=n.length,i=a.cy.w.j(0,0).cx,t.l(s,h.a([n,null==i?null:i.length],v.M),"weights")),r&&null!=a.cy.x&&(a.cy.y=!0),null!=a.dx?(s=a.cy.w).ba(s,new h.jZ)&&t.O(m.r3()):(s=a.cy.w).aP(s,new h.k_)&&t.O(m.r4())))),null!=(s=a.x)&&(n=h.S(s.gi(s),null,!1,v.L),a.cx=n,h.nK(s,n,e.ax,"children",t,new h.k0(a,t)))},c8(e,t){var n,r,i,a,s=this;if(s.ch.C(0,e),null!=s.cx&&t.C(0,s))for(r=(n=s.cx).length,i=0;i<r;++i)null!=(a=n[i])&&a.c8(e,t)}},h.jZ.prototype={$1:e=>0===e.as,$S:5},h.k_.prototype={$1:e=>0!==e.as,$S:5},h.k0.prototype={$3(e,t,n){null!=e.db&&this.b.an(m.r2(),h.a([t],v.M),n),e.db=this.a},$S:9},h.bC.prototype={},h.bD.prototype={q(e,t){var n,r=this.w;null!=r&&(n=h.S(r.gi(r),null,!1,v.L),this.x=n,h.nK(r,n,e.ax,"nodes",t,new h.k9(this,t)))}},h.k9.prototype={$3(e,t,n){null!=e.db&&this.b.an(m.r6(),h.a([t],v.M),n),e.c8(this.a,h.aN(v.L))},$S:9},h.bF.prototype={q(e,t){var n,r,i,a,s,o=this,l="inverseBindMatrices",u="skeleton",c=o.w;o.z=e.f.j(0,c),n=e.ax,r=o.x,o.as=n.j(0,r),null!=(i=o.y)&&(a=h.S(i.gi(i),null,!1,v.L),o.Q=a,h.nK(i,a,n,"joints",t,new h.le(o)),0===o.at.a&&t.n(m.rS(),"joints")),-1!==c&&(null==(n=o.z)?t.l(m.N(),h.a([c],v.M),l):(n.S(f.b2,l,t),null!=(c=o.z.CW)&&c.S(f.b4,l,t),(c=t.c).push(l),null!=(n=o.z.CW)&&-1!==n.z&&t.O(m.r7()),(s=h.dj(o.z)).N(0,f.X)?t.Z(o.z,new h.eP(t.R())):t.G(m.r8(),h.a([s,h.a([f.X],v.p)],v.M)),null!=(n=o.Q)&&o.z.z<n.length&&t.G(m.qS(),h.a([n.length,o.z.z],v.M)),c.pop())),-1!==r&&(null==(c=o.as)?t.l(m.N(),h.a([r],v.M),u):o.at.H(0,c)||t.n(m.rT(),u))}},h.le.prototype={$3(e,t,n){var r,i,a;for(e.dy=!0,r=h.aN(v.L),i=e;null!=i&&r.C(0,i);)i=i.db;0===(a=this.a.at).a?a.F(0,r):a.dr(r.gcw(r),!1)},$S:9},h.eP.prototype={a_(e,t,n,r){return(3===n&&0!==r||7===n&&0!==r||11===n&&0!==r||15===n&&1!==r)&&e.l(m.q4(),h.a([t,n,r],v.M),this.a),!0}},h.bH.prototype={q(e,t){var n,r,i=this,a=i.x;i.z=e.Q.j(0,a),n=i.w,i.y=e.ay.j(0,n),-1!==a&&(null==(r=i.z)?t.l(m.N(),h.a([a],v.M),"source"):r.a$=!0),-1!==n&&(null==(a=i.y)?t.l(m.N(),h.a([n],v.M),"sampler"):a.a$=!0)},c_(e,t){var n=this.z,r=null==n,i=r?null:n.x;null==i&&(i=null==(n=r?null:n.as)?null:n.a),null==i||f.d.H(f.ao,i)||t.l(m.o0(),h.a([i,f.ao],v.M),"source")},$icy:1},h.lw.prototype={},h.i.prototype={Z(e,t){d.ne(this.d.bV(e,new h.hf),t)},U(e,t){var n,r,i;for(n=d.aC(t),r=this.e;n.p();)null!=(i=n.gt())&&r.m(0,i,e)},c2(e){var t,n,r,i=this.c;return 0===i.length&&null!=e&&f.a.W(e,"/")?e:((t=null!=e)&&i.push(e),r=(n=this.db).a+="/",n.a=h.nq(r,new h.aa(i,new h.hh,h.Z(i).h("aa<1,e*>")),"/"),t&&i.pop(),i=n.a,n.a="",i.charCodeAt(0),i)},R(){return this.c2(null)},e5(e,t){var n,r,i,a,s,o,l,u,c,p,g,_,b=this,x="/extensionsUsed/";for(f.d.F(b.as,e),n=d.T(e),r=b.ax,i=b.cx,a=f.dz.a,s=v.M,o=d.T(t),l=0;l<n.gi(e);++l)u=n.j(e,l),null==(p=null==(c=m.pX().aR(u))?null:c.b[1])?b.n(m.rq(),x+l):a.v(p)||b.l(m.rW(),h.a([p],s),x+l),null!=(g=i.bb(0,new h.hk(u),new h.hl(u)))?(g.b.L(0,new h.hm(b,g)),null!=(c=g.c)&&c.$1(b),(c=g.d&&!o.H(t,u))&&b.l(m.rQ(),h.a([u],s),x+l),r.push(u)):b.l(m.rb(),h.a([u],s),x+l);for(l=0;l<o.gi(t);++l)_=o.j(t,l),n.H(e,_)||b.l(m.rX(),h.a([_],s),"/extensionsRequired/"+l)},aa(e,t,n,r,i,a){var s,o,l,u=this,c=u.b,d=e.b;if(!c.b.H(0,d)){if((s=c.a)>0&&u.cy.length===s)throw u.y=!0,h.d(f.b9);o=null!=(c=c.c)?c.j(0,d):null,null!=a?u.cy.push(new h.cS(e,o,null,a,t)):(l=null!=n?f.c.k(n):r,c=i?"":u.c2(l),u.cy.push(new h.cS(e,o,c,null,t)))}},n(e,t){return this.aa(e,null,null,t,!1,null)},G(e,t){return this.aa(e,t,null,null,!1,null)},l(e,t,n){return this.aa(e,t,null,n,!1,null)},an(e,t,n){return this.aa(e,t,n,null,!1,null)},Y(e,t){return this.aa(e,null,t,null,!1,null)},O(e){return this.aa(e,null,null,null,!1,null)},aC(e,t,n){return this.aa(e,t,null,null,n,null)},aO(e,t){return this.aa(e,null,null,null,!1,t)},a1(e,t,n){return this.aa(e,t,null,null,!1,n)}},h.hg.prototype={$1:e=>e.a,$S:56},h.hf.prototype={$0:()=>h.a([],v.gd),$S:57},h.hh.prototype={$1(e){var t;return e.toString,t=h.pU(e,"~","~0"),h.pU(t,"/","~1")},$S:58},h.hk.prototype={$1(e){return e.a===this.a},$S:22},h.hl.prototype={$0(){return f.d.bb(f.as,new h.hi(this.a),new h.hj)},$S:60},h.hi.prototype={$1(e){return e.a===this.a},$S:22},h.hj.prototype={$0:()=>null,$S:2},h.hm.prototype={$2(e,t){this.a.z.m(0,new h.c9(e,this.b.a),t)},$S:61},h.bx.prototype={$ia7:1},h.cQ.prototype={k(e){return"ImageCodec."+this.b}},h.dR.prototype={k(e){return"_ColorPrimaries."+this.b}},h.d1.prototype={k(e){return"_ColorTransfer."+this.b}},h.ca.prototype={k(e){return"Format."+this.b}},h.cb.prototype={},h.iB.prototype={$1(e){var t,n,r,i=this.a;if(!i.c){switch(t=h.os(v.a.a(e)),n=i.a,r=this.b,t){case f.af:i.b=new h.iL(r,n);break;case f.ag:t=new Uint8Array(13),i.b=new h.k2(f.u,f.r,t,new Uint8Array(32),r,n);break;case f.ah:i.b=new h.lB(new Uint8Array(30),r,n);break;default:return n.K(),void r.P(f.bi)}i.c=!0}i.b.C(0,e)},$S:10},h.iD.prototype={$1(e){this.a.a.K(),this.b.P(e)},$S:23},h.iC.prototype={$0(){var e=this.a.b;e.b.K(),0==(30&(e=e.a).a.a)&&e.P(f.bh)},$S:2},h.iA.prototype={c6(e){var t;this.b.K(),0==(30&(t=this.a).a.a)&&t.P(e)}},h.iL.prototype={C(e,t){var n,r,i;try{this.dz(t)}catch(r){if(!((i=h.K(r))instanceof h.aJ))throw r;n=i,this.b.K(),this.a.P(n)}},dz(e){var t,n,r,i,a,s,o,l,u,c,p=this,m=new h.iN,g=new h.iM;for(t=d.T(e),n=0;n!==t.gi(e);){switch(r=t.j(e,n),p.c){case 0:if(255!==r)throw h.d(f.bT);p.c=255;break;case 255:g.$1(r)&&(p.c=1,p.d=r,p.e=p.f=0);break;case 1:p.e=r<<8>>>0,p.c=2;break;case 2:if(i=p.e+r,p.e=i,i<2)throw h.d(f.bR);m.$1(p.d)&&(i=p.e,p.r=new Uint8Array(i-2)),p.c=3;break;case 3:if(a=Math.min(t.gi(e)-n,p.e-p.f-2),i=m.$1(p.d),o=(s=p.f)+a,i){if(i=p.r,p.f=o,(i&&f.j).a4(i,s,o,e,n),p.f===p.e-2)return p.b.K(),l=(e=p.r)[0],t=e[1],i=e[2],s=e[3],o=e[4],3===(u=e[5])?c=f.p:1===u?c=f.ad:(h.a0(f.bS),c=f.O),0!=(30&(u=p.a.a).a)&&h.a0(h.cZ("Future already completed")),void u.af(new h.cb("image/jpeg",l,c,(s<<8|o)>>>0,(t<<8|i)>>>0,f.r,f.u,!1,!1))}else p.f=o,o===p.e-2&&(p.c=255);n+=a;continue}++n}}},h.iN.prototype={$1:e=>192==(240&e)&&196!==e&&200!==e&&204!==e||222===e,$S:8},h.iM.prototype={$1:e=>!(1===e||208==(248&e)||216===e||217===e||255===e),$S:8},h.k2.prototype={C(e,t){var n,r,i,a,s,o,l,u,c,p,m,g,_,v,b=this,x=new h.k3(b);for(n=d.T(t),r=b.ay,i=b.ax,a=0;a!==n.gi(t);){switch(s=n.j(t,a),b.x){case 0:a+=8,b.x=1;continue;case 1:b.c=(b.c<<8|s)>>>0,4==++b.d&&(b.x=2);break;case 2:if(o=(b.e<<8|s)>>>0,b.e=o,4==++b.f){switch(o){case 1229472850:if(13!==b.c)return b.b.K(),void(0==(30&(n=b.a).a.a)&&n.P(f.q));b.y=!0;break;case 1951551059:b.z=!0;break;case 1665684045:if(32!==b.c)return b.b.K(),void(0==(30&(n=b.a).a.a)&&n.P(f.q));break;case 1934772034:if(1!==b.c)return b.b.K(),void(0==(30&(n=b.a).a.a)&&n.P(f.q));break;case 1883789683:if(9!==b.c)return b.b.K(),void(0==(30&(n=b.a).a.a)&&n.P(f.q));break;case 1732332865:if(4!==b.c)return b.b.K(),void(0==(30&(n=b.a).a.a)&&n.P(f.q));break;case 1766015824:b.Q=f.F,b.as=f.E;break;case 1229209940:switch(b.b.K(),b.y||b.a.P(f.bQ),n=i.buffer,l=(t=new DataView(n,0)).getUint32(0,!1),u=t.getUint32(4,!1),c=t.getUint8(8),t.getUint8(9)){case 0:p=b.z?f.ae:f.ad;break;case 2:case 3:p=b.z?f.B:f.p;break;case 4:p=f.ae;break;case 6:p=f.B;break;default:p=f.O}return(n=b.as)===f.r&&(n=b.as=f.t),(r=b.Q)===f.u&&(r=b.Q=f.v),i=b.at,0!=(30&(o=b.a.a).a)&&h.a0(h.cZ("Future already completed")),void o.af(new h.cb("image/png",c,p,l,u,n,r,i,!1))}0===b.c?b.x=4:b.x=3}break;case 3:switch(o=n.gi(t),m=b.c,g=b.w,_=Math.min(o-a,m-g),b.e){case 1229472850:o=g+_,b.w=o,f.j.a4(i,g,o,t,a);break;case 1665684045:case 1732332865:case 1883789683:o=g+_,b.w=o,f.j.a4(r,g,o,t,a);break;case 1934772034:b.Q=f.v,b.as=f.t,b.w=g+1;break;default:b.w=g+_}if(b.w===b.c){switch(b.e){case 1665684045:b.as===f.r&&b.dh();break;case 1732332865:b.Q===f.u&&b.di();break;case 1883789683:o=r.buffer,(v=new DataView(o,0)).getUint32(0,!1)!==v.getUint32(4,!1)&&(b.at=!0)}b.x=4}a+=_;continue;case 4:4==++b.r&&(x.$0(),b.x=1)}++a}},di(){var e=this;if(e.Q!==f.v)switch(h.f3(e.ay.buffer,0,null).getUint32(0,!1)){case 45455:e.Q=f.v;break;case 1e5:e.Q=f.e9;break;default:e.Q=f.F}},dh(){var e,t=this;t.as!==f.t&&(31270===(e=h.f3(t.ay.buffer,0,null)).getUint32(0,!1)&&32900===e.getUint32(4,!1)&&64e3===e.getUint32(8,!1)&&33e3===e.getUint32(12,!1)&&3e4===e.getUint32(16,!1)&&6e4===e.getUint32(20,!1)&&15e3===e.getUint32(24,!1)&&6e3===e.getUint32(28,!1)?t.as=f.t:t.as=f.E)}},h.k3.prototype={$0(){var e=this.a;e.r=e.w=e.f=e.e=e.d=e.c=0},$S:1},h.lB.prototype={C(e,t){var n,r,i,a,s,o,l,u=this,c=d.a3(t),p=u.d,m=u.c;if(c=p+Math.min(c,30-p),u.d=c,f.j.d1(m,p,c,t),!(c=!((c=u.d)>=25)||c<30&&76!==m[15]))if(u.b.K(),1380533830===(n=h.f3(m.buffer,0,null)).getUint32(0,!1)&&1464156752===n.getUint32(8,!1)){switch(n.getUint32(12,!1)){case 1448097824:r=16383&n.getUint16(26,!0),i=16383&n.getUint16(28,!0),a=f.p,s=!1,o=!1;break;case 1448097868:r=1+(((c=m[21])|(63&(p=m[22]))<<8)>>>0),i=1+((p>>>6|(c=m[23])<<2|(15&(m=m[24]))<<10)>>>0),a=16==(16&m)?f.B:f.p,s=!1,o=!1;break;case 1448097880:o=2==(2&(l=m[20])),s=32==(32&l),a=16==(16&l)?f.B:f.p,r=1+((m[24]|m[25]<<8|m[26]<<16)>>>0),i=1+((m[27]|m[28]<<8|m[29]<<16)>>>0);break;default:return void u.c6(f.ai)}c=s?f.F:f.v,p=s?f.E:f.t,u.a.a2(new h.cb("image/webp",8,a,r,i,p,c,!1,o))}else u.c6(f.ai)}},h.dO.prototype={$ia7:1},h.dN.prototype={$ia7:1},h.aJ.prototype={k(e){return this.a},$ia7:1},h.d6.prototype={k(e){return"_Storage."+this.b}},h.fk.prototype={bk(){var e,t=this,n=v.X,r=v._,i=h.a8(n,r);return i.m(0,"pointer",t.a),null!=(e=t.b)&&i.m(0,"mimeType",e),null!=(e=t.c)&&i.m(0,"storage",f.co[e.a]),null!=(e=t.e)&&i.m(0,"uri",e),null!=(e=t.d)&&i.m(0,"byteLength",e),null!=(e=t.f)&&((n=h.a8(n,r)).m(0,"width",e.d),n.m(0,"height",e.e),(r=e.c)!==f.O&&n.m(0,"format",f.d1[r.a]),(r=e.f)!==f.r&&n.m(0,"primaries",f.cW[r.a]),(r=e.r)!==f.u&&n.m(0,"transfer",f.cV[r.a]),(r=e.b)>0&&n.m(0,"bits",r),i.m(0,"image",n)),i}},h.k6.prototype={aU(){return this.e7()},e7(){var e,t,n,r=0,i=h.eu(v.H),a=2,s=this,o=h.ew((function(l,u){for(1===l&&(e=u,r=a);;)switch(r){case 0:return t=!0,a=4,r=7,h.da(s.b3(),o);case 7:return r=8,h.da(s.b4(),o);case 8:t&&h.xr(s.a,s.b),s.a.ey(s.b),a=2,r=6;break;case 4:if(a=3,n=e,h.K(n)instanceof h.bx){r=1;break}throw n;case 3:r=2;break;case 6:case 1:return h.ep(void 0,i);case 2:return h.eo(e,i)}}));return h.eq(o,i)},b3(){var e,t,n,r,i,a,s,o,l,u,c,p,g,_,b,x,y,w,A=0,E=h.eu(v.H),S=1,T=this,M=h.ew((function(P,C){for(1===P&&(e=C,A=S);;)switch(A){case 0:x=T.b,y=x.c,f.d.si(y,0),y.push("buffers"),a=T.a.x,s=a.b,o=x.ch,l=v.M,u=v.x,a=a.a,c=a.length,p=0;case 2:if(!(p<s)){A=4;break}if(null==(t=(g=p>=c)?null:a[p])){A=3;break}return y.push(f.c.k(p)),(_=new h.fk(x.R())).b="application/gltf-buffer",n=new h.k7(T,_,p),r=null,S=6,A=9,h.da(n.$1(t),M);case 9:r=C,S=1,A=8;break;case 6:if(S=5,w=e,g=h.K(w),!u.b(g))throw w;i=g,x.l(m.na(),h.a([i],l),"uri"),A=8;break;case 5:A=1;break;case 8:null!=r&&(_.d=d.a3(r),d.a3(r)<t.x?x.G(m.qe(),h.a([d.a3(r),t.x],l)):(x.dx&&0===p&&!t.y&&(g=t.x,b=g+(3&-g),d.a3(r)>b&&x.G(m.qf(),h.a([d.a3(r)-b],l))),null==(g=t).z&&(g.z=r))),o.push(_.bk()),y.pop();case 3:++p,A=2;break;case 4:return h.ep(null,E);case 1:return h.eo(e,E)}}));return h.eq(M,E)},b4(){var e,t,n,r,i,a,s,o,l,u,c,d,p,g,_,b,x,y,w,A,E,S,T=0,M=h.eu(v.H),P=1,C=this,F=h.ew((function(L,N){for(1===L&&(e=N,T=P);;)switch(T){case 0:A=C.b,E=A.c,f.d.si(E,0),E.push("images"),l=C.a.Q,u=l.b,c=A.ch,d=v.M,p=v.x,g=A.dy,l=l.a,_=l.length,b=0;case 2:if(!(b<u)){T=4;break}if(null==(t=(x=b>=_)?null:l[b])){T=3;break}E.push(f.c.k(b)),y=new h.fk(A.R()),n=new h.k8(C,y),r=null;try{r=n.$1(t)}catch(e){if(x=h.K(e),!p.b(x))throw e;i=x,A.l(m.na(),h.a([i],d),"uri")}a=null,T=null!=r?5:6;break;case 5:return P=8,T=11,h.da(h.u2(r),F);case 11:a=N,(x=f.d.H(g,a.a))||A.G(m.qj(),h.a([a.a],d)),P=1,T=10;break;case 8:if(P=7,S=e,(x=h.K(S))instanceof h.dO)A.O(m.qm());else if(x instanceof h.dN)A.O(m.ql());else if(x instanceof h.aJ)s=x,A.G(m.qg(),h.a([s],d));else{if(!p.b(x))throw S;o=x,A.l(m.na(),h.a([o],d),"uri")}T=10;break;case 7:T=1;break;case 10:null!=a&&(y.b=a.a,null!=t.x&&t.x!==a.a&&(x=m.qi(),w=h.a([a.a,t.x],d),A.l(x,w,y.c===f.aM?"bufferView":"uri")),(x=0===(x=a.d)||(x&x-1)>>>0!=0||!(0!==(x=a.e)&&(x&x-1)>>>0==0))&&A.G(m.qk(),h.a([a.d,a.e],d)),((x=a).f===f.E||x.r===f.F||a.x||a.w)&&A.O(m.qh()),t.as=a,y.f=a);case 6:c.push(y.bk()),E.pop();case 3:++b,T=2;break;case 4:return h.ep(null,M);case 1:return h.eo(e,M)}}));return h.eq(F,M)}},h.k7.prototype={$1(e){var t,n,r,i=this;return-1===e.x?null:null!=(t=e.w)?((n=i.b).c=f.aN,n.e=t.k(0),i.a.c.$1(t)):null!=(t=e.z)?(i.b.c=f.aL,t):(n=(t=i.a).b).dx&&0===i.c&&!e.y?(i.b.c=f.eb,null==(r=t.c.$0())&&n.O(m.qO()),r):null},$S:64},h.k8.prototype={$1(e){var t,n,r=this;if(0===e.a.a){if(null!=(t=e.y))return(n=r.b).c=f.aN,n.e=t.k(0),r.a.d.$1(t);if(null!=(t=e.z))return r.b.c=f.aL,h.np(t,v.w);if(null!=e.Q&&(r.b.c=f.aM,e.ev(),null!=(t=e.z)))return h.np(t,v.w)}return null},$S:65},h.n7.prototype={$2(e,t){var n,r,i,a,s,o,l,u,c=h.mB(t);if(null!=(null==c?null:c.ay)&&(n=(c=this.a).c,f.d.si(n,0),n.push("accessors"),n.push(f.c.k(e)),null!=(r=t.ay.ge4())))for(n=r.length,i=t.z,a=v.M,s=0,o=-1,l=0;l<n;++l,o=u)u=r[l],-1!==o&&u<=o&&c.l(m.qb(),h.a([s,u,o],a),"sparse"),u>=i&&c.l(m.qa(),h.a([s,u,i],a),"sparse"),++s},$S:66},h.n8.prototype={$1:e=>0===e.as,$S:5},h.n9.prototype={$2(e,t){for(var n,r,i,a,s=this,o=null,l=t.CW,u=t.as,c=h.S(u,o,!1,v.bF),d=h.S(u,o,!1,v.ga),p=v.hc,m=t.ay,g=0;;){if(!(g<u)){n=!1;break}if(r=""+g,i=h.mB(m.j(0,"JOINTS_"+r)),a=h.mB(m.j(0,"WEIGHTS_"+r)),r=(null==i?o:i.z)!==l||(null==a?o:a.z)!==l){n=!0;break}r=p.a(i).ad(),c[g]=new h.aG(r.a(),h.C(r).h("aG<1>")),r=a.bn(),d[g]=new h.aG(r.a(),h.C(r).h("aG<1>")),++g}n||((p=(u=s.b).c).push(f.c.k(e)),p.push("attributes"),m=s.c,f.d.F(m,c),f.d.F(m,d),u=u.R(),m=s.a,s.d.push(new h.eT(c,d,m.b-1,m.a,u,h.aN(v.e))),p.pop(),p.pop())},$S:20},h.mE.prototype={$1:e=>null==e.gt(),$S:67},h.eT.prototype={dU(e){var t,n,r,i,a,s,o,l,u,c,d,f,p,g,_,b=this;for(n=(t=b.a).length,r=b.b,i=b.c,s=(a=b.e)+"/JOINTS_",o=v.M,l=b.z,a+="/WEIGHTS_",u=b.d,c=0;c<n;++c){if(null==(d=t[c].gt()))return void(b.w=!0);d>i?e.l(m.q7(),h.a([b.f,b.r,d,i,u],o),s+c):0!==(f=r[c].gt())?(l.C(0,d)?p=!0:(e.l(m.q6(),h.a([b.f,b.r,d],o),s+c),p=!1),f<0?e.l(m.qc(),h.a([b.f,b.r,f],o),a+c):p&&(g=b.x,(_=m.ob())[0]=g+f,b.x=_[0],b.y+=2e-7)):0!==d&&e.l(m.q8(),h.a([b.f,b.r,d],o),s+c)}if(4==++b.r){if(Math.abs(b.x-1)>b.y)for(c=0;c<n;++c)t=m.qd(),r=b.f,e.l(t,h.a([r-3,r,b.x],o),a+c);l.cv(0),b.x=b.y=b.r=0}++b.f}},h.bE.prototype={k(e){return"Severity."+this.b}},h.iG.prototype={},h.hn.prototype={},h.hK.prototype={$1:e=>"Actual data byte length ("+h.b(e[0])+") is less than the declared buffer byte length ("+h.b(e[1])+").",$S:0},h.hL.prototype={$1:e=>"GLB-stored BIN chunk contains "+h.b(e[0])+" extra padding byte(s).",$S:0},h.hD.prototype={$1:e=>"Declared minimum value for this component ("+h.b(e[0])+") does not match actual minimum ("+h.b(e[1])+").",$S:0},h.hC.prototype={$1:e=>"Declared maximum value for this component ("+h.b(e[0])+") does not match actual maximum ("+h.b(e[1])+").",$S:0},h.hs.prototype={$1:e=>"Accessor contains "+h.b(e[0])+" element(s) less than declared minimum value "+h.b(e[1])+".",$S:0},h.hr.prototype={$1:e=>"Accessor contains "+h.b(e[0])+" element(s) greater than declared maximum value "+h.b(e[1])+".",$S:0},h.hH.prototype={$1:e=>"Vector3 at accessor indices "+h.b(e[0])+".."+h.b(e[1])+" is not of unit length: "+h.b(e[2])+".",$S:0},h.hy.prototype={$1:e=>"Vector3 with sign at accessor indices "+h.b(e[0])+".."+h.b(e[1])+" has invalid w component: "+h.b(e[2])+". Must be 1.0 or -1.0.",$S:0},h.hq.prototype={$1:e=>"Animation sampler output accessor element at indices "+h.b(e[0])+".."+h.b(e[1])+" is not of unit length: "+h.b(e[2])+".",$S:0},h.hE.prototype={$1:e=>"Accessor element at index "+h.b(e[0])+" is not clamped to 0..1 range: "+h.b(e[1])+".",$S:0},h.hw.prototype={$1:e=>"Accessor element at index "+h.b(e[0])+" is "+h.b(e[1])+".",$S:0},h.ht.prototype={$1:e=>"Indices accessor element at index "+h.b(e[0])+" has value "+h.b(e[1])+" that is greater than the maximum vertex index available ("+h.b(e[2])+").",$S:0},h.hv.prototype={$1:e=>"Indices accessor contains "+h.b(e[0])+" degenerate triangles (out of "+h.b(e[1])+").",$S:0},h.hu.prototype={$1:e=>"Indices accessor contains primitive restart value ("+h.b(e[0])+") at index "+h.b(e[1])+".",$S:0},h.ho.prototype={$1:e=>_.m+h.b(e[0])+" is negative: "+h.b(e[1])+".",$S:0},h.hp.prototype={$1:e=>_.m+h.b(e[0])+" is less than or equal to previous: "+h.b(e[1])+" <= "+h.b(e[2])+".",$S:0},h.hG.prototype={$1:e=>_.d+h.b(e[0])+" is less than or equal to previous: "+h.b(e[1])+" <= "+h.b(e[2])+".",$S:0},h.hF.prototype={$1:e=>_.d+h.b(e[0])+" is greater than or equal to the number of accessor elements: "+h.b(e[1])+" >= "+h.b(e[2])+".",$S:0},h.hx.prototype={$1:e=>"Matrix element at index "+h.b(e[0])+" (component index "+h.b(e[1])+") contains invalid value: "+h.b(e[2])+".",$S:0},h.hN.prototype={$1:e=>"Image data is invalid. "+h.b(e[0]),$S:0},h.hP.prototype={$1:e=>"Recognized image format '"+h.b(e[0])+"' does not match declared image format '"+h.b(e[1])+"'.",$S:0},h.hS.prototype={$1:e=>"Unexpected end of image stream.",$S:0},h.hT.prototype={$1:e=>"Image format not recognized.",$S:0},h.hQ.prototype={$1:e=>"'"+h.b(e[0])+"' MIME type requires an extension.",$S:0},h.hR.prototype={$1:e=>"Image has non-power-of-two dimensions: "+h.b(e[0])+"x"+h.b(e[1])+".",$S:0},h.hO.prototype={$1:e=>"Image contains unsupported features like non-default colorspace information, non-square pixels, or animation.",$S:0},h.hU.prototype={$1:e=>"URI is used in GLB container.",$S:0},h.hM.prototype={$1:e=>"Data URI is used in GLB container.",$S:0},h.hA.prototype={$1:e=>"Joints accessor element at index "+h.b(e[0])+" (component index "+h.b(e[1])+") has value "+h.b(e[2])+" that is greater than the maximum joint index ("+h.b(e[3])+") set by skin "+h.b(e[4])+".",$S:0},h.hz.prototype={$1:e=>"Joints accessor element at index "+h.b(e[0])+" (component index "+h.b(e[1])+") has value "+h.b(e[2])+" that is already in use for the vertex.",$S:0},h.hI.prototype={$1:e=>"Weights accessor element at index "+h.b(e[0])+" (component index "+h.b(e[1])+") has negative value "+h.b(e[2])+".",$S:0},h.hJ.prototype={$1:e=>"Weights accessor elements (at indices "+h.b(e[0])+".."+h.b(e[1])+") have non-normalized sum: "+h.b(e[2])+".",$S:0},h.hB.prototype={$1:e=>"Joints accessor element at index "+h.b(e[0])+" (component index "+h.b(e[1])+") is used with zero weight but has non-zero value ("+h.b(e[2])+").",$S:0},h.iE.prototype={},h.iF.prototype={$1:e=>d.aq(e[0]),$S:0},h.ka.prototype={},h.kc.prototype={$1:e=>"Invalid array length "+h.b(e[0])+". Valid lengths are: "+d.br(v.Y.a(e[1]),h.pE(),v.X).k(0)+".",$S:0},h.kd.prototype={$1(e){var t=e[0];return t="string"==typeof t?"'"+t+"'":d.aq(t),"Type mismatch. Array element "+h.b(t)+" is not a '"+h.b(e[1])+"'."},$S:0},h.kb.prototype={$1:e=>"Duplicate element.",$S:0},h.kf.prototype={$1:e=>"Index must be a non-negative integer.",$S:0},h.kg.prototype={$1:e=>"Invalid JSON data. Parser output: "+h.b(e[0]),$S:0},h.kh.prototype={$1:e=>"Invalid URI '"+h.b(e[0])+"'. Parser output:\n"+h.b(e[1]),$S:0},h.ke.prototype={$1:e=>"Entity cannot be empty.",$S:0},h.ki.prototype={$1:e=>(e.toString,"Exactly one of "+new h.aa(e,h.dh(),h.Z(e).h("aa<1,e*>")).k(0)+" properties must be defined."),$S:0},h.kj.prototype={$1:e=>"Value '"+h.b(e[0])+"' does not match regexp pattern '"+h.b(e[1])+"'.",$S:0},h.kk.prototype={$1(e){var t=e[0];return t="string"==typeof t?"'"+t+"'":d.aq(t),"Type mismatch. Property value "+h.b(t)+" is not a '"+h.b(e[1])+"'."},$S:0},h.kp.prototype={$1(e){var t=e[0];return t="string"==typeof t?"'"+t+"'":d.aq(t),"Invalid value "+h.b(t)+". Valid values are "+d.br(v.Y.a(e[1]),h.pE(),v.X).k(0)+"."},$S:0},h.kq.prototype={$1:e=>"Value "+h.b(e[0])+" is out of range.",$S:0},h.ko.prototype={$1:e=>"Value "+h.b(e[0])+" is not a multiple of "+h.b(e[1])+".",$S:0},h.kl.prototype={$1:e=>"Property '"+h.b(e[0])+"' must be defined.",$S:0},h.km.prototype={$1:e=>"Unexpected property.",$S:0},h.kn.prototype={$1:e=>"Dependency failed. '"+h.b(e[0])+"' must be defined.",$S:0},h.kr.prototype={},h.la.prototype={$1:e=>"Unknown glTF major asset version: "+h.b(e[0])+".",$S:0},h.lb.prototype={$1:e=>"Unknown glTF minor asset version: "+h.b(e[0])+".",$S:0},h.kW.prototype={$1:e=>"Asset minVersion '"+h.b(e[0])+"' is greater than version '"+h.b(e[1])+"'.",$S:0},h.kG.prototype={$1:e=>"Invalid value "+h.b(e[0])+" for GL type '"+h.b(e[1])+"'.",$S:0},h.kt.prototype={$1:e=>"Only (u)byte and (u)short accessors can be normalized.",$S:0},h.ku.prototype={$1:e=>"Offset "+h.b(e[0])+" is not a multiple of componentType length "+h.b(e[1])+".",$S:0},h.ks.prototype={$1:e=>"Matrix accessors must be aligned to 4-byte boundaries.",$S:0},h.kv.prototype={$1:e=>"Sparse accessor overrides more elements ("+h.b(e[0])+") than the base accessor contains ("+h.b(e[1])+").",$S:0},h.kw.prototype={$1:e=>"Animated TRS properties will not affect a skinned mesh.",$S:0},h.kx.prototype={$1:e=>"Data URI media type must be 'application/octet-stream' or 'application/gltf-buffer'. Found '"+h.b(e[0])+"' instead.",$S:0},h.kz.prototype={$1:e=>"Buffer view's byteStride ("+h.b(e[0])+") is greater than byteLength ("+h.b(e[1])+").",$S:0},h.ky.prototype={$1:e=>"Only buffer views with raw vertex data can have byteStride.",$S:0},h.kA.prototype={$1:e=>"xmag and ymag should not be negative.",$S:0},h.kB.prototype={$1:e=>"xmag and ymag must not be zero.",$S:0},h.kC.prototype={$1:e=>"yfov should be less than Pi.",$S:0},h.kD.prototype={$1:e=>"zfar must be greater than znear.",$S:0},h.kO.prototype={$1:e=>"Alpha cutoff is supported only for 'MASK' alpha mode.",$S:0},h.kR.prototype={$1:e=>"Invalid attribute name.",$S:0},h.kV.prototype={$1:e=>"All primitives must have the same number of morph targets.",$S:0},h.kT.prototype={$1:e=>"No POSITION attribute found.",$S:0},h.kQ.prototype={$1:e=>"Indices for indexed attribute semantic '"+h.b(e[0])+"' must start with 0 and be continuous. Total expected indices: "+h.b(e[1])+", total provided indices: "+h.b(e[2])+".",$S:0},h.kU.prototype={$1:e=>"TANGENT attribute without NORMAL found.",$S:0},h.kS.prototype={$1:e=>"Number of JOINTS attribute semantics ("+h.b(e[0])+") does not match the number of WEIGHTS ("+h.b(e[1])+").",$S:0},h.kP.prototype={$1:e=>"The length of weights array ("+h.b(e[0])+_.p+h.b(e[1])+").",$S:0},h.l_.prototype={$1:e=>"A node can have either a matrix or any combination of translation/rotation/scale (TRS) properties.",$S:0},h.kY.prototype={$1:e=>"Do not specify default transform matrix.",$S:0},h.l0.prototype={$1:e=>"Matrix must be decomposable to TRS.",$S:0},h.l7.prototype={$1:e=>"Rotation quaternion must be normalized.",$S:0},h.ld.prototype={$1:e=>"Unused extension '"+h.b(e[0])+"' cannot be required.",$S:0},h.l6.prototype={$1:e=>"Extension '"+h.b(e[0])+"' cannot be optional.",$S:0},h.lc.prototype={$1:e=>"Extension uses unreserved extension prefix '"+h.b(e[0])+"'.",$S:0},h.kF.prototype={$1:e=>"Extension name has invalid format.",$S:0},h.kZ.prototype={$1:e=>"Empty node encountered.",$S:0},h.l3.prototype={$1:e=>"Node with a skinned mesh is not root. Parent transforms will not affect a skinned mesh.",$S:0},h.l2.prototype={$1:e=>"Local transforms will not affect a skinned mesh.",$S:0},h.l1.prototype={$1:e=>"A node with a skinned mesh is used in a scene that does not contain joint nodes.",$S:0},h.l8.prototype={$1:e=>"Joints do not have a common root.",$S:0},h.l9.prototype={$1:e=>"Skeleton node is not a common root.",$S:0},h.l5.prototype={$1:e=>"Non-relative URI found: '"+h.b(e[0])+"'.",$S:0},h.kX.prototype={$1:e=>"This extension may be incompatible with other extensions for the object.",$S:0},h.l4.prototype={$1:e=>"Prefer JSON Objects for extras.",$S:0},h.kE.prototype={$1:e=>"This property should not be defined as it will not be used.",$S:0},h.kH.prototype={$1:e=>"outerConeAngle ("+h.b(e[1])+") is less than or equal to innerConeAngle ("+h.b(e[0])+").",$S:0},h.kI.prototype={$1:e=>"Emissive strength has no effect when the emissive factor is zero or undefined.",$S:0},h.kN.prototype={$1:e=>"The volume extension needs to be combined with an extension that allows light to transmit through the surface.",$S:0},h.kM.prototype={$1:e=>"The volume extension should not be used with double-sided materials.",$S:0},h.kK.prototype={$1:e=>"Thickness minimum has no effect when a thickness texture is not defined.",$S:0},h.kJ.prototype={$1:e=>"Thickness maximum must be greater than or equal to the thickness minimum.",$S:0},h.kL.prototype={$1:e=>"Thickness texture has no effect when the thickness minimum is equal to the thickness maximum.",$S:0},h.iX.prototype={},h.j_.prototype={$1:e=>"Accessor's total byteOffset "+h.b(e[0])+" isn't a multiple of componentType length "+h.b(e[1])+".",$S:0},h.iY.prototype={$1:e=>"Referenced bufferView's byteStride value "+h.b(e[0])+" is less than accessor element's length "+h.b(e[1])+".",$S:0},h.iZ.prototype={$1:e=>"Accessor (offset: "+h.b(e[0])+", length: "+h.b(e[1])+") does not fit referenced bufferView ["+h.b(e[2])+"] length "+h.b(e[3])+".",$S:0},h.j0.prototype={$1:e=>"Override of previously set accessor usage. Initial: '"+h.b(e[0])+"', new: '"+h.b(e[1])+"'.",$S:0},h.j3.prototype={$1:e=>"Animation channel has the same target as channel "+h.b(e[0])+".",$S:0},h.j1.prototype={$1:e=>"Animation channel cannot target TRS properties of a node with defined matrix.",$S:0},h.j2.prototype={$1:e=>"Animation channel cannot target WEIGHTS when mesh does not have morph targets.",$S:0},h.j7.prototype={$1:e=>"accessor.min and accessor.max must be defined for animation input accessor.",$S:0},h.j5.prototype={$1:e=>"Invalid Animation sampler input accessor format '"+h.b(e[0])+"'. Must be one of "+d.br(v.Y.a(e[1]),h.dh(),v.X).k(0)+".",$S:0},h.j9.prototype={$1:e=>"Invalid animation sampler output accessor format '"+h.b(e[0])+"' for path '"+h.b(e[2])+"'. Must be one of "+d.br(v.Y.a(e[1]),h.dh(),v.X).k(0)+".",$S:0},h.j6.prototype={$1:e=>"Animation sampler output accessor with '"+h.b(e[0])+"' interpolation must have at least "+h.b(e[1])+" elements. Got "+h.b(e[2])+".",$S:0},h.j8.prototype={$1:e=>"Animation sampler output accessor of count "+h.b(e[0])+" expected. Found "+h.b(e[1])+".",$S:0},h.j4.prototype={$1:e=>"bufferView.byteStride must not be defined for buffer views used by animation sampler accessors.",$S:0},h.ja.prototype={$1:e=>"Buffer refers to an unresolved GLB binary chunk.",$S:0},h.jd.prototype={$1:e=>"BufferView does not fit buffer ("+h.b(e[0])+") byteLength ("+h.b(e[1])+").",$S:0},h.jc.prototype={$1:e=>"Override of previously set bufferView target or usage. Initial: '"+h.b(e[0])+"', new: '"+h.b(e[1])+"'.",$S:0},h.jb.prototype={$1:e=>"bufferView.target should be set for vertex or index data.",$S:0},h.je.prototype={$1:e=>"bufferView.byteStride must not be defined for buffer views containing image data.",$S:0},h.jf.prototype={$1:e=>"IBM accessor must have at least "+h.b(e[0])+" elements. Found "+h.b(e[1])+".",$S:0},h.jj.prototype={$1:e=>"Invalid accessor format '"+h.b(e[0])+"' for this attribute semantic. Must be one of "+d.br(v.Y.a(e[1]),h.dh(),v.X).k(0)+".",$S:0},h.jk.prototype={$1:e=>"Mesh attributes cannot use UNSIGNED_INT component type.",$S:0},h.jq.prototype={$1:e=>"accessor.min and accessor.max must be defined for POSITION attribute accessor.",$S:0},h.ji.prototype={$1:e=>"bufferView.byteStride must be defined when two or more accessors use the same buffer view.",$S:0},h.jh.prototype={$1:e=>"Vertex attribute data must be aligned to 4-byte boundaries.",$S:0},h.jn.prototype={$1:e=>"bufferView.byteStride must not be defined for indices accessor.",$S:0},h.jm.prototype={$1:e=>"Invalid indices accessor format '"+h.b(e[0])+"'. Must be one of "+d.br(v.Y.a(e[1]),h.dh(),v.X).k(0)+". ",$S:0},h.jl.prototype={$1:e=>"Number of vertices or indices ("+h.b(e[0])+") is not compatible with used drawing mode ('"+h.b(e[1])+"').",$S:0},h.jr.prototype={$1:e=>"Material is incompatible with mesh primitive: Texture binding '"+h.b(e[0])+"' needs 'TEXCOORD_"+h.b(e[1])+"' attribute.",$S:0},h.js.prototype={$1:e=>"All accessors of the same primitive must have the same count.",$S:0},h.jp.prototype={$1:e=>"The mesh primitive does not define this attribute semantic.",$S:0},h.jo.prototype={$1:e=>"Base accessor has different count.",$S:0},h.jt.prototype={$1:e=>"Node is a part of a node loop.",$S:0},h.ju.prototype={$1:e=>"Value overrides parent of node "+h.b(e[0])+".",$S:0},h.jx.prototype={$1(e){var t=h.b(e[0]),n=e[1];return"The length of weights array ("+t+_.p+h.b(null==n?0:n)+")."},$S:0},h.jv.prototype={$1:e=>"Node has skin defined, but mesh has no joints data.",$S:0},h.jw.prototype={$1:e=>"Node uses skinned mesh, but has no skin defined.",$S:0},h.jy.prototype={$1:e=>"Node "+h.b(e[0])+" is not a root node.",$S:0},h.jA.prototype={$1:e=>"Invalid IBM accessor format '"+h.b(e[0])+"'. Must be one of "+d.br(v.Y.a(e[1]),h.dh(),v.X).k(0)+". ",$S:0},h.jz.prototype={$1:e=>"bufferView.byteStride must not be defined for buffer views used by inverse bind matrices accessors.",$S:0},h.jB.prototype={$1:e=>"Invalid MIME type '"+h.b(e[0])+"' for the texture source. Valid MIME types are "+d.br(v.Y.a(e[1]),h.dh(),v.X).k(0)+".",$S:0},h.jC.prototype={$1:e=>"Extension is not declared in extensionsUsed.",$S:0},h.jD.prototype={$1:e=>"Unexpected location for this extension.",$S:0},h.jE.prototype={$1:e=>"Unresolved reference: "+h.b(e[0])+".",$S:0},h.jF.prototype={$1:e=>"Cannot validate an extension as it is not supported by the validator: '"+h.b(e[0])+"'.",$S:0},h.jI.prototype={$1:e=>"This object may be unused.",$S:0},h.jH.prototype={$1:e=>"The static morph target weights are always overridden.",$S:0},h.jG.prototype={$1:e=>"Tangents are not used because the material has no normal texture.",$S:0},h.jg.prototype={$1:e=>"This variant is used more than once for this mesh primitive.",$S:0},h.hY.prototype={},h.i4.prototype={$1:e=>"Invalid GLB magic value ("+h.b(e[0])+").",$S:0},h.i5.prototype={$1:e=>"Invalid GLB version value "+h.b(e[0])+".",$S:0},h.i7.prototype={$1:e=>"Declared GLB length ("+h.b(e[0])+") is too small.",$S:0},h.hZ.prototype={$1:e=>"Length of "+h.b(e[0])+" chunk is not aligned to 4-byte boundaries.",$S:0},h.i6.prototype={$1:e=>"Declared length ("+h.b(e[0])+") does not match GLB length ("+h.b(e[1])+").",$S:0},h.i_.prototype={$1:e=>"Chunk ("+h.b(e[0])+") length ("+h.b(e[1])+") does not fit total GLB length.",$S:0},h.i2.prototype={$1:e=>"Chunk ("+h.b(e[0])+") cannot have zero length.",$S:0},h.i1.prototype={$1:e=>"Empty BIN chunk should be omitted.",$S:0},h.i0.prototype={$1:e=>"Chunk of type "+h.b(e[0])+" has already been used.",$S:0},h.ia.prototype={$1:e=>"Unexpected end of chunk header.",$S:0},h.i9.prototype={$1:e=>"Unexpected end of chunk data.",$S:0},h.ib.prototype={$1:e=>"Unexpected end of header.",$S:0},h.ic.prototype={$1:e=>"First chunk must be of JSON type. Found "+h.b(e[0])+" instead.",$S:0},h.i8.prototype={$1:e=>"BIN chunk must be the second chunk.",$S:0},h.id.prototype={$1:e=>"Unknown GLB chunk type: "+h.b(e[0])+".",$S:0},h.i3.prototype={$1:e=>"Extra data after the end of GLB stream.",$S:0},h.cS.prototype={gbi(){return d.tv(this.a.c.$1(this.e))},gc4(){var e=this.b;return null==e?this.a.a:e},gE(e){return f.a.gE(this.k(0))},N(e,t){return null!=t&&t instanceof h.cS&&t.k(0)===this.k(0)},k(e){var t=this,n=t.c;return null!=n&&0!==n.length?h.b(n)+": "+t.gbi():null!=(n=t.d)?"@"+h.b(n)+": "+t.gbi():t.gbi()}},h.c8.prototype={q(e,t){var n=this.d,r=this.e=e.Q.j(0,n);-1!==n&&(null==r?t.l(m.N(),h.a([n],v.M),"source"):r.a$=!0)},c_(e,t){var n=this.e,r=null==n,i=r?null:n.x;null==i&&(i=null==(n=r?null:n.as)?null:n.a),null!=i&&"image/webp"!==i&&t.l(m.o0(),h.a([i,f.cX],v.M),"source")},$icy:1},h.bz.prototype={q(e,t){var n,r,i=t.c;i.push("lights"),n=this.d,r=d.cT(i.slice(0),h.Z(i).c),t.x.m(0,n,r),n.a3(new h.iR(t,e)),i.pop()}},h.iR.prototype={$2(e,t){var n=this.a.c;n.push(f.c.k(e)),n.pop()},$S:69},h.ba.prototype={},h.cd.prototype={},h.ce.prototype={q(e,t){var n,r,i=e.a.j(0,"KHR_lights_punctual");i instanceof h.bz?(n=this.d,r=this.e=i.d.j(0,n),-1!==n&&(null==r?t.l(m.N(),h.a([n],v.M),"light"):r.a$=!0)):t.G(m.cJ(),h.a(["/extensions/KHR_lights_punctual"],v.M))}},h.cf.prototype={q(e,t){var n,r=this.e;null!=r&&((n=t.c).push("clearcoatTexture"),r.q(e,t),n.pop()),null!=(r=this.r)&&((n=t.c).push("clearcoatRoughnessTexture"),r.q(e,t),n.pop()),null!=(r=this.w)&&((n=t.c).push("clearcoatNormalTexture"),r.q(e,t),n.pop())}},h.cg.prototype={q(e,t){var n,r,i=this.d;if(!(i=isNaN(i)||1===i))for(i=t.e,n=this;null!=n;)if((n=i.j(0,n))instanceof h.av){null!=(r=n.Q)&&d.aj(r[0],0)&&d.aj(r[1],0)&&d.aj(r[2],0)&&t.O(m.rt());break}}},h.ch.prototype={},h.ci.prototype={q(e,t){var n,r=this.e;null!=r&&((n=t.c).push("iridescenceTexture"),r.q(e,t),n.pop()),null!=(r=this.x)&&((n=t.c).push("iridescenceThicknessTexture"),r.q(e,t),n.pop())}},h.cj.prototype={q(e,t){var n,r=this.e;null!=r&&((n=t.c).push("diffuseTexture"),r.q(e,t),n.pop()),null!=(r=this.w)&&((n=t.c).push("specularGlossinessTexture"),r.q(e,t),n.pop())}},h.ck.prototype={q(e,t){var n,r=this.e;null!=r&&((n=t.c).push("sheenColorTexture"),r.q(e,t),n.pop()),null!=(r=this.r)&&((n=t.c).push("sheenRoughnessTexture"),r.q(e,t),n.pop())}},h.cl.prototype={q(e,t){var n,r=this.e;null!=r&&((n=t.c).push("specularTexture"),r.q(e,t),n.pop()),null!=(r=this.r)&&((n=t.c).push("specularColorTexture"),r.q(e,t),n.pop())}},h.cm.prototype={q(e,t){var n,r=this.e;null!=r&&((n=t.c).push("transmissionTexture"),r.q(e,t),n.pop())}},h.cn.prototype={},h.bA.prototype={q(e,t){var n,r,i=t.c;i.push("variants"),n=this.d,r=d.cT(i.slice(0),h.Z(i).c),t.x.m(0,n,r),n.a3(new h.iS(t,e)),i.pop()}},h.iS.prototype={$2(e,t){var n=this.a.c;n.push(f.c.k(e)),n.pop()},$S:70},h.aK.prototype={},h.co.prototype={q(e,t){var n=t.c;n.push("mappings"),this.d.a3(new h.iV(t,e,h.aN(v.e))),n.pop()}},h.iV.prototype={$2(e,t){var n=this.a,r=n.c;r.push(f.c.k(e)),t.cN(this.b,n,this.c),r.pop()},$S:71},h.bb.prototype={cN(e,t,n){var r,i,a,s=this,o=e.a.j(0,"KHR_materials_variants");if(o instanceof h.bA){if(null!=(r=s.d)&&((i=t.c).push("variants"),h.oz(r.gi(r),new h.iT(s,o,t,n),!1,v.J),i.pop()),r=s.e,i=s.r=e.as.j(0,r),-1!==r)if(null==i)t.l(m.N(),h.a([r],v.M),"material");else for(i.a$=!0,r=t.e,a=s;null!=a;)if((a=r.j(0,a))instanceof h.aF){s.r.ch.L(0,new h.iU(a,t));break}}else t.G(m.cJ(),h.a(["/extensions/KHR_materials_variants"],v.M))},q(e,t){return this.cN(e,t,null)}},h.iT.prototype={$1(e){var t=this,n=t.a.d.j(0,e),r=t.b.d.j(0,n);return-1!==n&&(t.d.C(0,n)||t.c.Y(m.qT(),e),null==r?t.c.an(m.N(),h.a([n],v.M),e):r.a$=!0),r},$S:72},h.iU.prototype={$2(e,t){var n;-1!==t&&(t+1>(n=this.a).ax?this.b.l(m.o_(),h.a([e,t],v.M),"material"):n.dx[t]=-1)},$S:4},h.cp.prototype={q(e,t){var n,r,i=this.r;for(null!=i&&((n=t.c).push("thicknessTexture"),i.q(e,t),n.pop()),i=t.e,r=this;null!=r;)if((r=i.j(0,r))instanceof h.av){(i=r.a).v("KHR_materials_transmission")||i.gV().aP(0,new h.iW)||t.O(m.ry()),r.ax&&this.f>0&&t.O(m.rx());break}}},h.iW.prototype={$1:e=>v.h.b(e),$S:73},h.cq.prototype={q(e,t){var n,r;for(n=t.e,r=this;null!=r;)if((r=n.j(0,r))instanceof h.av){r.ch.m(0,t.R(),this.r);break}}},h.O.prototype={},h.V.prototype={},h.c9.prototype={gE(e){var t=d.bW(this.a),n=d.bW(this.b);return h.pp(h.fV(h.fV(0,f.c.gE(t)),f.c.gE(n)))},N(e,t){return null!=t&&t instanceof h.c9&&this.b==t.b&&this.a==t.a}},h.cr.prototype={},h.fl.prototype={},h.dr.prototype={bW(){var e=this,t=e.d=e.c.bO(new h.ih(e),e.gdv(),e.gci()),n=e.ch;return n.e=t.gec(),n.f=t.gef(),n.r=new h.ii(e),e.e.a},aL(){this.d.K();var e=this.e;0==(30&e.a.a)&&e.a2(new h.at("model/gltf-binary",null,this.cx))},du(e){var t,n,r,i,a,s,o,l,u,c,p,g,_,b,x,y,w=this,A="model/gltf-binary",E="0";for(w.d.aV(),t=d.T(e),n=v.f,r=v.G,i=v.M,a=w.a,s=0;s!==t.gi(e);)switch(w.r){case 0:if(o=t.gi(e),o=(l=w.w)+(u=Math.min(o-s,12-l)),w.w=o,f.j.a4(a,l,o,e,s),s+=u,w.x=u,12!==w.w)break;if(1179937895!==(c=w.b.getUint32(0,!0)))return w.f.a1(m.qt(),h.a([c],i),0),w.d.K(),void(0==(30&(t=w.e.a).a)&&(n=w.cx,t.af(new h.at(A,null,n))));if(2!==(p=w.b.getUint32(4,!0)))return w.f.a1(m.qu(),h.a([p],i),4),w.d.K(),void(0==(30&(t=w.e.a).a)&&(n=w.cx,t.af(new h.at(A,null,n))));(o=w.y=w.b.getUint32(8,!0))<=w.x&&w.f.a1(m.qw(),h.a([o],i),8),w.r=1,w.w=0;break;case 1:if((o=w.x)===w.y)return w.f.aO(m.qs(),o),w.d.K(),void w.cg();if(o=t.gi(e),o=(l=w.w)+(u=Math.min(o-s,8-l)),w.w=o,f.j.a4(a,l,o,e,s),s+=u,w.x+=u,8!==w.w)break;switch(w.Q=w.b.getUint32(0,!0),o=w.b.getUint32(4,!0),w.as=o,0!=(3&w.Q)&&(l=w.f,g=m.qn(),_=w.x,l.a1(g,h.a(["0x"+f.a.ap(f.c.au(o,16),8,E)],i),_-8)),w.x+w.Q>w.y&&w.f.a1(m.qo(),h.a(["0x"+f.a.ap(f.c.au(w.as,16),8,E),w.Q],i),w.x-8),0===w.z&&1313821514!==w.as&&w.f.a1(m.qB(),h.a(["0x"+f.a.ap(f.c.au(w.as,16),8,E)],i),w.x-8),5130562===(o=w.as)&&w.z>1&&!w.CW&&w.f.a1(m.qx(),h.a(["0x"+f.a.ap(f.c.au(o,16),8,E)],i),w.x-8),b=new h.ie(w),o=w.as){case 1313821514:0===w.Q&&(l=w.f,g=m.qr(),_=w.x,l.a1(g,h.a(["0x"+f.a.ap(f.c.au(o,16),8,E)],i),_-8)),b.$1$seen(w.at),w.at=!0;break;case 5130562:0===w.Q&&w.f.aO(m.qq(),w.x-8),b.$1$seen(w.CW),w.CW=!0;break;default:w.f.a1(m.qC(),h.a(["0x"+f.a.ap(f.c.au(o,16),8,E)],i),w.x-8),w.r=4294967295}++w.z,w.w=0;break;case 1313821514:u=Math.min(t.gi(e)-s,w.Q-w.w),null==w.ax&&(o=w.ch,l=w.f,(o=new h.cP(new h.ah(o,h.C(o).h("ah<1>")),new h.ay(new h.B(m.A,n),r))).e=l,w.ax=o,w.ay=o.bW()),o=w.ch,x=s+u,l=t.a0(e,s,x),(g=o.b)>=4&&h.a0(o.bs()),0!=(1&g)?o.aA(l):0==(3&g)&&(o=o.b2(),l=new h.cD(l),null==(y=o.c)?o.b=o.c=l:(y.saE(l),o.c=l)),o=w.w+=u,w.x+=u,o===w.Q&&(w.ch.a6(),w.r=1,w.w=0),s=x;break;case 5130562:o=t.gi(e),l=w.Q,g=w.w,u=Math.min(o-s,l-g),null==(o=w.cx)&&(o=w.cx=new Uint8Array(l)),l=g+u,w.w=l,f.j.a4(o,g,l,e,s),s+=u,w.x+=u,w.w===w.Q&&(w.r=1,w.w=0);break;case 4294967295:o=t.gi(e),l=w.Q,g=w.w,g+=u=Math.min(o-s,l-g),w.w=g,s+=u,w.x+=u,g===l&&(w.r=1,w.w=0)}w.d.aq()},cg(){var e,t,n=this;switch(n.r){case 0:n.f.aO(m.qA(),n.x),n.aL();break;case 1:0!==n.w?(n.f.aO(m.qz(),n.x),n.aL()):((e=n.y)!==(t=n.x)&&n.f.a1(m.qv(),h.a([e,t],v.M),n.x),null!=(e=n.ay)?e.ar(0,new h.ig(n),n.gci(),v.P):n.e.a2(new h.at("model/gltf-binary",null,n.cx)));break;default:n.Q>0&&n.f.aO(m.qy(),n.x),n.aL()}},dw(e){var t;this.d.K(),0==(30&(t=this.e).a.a)&&t.P(e)},$ieO:1},h.ih.prototype={$1(e){var t;try{this.a.du(e)}catch(t){if(!(h.K(t)instanceof h.bx))throw t;this.a.aL()}},$S:10},h.ii.prototype={$0(){var e=this.a;0!=(4&e.ch.b)?e.d.aq():e.aL()},$S:2},h.ie.prototype={$1$seen(e){var t=this.a;e?(t.f.a1(m.qp(),h.a(["0x"+f.a.ap(f.c.au(t.as,16),8,"0")],v.M),t.x-8),t.r=4294967295):t.r=t.as},$0(){return this.$1$seen(null)},$S:75},h.ig.prototype={$1(e){var t=this.a,n=null==e?null:e.b;t.e.a2(new h.at("model/gltf-binary",n,t.cx))},$S:76},h.at.prototype={},h.il.prototype={$0(){return this.a.b.aV()},$S:1},h.im.prototype={$0(){return this.a.b.aq()},$S:1},h.ik.prototype={$0(){return this.a.b.K()},$S:77},h.io.prototype={$1(e){var t,n,r,i,a=this,s=null,o=a.a;if(!o.a){if((t=d.T(e)).gA(e))return o.b.K(),a.b.a6(),void a.c.P(f.a7);if(103===(n=t.j(e,0)))t=a.b,r=a.d,i=new Uint8Array(12),t=new h.dr(i,new h.ah(t,h.C(t).h("ah<1>")),new h.ay(new h.B(m.A,v.f),v.G)),r.dx=!0,t.f=r,t.b=h.f3(i.buffer,0,s),t.ch=h.oU(s,s,s,v.w),a.c.a2(t),o.a=!0;else{if(t=123===n||9===n||32===n||10===n||13===n||239===n,r=a.c,i=a.b,!t)return o.b.K(),i.a6(),void r.P(f.a7);r.a2(h.u_(new h.ah(i,h.C(i).h("ah<1>")),a.d)),o.a=!0}}a.b.C(0,e)},$S:10},h.cP.prototype={bW(){var e=this,t=h.a([],v.M),n=new h.ab("");return e.d=new h.mm(new h.fU(!1),new h.m9(f.aa.gcB().a,new h.fL(new h.ij(e),t,v.cy),n),n),e.b=e.a.bO(e.gdB(),e.gdD(),e.gdF()),e.c.a},dC(e){var t,n,r,i=this;i.b.aV(),i.f&&((n=d.T(e)).ga7(e)&&239===n.j(e,0)&&i.e.aC(m.h1(),h.a(["BOM found at the beginning of UTF-8 stream."],v.M),!0),i.f=!1);try{i.d.dT(e,0,d.a3(e),!1),i.b.aq()}catch(r){if(!((n=h.K(r))instanceof h.aI))throw r;t=n,i.e.aC(m.h1(),h.a([t],v.M),!0),i.b.K(),i.c.b9()}},dG(e){var t;this.b.K(),0==(30&(t=this.c).a.a)&&t.P(e)},dE(){var e,t,n,r=this;try{r.d.a6()}catch(t){if(!((n=h.K(t))instanceof h.aI))throw t;e=n,r.e.aC(m.h1(),h.a([e],v.M),!0),r.b.K(),r.c.b9()}},$ieO:1},h.ij.prototype={$1(e){var t,n,r,i=e[0];if(v.t.b(i))try{n=this.a,t=h.or(i,n.e),n.c.a2(new h.at("model/gltf+json",t,null))}catch(r){if(!(h.K(r)instanceof h.bx))throw r;(n=this.a).b.K(),n.c.b9()}else(n=this.a).e.aC(m.a2(),h.a([i,"object"],v.M),!0),n.b.K(),n.c.b9()},$S:79},h.dt.prototype={k:e=>"Invalid data: could not detect glTF format.",$ia7:1},h.mL.prototype={$2(e,t){var n,r;this.a.$1(e),t=h.mF(t),n=h.aH(t)&&t>=0,r=this.b,n?r.m(0,e,t):(r.m(0,e,-1),this.c.n(m.h0(),e))},$S:3},h.mM.prototype={$2(e,t){var n,r;this.a.$1(e),t=h.mF(t),n=h.aH(t)&&t>=0,r=this.b,n?r.m(0,e,t):(r.m(0,e,-1),this.c.n(m.h0(),e))},$S:3},h.mN.prototype={$1:e=>e.ai(0,v.X,v.e),$S:80},h.mJ.prototype={$0:()=>h.a([],v.bH),$S:81},h.E.prototype={j(e,t){return null==t||t<0||t>=this.a.length?null:this.a[t]},m(e,t,n){this.a[t]=n},gi(e){return this.b},si(e,t){throw h.d(h.ac("Changing length is not supported"))},k(e){return h.iH(this.a,"[","]")},a3(e){var t,n,r,i;for(t=this.b,n=this.a,r=0;r<t;++r)null!=(i=n[r])&&e.$2(r,i)}},h.a1.prototype={aD:e=>!0},h.fr.prototype={a_(e,t,n,r){var i=this,a=i.c,s=null!=a?a.$1(r):r;return a=i.a+s*s,i.a=a,2===n&&(Math.abs(Math.sqrt(a)-1)>.00674&&e.l(m.nR(),h.a([t-2,t,Math.sqrt(i.a)],v.M),i.b),i.a=0),!0}},h.fs.prototype={a_(e,t,n,r){var i=this,a=i.c,s=null!=a?a.$1(r):r;return 3===n?1!==s&&-1!==s&&e.l(m.q5(),h.a([t-3,t,s],v.M),i.b):(a=i.a+s*s,i.a=a,2===n&&(Math.abs(Math.sqrt(a)-1)>.00674&&e.l(m.nR(),h.a([t-2,t,Math.sqrt(i.a)],v.M),i.b),i.a=0)),!0}},h.eG.prototype={a_(e,t,n,r){return(1<r||0>r)&&e.l(m.q9(),h.a([t,r],v.M),this.a),!0}},h.lx.prototype={bk(){var e,t,n,r,i,a=this,s=v.X,o=v._,l=h.a8(s,o),u=a.a;return null!=u&&l.m(0,"uri",u.k(0)),null!=((e=null==(u=a.c))?null:u.a)&&l.m(0,"mimeType",e?null:u.a),l.m(0,"validatorVersion","2.0.0-dev.3.9"),a.d&&l.m(0,"validatedAt",new h.dm(Date.now(),!1).er().eq()),t=(u=a.b).cy,n=h.a8(s,o),r=h.a([0,0,0,0],v.V),i=h.oz(t.length,new h.lA(t,r),!1,v.t),n.m(0,"numErrors",r[0]),n.m(0,"numWarnings",r[1]),n.m(0,"numInfos",r[2]),n.m(0,"numHints",r[3]),n.m(0,"messages",i),n.m(0,"truncated",u.y),l.m(0,"issues",n),null!=(u=a.dt())&&l.m(0,"info",u),l},dt(){var e,t,n,r,i,a,s,o,l,u,c=null,f=this.c,p=null==f?c:f.b;if(null==(null==(f=null==p?c:p.w)?c:f.f))return c;for(e=h.a8(v.X,v._),f=p.w,e.m(0,"version",f.f),null!=(t=f.r)&&e.m(0,"minVersion",t),null!=(f=f.e)&&e.m(0,"generator",f),f=p.d,(t=d.T(f)).ga7(f)&&(f=t.bZ(f),e.m(0,"extensionsUsed",h.ct(f,!1,h.C(f).c))),f=p.e,(t=d.T(f)).ga7(f)&&(f=t.bZ(f),e.m(0,"extensionsRequired",h.ct(f,!1,h.C(f).c))),(t=(f=this.b).CW).gA(t)||e.m(0,"resources",f.CW),e.m(0,"animationCount",p.r.b),e.m(0,"materialCount",p.as.b),f=p.at,e.m(0,"hasMorphTargets",f.aP(f,new h.lz)),t=p.cx,e.m(0,"hasSkins",!t.gA(t)),t=p.cy,e.m(0,"hasTextures",!t.gA(t)),e.m(0,"hasDefaultScene",null!=p.ch),f=new h.a9(f,f.gi(f),f.$ti.h("a9<n.E>")),n=0,r=0,i=0,a=0,s=0,o=0;f.p();)if(null!=(t=f.d.w))for(n+=t.b,t=new h.a9(t,t.gi(t),t.$ti.h("a9<n.E>"));t.p();)-1!==(u=(l=t.d).CW)&&(s+=u),o+=l.ges(),r=Math.max(r,l.ay.a),i=Math.max(i,l.ax),a=Math.max(a,4*l.as);return e.m(0,"drawCallCount",n),e.m(0,"totalVertexCount",s),e.m(0,"totalTriangleCount",o),e.m(0,"maxUVs",i),e.m(0,"maxInfluences",a),e.m(0,"maxAttributes",r),e}},h.lA.prototype={$1(e){var t,n=this.a[e],r=n.gc4().a,i=this.b;return i[r]=i[r]+1,t=h.nm(["code",n.a.b,"message",n.gbi(),"severity",n.gc4().a],v.X,v._),null!=(r=n.c)?t.m(0,"pointer",r):null!=(r=n.d)&&t.m(0,"offset",r),t},$S:82},h.lz.prototype={$1(e){var t=e.w;return null!=t&&t.aP(t,new h.ly)},$S:83},h.ly.prototype={$1:e=>null!=e.cx,$S:5},h.eZ.prototype={k(e){return"[0] "+this.ae(0).k(0)+"\n[1] "+this.ae(1).k(0)+"\n[2] "+this.ae(2).k(0)+"\n"},N(e,t){var n,r;return null!=t&&t instanceof h.eZ&&(n=this.a)[0]===(r=t.a)[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]},gE(e){return h.k1(this.a)},ae(e){var t=new Float32Array(3),n=this.a;return t[0]=n[e],t[1]=n[3+e],t[2]=n[6+e],new h.cB(t)}},h.cV.prototype={k(e){var t=this;return"[0] "+t.ae(0).k(0)+"\n[1] "+t.ae(1).k(0)+"\n[2] "+t.ae(2).k(0)+"\n[3] "+t.ae(3).k(0)+"\n"},N(e,t){var n,r;return null!=t&&t instanceof h.cV&&(n=this.a)[0]===(r=t.a)[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15]},gE(e){return h.k1(this.a)},ae(e){var t=new Float32Array(4),n=this.a;return t[0]=n[e],t[1]=n[4+e],t[2]=n[8+e],t[3]=n[12+e],new h.fw(t)},cC(){var e=this.a,t=e[0],n=e[5],r=e[1],i=e[4],a=t*n-r*i,s=e[6],o=e[2],l=t*s-o*i,u=e[7],c=e[3],h=t*u-c*i,d=r*s-o*n,f=r*u-c*n,p=o*u-c*s;return s=e[8],-((c=e[9])*p-(u=e[10])*f+(o=e[11])*d)*e[12]+(s*p-u*h+o*l)*e[13]-(s*f-c*h+o*a)*e[14]+(s*d-c*l+u*a)*e[15]},cH(){var e=this.a,t=0+Math.abs(e[0])+Math.abs(e[1])+Math.abs(e[2])+Math.abs(e[3]),n=t>0?t:0;return(t=0+Math.abs(e[4])+Math.abs(e[5])+Math.abs(e[6])+Math.abs(e[7]))>n&&(n=t),(t=0+Math.abs(e[8])+Math.abs(e[9])+Math.abs(e[10])+Math.abs(e[11]))>n&&(n=t),(t=0+Math.abs(e[12])+Math.abs(e[13])+Math.abs(e[14])+Math.abs(e[15]))>n?t:n},cL(){var e=this.a;return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]}},h.fi.prototype={gaT(){var e=this.a,t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},gi(e){var t=this.a,n=t[0],r=t[1],i=t[2],a=t[3];return Math.sqrt(n*n+r*r+i*i+a*a)},k(e){var t=this.a;return h.b(t[0])+", "+h.b(t[1])+", "+h.b(t[2])+" @ "+h.b(t[3])}},h.cB.prototype={bq(e,t,n){var r=this.a;r[0]=e,r[1]=t,r[2]=n},k(e){var t=this.a;return"["+h.b(t[0])+","+h.b(t[1])+","+h.b(t[2])+"]"},N(e,t){var n,r;return null!=t&&t instanceof h.cB&&(n=this.a)[0]===(r=t.a)[0]&&n[1]===r[1]&&n[2]===r[2]},gE(e){return h.k1(this.a)},gi(e){var t=this.a,n=t[0],r=t[1];return t=t[2],Math.sqrt(n*n+r*r+t*t)},gaT(){var e=this.a,t=e[0],n=e[1];return t*t+n*n+(e=e[2])*e}},h.fw.prototype={k(e){var t=this.a;return h.b(t[0])+","+h.b(t[1])+","+h.b(t[2])+","+h.b(t[3])},N(e,t){var n,r;return null!=t&&t instanceof h.fw&&(n=this.a)[0]===(r=t.a)[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]},gE(e){return h.k1(this.a)},gi(e){var t=this.a,n=t[0],r=t[1],i=t[2];return t=t[3],Math.sqrt(n*n+r*r+i*i+t*t)}},h.be.prototype={},h.hW.prototype={},h.d4.prototype={},h.n4.prototype={$3:(e,t,n)=>n.$1(d.aq(e)),$S:84},h.n0.prototype={$2(e,t){return new i.Promise(h.cF(new h.n_(e,t,this.a)),v._)},$S:85},h.n_.prototype={$2(e,t){h.fY(this.a,this.b).ar(0,new h.mX(e),new h.mY(this.c,t),v.P)},$S:24},h.mX.prototype={$1(e){this.a.$1(h.nI(e))},$S:25},h.mY.prototype={$2(e,t){return this.a.$3(e,t,this.b)},$S:26},h.n1.prototype={$2(e,t){return new i.Promise(h.cF(new h.mZ(e,t,this.a)),v._)},$S:89},h.mZ.prototype={$2(e,t){h.nL(this.a,this.b).ar(0,new h.mV(e),new h.mW(this.c,t),v.P)},$S:24},h.mV.prototype={$1(e){this.a.$1(h.nI(e))},$S:25},h.mW.prototype={$2(e,t){return this.a.$3(e,t,this.b)},$S:26},h.n2.prototype={$0:()=>"2.0.0-dev.3.9",$S:90},h.n3.prototype={$0:()=>h.nI(h.tR()),$S:6},h.my.prototype={$1(e){var t=new h.B(m.A,v.q),n=new h.ay(t,v.as),r=this.a.$1(d.aq(e));return null==(null==r?null:d.tj(r))?n.P(new h.ar(!1,null,null,"options.externalResourceFunction: Function must return a Promise.")):d.tu(r,h.cF(new h.mz(n)),h.cF(new h.mA(n))),t},$S:91},h.mz.prototype={$1(e){var t=this.a;v.a.b(e)?t.a2(e):t.P(new h.ar(!1,null,null,"options.externalResourceFunction: Promise must be fulfilled with Uint8Array or rejected."))},$S:23},h.mA.prototype={$1(e){return this.a.P(new h.fc(d.aq(e)))},$S:11},h.mw.prototype={$1(e){var t,n,r,i=this;return i.a.dx&&null==e?i.b.c:(null!=i.c?t=i.d.$1(e):(n=i.e,h.bS(n,"error",v.K),m.A,f.i,r=h.eE(n),(t=new h.B(m.A,v.q)).b1(n,r)),t)},$0(){return this.$1(null)},$C:"$1",$R:0,$D:()=>[null],$S:139},h.mx.prototype={$1(e){var t,n,r,i,a=null;return null!=this.a?(t=this.b.$1(e),t=h.uS(t,h.ai(t).c)):(t=this.c,h.bS(t,"error",v.K),n=v.f1,r=new h.b_(a,a,a,a,n),i=h.eE(t),r.b_(t,i),r.aI(),t=new h.ah(r,n.h("ah<1>"))),t},$S:93},h.fc.prototype={k(e){return"Node Exception: "+h.b(this.a)},$ia7:1},function(){var e=d.cR.prototype;e.d2=e.bj,(e=d.aL.prototype).d6=e.k,(e=h.aE.prototype).d3=e.cI,e.d4=e.cJ,e.d5=e.cK,(e=h.n.prototype).d7=e.a4,(e=h.eb.prototype).d9=e.a6,(e=h.bh.prototype).d8=e.q}(),function(){var e,t=c._static_1,n=c._static_0,r=c._static_2,i=c._instance_2u,a=c._instance_0u,s=c.installInstanceTearOff,o=c._instance_1i,l=c._instance_1u;t(h,"w6","tY",94),t(h,"ws","v_",12),t(h,"wt","v0",12),t(h,"wu","v1",12),n(h,"pC","wf",1),r(h,"wv","w9",16),i(h.B.prototype,"gdk","az",16),a(h.d7.prototype,"gdV","a6",55),a(e=h.dT.prototype,"gcl","b5",1),a(e,"gcm","b6",1),s(e=h.dP.prototype,"gec",0,0,null,["$1","$0"],["cS","aV"],59,0,0),a(e,"gef","aq",1),a(e,"gcl","b5",1),a(e,"gcm","b6",1),r(h,"wC","vN",96),o(h.b0.prototype,"gcw","H",14),r(h,"wo","tz",97),r(h,"wn","ty",98),r(h,"wl","tw",99),r(h,"wm","tx",100),l(h.a4.prototype,"gbS","eb",29),r(h,"wq","tB",101),r(h,"wp","tA",102),r(h,"wr","tC",103),r(h,"ww","tG",104),r(h,"wx","tF",105),r(h,"wA","tJ",106),r(h,"wy","tH",107),r(h,"wz","tI",108),r(h,"wP","u3",109),r(h,"xd","uu",110),r(h,"xf","uF",111),r(h,"xe","uE",112),r(h,"pO","uD",113),r(h,"ap","uU",114),r(h,"xg","uy",115),r(h,"xh","uC",116),r(h,"xi","uP",117),r(h,"xj","uQ",118),r(h,"xk","uR",119),r(h,"xm","uV",120),t(h,"dh","wb",27),t(h,"pE","w7",27),t(h,"wH","vU",13),r(h,"wG","tX",123),r(h,"wW","ua",124),r(h,"wX","ub",125),r(h,"wY","uc",126),r(h,"wZ","ud",127),r(h,"x_","ue",128),r(h,"x0","uf",129),r(h,"x1","ug",130),r(h,"x2","uh",131),r(h,"x3","ui",132),r(h,"x4","uj",133),r(h,"x5","uk",134),r(h,"x6","ul",135),r(h,"u8","um",136),r(h,"u9","un",137),r(h,"x7","uo",138),r(h,"x9","up",92),a(e=h.dr.prototype,"gdv","cg",1),l(e,"gci","dw",11),l(e=h.cP.prototype,"gdB","dC",78),l(e,"gdF","dG",11),a(e,"gdD","dE",1),t(h,"x8","vV",13)}(),function(){var e=c.mixin,t=c.inherit,n=c.inheritMany;t(h.c,null),n(h.c,[h.nk,d.cR,d.b4,h.j,h.dk,h.I,h.c6,h.G,h.e3,h.a9,h.M,h.dn,h.dq,h.fu,h.d_,h.dA,h.cM,h.iI,h.ll,h.fe,h.dp,h.e8,h.me,h.jJ,h.cs,h.iJ,h.mc,h.aQ,h.fG,h.ed,h.mj,h.fz,h.d3,h.aG,h.eD,h.fC,h.bK,h.B,h.fA,h.bg,h.fo,h.d7,h.fP,h.fB,h.dP,h.fE,h.lU,h.fK,h.fN,h.mo,h.e_,h.em,h.mb,h.e2,h.n,h.fS,h.cY,h.fT,h.lk,h.eJ,h.lR,h.eF,h.fU,h.dm,h.lV,h.ff,h.dK,h.dW,h.aI,h.cU,h.k,h.fO,h.ab,h.ej,h.ln,h.fM,h.fH,h.a1,h.m,h.c1,h.c_,h.y,h.lw,h.i,h.bx,h.cb,h.iA,h.dO,h.dN,h.aJ,h.fk,h.k6,h.eT,h.iG,h.cS,h.O,h.V,h.c9,h.cr,h.fl,h.dr,h.at,h.cP,h.dt,h.lx,h.eZ,h.cV,h.fi,h.cB,h.fw,h.fc]),n(d.cR,[d.dv,d.dx,d.eW,d.D,d.cc,d.by,h.dD]),t(d.aL,d.eW),n(d.aL,[d.fg,d.bI,d.b9,h.be,h.hW,h.d4]),t(d.iK,d.D),n(d.cc,[d.dw,d.eV]),n(h.j,[h.bJ,h.p,h.bc,h.lC,h.bf,h.dS,h.du]),n(h.bJ,[h.c4,h.el]),t(h.dV,h.c4),t(h.dQ,h.el),t(h.b5,h.dQ),t(h.dz,h.I),n(h.dz,[h.c5,h.aE,h.dY,h.fI]),n(h.c6,[h.eI,h.eH,h.hX,h.fp,h.iO,h.mQ,h.mS,h.lO,h.lN,h.mp,h.lZ,h.m6,h.lf,h.lh,h.ma,h.jL,h.mu,h.mv,h.mr,h.lK,h.lL,h.lH,h.lI,h.lE,h.lF,h.iw,h.ix,h.ip,h.iy,h.jO,h.jP,h.jQ,h.jU,h.jZ,h.k_,h.k0,h.k9,h.le,h.hg,h.hh,h.hk,h.hi,h.iB,h.iD,h.iN,h.iM,h.k7,h.k8,h.n8,h.mE,h.hK,h.hL,h.hD,h.hC,h.hs,h.hr,h.hH,h.hy,h.hq,h.hE,h.hw,h.ht,h.hv,h.hu,h.ho,h.hp,h.hG,h.hF,h.hx,h.hN,h.hP,h.hS,h.hT,h.hQ,h.hR,h.hO,h.hU,h.hM,h.hA,h.hz,h.hI,h.hJ,h.hB,h.iF,h.kc,h.kd,h.kb,h.kf,h.kg,h.kh,h.ke,h.ki,h.kj,h.kk,h.kp,h.kq,h.ko,h.kl,h.km,h.kn,h.la,h.lb,h.kW,h.kG,h.kt,h.ku,h.ks,h.kv,h.kw,h.kx,h.kz,h.ky,h.kA,h.kB,h.kC,h.kD,h.kO,h.kR,h.kV,h.kT,h.kQ,h.kU,h.kS,h.kP,h.l_,h.kY,h.l0,h.l7,h.ld,h.l6,h.lc,h.kF,h.kZ,h.l3,h.l2,h.l1,h.l8,h.l9,h.l5,h.kX,h.l4,h.kE,h.kH,h.kI,h.kN,h.kM,h.kK,h.kJ,h.kL,h.j_,h.iY,h.iZ,h.j0,h.j3,h.j1,h.j2,h.j7,h.j5,h.j9,h.j6,h.j8,h.j4,h.ja,h.jd,h.jc,h.jb,h.je,h.jf,h.jj,h.jk,h.jq,h.ji,h.jh,h.jn,h.jm,h.jl,h.jr,h.js,h.jp,h.jo,h.jt,h.ju,h.jx,h.jv,h.jw,h.jy,h.jA,h.jz,h.jB,h.jC,h.jD,h.jE,h.jF,h.jI,h.jH,h.jG,h.jg,h.i4,h.i5,h.i7,h.hZ,h.i6,h.i_,h.i2,h.i1,h.i0,h.ia,h.i9,h.ib,h.ic,h.i8,h.id,h.i3,h.iT,h.iW,h.ih,h.ie,h.ig,h.io,h.ij,h.mN,h.lA,h.lz,h.ly,h.n4,h.mX,h.mV,h.my,h.mz,h.mA,h.mw,h.mx]),n(h.eI,[h.he,h.k4,h.mR,h.mq,h.mG,h.m_,h.lg,h.jK,h.jY,h.lp,h.lq,h.lr,h.mt,h.h3,h.h4,h.it,h.iu,h.ir,h.is,h.iz,h.jN,h.jX,h.jW,h.jS,h.jT,h.jV,h.hm,h.n7,h.n9,h.iR,h.iS,h.iV,h.iU,h.mL,h.mM,h.n0,h.n_,h.mY,h.n1,h.mZ,h.mW]),n(h.G,[h.eY,h.fj,h.dF,h.aX,h.eX,h.ft,h.fm,h.fF,h.eC,h.fd,h.ar,h.fb,h.fv,h.fq,h.bG,h.eK,h.eM]),t(h.dy,h.e3),n(h.dy,[h.d0,h.E]),n(h.d0,[h.cL,h.aY]),n(h.eH,[h.n6,h.lP,h.lQ,h.mk,h.lW,h.m2,h.m0,h.lY,h.m1,h.lX,h.m5,h.m4,h.m3,h.li,h.mi,h.mh,h.lT,h.lS,h.md,h.mD,h.mg,h.lv,h.lu,h.lJ,h.lM,h.lD,h.lG,h.iv,h.iq,h.jR,h.hf,h.hl,h.hj,h.iC,h.k3,h.ii,h.il,h.im,h.ik,h.mJ,h.n2,h.n3]),n(h.p,[h.ag,h.b7,h.aM,h.dZ]),n(h.ag,[h.dL,h.aa,h.fJ,h.dX]),t(h.c7,h.bc),n(h.M,[h.dB,h.cC,h.dJ]),t(h.cN,h.bf),t(h.eh,h.dA),t(h.bk,h.eh),t(h.dl,h.bk),n(h.cM,[h.as,h.Y]),t(h.dG,h.aX),n(h.fp,[h.fn,h.cK]),t(h.cW,h.dD),n(h.cW,[h.e4,h.e6]),t(h.e5,h.e4),t(h.dC,h.e5),t(h.e7,h.e6),t(h.aw,h.e7),n(h.dC,[h.f4,h.f5]),n(h.aw,[h.f6,h.f7,h.f8,h.f9,h.fa,h.dE,h.cu]),t(h.ee,h.fF),t(h.ec,h.du),t(h.ay,h.fC),n(h.d7,[h.b_,h.d8]),t(h.e9,h.bg),t(h.ah,h.e9),t(h.dT,h.dP),n(h.fE,[h.cD,h.dU]),t(h.ea,h.fK),t(h.mf,h.mo),t(h.e0,h.dY),t(h.e1,h.aE),t(h.d5,h.em),n(h.d5,[h.b0,h.en]),t(h.ei,h.en),t(h.lj,h.lk),t(h.eb,h.lj),t(h.m9,h.eb),n(h.eJ,[h.h9,h.hV,h.iP]),t(h.eL,h.fo),n(h.eL,[h.hb,h.ha,h.iQ,h.lt]),n(h.eF,[h.hc,h.fL]),t(h.mm,h.hc),t(h.ls,h.hV),n(h.ar,[h.dI,h.eR]),t(h.fD,h.ej),t(h.l,h.fH),n(h.l,[h.eN,h.bX,h.bY,h.bZ,h.b2,h.c0,h.b3,h.bu,h.c2,h.c3,h.ds,h.cx,h.bh,h.aF,h.c8,h.bz,h.cd,h.ce,h.cf,h.cg,h.ch,h.ci,h.cj,h.ck,h.cl,h.cm,h.cn,h.bA,h.co,h.bb,h.cp,h.cq]),n(h.eN,[h.a4,h.bt,h.aS,h.bv,h.bw,h.aT,h.av,h.aU,h.an,h.bC,h.bD,h.bF,h.bH,h.ba,h.aK]),n(h.a4,[h.fy,h.fx]),n(h.a1,[h.eU,h.f1,h.f_,h.f2,h.f0,h.eB,h.dH,h.eQ,h.eP,h.fr,h.fs,h.eG]),n(h.bh,[h.cw,h.cv]),n(h.lV,[h.cQ,h.dR,h.d1,h.ca,h.d6,h.bE]),n(h.iA,[h.iL,h.k2,h.lB]),n(h.iG,[h.hn,h.iE,h.ka,h.kr,h.iX,h.hY]),e(h.d0,h.fu),e(h.el,h.n),e(h.e4,h.n),e(h.e5,h.dq),e(h.e6,h.n),e(h.e7,h.dq),e(h.b_,h.fB),e(h.d8,h.fP),e(h.e3,h.n),e(h.eh,h.fS),e(h.em,h.cY),e(h.en,h.fT),e(h.fH,h.m)}();var g={typeUniverse:{eC:new Map,tR:{},eT:{},tPV:{},sEA:[]},mangledGlobalNames:{f:"int",z:"double",L:"num",e:"String",Q:"bool",k:"Null",o:"List"},mangledNames:{},types:["e*(o<@>*)","~()","k()","k(e*,c*)","k(e*,f*)","Q*(aF*)","@()","z*(f*)","Q*(f*)","k(an*,f*,f*)","k(o<f*>*)","~(c*)","~(~())","~(i*)","Q(c?)","k(@)","~(c,am)","~(a6,e,f)","j<f*>*()","j<z*>*()","k(f*,aF*)","~(e*)","Q*(O*)","k(c*)","k(~(c*)*,aD*)","k(h<e*,c*>*)","~(c*,am*)","e*(c*)","k(f*,cy*)","z*(L*)","@(@)","j<f*>*(f*,f*,f*)","f*(f*)","@(@,e)","~(@)","j<z*>*(f*,f*,f*)","k(f*,b3*)","k(f*,b2*)","E<0^*>*(e*,0^*(h<e*,c*>*,i*)*)<c*>","0^*(e*,0^*(h<e*,c*>*,i*)*{req:Q*})<c*>","~(E<l*>*,bi*)","k(f*,l*)","k(@,am)","k(f*,an*)","Q*(an*)","~(E<cy*>*)","a5<k>()","~(l*,e*)","~(f,@)","@(e)","f*(f*,f*,e*)","k(c,am)","B<@>(@)","cz<a4<L*>*>*()","k(@,@)","a5<@>()","e*(O*)","o<a1<L*>*>*()","e*(e*)","~([a5<~>?])","O*()","k(bi*,V*)","Q(@)","~(c?,c?)","a6*/*(aS*)","bg<o<f*>*>*(aT*)","k(f*,a4<L*>*)","Q*(M<L*>*)","~(e,@)","k(f*,ba*)","k(f*,aK*)","k(f*,bb*)","aK*(f*)","Q*(c*)","~(cA,@)","~({seen:Q*})","k(at*)","a5<~>*()","~(o<f*>*)","k(o<c*>*)","h<e*,f*>*(h<@,@>*)","o<cr*>*()","h<e*,c*>*(f*)","Q*(aU*)","~(c*,am*,aD*)","be<1&>*(a6*,c*)","~(e,f)","~(e,f?)","f(f,f)","be<1&>*(e*,c*)","e*()","a5<a6*>*(aZ*)","cq*(h<e*,c*>*,i*)","bg<o<f*>*>*(aZ*)","f(c?)","a6(@,@)","Q(c?,c?)","a4<L*>*(h<e*,c*>*,i*)","bX*(h<e*,c*>*,i*)","bY*(h<e*,c*>*,i*)","bZ*(h<e*,c*>*,i*)","bt*(h<e*,c*>*,i*)","c0*(h<e*,c*>*,i*)","bu*(h<e*,c*>*,i*)","aS*(h<e*,c*>*,i*)","bv*(h<e*,c*>*,i*)","bw*(h<e*,c*>*,i*)","c2*(h<e*,c*>*,i*)","c3*(h<e*,c*>*,i*)","aT*(h<e*,c*>*,i*)","av*(h<e*,c*>*,i*)","cx*(h<e*,c*>*,i*)","cw*(h<e*,c*>*,i*)","cv*(h<e*,c*>*,i*)","bh*(h<e*,c*>*,i*)","aU*(h<e*,c*>*,i*)","an*(h<e*,c*>*,i*)","bC*(h<e*,c*>*,i*)","bD*(h<e*,c*>*,i*)","bF*(h<e*,c*>*,i*)","bH*(h<e*,c*>*,i*)","k(~())","c?(c?)","c8*(h<e*,c*>*,i*)","bz*(h<e*,c*>*,i*)","cd*(h<e*,c*>*,i*)","ce*(h<e*,c*>*,i*)","cf*(h<e*,c*>*,i*)","cg*(h<e*,c*>*,i*)","ch*(h<e*,c*>*,i*)","ci*(h<e*,c*>*,i*)","cj*(h<e*,c*>*,i*)","ck*(h<e*,c*>*,i*)","cl*(h<e*,c*>*,i*)","cm*(h<e*,c*>*,i*)","cn*(h<e*,c*>*,i*)","bA*(h<e*,c*>*,i*)","co*(h<e*,c*>*,i*)","cp*(h<e*,c*>*,i*)","a6*/*([aZ*])"],interceptorsByTag:null,leafTags:null,arrayRti:Symbol("$ti")};h.vk(g.typeUniverse,JSON.parse('{"fg":"aL","bI":"aL","b9":"aL","be":"aL","hW":"aL","d4":"aL","dv":{"Q":[]},"dx":{"k":[]},"aL":{"be":["1&"],"d4":[]},"D":{"o":["1"],"p":["1"],"j":["1"]},"iK":{"D":["1"],"o":["1"],"p":["1"],"j":["1"]},"b4":{"M":["1"]},"cc":{"z":[],"L":[]},"dw":{"z":[],"f":[],"L":[]},"eV":{"z":[],"L":[]},"by":{"e":[]},"bJ":{"j":["2"]},"dk":{"M":["2"]},"c4":{"bJ":["1","2"],"j":["2"],"j.E":"2"},"dV":{"c4":["1","2"],"bJ":["1","2"],"p":["2"],"j":["2"],"j.E":"2"},"dQ":{"n":["2"],"o":["2"],"bJ":["1","2"],"p":["2"],"j":["2"]},"b5":{"dQ":["1","2"],"n":["2"],"o":["2"],"bJ":["1","2"],"p":["2"],"j":["2"],"n.E":"2","j.E":"2"},"c5":{"I":["3","4"],"h":["3","4"],"I.K":"3","I.V":"4"},"eY":{"G":[]},"fj":{"G":[]},"cL":{"n":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"dF":{"aX":[],"G":[]},"p":{"j":["1"]},"ag":{"p":["1"],"j":["1"]},"dL":{"ag":["1"],"p":["1"],"j":["1"],"j.E":"1","ag.E":"1"},"a9":{"M":["1"]},"bc":{"j":["2"],"j.E":"2"},"c7":{"bc":["1","2"],"p":["2"],"j":["2"],"j.E":"2"},"dB":{"M":["2"]},"aa":{"ag":["2"],"p":["2"],"j":["2"],"j.E":"2","ag.E":"2"},"lC":{"j":["1"],"j.E":"1"},"cC":{"M":["1"]},"bf":{"j":["1"],"j.E":"1"},"cN":{"bf":["1"],"p":["1"],"j":["1"],"j.E":"1"},"dJ":{"M":["1"]},"b7":{"p":["1"],"j":["1"],"j.E":"1"},"dn":{"M":["1"]},"d0":{"n":["1"],"o":["1"],"p":["1"],"j":["1"]},"d_":{"cA":[]},"dl":{"bk":["1","2"],"h":["1","2"]},"cM":{"h":["1","2"]},"as":{"cM":["1","2"],"h":["1","2"]},"dS":{"j":["1"],"j.E":"1"},"Y":{"cM":["1","2"],"h":["1","2"]},"dG":{"aX":[],"G":[]},"eX":{"G":[]},"ft":{"G":[]},"fe":{"a7":[]},"e8":{"am":[]},"c6":{"aD":[]},"eH":{"aD":[]},"eI":{"aD":[]},"fp":{"aD":[]},"fn":{"aD":[]},"cK":{"aD":[]},"fm":{"G":[]},"aE":{"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"aM":{"p":["1"],"j":["1"],"j.E":"1"},"cs":{"M":["1"]},"cW":{"au":["1"]},"dC":{"n":["z"],"au":["z"],"o":["z"],"p":["z"],"j":["z"]},"aw":{"n":["f"],"au":["f"],"o":["f"],"p":["f"],"j":["f"]},"f4":{"n":["z"],"au":["z"],"o":["z"],"p":["z"],"j":["z"],"n.E":"z"},"f5":{"n":["z"],"au":["z"],"o":["z"],"p":["z"],"j":["z"],"n.E":"z"},"f6":{"aw":[],"n":["f"],"au":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"f7":{"aw":[],"n":["f"],"au":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"f8":{"aw":[],"n":["f"],"au":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"f9":{"aw":[],"n":["f"],"au":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"fa":{"aw":[],"n":["f"],"au":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"dE":{"aw":[],"n":["f"],"au":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"cu":{"aw":[],"n":["f"],"a6":[],"au":["f"],"o":["f"],"p":["f"],"j":["f"],"n.E":"f"},"ed":{"bi":[]},"fF":{"G":[]},"ee":{"aX":[],"G":[]},"B":{"a5":["1"]},"aG":{"M":["1"]},"ec":{"j":["1"],"j.E":"1"},"eD":{"G":[]},"ay":{"fC":["1"]},"b_":{"d7":["1"]},"d8":{"d7":["1"]},"ah":{"bg":["1"]},"e9":{"bg":["1"]},"dY":{"I":["1","2"],"h":["1","2"]},"e0":{"dY":["1","2"],"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"dZ":{"p":["1"],"j":["1"],"j.E":"1"},"e_":{"M":["1"]},"e1":{"aE":["1","2"],"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"b0":{"d5":["1"],"cY":["1"],"cz":["1"],"p":["1"],"j":["1"]},"e2":{"M":["1"]},"aY":{"n":["1"],"o":["1"],"p":["1"],"j":["1"],"n.E":"1"},"du":{"j":["1"]},"dy":{"n":["1"],"o":["1"],"p":["1"],"j":["1"]},"dz":{"I":["1","2"],"h":["1","2"]},"I":{"h":["1","2"]},"dA":{"h":["1","2"]},"bk":{"h":["1","2"]},"d5":{"cY":["1"],"cz":["1"],"p":["1"],"j":["1"]},"ei":{"d5":["1"],"cY":["1"],"cz":["1"],"p":["1"],"j":["1"]},"fI":{"I":["e","@"],"h":["e","@"],"I.K":"e","I.V":"@"},"fJ":{"ag":["e"],"p":["e"],"j":["e"],"j.E":"e","ag.E":"e"},"z":{"L":[]},"f":{"L":[]},"o":{"p":["1"],"j":["1"]},"cz":{"p":["1"],"j":["1"]},"eC":{"G":[]},"aX":{"G":[]},"fd":{"G":[]},"ar":{"G":[]},"dI":{"G":[]},"eR":{"G":[]},"fb":{"G":[]},"fv":{"G":[]},"fq":{"G":[]},"bG":{"G":[]},"eK":{"G":[]},"ff":{"G":[]},"dK":{"G":[]},"eM":{"G":[]},"dW":{"a7":[]},"aI":{"a7":[]},"dX":{"ag":["1"],"p":["1"],"j":["1"],"j.E":"1","ag.E":"1"},"fO":{"am":[]},"ej":{"aZ":[]},"fM":{"aZ":[]},"fD":{"aZ":[]},"a4":{"l":[],"m":[],"q":[]},"bX":{"l":[],"m":[],"q":[]},"bY":{"l":[],"m":[],"q":[]},"bZ":{"l":[],"m":[],"q":[]},"fy":{"a4":["f*"],"l":[],"m":[],"q":[]},"fx":{"a4":["z*"],"l":[],"m":[],"q":[]},"eU":{"a1":["z*"]},"f1":{"a1":["z*"]},"f_":{"a1":["z*"]},"f2":{"a1":["f*"]},"f0":{"a1":["f*"]},"bt":{"l":[],"m":[],"q":[]},"b2":{"l":[],"m":[],"q":[]},"c0":{"l":[],"m":[],"q":[]},"b3":{"l":[],"m":[],"q":[]},"eB":{"a1":["z*"]},"dH":{"a1":["1*"]},"bu":{"l":[],"m":[],"q":[]},"aS":{"l":[],"m":[],"q":[]},"bv":{"l":[],"m":[],"q":[]},"bw":{"l":[],"m":[],"q":[]},"c2":{"l":[],"m":[],"q":[]},"c3":{"l":[],"m":[],"q":[]},"ds":{"l":[],"m":[],"q":[]},"l":{"m":[],"q":[]},"eN":{"l":[],"m":[],"q":[]},"aT":{"l":[],"m":[],"q":[]},"av":{"l":[],"m":[],"q":[]},"cx":{"l":[],"m":[],"q":[]},"cw":{"l":[],"m":[],"q":[]},"cv":{"l":[],"m":[],"q":[]},"bh":{"l":[],"m":[],"q":[]},"aU":{"l":[],"m":[],"q":[]},"aF":{"l":[],"m":[],"q":[]},"eQ":{"a1":["f*"]},"an":{"l":[],"m":[],"q":[]},"bC":{"l":[],"m":[],"q":[]},"bD":{"l":[],"m":[],"q":[]},"bF":{"l":[],"m":[],"q":[]},"eP":{"a1":["z*"]},"bH":{"l":[],"m":[],"q":[],"cy":[]},"bx":{"a7":[]},"dO":{"a7":[]},"dN":{"a7":[]},"aJ":{"a7":[]},"c8":{"l":[],"m":[],"q":[],"cy":[]},"bz":{"l":[],"m":[],"q":[]},"ba":{"l":[],"m":[],"q":[]},"cd":{"l":[],"m":[],"q":[]},"ce":{"l":[],"m":[],"q":[]},"cf":{"l":[],"m":[],"q":[]},"cg":{"l":[],"m":[],"q":[]},"ch":{"l":[],"m":[],"q":[]},"ci":{"l":[],"m":[],"q":[]},"cj":{"l":[],"m":[],"q":[]},"ck":{"l":[],"m":[],"q":[]},"cl":{"l":[],"m":[],"q":[]},"cm":{"l":[],"m":[],"q":[]},"cn":{"l":[],"m":[],"q":[]},"bA":{"l":[],"m":[],"q":[]},"aK":{"l":[],"m":[],"q":[]},"co":{"l":[],"m":[],"q":[]},"bb":{"l":[],"m":[],"q":[]},"cp":{"l":[],"m":[],"q":[]},"cq":{"l":[],"m":[],"q":[]},"dr":{"eO":[]},"cP":{"eO":[]},"dt":{"a7":[]},"E":{"n":["1*"],"o":["1*"],"p":["1*"],"j":["1*"],"n.E":"1*"},"fr":{"a1":["L*"]},"fs":{"a1":["L*"]},"eG":{"a1":["z*"]},"fc":{"a7":[]},"a6":{"o":["f"],"p":["f"],"j":["f"]}}')),h.vj(g.typeUniverse,JSON.parse('{"dq":1,"fu":1,"d0":1,"el":2,"cW":1,"fo":2,"fP":1,"fB":1,"dT":1,"dP":1,"e9":1,"fE":1,"cD":1,"fK":1,"ea":1,"fN":1,"du":1,"dy":1,"dz":2,"fS":2,"dA":2,"fT":1,"e3":1,"eh":2,"em":1,"en":1,"eF":1,"eJ":2,"eL":2,"eb":1}'));var _={p:") does not match the number of morph targets (",d:"Accessor sparse indices element at index ",m:"Animation input accessor element at index ",c:"Error handler must accept one Object or one Object and a StackTrace as arguments, and return a value of the returned future's type",g:"`null` encountered as the result from expression with type `Never`."},v=function(){var e=h.aB;return{gF:e("dl<cA,@>"),O:e("p<@>"),Q:e("G"),b8:e("aD"),d:e("a5<@>"),bq:e("a5<~>"),N:e("Y<bi*,V*>"),j:e("j<@>"),s:e("D<e>"),gN:e("D<a6>"),b:e("D<@>"),Z:e("D<f>"),p:e("D<y*>"),gd:e("D<a1<L*>*>"),bd:e("D<eT*>"),a9:e("D<cS*>"),b2:e("D<M<L*>*>"),bH:e("D<cr*>"),fh:e("D<h<e*,c*>*>"),M:e("D<c*>"),d6:e("D<fl*>"),i:e("D<e*>"),o:e("D<z*>"),V:e("D<f*>"),T:e("dx"),g:e("b9"),aU:e("au<@>"),eo:e("aE<cA,@>"),I:e("h<@,@>"),gw:e("aa<O*,e*>"),eB:e("aw"),bm:e("cu"),P:e("k"),K:e("c"),ed:e("dH<L*>"),eq:e("E<b2*>"),az:e("E<b3*>"),E:e("E<ba*>"),B:e("E<bb*>"),u:e("E<aK*>"),b_:e("E<aF*>"),gm:e("am"),R:e("e"),fo:e("cA"),dd:e("bi"),eK:e("aX"),gc:e("a6"),ak:e("bI"),go:e("aY<h<e*,c*>*>"),em:e("aY<e*>"),f8:e("bk<c9*,V*>"),n:e("aZ"),a_:e("ay<eO*>"),G:e("ay<at*>"),eP:e("ay<cb*>"),as:e("ay<a6*>"),f1:e("b_<o<f*>*>"),U:e("B<k>"),eI:e("B<@>"),fJ:e("B<f>"),eD:e("B<eO*>"),f:e("B<at*>"),dD:e("B<cb*>"),q:e("B<a6*>"),D:e("B<~>"),aH:e("e0<@,@>"),cy:e("fL<c*>"),y:e("Q"),gR:e("z"),z:e("@"),v:e("@(c)"),C:e("@(c,am)"),S:e("f"),aD:e("y*"),hc:e("a4<f*>*"),W:e("a4<L*>*"),bj:e("bt*"),aA:e("b2*"),gW:e("b3*"),gP:e("bu*"),cT:e("aS*"),r:e("bv*"),h2:e("bw*"),x:e("a7*"),af:e("O*"),f9:e("V*"),al:e("c9*"),b1:e("aD*"),ec:e("aT*"),Y:e("j<@>*"),ga:e("M<z*>*"),bF:e("M<f*>*"),cp:e("ba*"),aa:e("bb*"),J:e("aK*"),c:e("q*"),l:e("o<@>*"),b7:e("o<a1<L*>*>*"),an:e("o<cr*>*"),m:e("o<c*>*"),eG:e("o<e*>*"),fy:e("o<z*>*"),w:e("o<f*>*"),h:e("h<@,@>*"),gj:e("h<e*,a4<L*>*>*"),t:e("h<e*,c*>*"),fC:e("av*"),eM:e("aU*"),ft:e("aF*"),A:e("0&*"),L:e("an*"),_:e("c*"),ax:e("cy*"),b5:e("E<m*>*"),c2:e("bC*"),bn:e("bD*"),cn:e("cz<y*>*"),gz:e("cz<a4<L*>*>*"),dz:e("bE*"),aV:e("bF*"),X:e("e*"),ai:e("bH*"),f7:e("bi*"),a:e("a6*"),bv:e("d4*"),F:e("z*"),e:e("f*"),eH:e("a5<k>?"),cK:e("c?"),di:e("L"),H:e("~"),d5:e("~(c)"),k:e("~(c,am)")}}();!function(){var e=c.makeConstList;f.bP=d.cR.prototype,f.d=d.D.prototype,f.bU=d.dv.prototype,f.c=d.dw.prototype,f.bV=d.cc.prototype,f.a=d.by.prototype,f.bW=d.b9.prototype,f.bX=d.eW.prototype,f.j=h.cu.prototype,f.az=d.fg.prototype,f.W=d.bI.prototype,f.X=new h.y("MAT4",5126,!1),f.G=new h.y("SCALAR",5126,!1),f.Z=new h.y("VEC2",5120,!0),f.a_=new h.y("VEC2",5121,!0),f.a1=new h.y("VEC2",5122,!0),f.a2=new h.y("VEC2",5123,!0),f.a3=new h.y("VEC2",5126,!1),f.w=new h.y("VEC3",5120,!0),f.H=new h.y("VEC3",5121,!0),f.x=new h.y("VEC3",5122,!0),f.I=new h.y("VEC3",5123,!0),f.k=new h.y("VEC3",5126,!1),f.J=new h.y("VEC4",5120,!0),f.aZ=new h.y("VEC4",5121,!1),f.y=new h.y("VEC4",5121,!0),f.K=new h.y("VEC4",5122,!0),f.b_=new h.y("VEC4",5123,!1),f.z=new h.y("VEC4",5123,!0),f.n=new h.y("VEC4",5126,!1),f.b0=new h.c_("AnimationInput"),f.b1=new h.c_("AnimationOutput"),f.b2=new h.c_("IBM"),f.b3=new h.c_("PrimitiveIndices"),f.a6=new h.c_("VertexAttribute"),f.b4=new h.c1("IBM"),f.b5=new h.c1("Image"),f.L=new h.c1("IndexBuffer"),f.o=new h.c1("Other"),f.A=new h.c1("VertexBuffer"),f.ec=new h.hb,f.b6=new h.h9,f.b7=new h.ha,f.b8=new h.dn(h.aB("dn<0&*>")),f.a7=new h.dt,f.b9=new h.bx,f.a8=function(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)},f.ba=function(){var e=Object.prototype.toString;function t(t,n){if(/^HTML[A-Z].*Element$/.test(n))return"[object Object]"==e.call(t)?null:"HTMLElement"}return{getTag:function(t){var n=e.call(t);return n.substring(8,n.length-1)},getUnknownTag:"object"==typeof navigator?function(e,n){return i.HTMLElement&&e instanceof HTMLElement?"HTMLElement":t(e,n)}:t,prototypeForTag:function(e){if("undefined"==typeof window)return null;if(void 0===window[e])return null;var t=window[e];return"function"!=typeof t?null:t.prototype},discriminator:function(e){return null}}},f.bf=function(e){return function(t){if("object"!=typeof navigator)return t;var n=navigator.userAgent;if(n.indexOf("DumpRenderTree")>=0)return t;if(n.indexOf("Chrome")>=0){function r(e){return"object"==typeof window&&window[e]&&window[e].name==e}if(r("Window")&&r("HTMLElement"))return t}t.getTag=e}},f.bb=function(e){if("function"!=typeof dartExperimentalFixupGetTag)return e;e.getTag=dartExperimentalFixupGetTag(e.getTag)},f.bc=function(e){var t=e.getTag,n=e.prototypeForTag;e.getTag=function(e){var n=t(e);return"Document"==n?e.xmlVersion?"!Document":"!HTMLDocument":n},e.prototypeForTag=function(e){return"Document"==e?null:n(e)}},f.be=function(e){if(-1==("object"==typeof navigator?navigator.userAgent:"").indexOf("Firefox"))return e;var t=e.getTag,n={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",GeoGeolocation:"Geolocation",Location:"!Location",WorkerMessageEvent:"MessageEvent",XMLDocument:"!Document"};e.getTag=function(e){var r=t(e);return n[r]||r}},f.bd=function(e){if(-1==("object"==typeof navigator?navigator.userAgent:"").indexOf("Trident/"))return e;var t=e.getTag,n={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",HTMLDDElement:"HTMLElement",HTMLDTElement:"HTMLElement",HTMLPhraseElement:"HTMLElement",Position:"Geoposition"};e.getTag=function(e){var r=t(e);return n[r]||("Object"==r&&window.DataView&&e instanceof window.DataView?"DataView":r)},e.prototypeForTag=function(e){var t=window[e];return null==t?null:t.prototype}},f.a9=function(e){return e},f.aa=new h.iP,f.bg=new h.ff,f.bh=new h.dN,f.bi=new h.dO,f.ab=new h.ls,f.M=new h.lU,f.ac=new h.me,f.i=new h.mf,f.bj=new h.fO,f.O=new h.ca(0,"Unknown"),f.p=new h.ca(1,"RGB"),f.B=new h.ca(2,"RGBA"),f.ad=new h.ca(3,"Luminance"),f.ae=new h.ca(4,"LuminanceAlpha"),f.af=new h.cQ(0,"JPEG"),f.ag=new h.cQ(1,"PNG"),f.ah=new h.cQ(2,"WebP"),f.bO=new h.cQ(3,"KTX2"),f.ai=new h.aJ("Wrong WebP header."),f.bQ=new h.aJ("PNG header not found."),f.bR=new h.aJ("Invalid JPEG marker segment length."),f.q=new h.aJ("Wrong chunk length."),f.bS=new h.aJ("Invalid number of JPEG color channels."),f.bT=new h.aJ("Invalid start of file."),f.bY=new h.iQ(null),f.bZ=h.a(e([0,0]),v.o),f.aj=h.a(e([0,0,0]),v.o),f.c_=h.a(e([16]),v.V),f.c0=h.a(e([1,1]),v.o),f.C=h.a(e([1,1,1]),v.o),f.ak=h.a(e([1,1,1,1]),v.o),f.al=h.a(e([2]),v.V),f.c2=h.a(e(["sheenColorFactor","sheenColorTexture","sheenRoughnessFactor","sheenRoughnessTexture"]),v.i),f.am=h.a(e([0,0,32776,33792,1,10240,0,0]),v.V),f.c3=h.a(e(["clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture"]),v.i),f.l=h.a(e([3]),v.V),f.an=h.a(e([33071,33648,10497]),v.V),f.c4=h.a(e([34962,34963]),v.V),f.c5=h.a(e(["specularFactor","specularTexture","specularColorFactor","specularColorTexture"]),v.i),f.P=h.a(e([4]),v.V),f.Y=new h.y("VEC2",5120,!1),f.aV=new h.y("VEC2",5121,!1),f.a0=new h.y("VEC2",5122,!1),f.aW=new h.y("VEC2",5123,!1),f.c6=h.a(e([f.Y,f.Z,f.aV,f.a0,f.a1,f.aW]),v.p),f.c7=h.a(e([5121,5123,5125]),v.V),f.ao=h.a(e(["image/jpeg","image/png"]),v.i),f.c8=h.a(e(["transmissionFactor","transmissionTexture"]),v.i),f.c9=h.a(e([9728,9729]),v.V),f.aP=new h.y("SCALAR",5121,!1),f.aS=new h.y("SCALAR",5123,!1),f.aU=new h.y("SCALAR",5125,!1),f.ap=h.a(e([f.aP,f.aS,f.aU]),v.p),f.cb=h.a(e(["image/jpeg","image/png","image/webp","image/ktx2"]),v.i),f.cc=h.a(e(["camera","children","skin","matrix","mesh","rotation","scale","translation","weights","name"]),v.i),f.cd=h.a(e([9728,9729,9984,9985,9986,9987]),v.V),f.ce=h.a(e(["COLOR","JOINTS","TEXCOORD","WEIGHTS"]),v.i),f.D=h.a(e([0,0,65490,45055,65535,34815,65534,18431]),v.V),f.b=new h.bE(0,"Error"),f.e=new h.bE(1,"Warning"),f.f=new h.bE(2,"Information"),f.aA=new h.bE(3,"Hint"),f.cf=h.a(e([f.b,f.e,f.f,f.aA]),h.aB("D<bE*>")),f.cg=h.a(e(["color","intensity","spot","type","range","name"]),v.i),f.ch=h.a(e(["buffer","byteOffset","byteLength","byteStride","target","name"]),v.i),f.ar=h.a(e([0,0,26624,1023,65534,2047,65534,2047]),v.V),f.ci=h.a(e(["LINEAR","STEP","CUBICSPLINE"]),v.i),f.V=h.u("bH"),f.bk=new h.V(h.wG(),!1,!1),f.dw=new h.Y([f.V,f.bk],v.N),f.bB=new h.O("EXT_texture_webp",f.dw,h.wH(),!1),f.T=h.u("ds"),f.U=h.u("an"),f.bl=new h.V(h.wW(),!1,!1),f.bm=new h.V(h.wY(),!1,!1),f.du=new h.Y([f.T,f.bl,f.U,f.bm],v.N),f.bJ=new h.O("KHR_lights_punctual",f.du,null,!1),f.h=h.u("av"),f.bo=new h.V(h.wZ(),!1,!1),f.di=new h.Y([f.h,f.bo],v.N),f.bG=new h.O("KHR_materials_clearcoat",f.di,null,!1),f.bp=new h.V(h.x_(),!1,!1),f.dj=new h.Y([f.h,f.bp],v.N),f.bM=new h.O("KHR_materials_emissive_strength",f.dj,null,!1),f.bq=new h.V(h.x0(),!1,!1),f.dk=new h.Y([f.h,f.bq],v.N),f.bK=new h.O("KHR_materials_ior",f.dk,null,!1),f.br=new h.V(h.x1(),!1,!1),f.dl=new h.Y([f.h,f.br],v.N),f.bF=new h.O("KHR_materials_iridescence",f.dl,null,!1),f.bx=new h.V(h.x2(),!0,!1),f.dm=new h.Y([f.h,f.bx],v.N),f.bD=new h.O("KHR_materials_pbrSpecularGlossiness",f.dm,null,!1),f.bs=new h.V(h.x3(),!1,!1),f.dn=new h.Y([f.h,f.bs],v.N),f.bA=new h.O("KHR_materials_sheen",f.dn,null,!1),f.bt=new h.V(h.x4(),!1,!1),f.dp=new h.Y([f.h,f.bt],v.N),f.bI=new h.O("KHR_materials_specular",f.dp,null,!1),f.bu=new h.V(h.x5(),!1,!1),f.dq=new h.Y([f.h,f.bu],v.N),f.bH=new h.O("KHR_materials_transmission",f.dq,null,!1),f.by=new h.V(h.x6(),!0,!1),f.dr=new h.Y([f.h,f.by],v.N),f.bz=new h.O("KHR_materials_unlit",f.dr,null,!1),f.aE=h.u("aF"),f.bv=new h.V(h.u8(),!1,!1),f.bw=new h.V(h.u9(),!1,!0),f.dt=new h.Y([f.T,f.bv,f.aE,f.bw],v.N),f.bE=new h.O("KHR_materials_variants",f.dt,null,!1),f.bn=new h.V(h.x7(),!1,!1),f.ds=new h.Y([f.h,f.bn],v.N),f.bL=new h.O("KHR_materials_volume",f.ds,null,!1),f.cC=h.a(e([]),h.aB("D<bi*>")),f.dx=new h.as(0,{},f.cC,h.aB("as<bi*,V*>")),f.bN=new h.O("KHR_mesh_quantization",f.dx,h.x8(),!0),f.aK=h.u("bh"),f.aG=h.u("cv"),f.aH=h.u("cw"),f.N=new h.V(h.x9(),!1,!1),f.dv=new h.Y([f.aK,f.N,f.aG,f.N,f.aH,f.N],v.N),f.bC=new h.O("KHR_texture_transform",f.dv,null,!1),f.as=h.a(e([f.bB,f.bJ,f.bG,f.bM,f.bK,f.bF,f.bD,f.bA,f.bI,f.bH,f.bz,f.bE,f.bL,f.bN,f.bC]),h.aB("D<O*>")),f.cj=h.a(e(["OPAQUE","MASK","BLEND"]),v.i),f.ck=h.a(e(["pbrMetallicRoughness","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","alphaMode","alphaCutoff","doubleSided","name"]),v.i),f.cl=h.a(e([5120,5121,5122,5123,5125,5126]),v.V),f.cm=h.a(e(["inverseBindMatrices","skeleton","joints","name"]),v.i),f.a4=new h.y("VEC3",5120,!1),f.a5=new h.y("VEC3",5122,!1),f.cn=h.a(e([f.a4,f.w,f.a5,f.x]),v.p),f.co=h.a(e(["data-uri","buffer-view","glb","external"]),v.i),f.cp=h.a(e(["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]),v.i),f.cq=h.a(e(["bufferView","byteOffset","componentType"]),v.i),f.Q=h.a(e([f.w,f.x]),v.p),f.cr=h.a(e(["aspectRatio","yfov","zfar","znear"]),v.i),f.cs=h.a(e(["copyright","generator","version","minVersion"]),v.i),f.ct=h.a(e(["bufferView","byteOffset"]),v.i),f.cu=h.a(e(["bufferView","mimeType","uri","name"]),v.i),f.cv=h.a(e(["channels","samplers","name"]),v.i),f.cw=h.a(e(["baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture"]),v.i),f.cx=h.a(e(["count","indices","values"]),v.i),f.cy=h.a(e(["diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture"]),v.i),f.cz=h.a(e(["directional","point","spot"]),v.i),f.cA=h.a(e(["emissiveStrength"]),v.i),f.at=h.a(e([]),v.b),f.cB=h.a(e([]),v.i),f.cE=h.a(e(["extensions","extras"]),v.i),f.cF=h.a(e([0,0,32722,12287,65534,34815,65534,18431]),v.V),f.cH=h.a(e(["index","texCoord"]),v.i),f.cI=h.a(e(["index","texCoord","scale"]),v.i),f.cJ=h.a(e(["index","texCoord","strength"]),v.i),f.cK=h.a(e(["innerConeAngle","outerConeAngle"]),v.i),f.cL=h.a(e(["input","interpolation","output"]),v.i),f.cM=h.a(e(["ior"]),v.i),f.cN=h.a(e(["attributes","indices","material","mode","targets"]),v.i),f.cO=h.a(e(["bufferView","byteOffset","componentType","count","type","normalized","max","min","sparse","name"]),v.i),f.cP=h.a(e(["light"]),v.i),f.cQ=h.a(e(["lights"]),v.i),f.cR=h.a(e(["mappings"]),v.i),f.cS=h.a(e(["name"]),v.i),f.cT=h.a(e(["node","path"]),v.i),f.cU=h.a(e(["nodes","name"]),v.i),f.cV=h.a(e([null,"linear","srgb","custom"]),v.i),f.cW=h.a(e([null,"srgb","custom"]),v.i),f.au=h.a(e([0,0,24576,1023,65534,34815,65534,18431]),v.V),f.cX=h.a(e(["image/webp"]),v.i),f.cY=h.a(e(["offset","rotation","scale","texCoord"]),v.i),f.av=h.a(e(["orthographic","perspective"]),v.i),f.cZ=h.a(e(["primitives","weights","name"]),v.i),f.d_=h.a(e([0,0,32754,11263,65534,34815,65534,18431]),v.V),f.d0=h.a(e(["magFilter","minFilter","wrapS","wrapT","name"]),v.i),f.d1=h.a(e([null,"rgb","rgba","luminance","luminance-alpha"]),v.i),f.aw=h.a(e([0,0,65490,12287,65535,34815,65534,18431]),v.V),f.d3=h.a(e(["sampler","source","name"]),v.i),f.d4=h.a(e(["source"]),v.i),f.d5=h.a(e(["iridescenceFactor","iridescenceTexture","iridescenceIor","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessTexture"]),v.i),f.aX=new h.y("VEC3",5121,!1),f.aY=new h.y("VEC3",5123,!1),f.d6=h.a(e([f.a4,f.w,f.aX,f.H,f.a5,f.x,f.aY,f.I]),v.p),f.d7=h.a(e(["target","sampler"]),v.i),f.R=h.a(e(["translation","rotation","scale","weights"]),v.i),f.d8=h.a(e(["type","orthographic","perspective","name"]),v.i),f.d9=h.a(e(["uri","byteLength","name"]),v.i),f.da=h.a(e(["variants"]),v.i),f.db=h.a(e(["variants","material","name"]),v.i),f.dc=h.a(e([f.Y,f.a0]),v.p),f.dd=h.a(e(["attenuationColor","attenuationDistance","thicknessFactor","thicknessTexture"]),v.i),f.de=h.a(e(["xmag","ymag","zfar","znear"]),v.i),f.df=h.a(e(["extensionsUsed","extensionsRequired","accessors","animations","asset","buffers","bufferViews","cameras","images","materials","meshes","nodes","samplers","scene","scenes","skins","textures"]),v.i),f.dg=h.a(e([f.J,f.K]),v.p),f.aq=h.a(e([f.k]),v.p),f.c1=h.a(e([f.n,f.y,f.J,f.z,f.K]),v.p),f.aQ=new h.y("SCALAR",5121,!0),f.aO=new h.y("SCALAR",5120,!0),f.aT=new h.y("SCALAR",5123,!0),f.aR=new h.y("SCALAR",5122,!0),f.cG=h.a(e([f.G,f.aQ,f.aO,f.aT,f.aR]),v.p),f.dh=new h.as(4,{translation:f.aq,rotation:f.c1,scale:f.aq,weights:f.cG},f.R,h.aB("as<e*,o<y*>*>")),f.ca=h.a(e(["SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4"]),v.i),f.m=new h.as(7,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},f.ca,h.aB("as<e*,f*>")),f.ax=new h.Y([5120,"BYTE",5121,"UNSIGNED_BYTE",5122,"SHORT",5123,"UNSIGNED_SHORT",5124,"INT",5125,"UNSIGNED_INT",5126,"FLOAT",35664,"FLOAT_VEC2",35665,"FLOAT_VEC3",35666,"FLOAT_VEC4",35667,"INT_VEC2",35668,"INT_VEC3",35669,"INT_VEC4",35670,"BOOL",35671,"BOOL_VEC2",35672,"BOOL_VEC3",35673,"BOOL_VEC4",35674,"FLOAT_MAT2",35675,"FLOAT_MAT3",35676,"FLOAT_MAT4",35678,"SAMPLER_2D"],h.aB("Y<f*,e*>")),f.cD=h.a(e([]),h.aB("D<cA*>")),f.ay=new h.as(0,{},f.cD,h.aB("as<cA*,@>")),f.d2=h.a(e(["KHR","EXT","ADOBE","AGI","AGT","ALCM","ALI","AMZN","ANIMECH","ASOBO","AVR","BLENDER","CAPTURE","CESIUM","CITRUS","CLO","CVTOOLS","EMBARK","EPIC","F8","FB","FOXIT","GOOGLE","GRIFFEL","INTEL","KDAB","LLQ","MAXAR","MESHOPT","MOZ","MPEG","MSFT","MTTR","MX","NEEDLE","NV","OFT","OMI","OTOY","OWLII","PANDA3D","POLUTROPON","PTC","S8S","SE","SEIN","SHAPEDIVER","SI","SKFB","SKYLINE","SNAP","SPECTRUM","TENCENT","TRYON","USSF","UX3D","VRMC","WEB3D"]),v.i),f.dy=new h.as(58,{KHR:null,EXT:null,ADOBE:null,AGI:null,AGT:null,ALCM:null,ALI:null,AMZN:null,ANIMECH:null,ASOBO:null,AVR:null,BLENDER:null,CAPTURE:null,CESIUM:null,CITRUS:null,CLO:null,CVTOOLS:null,EMBARK:null,EPIC:null,F8:null,FB:null,FOXIT:null,GOOGLE:null,GRIFFEL:null,INTEL:null,KDAB:null,LLQ:null,MAXAR:null,MESHOPT:null,MOZ:null,MPEG:null,MSFT:null,MTTR:null,MX:null,NEEDLE:null,NV:null,OFT:null,OMI:null,OTOY:null,OWLII:null,PANDA3D:null,POLUTROPON:null,PTC:null,S8S:null,SE:null,SEIN:null,SHAPEDIVER:null,SI:null,SKFB:null,SKYLINE:null,SNAP:null,SPECTRUM:null,TENCENT:null,TRYON:null,USSF:null,UX3D:null,VRMC:null,WEB3D:null},f.d2,h.aB("as<e*,k>")),f.dz=new h.ei(f.dy,h.aB("ei<e*>")),f.dA=new h.d_("call"),f.dB=h.u("bY"),f.dC=h.u("bZ"),f.dD=h.u("bX"),f.S=h.u("a4<L>"),f.dE=h.u("c0"),f.dF=h.u("b2"),f.dG=h.u("b3"),f.aB=h.u("bt"),f.dH=h.u("bu"),f.aC=h.u("bv"),f.dI=h.u("aS"),f.dJ=h.u("c2"),f.dK=h.u("c3"),f.dL=h.u("bw"),f.dM=h.u("cj"),f.dN=h.u("c8"),f.aD=h.u("aT"),f.dO=h.u("bz"),f.dP=h.u("cd"),f.dQ=h.u("ba"),f.dR=h.u("ce"),f.dS=h.u("cf"),f.dT=h.u("cg"),f.dU=h.u("ch"),f.dV=h.u("ci"),f.dW=h.u("ck"),f.dX=h.u("cl"),f.dY=h.u("cm"),f.dZ=h.u("cn"),f.e_=h.u("bA"),f.e0=h.u("bb"),f.e1=h.u("aK"),f.e2=h.u("cp"),f.e3=h.u("cq"),f.aF=h.u("aU"),f.e4=h.u("c"),f.e5=h.u("cx"),f.e6=h.u("bC"),f.aI=h.u("bD"),f.aJ=h.u("bF"),f.e7=h.u("co"),f.e8=new h.lt(!1),f.r=new h.dR(0,"Unknown"),f.t=new h.dR(1,"sRGB"),f.E=new h.dR(2,"Custom"),f.u=new h.d1(0,"Unknown"),f.e9=new h.d1(1,"Linear"),f.v=new h.d1(2,"sRGB"),f.F=new h.d1(3,"Custom"),f.ea=new h.d3(null,2),f.aL=new h.d6(0,"DataUri"),f.aM=new h.d6(1,"BufferView"),f.eb=new h.d6(2,"GLB"),f.aN=new h.d6(3,"External")}(),m.m8=null,m.oI=null,m.om=null,m.ol=null,m.pK=null,m.pB=null,m.pR=null,m.mI=null,m.mT=null,m.nH=null,m.dd=null,m.es=null,m.et=null,m.nB=!1,m.A=f.i,m.cE=h.a([],h.aB("D<c>")),m.oD=null,m.oB=null,m.oC=null,function(){var e=c.lazyFinal,t=c.lazy,n=c.lazyOld;e(m,"xv","nM",(()=>h.wN("_$dart_dartClosure"))),e(m,"AL","tg",(()=>f.i.cV(new h.n6))),e(m,"A8","rY",(()=>h.bj(h.lm({toString:function(){return"$receiver$"}})))),e(m,"A9","rZ",(()=>h.bj(h.lm({$method$:null,toString:function(){return"$receiver$"}})))),e(m,"Aa","t_",(()=>h.bj(h.lm(null)))),e(m,"Ab","t0",(()=>h.bj(function(){try{null.$method$("$arguments$")}catch(e){return e.message}}()))),e(m,"Ae","t3",(()=>h.bj(h.lm(void 0)))),e(m,"Af","t4",(()=>h.bj(function(){try{(void 0).$method$("$arguments$")}catch(e){return e.message}}()))),e(m,"Ad","t2",(()=>h.bj(h.oW(null)))),e(m,"Ac","t1",(()=>h.bj(function(){try{null.$method$}catch(e){return e.message}}()))),e(m,"Ah","t6",(()=>h.bj(h.oW(void 0)))),e(m,"Ag","t5",(()=>h.bj(function(){try{(void 0).$method$}catch(e){return e.message}}()))),e(m,"Ak","o9",(()=>h.uZ())),e(m,"y2","fZ",(()=>v.U.a(m.tg()))),e(m,"Ai","t7",(()=>(new h.lv).$0())),e(m,"Aj","t8",(()=>(new h.lu).$0())),e(m,"Am","oa",(()=>h.uA(h.vO(h.a([-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,-1,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2],v.Z))))),t(m,"Al","t9",(()=>h.uB(0))),e(m,"AE","ta",(()=>h.fX(f.e4))),e(m,"AI","te",(()=>h.vM())),n(m,"xt","bp",(()=>h.oQ("^([0-9]+)\\.([0-9]+)$"))),n(m,"xu","pX",(()=>h.oQ("^([A-Z0-9]+)_[A-Za-z0-9_]+$"))),n(m,"xS","qe",(()=>h.F("BUFFER_BYTE_LENGTH_MISMATCH",new h.hK,f.b))),n(m,"xT","qf",(()=>h.F("BUFFER_GLB_CHUNK_TOO_BIG",new h.hL,f.e))),n(m,"xL","nQ",(()=>h.F("ACCESSOR_MIN_MISMATCH",new h.hD,f.b))),n(m,"xK","nP",(()=>h.F("ACCESSOR_MAX_MISMATCH",new h.hC,f.b))),n(m,"xA","nO",(()=>h.F("ACCESSOR_ELEMENT_OUT_OF_MIN_BOUND",new h.hs,f.b))),n(m,"xz","nN",(()=>h.F("ACCESSOR_ELEMENT_OUT_OF_MAX_BOUND",new h.hr,f.b))),n(m,"xP","nR",(()=>h.F("ACCESSOR_VECTOR3_NON_UNIT",new h.hH,f.b))),n(m,"xG","q5",(()=>h.F("ACCESSOR_INVALID_SIGN",new h.hy,f.b))),n(m,"xy","q_",(()=>h.F("ACCESSOR_ANIMATION_SAMPLER_OUTPUT_NON_NORMALIZED_QUATERNION",new h.hq,f.b))),n(m,"xM","q9",(()=>h.F("ACCESSOR_NON_CLAMPED",new h.hE,f.b))),n(m,"xE","q3",(()=>h.F("ACCESSOR_INVALID_FLOAT",new h.hw,f.b))),n(m,"xB","q0",(()=>h.F("ACCESSOR_INDEX_OOB",new h.ht,f.b))),n(m,"xD","q2",(()=>h.F("ACCESSOR_INDEX_TRIANGLE_DEGENERATE",new h.hv,f.f))),n(m,"xC","q1",(()=>h.F("ACCESSOR_INDEX_PRIMITIVE_RESTART",new h.hu,f.b))),n(m,"xw","pY",(()=>h.F("ACCESSOR_ANIMATION_INPUT_NEGATIVE",new h.ho,f.b))),n(m,"xx","pZ",(()=>h.F("ACCESSOR_ANIMATION_INPUT_NON_INCREASING",new h.hp,f.b))),n(m,"xO","qb",(()=>h.F("ACCESSOR_SPARSE_INDICES_NON_INCREASING",new h.hG,f.b))),n(m,"xN","qa",(()=>h.F("ACCESSOR_SPARSE_INDEX_OOB",new h.hF,f.b))),n(m,"xF","q4",(()=>h.F("ACCESSOR_INVALID_IBM",new h.hx,f.b))),n(m,"xV","qg",(()=>h.F("IMAGE_DATA_INVALID",new h.hN,f.b))),n(m,"xX","qi",(()=>h.F("IMAGE_MIME_TYPE_INVALID",new h.hP,f.b))),n(m,"y_","ql",(()=>h.F("IMAGE_UNEXPECTED_EOS",new h.hS,f.b))),n(m,"y0","qm",(()=>h.F("IMAGE_UNRECOGNIZED_FORMAT",new h.hT,f.e))),n(m,"xY","qj",(()=>h.F("IMAGE_NON_ENABLED_MIME_TYPE",new h.hQ,f.b))),n(m,"xZ","qk",(()=>h.F("IMAGE_NPOT_DIMENSIONS",new h.hR,f.f))),n(m,"xW","qh",(()=>h.F("IMAGE_FEATURES_UNSUPPORTED",new h.hO,f.e))),n(m,"y1","nT",(()=>h.F("URI_GLB",new h.hU,f.f))),n(m,"xU","nS",(()=>h.F("DATA_URI_GLB",new h.hM,f.e))),n(m,"xI","q7",(()=>h.F("ACCESSOR_JOINTS_INDEX_OOB",new h.hA,f.b))),n(m,"xH","q6",(()=>h.F("ACCESSOR_JOINTS_INDEX_DUPLICATE",new h.hz,f.b))),n(m,"xQ","qc",(()=>h.F("ACCESSOR_WEIGHTS_NEGATIVE",new h.hI,f.b))),n(m,"xR","qd",(()=>h.F("ACCESSOR_WEIGHTS_NON_NORMALIZED",new h.hJ,f.b))),n(m,"xJ","q8",(()=>h.F("ACCESSOR_JOINTS_USED_ZERO_WEIGHT",new h.hB,f.e))),n(m,"yj","na",(()=>new h.iE(f.b,"IO_ERROR",new h.iF))),n(m,"z6","o2",(()=>h.al("ARRAY_LENGTH_NOT_IN_LIST",new h.kc,f.b))),n(m,"z7","ez",(()=>h.al("ARRAY_TYPE_MISMATCH",new h.kd,f.b))),n(m,"z5","o1",(()=>h.al("DUPLICATE_ELEMENTS",new h.kb,f.b))),n(m,"z9","h0",(()=>h.al("INVALID_INDEX",new h.kf,f.b))),n(m,"za","h1",(()=>h.al("INVALID_JSON",new h.kg,f.b))),n(m,"zb","o3",(()=>h.al("INVALID_URI",new h.kh,f.b))),n(m,"z8","bV",(()=>h.al("EMPTY_ENTITY",new h.ke,f.b))),n(m,"zc","o4",(()=>h.al("ONE_OF_MISMATCH",new h.ki,f.b))),n(m,"zd","re",(()=>h.al("PATTERN_MISMATCH",new h.kj,f.b))),n(m,"ze","a2",(()=>h.al("TYPE_MISMATCH",new h.kk,f.b))),n(m,"zj","rh",(()=>h.al("VALUE_NOT_IN_LIST",new h.kp,f.e))),n(m,"zk","nb",(()=>h.al("VALUE_NOT_IN_RANGE",new h.kq,f.b))),n(m,"zi","rg",(()=>h.al("VALUE_MULTIPLE_OF",new h.ko,f.b))),n(m,"zf","bq",(()=>h.al("UNDEFINED_PROPERTY",new h.kl,f.b))),n(m,"zg","rf",(()=>h.al("UNEXPECTED_PROPERTY",new h.km,f.e))),n(m,"zh","cJ",(()=>h.al("UNSATISFIED_DEPENDENCY",new h.kn,f.b))),n(m,"A3","rU",(()=>h.r("UNKNOWN_ASSET_MAJOR_VERSION",new h.la,f.b))),n(m,"A4","rV",(()=>h.r("UNKNOWN_ASSET_MINOR_VERSION",new h.lb,f.e))),n(m,"zP","rG",(()=>h.r("ASSET_MIN_VERSION_GREATER_THAN_VERSION",new h.kW,f.b))),n(m,"zz","rr",(()=>h.r("INVALID_GL_VALUE",new h.kG,f.b))),n(m,"zm","rj",(()=>h.r("ACCESSOR_NORMALIZED_INVALID",new h.kt,f.b))),n(m,"zn","rk",(()=>h.r("ACCESSOR_OFFSET_ALIGNMENT",new h.ku,f.b))),n(m,"zl","ri",(()=>h.r("ACCESSOR_MATRIX_ALIGNMENT",new h.ks,f.b))),n(m,"zo","rl",(()=>h.r("ACCESSOR_SPARSE_COUNT_OUT_OF_RANGE",new h.kv,f.b))),n(m,"zp","rm",(()=>h.r("ANIMATION_CHANNEL_TARGET_NODE_SKIN",new h.kw,f.e))),n(m,"zq","rn",(()=>h.r("BUFFER_DATA_URI_MIME_TYPE_INVALID",new h.kx,f.b))),n(m,"zs","ro",(()=>h.r("BUFFER_VIEW_TOO_BIG_BYTE_STRIDE",new h.kz,f.b))),n(m,"zr","nc",(()=>h.r("BUFFER_VIEW_INVALID_BYTE_STRIDE",new h.ky,f.b))),n(m,"zt","o5",(()=>h.r("CAMERA_XMAG_YMAG_NEGATIVE",new h.kA,f.e))),n(m,"zu","o6",(()=>h.r("CAMERA_XMAG_YMAG_ZERO",new h.kB,f.b))),n(m,"zv","rp",(()=>h.r("CAMERA_YFOV_GEQUAL_PI",new h.kC,f.e))),n(m,"zw","o7",(()=>h.r("CAMERA_ZFAR_LEQUAL_ZNEAR",new h.kD,f.b))),n(m,"zH","rz",(()=>h.r("MATERIAL_ALPHA_CUTOFF_INVALID_MODE",new h.kO,f.e))),n(m,"zK","nd",(()=>h.r("MESH_PRIMITIVE_INVALID_ATTRIBUTE",new h.kR,f.b))),n(m,"zO","rF",(()=>h.r("MESH_PRIMITIVES_UNEQUAL_TARGETS_COUNT",new h.kV,f.b))),n(m,"zM","rD",(()=>h.r("MESH_PRIMITIVE_NO_POSITION",new h.kT,f.e))),n(m,"zJ","rB",(()=>h.r("MESH_PRIMITIVE_INDEXED_SEMANTIC_CONTINUITY",new h.kQ,f.b))),n(m,"zN","rE",(()=>h.r("MESH_PRIMITIVE_TANGENT_WITHOUT_NORMAL",new h.kU,f.e))),n(m,"zL","rC",(()=>h.r("MESH_PRIMITIVE_JOINTS_WEIGHTS_MISMATCH",new h.kS,f.b))),n(m,"zI","rA",(()=>h.r("MESH_INVALID_WEIGHTS_COUNT",new h.kP,f.b))),n(m,"zT","rK",(()=>h.r("NODE_MATRIX_TRS",new h.l_,f.b))),n(m,"zR","rI",(()=>h.r("NODE_MATRIX_DEFAULT",new h.kY,f.f))),n(m,"zU","rL",(()=>h.r("NODE_MATRIX_NON_TRS",new h.l0,f.b))),n(m,"A0","rR",(()=>h.r("ROTATION_NON_UNIT",new h.l7,f.b))),n(m,"A6","rX",(()=>h.r("UNUSED_EXTENSION_REQUIRED",new h.ld,f.b))),n(m,"A_","rQ",(()=>h.r("NON_REQUIRED_EXTENSION",new h.l6,f.b))),n(m,"A5","rW",(()=>h.r("UNRESERVED_EXTENSION_PREFIX",new h.lc,f.e))),n(m,"zy","rq",(()=>h.r("INVALID_EXTENSION_NAME_FORMAT",new h.kF,f.e))),n(m,"zS","rJ",(()=>h.r("NODE_EMPTY",new h.kZ,f.f))),n(m,"zX","rO",(()=>h.r("NODE_SKINNED_MESH_NON_ROOT",new h.l3,f.e))),n(m,"zW","rN",(()=>h.r("NODE_SKINNED_MESH_LOCAL_TRANSFORMS",new h.l2,f.e))),n(m,"zV","rM",(()=>h.r("NODE_SKIN_NO_SCENE",new h.l1,f.b))),n(m,"A1","rS",(()=>h.r("SKIN_NO_COMMON_ROOT",new h.l8,f.b))),n(m,"A2","rT",(()=>h.r("SKIN_SKELETON_INVALID",new h.l9,f.b))),n(m,"zZ","rP",(()=>h.r("NON_RELATIVE_URI",new h.l5,f.e))),n(m,"zQ","rH",(()=>h.r("MULTIPLE_EXTENSIONS",new h.kX,f.e))),n(m,"zY","di",(()=>h.r("NON_OBJECT_EXTRAS",new h.l4,f.f))),n(m,"zx","o8",(()=>h.r("EXTRA_PROPERTY",new h.kE,f.f))),n(m,"zA","rs",(()=>h.r("KHR_LIGHTS_PUNCTUAL_LIGHT_SPOT_ANGLES",new h.kH,f.b))),n(m,"zB","rt",(()=>h.r("KHR_MATERIALS_EMISSIVE_STRENGTH_ZERO_FACTOR",new h.kI,f.e))),n(m,"zG","ry",(()=>h.r("KHR_MATERIALS_VOLUME_NO_TRANSMISSION",new h.kN,f.e))),n(m,"zF","rx",(()=>h.r("KHR_MATERIALS_VOLUME_DOUBLE_SIDED",new h.kM,f.e))),n(m,"zD","rv",(()=>h.r("KHR_MATERIALS_IRIDESCENCE_THICKNESS_RANGE_WITHOUT_TEXTURE",new h.kK,f.f))),n(m,"zC","ru",(()=>h.r("KHR_MATERIALS_IRIDESCENCE_THICKNESS_RANGE_INVALID",new h.kJ,f.b))),n(m,"zE","rw",(()=>h.r("KHR_MATERIALS_IRIDESCENCE_THICKNESS_TEXTURE_UNUSED",new h.kL,f.f))),n(m,"ym","qE",(()=>h.v("ACCESSOR_TOTAL_OFFSET_ALIGNMENT",new h.j_,f.b))),n(m,"yk","qD",(()=>h.v("ACCESSOR_SMALL_BYTESTRIDE",new h.iY,f.b))),n(m,"yl","nU",(()=>h.v("ACCESSOR_TOO_LONG",new h.iZ,f.b))),n(m,"yn","qF",(()=>h.v("ACCESSOR_USAGE_OVERRIDE",new h.j0,f.b))),n(m,"yq","qI",(()=>h.v("ANIMATION_DUPLICATE_TARGETS",new h.j3,f.b))),n(m,"yo","qG",(()=>h.v("ANIMATION_CHANNEL_TARGET_NODE_MATRIX",new h.j1,f.b))),n(m,"yp","qH",(()=>h.v("ANIMATION_CHANNEL_TARGET_NODE_WEIGHTS_NO_MORPHS",new h.j2,f.b))),n(m,"yu","qL",(()=>h.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_WITHOUT_BOUNDS",new h.j7,f.b))),n(m,"ys","qJ",(()=>h.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_INVALID_FORMAT",new h.j5,f.b))),n(m,"yw","qN",(()=>h.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_FORMAT",new h.j9,f.b))),n(m,"yt","qK",(()=>h.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_TOO_FEW_ELEMENTS",new h.j6,f.b))),n(m,"yv","qM",(()=>h.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_COUNT",new h.j8,f.b))),n(m,"yr","nV",(()=>h.v("ANIMATION_SAMPLER_ACCESSOR_WITH_BYTESTRIDE",new h.j4,f.b))),n(m,"yx","qO",(()=>h.v("BUFFER_MISSING_GLB_DATA",new h.ja,f.b))),n(m,"yA","nW",(()=>h.v("BUFFER_VIEW_TOO_LONG",new h.jd,f.b))),n(m,"yz","qQ",(()=>h.v("BUFFER_VIEW_TARGET_OVERRIDE",new h.jc,f.b))),n(m,"yy","qP",(()=>h.v("BUFFER_VIEW_TARGET_MISSING",new h.jb,f.aA))),n(m,"yB","qR",(()=>h.v("IMAGE_BUFFER_VIEW_WITH_BYTESTRIDE",new h.je,f.b))),n(m,"yC","qS",(()=>h.v("INVALID_IBM_ACCESSOR_COUNT",new h.jf,f.b))),n(m,"yG","nY",(()=>h.v("MESH_PRIMITIVE_ATTRIBUTES_ACCESSOR_INVALID_FORMAT",new h.jj,f.b))),n(m,"yH","qV",(()=>h.v("MESH_PRIMITIVE_ATTRIBUTES_ACCESSOR_UNSIGNED_INT",new h.jk,f.b))),n(m,"yN","nZ",(()=>h.v("MESH_PRIMITIVE_POSITION_ACCESSOR_WITHOUT_BOUNDS",new h.jq,f.b))),n(m,"yF","qU",(()=>h.v("MESH_PRIMITIVE_ACCESSOR_WITHOUT_BYTESTRIDE",new h.ji,f.b))),n(m,"yE","nX",(()=>h.v("MESH_PRIMITIVE_ACCESSOR_UNALIGNED",new h.jh,f.b))),n(m,"yK","qY",(()=>h.v("MESH_PRIMITIVE_INDICES_ACCESSOR_WITH_BYTESTRIDE",new h.jn,f.b))),n(m,"yJ","qX",(()=>h.v("MESH_PRIMITIVE_INDICES_ACCESSOR_INVALID_FORMAT",new h.jm,f.b))),n(m,"yI","qW",(()=>h.v("MESH_PRIMITIVE_INCOMPATIBLE_MODE",new h.jl,f.e))),n(m,"yO","o_",(()=>h.v("MESH_PRIMITIVE_TOO_FEW_TEXCOORDS",new h.jr,f.b))),n(m,"yP","r0",(()=>h.v("MESH_PRIMITIVE_UNEQUAL_ACCESSOR_COUNT",new h.js,f.b))),n(m,"yM","r_",(()=>h.v("MESH_PRIMITIVE_MORPH_TARGET_NO_BASE_ACCESSOR",new h.jp,f.b))),n(m,"yL","qZ",(()=>h.v("MESH_PRIMITIVE_MORPH_TARGET_INVALID_ATTRIBUTE_COUNT",new h.jo,f.b))),n(m,"yQ","r1",(()=>h.v("NODE_LOOP",new h.jt,f.b))),n(m,"yR","r2",(()=>h.v("NODE_PARENT_OVERRIDE",new h.ju,f.b))),n(m,"yU","r5",(()=>h.v("NODE_WEIGHTS_INVALID",new h.jx,f.b))),n(m,"yS","r3",(()=>h.v("NODE_SKIN_WITH_NON_SKINNED_MESH",new h.jv,f.b))),n(m,"yT","r4",(()=>h.v("NODE_SKINNED_MESH_WITHOUT_SKIN",new h.jw,f.e))),n(m,"yV","r6",(()=>h.v("SCENE_NON_ROOT_NODE",new h.jy,f.b))),n(m,"yX","r8",(()=>h.v("SKIN_IBM_INVALID_FORMAT",new h.jA,f.b))),n(m,"yW","r7",(()=>h.v("SKIN_IBM_ACCESSOR_WITH_BYTESTRIDE",new h.jz,f.b))),n(m,"yY","o0",(()=>h.v("TEXTURE_INVALID_IMAGE_MIME_TYPE",new h.jB,f.b))),n(m,"yZ","r9",(()=>h.v("UNDECLARED_EXTENSION",new h.jC,f.b))),n(m,"z_","ra",(()=>h.v("UNEXPECTED_EXTENSION_OBJECT",new h.jD,f.b))),n(m,"z0","N",(()=>h.v("UNRESOLVED_REFERENCE",new h.jE,f.b))),n(m,"z1","rb",(()=>h.v("UNSUPPORTED_EXTENSION",new h.jF,f.f))),n(m,"z4","h_",(()=>h.v("UNUSED_OBJECT",new h.jI,f.f))),n(m,"z3","rd",(()=>h.v("UNUSED_MESH_WEIGHTS",new h.jH,f.f))),n(m,"z2","rc",(()=>h.v("UNUSED_MESH_TANGENT",new h.jG,f.f))),n(m,"yD","qT",(()=>h.v("KHR_MATERIALS_VARIANTS_NON_UNIQUE_VARIANT",new h.jg,f.b))),n(m,"y9","qt",(()=>h.ak("GLB_INVALID_MAGIC",new h.i4,f.b))),n(m,"ya","qu",(()=>h.ak("GLB_INVALID_VERSION",new h.i5,f.b))),n(m,"yc","qw",(()=>h.ak("GLB_LENGTH_TOO_SMALL",new h.i7,f.b))),n(m,"y3","qn",(()=>h.ak("GLB_CHUNK_LENGTH_UNALIGNED",new h.hZ,f.b))),n(m,"yb","qv",(()=>h.ak("GLB_LENGTH_MISMATCH",new h.i6,f.b))),n(m,"y4","qo",(()=>h.ak("GLB_CHUNK_TOO_BIG",new h.i_,f.b))),n(m,"y7","qr",(()=>h.ak("GLB_EMPTY_CHUNK",new h.i2,f.b))),n(m,"y6","qq",(()=>h.ak("GLB_EMPTY_BIN_CHUNK",new h.i1,f.f))),n(m,"y5","qp",(()=>h.ak("GLB_DUPLICATE_CHUNK",new h.i0,f.b))),n(m,"yf","qz",(()=>h.ak("GLB_UNEXPECTED_END_OF_CHUNK_HEADER",new h.ia,f.b))),n(m,"ye","qy",(()=>h.ak("GLB_UNEXPECTED_END_OF_CHUNK_DATA",new h.i9,f.b))),n(m,"yg","qA",(()=>h.ak("GLB_UNEXPECTED_END_OF_HEADER",new h.ib,f.b))),n(m,"yh","qB",(()=>h.ak("GLB_UNEXPECTED_FIRST_CHUNK",new h.ic,f.b))),n(m,"yd","qx",(()=>h.ak("GLB_UNEXPECTED_BIN_CHUNK",new h.i8,f.b))),n(m,"yi","qC",(()=>h.ak("GLB_UNKNOWN_CHUNK_TYPE",new h.id,f.e))),n(m,"y8","qs",(()=>h.ak("GLB_EXTRA_DATA",new h.i3,f.e))),n(m,"AC","ob",(()=>h.uz(1))),n(m,"AF","tb",(()=>h.uv())),n(m,"AJ","tf",(()=>h.p2())),n(m,"AG","tc",(()=>{var e=h.uM();return e.a[3]=1,e})),n(m,"AH","td",(()=>h.p2()))}(),function(){var e=function(e){var t={};return t[e]=1,Object.keys(c.convertToFastObject(t))[0]};g.getIsolateTag=function(t){return e("___dart_"+t+g.isolateTag)};for(var t="___dart_isolate_tags_",n=Object[t]||(Object[t]=Object.create(null)),r=0;;r++){var i=e("_ZxYxX_"+r+"_");if(!(i in n)){n[i]=1,g.isolateTag=i;break}}g.dispatchPropertyName=g.getIsolateTag("dispatch_record")}(),c.setOrUpdateInterceptorsByTag({ArrayBuffer:d.cR,DataView:h.dD,ArrayBufferView:h.dD,Float32Array:h.f4,Float64Array:h.f5,Int16Array:h.f6,Int32Array:h.f7,Int8Array:h.f8,Uint16Array:h.f9,Uint32Array:h.fa,Uint8ClampedArray:h.dE,CanvasPixelArray:h.dE,Uint8Array:h.cu}),c.setOrUpdateLeafTags({ArrayBuffer:!0,DataView:!0,ArrayBufferView:!1,Float32Array:!0,Float64Array:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Uint16Array:!0,Uint32Array:!0,Uint8ClampedArray:!0,CanvasPixelArray:!0,Uint8Array:!1}),h.cW.$nativeSuperclassTag="ArrayBufferView",h.e4.$nativeSuperclassTag="ArrayBufferView",h.e5.$nativeSuperclassTag="ArrayBufferView",h.dC.$nativeSuperclassTag="ArrayBufferView",h.e6.$nativeSuperclassTag="ArrayBufferView",h.e7.$nativeSuperclassTag="ArrayBufferView",h.aw.$nativeSuperclassTag="ArrayBufferView",Function.prototype.$1=function(e){return this(e)},Function.prototype.$0=function(){return this()},Function.prototype.$2=function(e,t){return this(e,t)},Function.prototype.$1$1=function(e){return this(e)},Function.prototype.$1$0=function(){return this()},Function.prototype.$3=function(e,t,n){return this(e,t,n)},Function.prototype.$4=function(e,t,n,r){return this(e,t,n,r)},Function.prototype.$1$2=function(e,t){return this(e,t)},Function.prototype.$2$0=function(){return this()},function(e){for(var t=0;t<e.length;++t)r(e[t])}(p),r(m),function(e){if("undefined"!=typeof document)if(void 0===document.currentScript)for(var t=document.scripts,n=0;n<t.length;++n)t[n].addEventListener("load",r,!1);else e(document.currentScript);else e(null);function r(n){for(var i=0;i<t.length;++i)t[i].removeEventListener("load",r,!1);e(n.target)}}((function(e){g.currentScript=e;var t=h.xb;"function"==typeof dartMainRunner?dartMainRunner(t,[]):t([])}))}()},880:(e,t,n)=>{var r=n(202);e.exports=(r.default||r).template({1:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <li>\r\n                <b>Generator:</b> "+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"generator"):t)?o(a,"name"):a,t))+"\r\n                "+(null!=(a=o(n,"if").call(s,null!=(a=null!=t?o(t,"generator"):t)?o(a,"docsURL"):a,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:16},end:{line:13,column:106}}}))?a:"")+"\r\n                "+(null!=(a=o(n,"if").call(s,null!=(a=null!=t?o(t,"generator"):t)?o(a,"bugsURL"):a,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:14,column:16},end:{line:14,column:106}}}))?a:"")+"\r\n            </li>\r\n"},2:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'(<a href="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"generator"):t)?s(a,"docsURL"):a,t))+'" target="_blank">docs</a>)'},4:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'(<a href="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"generator"):t)?s(a,"bugsURL"):a,t))+'" target="_blank">bugs</a>)'},6:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <li><b>Generator:</b> "+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"info"):t)?s(a,"generator"):a,t))+"</li>\r\n"},8:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                "+(null!=(a=o(n,"if").call(s,null!=(a=null!=(a=null!=t?o(t,"info"):t)?o(a,"extras"):a)?o(a,"title"):a,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i,loc:{start:{line:20,column:16},end:{line:20,column:92}}}))?a:"")+"\r\n                "+(null!=(a=o(n,"if").call(s,null!=(a=null!=(a=null!=t?o(t,"info"):t)?o(a,"extras"):a)?o(a,"author"):a,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i,loc:{start:{line:21,column:16},end:{line:21,column:97}}}))?a:"")+"\r\n                "+(null!=(a=o(n,"if").call(s,null!=(a=null!=(a=null!=t?o(t,"info"):t)?o(a,"extras"):a)?o(a,"license"):a,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i,loc:{start:{line:22,column:16},end:{line:22,column:100}}}))?a:"")+"\r\n                "+(null!=(a=o(n,"if").call(s,null!=(a=null!=(a=null!=t?o(t,"info"):t)?o(a,"extras"):a)?o(a,"source"):a,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i,loc:{start:{line:23,column:16},end:{line:23,column:97}}}))?a:"")+"\r\n"},9:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li><b>Title:</b> "+e.escapeExpression(e.lambda(null!=(a=null!=(a=null!=t?s(t,"info"):t)?s(a,"extras"):a)?s(a,"title"):a,t))+"</li>"},11:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li><b>Author:</b> "+(null!=(a=e.lambda(null!=(a=null!=(a=null!=t?s(t,"info"):t)?s(a,"extras"):a)?s(a,"author"):a,t))?a:"")+"</li>"},13:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li><b>License:</b> "+(null!=(a=e.lambda(null!=(a=null!=(a=null!=t?s(t,"info"):t)?s(a,"extras"):a)?s(a,"license"):a,t))?a:"")+"</li>"},15:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li><b>Source:</b> "+(null!=(a=e.lambda(null!=(a=null!=(a=null!=t?s(t,"info"):t)?s(a,"extras"):a)?s(a,"source"):a,t))?a:"")+"</li>"},17:function(e,t,n,r,i){return"None"},19:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <ul>\r\n"+(null!=(a=s(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"info"):t)?s(a,"extensionsUsed"):a,{name:"each",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i,loc:{start:{line:39,column:16},end:{line:41,column:25}}}))?a:"")+"                </ul>\r\n"},20:function(e,t,n,r,i){return"                    <li>"+e.escapeExpression(e.lambda(t,t))+"</li>\r\n"},22:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <table class="report-table">\r\n        <thead>\r\n            <tr style="background: #f44336;">\r\n            <th>Error</th>\r\n            <th>Message</th>\r\n            <th>Pointer</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n'+(null!=(a=o(n,"each").call(s,null!=t?o(t,"errors"):t,{name:"each",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i,loc:{start:{line:62,column:12},end:{line:68,column:21}}}))?a:"")+(null!=(a=o(n,"unless").call(s,null!=(a=null!=t?o(t,"issues"):t)?o(a,"messages"):a,{name:"unless",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i,loc:{start:{line:69,column:12},end:{line:71,column:23}}}))?a:"")+"        </tbody>\r\n        </table>\r\n"},23:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,l="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <tr>\r\n            <td><code>"+u(typeof(a=null!=(a=c(n,"code")||(null!=t?c(t,"code"):t))?a:o)===l?a.call(s,{name:"code",hash:{},data:i,loc:{start:{line:64,column:22},end:{line:64,column:30}}}):a)+"</code></td>\r\n            <td>"+u(typeof(a=null!=(a=c(n,"message")||(null!=t?c(t,"message"):t))?a:o)===l?a.call(s,{name:"message",hash:{},data:i,loc:{start:{line:65,column:16},end:{line:65,column:27}}}):a)+"</td>\r\n            <td><code>"+u(typeof(a=null!=(a=c(n,"pointer")||(null!=t?c(t,"pointer"):t))?a:o)===l?a.call(s,{name:"pointer",hash:{},data:i,loc:{start:{line:66,column:22},end:{line:66,column:33}}}):a)+"</code></td>\r\n            </tr>\r\n"},25:function(e,t,n,r,i){return'            <tr><td colspan="3">No issues found.</td></tr>\r\n'},27:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <table class="report-table">\r\n        <thead>\r\n            <tr style="background: #f9a825;">\r\n            <th>Warning</th>\r\n            <th>Message</th>\r\n            <th>Pointer</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n'+(null!=(a=o(n,"each").call(s,null!=t?o(t,"warnings"):t,{name:"each",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i,loc:{start:{line:85,column:12},end:{line:91,column:21}}}))?a:"")+(null!=(a=o(n,"unless").call(s,null!=(a=null!=t?o(t,"issues"):t)?o(a,"messages"):a,{name:"unless",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i,loc:{start:{line:92,column:12},end:{line:94,column:23}}}))?a:"")+"        </tbody>\r\n        </table>\r\n"},29:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <table class="report-table">\r\n        <thead>\r\n            <tr style="background: #8bc34a;">\r\n            <th>Hint</th>\r\n            <th>Message</th>\r\n            <th>Pointer</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n'+(null!=(a=o(n,"each").call(s,null!=t?o(t,"hints"):t,{name:"each",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i,loc:{start:{line:108,column:12},end:{line:114,column:21}}}))?a:"")+(null!=(a=o(n,"unless").call(s,null!=(a=null!=t?o(t,"issues"):t)?o(a,"messages"):a,{name:"unless",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i,loc:{start:{line:115,column:12},end:{line:117,column:23}}}))?a:"")+"        </tbody>\r\n        </table>\r\n"},31:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <table class="report-table">\r\n        <thead>\r\n            <tr style="background: #2196f3;">\r\n            <th>Info</th>\r\n            <th>Message</th>\r\n            <th>Pointer</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n'+(null!=(a=o(n,"each").call(s,null!=t?o(t,"infos"):t,{name:"each",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i,loc:{start:{line:131,column:12},end:{line:137,column:21}}}))?a:"")+(null!=(a=o(n,"unless").call(s,null!=(a=null!=t?o(t,"issues"):t)?o(a,"messages"):a,{name:"unless",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i,loc:{start:{line:138,column:12},end:{line:140,column:23}}}))?a:"")+"        </tbody>\r\n        </table>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,i){var a,s,o=e.lambda,l=e.escapeExpression,u=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<!DOCTYPE html>\r\n<title>glTF 2.0 validation report</title>\r\n<style>\r\n    body { overflow-y: auto; }\r\n</style>\r\n<div class="report">\r\n    <h1>Validation report</h1>\r\n    <ul>\r\n        <li><b>Format:</b> glTF '+l(o(null!=(a=null!=t?c(t,"info"):t)?c(a,"version"):a,t))+"</li>\r\n"+(null!=(a=c(n,"if").call(u,null!=t?c(t,"generator"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(6,i,0),data:i,loc:{start:{line:10,column:12},end:{line:18,column:19}}}))?a:"")+(null!=(a=c(n,"if").call(u,null!=(a=null!=t?c(t,"info"):t)?c(a,"extras"):a,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:19,column:12},end:{line:24,column:19}}}))?a:"")+"        <li>\r\n            <b>Stats:</b>\r\n            <ul>\r\n                <li>"+l(o(null!=(a=null!=t?c(t,"info"):t)?c(a,"drawCallCount"):a,t))+" draw calls</li>\r\n                <li>"+l(o(null!=(a=null!=t?c(t,"info"):t)?c(a,"animationCount"):a,t))+" animations</li>\r\n                <li>"+l(o(null!=(a=null!=t?c(t,"info"):t)?c(a,"materialCount"):a,t))+" materials</li>\r\n                <li>"+l(o(null!=(a=null!=t?c(t,"info"):t)?c(a,"totalVertexCount"):a,t))+" vertices</li>\r\n                <li>"+l(o(null!=(a=null!=t?c(t,"info"):t)?c(a,"totalTriangleCount"):a,t))+" triangles</li>\r\n            </ul>\r\n        </li>\r\n        <li>\r\n            <b>Extensions:</b> "+(null!=(a=c(n,"unless").call(u,null!=(a=null!=t?c(t,"info"):t)?c(a,"extensionsUsed"):a,{name:"unless",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i,loc:{start:{line:36,column:31},end:{line:36,column:77}}}))?a:"")+"\r\n"+(null!=(a=c(n,"if").call(u,null!=(a=null!=t?c(t,"info"):t)?c(a,"extensionsUsed"):a,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i,loc:{start:{line:37,column:12},end:{line:43,column:19}}}))?a:"")+'        </li>\r\n    </ul>\r\n    <hr/>\r\n    <p>\r\n        Report generated by\r\n        <a href="https://github.com/KhronosGroup/glTF-Validator/">KhronosGroup/glTF-Validator</a>\r\n        '+l("function"==typeof(s=null!=(s=c(n,"validatorVersion")||(null!=t?c(t,"validatorVersion"):t))?s:e.hooks.helperMissing)?s.call(u,{name:"validatorVersion",hash:{},data:i,loc:{start:{line:50,column:8},end:{line:50,column:28}}}):s)+".\r\n    </p>\r\n"+(null!=(a=c(n,"if").call(u,null!=(a=null!=t?c(t,"issues"):t)?c(a,"numErrors"):a,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i,loc:{start:{line:52,column:4},end:{line:74,column:11}}}))?a:"")+(null!=(a=c(n,"if").call(u,null!=(a=null!=t?c(t,"issues"):t)?c(a,"numWarnings"):a,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i,loc:{start:{line:75,column:4},end:{line:97,column:11}}}))?a:"")+(null!=(a=c(n,"if").call(u,null!=(a=null!=t?c(t,"issues"):t)?c(a,"numHints"):a,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i,loc:{start:{line:98,column:4},end:{line:120,column:11}}}))?a:"")+(null!=(a=c(n,"if").call(u,null!=(a=null!=t?c(t,"issues"):t)?c(a,"numInfos"):a,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i,loc:{start:{line:121,column:4},end:{line:143,column:11}}}))?a:"")+"</div>"},useData:!0})},263:(e,t,n)=>{var r=n(202);e.exports=(r.default||r).template({1:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"issues"):t)?s(a,"numErrors"):a,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i,loc:{start:{line:4,column:6},end:{line:14,column:13}}}))?a:""},2:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"issues"):t)?s(a,"numErrors"):a,t))+" errors.\r\n"},4:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"issues"):t)?s(a,"numWarnings"):a,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:6,column:6},end:{line:14,column:6}}}))?a:""},5:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"issues"):t)?s(a,"numWarnings"):a,t))+" warnings.\r\n"},7:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"issues"):t)?s(a,"numHints"):a,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i,loc:{start:{line:8,column:6},end:{line:14,column:6}}}))?a:""},8:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"issues"):t)?s(a,"numHints"):a,t))+" hints.\r\n"},10:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"issues"):t)?s(a,"numInfos"):a,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i,loc:{start:{line:10,column:6},end:{line:14,column:6}}}))?a:""},11:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"issues"):t)?s(a,"numInfos"):a,t))+" notes.\r\n"},13:function(e,t,n,r,i){return"        Model details\r\n      "},15:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"reportError"):t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.program(18,i,0),data:i,loc:{start:{line:15,column:4},end:{line:19,column:4}}}))?a:""},16:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      Validation could not run: "+e.escapeExpression("function"==typeof(a=null!=(a=s(n,"reportError")||(null!=t?s(t,"reportError"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"reportError",hash:{},data:i,loc:{start:{line:16,column:32},end:{line:16,column:47}}}):a)+".\r\n"},18:function(e,t,n,r,i){return"      Validation could not run.\r\n    "},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,i){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="report-toggle level-'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"issues"):t)?s(a,"maxSeverity"):a,t))+'">\r\n  <div class="report-toggle-text">\r\n'+(null!=(a=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"issues"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(15,i,0),data:i,loc:{start:{line:3,column:4},end:{line:19,column:11}}}))?a:"")+'  </div>\r\n  <div class="report-toggle-close" aria-label="Hide">&times;</div>\r\n</div>'},useData:!0})},834:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=i(n(67)),s=r(n(558)),o=r(n(728)),l=i(n(392)),u=i(n(628)),c=r(n(982));function h(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=s.default,e.Exception=o.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var d=h();d.create=h,c.default(d),d.default=d,t.default=d,e.exports=t.default},67:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=h;var i=n(392),a=r(n(728)),s=n(638),o=n(881),l=r(n(213)),u=n(293);t.VERSION="4.7.7",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function h(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},s.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(i.toString.call(e)===c){if(t)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===c)i.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===c){if(t)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var d=l.default.log;t.log=d,t.createFrame=i.createFrame,t.logger=l.default},881:(e,t,n)=>{"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){i.default(e)};var r,i=(r=n(670))&&r.__esModule?r:{default:r}},670:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(392);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,i){var a=e;return t.partials||(t.partials={},a=function(i,a){var s=n.partials;n.partials=r.extend({},s,t.partials);var o=e(i,a);return n.partials=s,o}),t.partials[i.args[0]]=i.fn,a}))},e.exports=t.default},728:(e,t)=>{"use strict";t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){var i=t&&t.loc,a=void 0,s=void 0,o=void 0,l=void 0;i&&(a=i.start.line,s=i.end.line,o=i.start.column,l=i.end.column,e+=" - "+a+":"+o);for(var u=Error.prototype.constructor.call(this,e),c=0;c<n.length;c++)this[n[c]]=u[n[c]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{i&&(this.lineNumber=a,this.endLineNumber=s,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=o,this.endColumn=l))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},638:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),a.default(e),s.default(e),o.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var i=r(n(342)),a=r(n(822)),s=r(n(905)),o=r(n(405)),l=r(n(702)),u=r(n(593)),c=r(n(978))},342:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(392);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var i=n.inverse,a=n.fn;if(!0===t)return a(this);if(!1===t||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var s=r.createFrame(n.data);s.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:s}}return a(t,n)}))},e.exports=t.default},822:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(392),a=(r=n(728))&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var r,s=t.fn,o=t.inverse,l=0,u="",c=void 0,h=void 0;function d(t,n,r){c&&(c.key=t,c.index=n,c.first=0===n,c.last=!!r,h&&(c.contextPath=h+t)),u+=s(e[t],{data:c,blockParams:i.blockParams([e[t],t],[h+t,null])})}if(t.data&&t.ids&&(h=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(c=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var f=e.length;l<f;l++)l in e&&d(l,l,l===e.length-1);else if(n.g.Symbol&&e[n.g.Symbol.iterator]){for(var p=[],m=e[n.g.Symbol.iterator](),g=m.next();!g.done;g=m.next())p.push(g.value);for(f=(e=p).length;l<f;l++)d(l,l,l===e.length-1)}else r=void 0,Object.keys(e).forEach((function(e){void 0!==r&&d(r,l-1),r=e,l++})),void 0!==r&&d(r,l-1,!0);return 0===l&&(u=o(this)),u}))},e.exports=t.default},905:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=(r=n(728))&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},405:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(392),a=(r=n(728))&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new a.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new a.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},702:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)}))},e.exports=t.default},593:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},978:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(392),a=(r=n(728))&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new a.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})}))},e.exports=t.default},572:(e,t,n)=>{"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=n(392)},293:(e,t,n)=>{"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==a[e]&&(a[e]=!0,i.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(a).forEach((function(e){delete a[e]}))};var r=n(572),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(213)),a=Object.create(null)},5:(e,t)=>{"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},213:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(392),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];console[t].apply(console,r)}}};t.default=i,e.exports=t.default},982:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==n.g?n.g:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t.default},628:(e,t,n)=>{"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(!(t>=s.LAST_COMPATIBLE_COMPILER_REVISION&&t<=s.COMPILER_REVISION)){if(t<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[n],i=s.REVISION_CHANGES[t];throw new a.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new a.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new a.default("No environment passed to template");if(!e||!e.main)throw new a.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0],r={strict:function(e,t,n){if(!e||!(t in e))throw new a.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||u.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(null!=(e[i]&&r.lookupProperty(e[i],t)))return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:function(n,r,s){s.hash&&(r=i.extend({},r,s.hash),s.ids&&(s.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,s);var o=i.extend({},s,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,r,o);if(null==l&&t.compile&&(s.partials[s.name]=t.compile(n,e.compilerOptions,t),l=s.partials[s.name](r,o)),null!=l){if(s.indent){for(var u=l.split("\n"),c=0,h=u.length;c<h&&(u[c]||c+1!==h);c++)u[c]=s.indent+u[c];l=u.join("\n")}return l}throw new a.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var a=this.programs[e],s=this.fn(e);return t||i||r||n?a=c(this,e,s,t,n,r,i):a||(a=this.programs[e]=c(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function s(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;s._setup(n),!n.partial&&e.useData&&(i=d(t,i));var a=void 0,o=e.useBlockParams?[]:void 0;function l(t){return""+e.main(r,t,r.helpers,r.partials,i,o,a)}return e.useDepths&&(a=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(l=f(e.main,l,r,n.depths||[],i,o))(t,n)}return s.isTop=!0,s._setup=function(a){if(a.partial)r.protoAccessControl=a.protoAccessControl,r.helpers=a.helpers,r.partials=a.partials,r.decorators=a.decorators,r.hooks=a.hooks;else{var s=i.extend({},t.helpers,a.helpers);!function(e,t){Object.keys(e).forEach((function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return l.wrapHelper(e,(function(e){return i.extend({lookupProperty:n},e)}))}(r,t)}))}(s,r),r.helpers=s,e.usePartial&&(r.partials=r.mergeIfNeeded(a.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=i.extend({},t.decorators,a.decorators)),r.hooks={},r.protoAccessControl=u.createProtoAccessControl(a);var c=a.allowCallsToHelperMissing||n;o.moveHelperToHooks(r,"helperMissing",c),o.moveHelperToHooks(r,"blockHelperMissing",c)}},s._child=function(t,n,i,s){if(e.useBlockParams&&!i)throw new a.default("must pass block params");if(e.useDepths&&!s)throw new a.default("must pass parent depths");return c(r,t,e[t],n,0,i,s)},s},t.wrapProgram=c,t.resolvePartial=function(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;if(n.fn&&n.fn!==h&&function(){n.data=s.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=i.extend({},n.partials,e.partials))}(),void 0===e&&o&&(e=o),void 0===e)throw new a.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=h;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(392)),a=(r=n(728))&&r.__esModule?r:{default:r},s=n(67),o=n(638),l=n(5),u=n(293);function c(e,t,n,r,i,a,s){function o(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(o=[t].concat(s)),n(e,t,e.helpers,e.partials,i.data||r,a&&[i.blockParams].concat(a),o)}return(o=f(n,o,e,s,r,a)).program=t,o.depth=s?s.length:0,o.blockParams=i||0,o}function h(){return""}function d(e,t){return t&&"root"in t||((t=t?s.createFrame(t):{}).root=e),t}function f(e,t,n,r,a,s){if(e.decorator){var o={};t=e.decorator(t,o,n,r&&r[0],a,s,r),i.extend(t,o)}return t}},558:(e,t)=>{"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},392:(e,t)=>{"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return i.test(e)?e.replace(r,a):e},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,i=/[&<>"'`=]/;function a(e){return n[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var o=Object.prototype.toString;t.toString=o;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===o.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===o.call(e)};t.isArray=u},202:(e,t,n)=>{e.exports=n(834).default},893:function(e){!function(t){"use strict";var n=".nanobar{width:100%;height:4px;z-index:9999;top:0}.bar{width:0;height:100%;transition:height .3s;background:#000}";function r(e,t){e.classList?e.classList.add(t):e.className+=" "+t}e.exports=function(e){e=e||{};var t,i=document.createElement("div"),a={el:i,go:function(e){t(e),100===e&&o()}};function s(e){i.removeChild(e)}function o(){var e=function(e){var t=document.createElement("div"),n=0,i=0,a=0,s={el:t,go:u};function o(){var r=n-i;r<.1&&r>-.1?(l(i),a=0,100===n&&(t.style.height=0,setTimeout((function(){e(t)}),300))):(l(n-r/4),setTimeout(u,16))}function l(e){n=e,t.style.width=n+"%"}function u(e){e>=0?(i=e,a||(a=1,o())):a&&o()}return r(t,"bar"),s}(s);i.appendChild(e.el),t=e.go}return function(){var e=document.getElementById("nanobarcss");if(null===e){if((e=document.createElement("style")).type="text/css",e.id="nanobarcss",document.head.insertBefore(e,document.head.firstChild),!e.styleSheet)return e.appendChild(document.createTextNode(n));e.styleSheet.cssText=n}}(),r(i,"nanobar"),e.id&&(i.id=e.id),e.classname&&r(i,e.classname),e.target?(i.style.position="relative",e.target.insertBefore(i,e.target.firstChild)):(i.style.position="fixed",document.getElementsByTagName("body")[0].appendChild(i)),o(),a}}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";class e{constructor(e,t,n,r,i=!0){this.target=e,this.propertyPath=t,this.name=this.target.uuid+"."+t,this.times=n,this.values=r,this.valueSize=r.length/n.length,this.interpolant=i}getValue(e,t){const n=this.times,r=n.length;if(e<=n[0])return this._copyValue(0,t);if(e>=n[r-1])return this._copyValue(r-1,t);let i=r-1;for(;e<n[i]&&i>0;)i--;const a=(e-n[i])/(n[i+1]-n[i]);return this._interpolate(i,a,t)}_interpolate(e,t,n){const r=this.values,i=this.valueSize;let a,s;for(let o=0;o<i;o++)a=r[e*i+o],s=r[(e+1)*i+o],this.interpolant?n[o]=void 0!==a&&void 0!==s?a*(1-t)+s*t:a:n[o]=a;return n}_copyValue(e,t){const n=this.values,r=this.valueSize,i=r*e;for(let e=0;e<r;e++)t[e]=n[i+e];return t}}(class extends e{constructor(e,t,n,r,i){super(e,t,n,r,i)}_interpolate(e,t,n){return n[0]=this.values[e],n}}).prototype.valueTypeName="bool",class extends e{constructor(e,t,n,r,i){super(e,t,n,r,i)}}.prototype.valueTypeName="color";class t extends e{constructor(e,t,n,r,i){super(e,t,n,r,i)}}t.prototype.valueTypeName="number";class r{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}lerpVectors(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)}set(e=0,t=0,n=0){return this.x=e,this.y=t,this.z=n,this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}getLength(){return Math.sqrt(this.getLengthSquared())}getLengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(e=1){const t=e/(this.getLength()||1);return this.x*=t,this.y*=t,this.z*=t,this}subtract(e,t=new r){return t.set(this.x-e.x,this.y-e.y,this.z-e.z)}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}cross(e){return this.crossVectors(this,e)}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e._x,a=e._y,s=e._z,o=e._w,l=o*t+a*r-s*n,u=o*n+s*t-i*r,c=o*r+i*n-a*t,h=-i*t-a*n-s*r;return this.x=l*o+h*-i+u*-s-c*-a,this.y=u*o+h*-a+c*-i-l*-s,this.z=c*o+h*-s+l*-a-u*-i,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}setFromMatrixPosition(e){return this.setFromMatrixColumn(e,3)}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}setFromSpherical(e){const t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this}project(e){return this.applyMatrix4(e.projectionViewMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.worldMatrix)}reflect(e){return this.sub(i.copy(e).multiplyScalar(2*this.dot(e)))}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}clone(){return new r(this.x,this.y,this.z)}}const i=new r;class a{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}isIdentity(){const e=this.elements;return 1===e[0]&&0===e[4]&&0===e[8]&&0===e[12]&&0===e[1]&&1===e[5]&&0===e[9]&&0===e[13]&&0===e[2]&&0===e[6]&&1===e[10]&&0===e[14]&&0===e[3]&&0===e[7]&&0===e[11]&&1===e[15]}set(e,t,n,r,i,a,s,o,l,u,c,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}clone(){return(new a).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1)}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],_=n[3],v=n[7],b=n[11],x=n[15],y=r[0],w=r[4],A=r[8],E=r[12],S=r[1],T=r[5],M=r[9],P=r[13],C=r[2],F=r[6],L=r[10],N=r[14],I=r[3],R=r[7],D=r[11],U=r[15];return i[0]=a*y+s*S+o*C+l*I,i[4]=a*w+s*T+o*F+l*R,i[8]=a*A+s*M+o*L+l*D,i[12]=a*E+s*P+o*N+l*U,i[1]=u*y+c*S+h*C+d*I,i[5]=u*w+c*T+h*F+d*R,i[9]=u*A+c*M+h*L+d*D,i[13]=u*E+c*P+h*N+d*U,i[2]=f*y+p*S+m*C+g*I,i[6]=f*w+p*T+m*F+g*R,i[10]=f*A+p*M+m*L+g*D,i[14]=f*E+p*P+m*N+g*U,i[3]=_*y+v*S+b*C+x*I,i[7]=_*w+v*T+b*F+x*R,i[11]=_*A+v*M+b*L+x*D,i[15]=_*E+v*P+b*N+x*U,this}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}inverse(){return this.getInverse(this)}getInverse(e){const t=this.elements,n=e.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],_=n[14],v=n[15],b=d*_*c-g*f*c+g*u*p-l*_*p-d*u*v+l*f*v,x=m*f*c-h*_*c-m*u*p+o*_*p+h*u*v-o*f*v,y=h*g*c-m*d*c+m*l*p-o*g*p-h*l*v+o*d*v,w=m*d*u-h*g*u-m*l*f+o*g*f+h*l*_-o*d*_,A=r*b+i*x+a*y+s*w;if(0===A)return console.warn("Matrix4: can not invert matrix, determinant is 0"),this.identity();const E=1/A;return t[0]=b*E,t[1]=(g*f*s-d*_*s-g*a*p+i*_*p+d*a*v-i*f*v)*E,t[2]=(l*_*s-g*u*s+g*a*c-i*_*c-l*a*v+i*u*v)*E,t[3]=(d*u*s-l*f*s-d*a*c+i*f*c+l*a*p-i*u*p)*E,t[4]=x*E,t[5]=(h*_*s-m*f*s+m*a*p-r*_*p-h*a*v+r*f*v)*E,t[6]=(m*u*s-o*_*s-m*a*c+r*_*c+o*a*v-r*u*v)*E,t[7]=(o*f*s-h*u*s+h*a*c-r*f*c-o*a*p+r*u*p)*E,t[8]=y*E,t[9]=(m*d*s-h*g*s-m*i*p+r*g*p+h*i*v-r*d*v)*E,t[10]=(o*g*s-m*l*s+m*i*c-r*g*c-o*i*v+r*l*v)*E,t[11]=(h*l*s-o*d*s-h*i*c+r*d*c+o*i*p-r*l*p)*E,t[12]=w*E,t[13]=(h*g*a-m*d*a+m*i*f-r*g*f-h*i*_+r*d*_)*E,t[14]=(m*l*a-o*g*a-m*i*u+r*g*u+o*i*_-r*l*_)*E,t[15]=(o*d*a-h*l*a+h*i*u-r*d*u-o*i*f+r*l*f)*E,this}transform(e,t,n){const r=this.elements,i=n._x,a=n._y,s=n._z,o=n._w,l=i+i,u=a+a,c=s+s,h=i*l,d=i*u,f=i*c,p=a*u,m=a*c,g=s*c,_=o*l,v=o*u,b=o*c,x=t.x,y=t.y,w=t.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-v)*x,r[3]=0,r[4]=(d-b)*y,r[5]=(1-(h+g))*y,r[6]=(m+_)*y,r[7]=0,r[8]=(f+v)*w,r[9]=(m-_)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}makeRotationFromQuaternion(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=e.w,s=n+n,o=r+r,l=i+i,u=n*s,c=n*o,h=n*l,d=r*o,f=r*l,p=i*l,m=a*s,g=a*o,_=a*l;return t[0]=1-(d+p),t[4]=c-_,t[8]=h+g,t[1]=c+_,t[5]=1-(u+p),t[9]=f-m,t[2]=h-g,t[6]=f+m,t[10]=1-(u+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}extractRotation(e){const t=this.elements,n=e.elements,r=1/s.setFromMatrixColumn(e,0).getLength(),i=1/s.setFromMatrixColumn(e,1).getLength(),a=1/s.setFromMatrixColumn(e,2).getLength();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}lookAtRH(e,t,n){const r=this.elements;return c.subVectors(e,t),0===c.getLengthSquared()&&(c.z=1),c.normalize(),l.crossVectors(n,c),0===l.getLengthSquared()&&(1===Math.abs(n.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),l.crossVectors(n,c)),l.normalize(),u.crossVectors(c,l),r[0]=l.x,r[4]=u.x,r[8]=c.x,r[1]=l.y,r[5]=u.y,r[9]=c.y,r[2]=l.z,r[6]=u.z,r[10]=c.z,this}decompose(e,t,n){const r=this.elements;let i=s.set(r[0],r[1],r[2]).getLength();const a=s.set(r[4],r[5],r[6]).getLength(),l=s.set(r[8],r[9],r[10]).getLength();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],o.copy(this);const u=1/i,c=1/a,h=1/l;return o.elements[0]*=u,o.elements[1]*=u,o.elements[2]*=u,o.elements[4]*=c,o.elements[5]*=c,o.elements[6]*=c,o.elements[8]*=h,o.elements[9]*=h,o.elements[10]*=h,t.setFromRotationMatrix(o),n.x=i,n.y=a,n.z=l,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*o*c-r*l*c-i*s*h+n*l*h+r*s*d-n*o*d)+e[7]*(+t*o*d-t*l*h+i*a*h-r*a*d+r*l*u-i*o*u)+e[11]*(+t*l*c-t*s*d-i*a*c+n*a*d+i*s*u-n*l*u)+e[15]*(-r*s*u-t*o*c+t*s*h+r*a*c-n*a*h+n*o*u)}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,l=i*a,u=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,u*s+n,u*o-r*a,0,l*o-r*s,u*o+r*a,i*o*o+n,0,0,0,0,1)}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const s=new r,o=new a,l=new r,u=new r,c=new r;class h{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,s){let o=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===s)return e[t]=o,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===s)return e[t]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||o!==h||l!==d||u!==f){let e=1-s;const t=o*h+l*d+u*f+c*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}const i=s*n;if(o=o*e+h*i,l=l*e+d*i,u=u*e+f*i,c=c*e+p*i,e===1-s){const e=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=e,l*=e,u*=e,c*=e}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,a){const s=n[r],o=n[r+1],l=n[r+2],u=n[r+3],c=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=s*f+u*c+o*d-l*h,e[t+1]=o*f+u*h+l*c-s*d,e[t+2]=l*f+u*d+s*h-o*c,e[t+3]=u*f-s*c-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this.onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this.onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this.onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this.onChangeCallback()}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}lerpQuaternions(e,t,n){if(0===n)return this.copy(e);if(1===n)return this.copy(t);const r=e._w,i=e._x,a=e._y,s=e._z;let o=t._w,l=t._x,u=t._y,c=t._z;r*o+i*l+a*u+s*c<0&&(o=-o,l=-l,u=-u,c=-c),this._w=r+n*(o-r),this._x=i+n*(l-i),this._y=a+n*(u-a),this._z=s+n*(c-s);const h=1/Math.sqrt(this._w*this._w+this._x*this._x+this._y*this._y+this._z*this._z);return this._w*=h,this._x*=h,this._y*=h,this._z*=h,this.onChangeCallback(),this}slerpQuaternions(e,t,n){if(0===n)return this.copy(e);if(1===n)return this.copy(t);const r=e._w,i=e._x,a=e._y,s=e._z;let o=t._w,l=t._x,u=t._y,c=t._z,h=r*o+i*l+a*u+s*c;if(h<0&&(h=-h,o=-o,l=-l,u=-u,c=-c),h<.95){const e=Math.acos(h),t=1/Math.sin(e),d=Math.sin(e*(1-n))*t,f=Math.sin(e*n)*t;this._w=r*d+o*f,this._x=i*d+l*f,this._y=a*d+u*f,this._z=s*d+c*f}else{this._w=r+n*(o-r),this._x=i+n*(l-i),this._y=a+n*(u-a),this._z=s+n*(c-s);const e=1/Math.sqrt(this._w*this._w+this._x*this._x+this._y*this._y+this._z*this._z);this._w*=e,this._x*=e,this._y*=e,this._z*=e}return this.onChangeCallback(),this}set(e=0,t=0,n=0,r=1){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this}clone(){return new h(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=void 0!==e.w?e.w:1,this.onChangeCallback(),this}setFromEuler(e,t=!0){const n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),a=Math.sin(e._x/2),s=Math.sin(e._y/2),o=Math.sin(e._z/2),l=e._order;return"XYZ"===l?(this._x=a*r*i+n*s*o,this._y=n*s*i-a*r*o,this._z=n*r*o+a*s*i,this._w=n*r*i-a*s*o):"YXZ"===l?(this._x=a*r*i+n*s*o,this._y=n*s*i-a*r*o,this._z=n*r*o-a*s*i,this._w=n*r*i+a*s*o):"ZXY"===l?(this._x=a*r*i-n*s*o,this._y=n*s*i+a*r*o,this._z=n*r*o+a*s*i,this._w=n*r*i-a*s*o):"ZYX"===l?(this._x=a*r*i-n*s*o,this._y=n*s*i+a*r*o,this._z=n*r*o-a*s*i,this._w=n*r*i+a*s*o):"YZX"===l?(this._x=a*r*i+n*s*o,this._y=n*s*i+a*r*o,this._z=n*r*o-a*s*i,this._w=n*r*i-a*s*o):"XZY"===l&&(this._x=a*r*i-n*s*o,this._y=n*s*i-a*r*o,this._z=n*r*o+a*s*i,this._w=n*r*i+a*s*o),!0===t&&this.onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],l=t[2],u=t[6],c=t[10],h=n+s+c;let d;return h>0?(d=.5/Math.sqrt(h+1),this._w=.25/d,this._x=(u-o)*d,this._y=(i-l)*d,this._z=(a-r)*d):n>s&&n>c?(d=2*Math.sqrt(1+n-s-c),this._w=(u-o)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+l)/d):s>c?(d=2*Math.sqrt(1+s-n-c),this._w=(i-l)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(o+u)/d):(d=2*Math.sqrt(1+c-n-s),this._w=(a-r)/d,this._x=(i+l)/d,this._y=(o+u)/d,this._z=.25*d),this.onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+a*s+r*l-i*o,this._y=r*u+a*o+i*s-n*l,this._z=i*u+a*l+n*o-r*s,this._w=a*u-n*s-r*o-i*l,this.onChangeCallback(),this}toMatrix4(e=new a){const t=e.elements,n=2*this._x*this._y,r=2*this._x*this._z,i=2*this._x*this._w,s=2*this._y*this._z,o=2*this._y*this._w,l=2*this._z*this._w,u=this._x*this._x,c=this._y*this._y,h=this._z*this._z,d=this._w*this._w;return t[0]=u-c-h+d,t[4]=n-l,t[8]=r+o,t[12]=0,t[1]=n+l,t[5]=-u+c-h+d,t[9]=s-i,t[13]=0,t[2]=r-o,t[6]=s+i,t[10]=-u-c+h+d,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,e}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}onChange(e){return this.onChangeCallback=e,this}onChangeCallback(){}}class d extends e{constructor(e,t,n,r,i){super(e,t,n,r,i)}_interpolate(e,t,n){const r=this.values;return this.interpolant?h.slerpFlat(n,0,r,4*e,r,4*(e+1),t):this._copyValue(e,n),n}}d.prototype.valueTypeName="quaternion",class extends e{constructor(e,t,n,r,i){super(e,t,n,r,i)}_interpolate(e,t,n){return n[0]=this.values[e],n}}.prototype.valueTypeName="string";class f extends e{constructor(e,t,n,r,i){super(e,t,n,r,i)}}f.prototype.valueTypeName="vector";const p="shader",m="none",g="normal",_="add",v=100,b="none",x="back",y="front",w="back",A="double",E="smooth_shading",S="flat_shading",T=1e3,M=1001,P=1006,C=1106,F=1109,L=1111,N=1116,I=1117,R=1500,D=1504,U=1505,O=1506,k=1507,$=1508,z=1600,B=1601,G=1602,j=1604,V=1605,H=1700,X=1701,W=7680,q="poisson_soft",Y="pcf3_soft",Q="pcss16_soft",Z="pcss32_soft",K="pcss64_soft",J="linear",ee="sRGB",te="Gamma",ne=2e3,re=2020,ie=2030;class ae{addEventListener(e,t,n){void 0===this._eventMap&&(this._eventMap={});const r=this._eventMap;void 0===r[e]&&(r[e]=[]),r[e].push({listener:t,thisObject:n||this})}removeEventListener(e,t,n){if(void 0===this._eventMap)return;const r=this._eventMap[e];if(void 0!==r)for(let e=0,i=r.length;e<i;e++){const i=r[e];if(i.listener===t&&i.thisObject===(n||this)){r.splice(e,1);break}}}dispatchEvent(e){if(void 0===this._eventMap)return;const t=this._eventMap[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++){const r=n[t];r.listener.call(r.thisObject,e)}e.target=null}}}class se extends ae{constructor(e){super(),this.clip=e,this.weight=0,this.time=0,this.blendMode=g}update(e){this.time+=e;const t=this.clip.duration;this.time>t&&(this.time=this.time%t),this.time<0&&(this.time=this.time%t+t)}}class oe{constructor(e,t,n,r){this.target=null,this.property="",this.parseBinding(e,t),this.valueSize=r;let i,a,s,o=Float64Array;switch(n){case"quaternion":i=ue,a=he,s=me;break;case"string":case"bool":o=Array,i=le,a=le,s=ge;break;default:i=de,a=fe,s=pe}this.buffer=new o(4*r),this._mixBufferFunction=i,this._mixBufferFunctionAdditive=a,this._setIdentity=s,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}parseBinding(e,t){if((t=t.split(".")).length>1){let n=e[t[0]];for(let e=1;e<t.length-1;e++)n=n[t[e]];this.property=t[t.length-1],this.target=n}else this.property=t[0],this.target=e}saveOriginalState(){const e=this.buffer,t=this.valueSize,n=2*t;this.valueSize>1?this.target[this.property].toArray?this.target[this.property].toArray(e,n):function(e,t,n,r){for(let i=0;i<r;i++)e[n+i]=t[i]}(e,this.target[this.property],n,this.valueSize):this.target[this.property]=e[n];for(let r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this._setIdentity(e,3*t,t,n),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.buffer,t=this.valueSize,n=2*t;for(let r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this.apply()}accumulate(e){const t=this.buffer,n=this.valueSize,r=n;let i=this.cumulativeWeight;if(0===i){for(let e=0;e!==n;++e)t[r+e]=t[e];i=e}else{i+=e;const a=e/i;this._mixBufferFunction(t,r,0,a,n)}this.cumulativeWeight=i}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=3*n;0===this.cumulativeWeightAdditive&&this._setIdentity(t,r,n,2*n),this._mixBufferFunctionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(){const e=this.buffer,t=this.valueSize,n=this.cumulativeWeight,r=this.cumulativeWeightAdditive;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){const r=2*t;this._mixBufferFunction(e,t,r,1-n,t)}r>0&&this._mixBufferFunctionAdditive(e,t,3*t,1,t),this.valueSize>1?this.target[this.property].fromArray?this.target[this.property].fromArray(e,t):function(e,t,n,r){for(let i=0;i<r;i++)e[i]=t[n+i]}(this.target[this.property],e,t,this.valueSize):this.target[this.property]=e[t]}}function le(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}function ue(e,t,n,r){h.slerpFlat(e,t,e,t,e,n,r)}const ce=new Float64Array(4);function he(e,t,n,r){h.multiplyQuaternionsFlat(ce,0,e,t,e,n),h.slerpFlat(e,t,e,t,ce,0,r)}function de(e,t,n,r,i){const a=1-r;for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]*a+e[n+s]*r}}function fe(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}function pe(e,t,n){for(let r=0;r<n;r++)e[t+r]=0}function me(e,t){pe(e,t,3),e[t+3]=1}function ge(e,t,n,r){for(let i=0;i<n;i++)e[t+i]=e[r+i]}class _e{constructor(){this._actions=[],this._bindings={}}addAction(e){if(-1!==this._actions.indexOf(e))return void console.warn("AnimationMixer.addAction(): already has the action, clip name is <"+e.clip.name+">.");this._actions.push(e);const t=e.clip.tracks;for(let e=0;e<t.length;e++){const n=t[e],r=n.name;if(!this._bindings[r]){const e=new oe(n.target,n.propertyPath,n.valueTypeName,n.valueSize);this._bindings[r]={binding:e,referenceCount:0,active:!1,cachedActive:!1}}this._bindings[r].referenceCount++}}removeAction(e){const t=this._actions.indexOf(e);if(-1===t)return void console.warn("AnimationMixer.removeAction(): action not found in this mixer, clip name is <"+e.clip.name+">.");if(e.weight>0)return void console.warn("AnimationMixer.removeAction(): make sure action's weight is zero before removing it.");this._actions.splice(t,1);const n=clip.tracks;for(let e=0;e<n.length;e++){const t=n[e].name,r=this._bindings[t];r&&--r.referenceCount<=0&&(r.cachedActive&&r.binding.restoreOriginalState(),delete this._bindings[t])}}hasAction(e){return this._actions.indexOf(e)>-1}getActions(){return this._actions}update(e){for(let e in this._bindings)this._bindings[e].active=!1;for(let t=0,n=this._actions.length;t<n;t++){const n=this._actions[t];if(n.weight>0){n.update(e);const t=n.clip.tracks;for(let e=0,r=t.length;e<r;e++){const r=t[e],i=this._bindings[r.name],a=i.binding;i.active=!0,i.cachedActive||(i.binding.saveOriginalState(),i.cachedActive=!0),r.getValue(n.time,a.buffer),n.blendMode===_?a.accumulateAdditive(n.weight):a.accumulate(n.weight)}}}for(let e in this._bindings){const t=this._bindings[e];t.active?t.binding.apply():t.cachedActive&&(t.binding.restoreOriginalState(),t.cachedActive=!1)}}}class ve{constructor(e,t,n=-1){this.name=e,this.tracks=t,this.duration=n,this.duration<0&&this.resetDuration()}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n<r;n++){const r=e[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}}class be{constructor(e,t,n){this.isLoading=!1,this.itemsLoaded=0,this.itemsTotal=0,this.urlModifier=void 0,this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n}itemStart(e){this.itemsTotal++,!1===this.isLoading&&void 0!==this.onStart&&this.onStart(e,this.itemsLoaded,this.itemsTotal),this.isLoading=!0}itemEnd(e){this.itemsLoaded++,void 0!==this.onProgress&&this.onProgress(e,this.itemsLoaded,this.itemsTotal),this.itemsLoaded===this.itemsTotal&&(this.isLoading=!1,void 0!==this.onLoad&&this.onLoad())}itemError(e){void 0!==this.onError&&this.onError(e)}resolveURL(e){return this.urlModifier?this.urlModifier(e):e}setURLModifier(e){return this.urlModifier=e,this}}const xe=new be;class ye{constructor(e){this.manager=void 0!==e?e:xe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setRequestHeader(e){return this.requestHeader=e,this}}class we extends ye{constructor(e){super(e),this.responseType=void 0,this.mimeType=void 0}load(e,t,n,r){void 0===e&&(e=""),null!=this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(i).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("t3d.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const t=e.body.getReader(),r=e.headers.get("Content-Length"),i=r?parseInt(r):0,a=0!==i;let s=0;const o=new ReadableStream({start(e){!function r(){t.read().then((({done:t,value:o})=>{if(t)e.close();else{s+=o.byteLength;const t=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:i});void 0!==n&&n(t),e.enqueue(o),r()}}))}()}});return new Response(o)}throw new Ae(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((e=>{t&&t(e)})).catch((t=>{r&&r(t),this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ae extends Error{constructor(e,t){super(e),this.response=t}}class Ee extends ye{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){l(),t&&t(this),i.manager.itemEnd(e)}function o(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){a.removeEventListener("load",s,!1),a.removeEventListener("error",o,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",o,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Se{constructor(e=0,t=0){this.x=e,this.y=t}set(e=0,t=0){return this.x=e,this.y=t,this}lerpVectors(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}getLength(){return Math.sqrt(this.getLengthSquared())}getLengthSquared(){return this.x*this.x+this.y*this.y}normalize(e=1){const t=e/(this.getLength()||1);return this.x*=t,this.y*=t,this}subtract(e,t=new Se){return t.set(this.x-e.x,this.y-e.y)}sub(e){return this.x-=e.x,this.y-=e.y,this}copy(e){return this.x=e.x,this.y=e.y,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}add(e){return this.x+=e.x,this.y+=e.y,this}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}clone(){return new Se(this.x,this.y)}}const Te=[new r,new r,new r,new r,new r,new r,new r,new r];class Me{constructor(e,t){this.min=void 0!==e?e:new r(1/0,1/0,1/0),this.max=void 0!==t?t:new r(-1/0,-1/0,-1/0)}set(e,t){this.min.copy(e),this.max.copy(t)}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByBox3(e){return this.min.min(e.min),this.max.max(e.max),this}setFromArray(e,t=3,n=0){let r=1/0,i=1/0,a=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,c=e.length;u<c;u+=t){const t=e[u+n],c=e[u+n+1],h=e[u+n+2];t<r&&(r=t),c<i&&(i=c),h<a&&(a=h),t>s&&(s=t),c>o&&(o=c),h>l&&(l=h)}return this.min.set(r,i,a),this.max.set(s,o,l),this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}getCenter(e){const t=e||new r;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}applyMatrix4(e){return this.isEmpty()||(Te[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Te[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Te[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Te[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Te[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Te[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Te[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Te[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Te)),this}clone(){return(new Me).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}}class Pe{constructor(e,t,n){if(this.r=0,this.g=0,this.b=0,void 0===t&&void 0===n)return this.setHex(e);this.setRGB(e,t,n)}lerpColors(e,t,n){this.r=n*(t.r-e.r)+e.r,this.g=n*(t.g-e.g)+e.g,this.b=n*(t.b-e.b)+e.b}lerp(e,t){this.lerpColors(this,e,t)}clone(){return new Pe(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}getHex(){return Fe(255*this.r,0,255)<<16^Fe(255*this.g,0,255)<<8^Fe(255*this.b,0,255)<<0}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=function(e,t){return(e%1+1)%1}(e),t=Math.max(0,Math.min(1,t)),n=Math.max(0,Math.min(1,n)),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Ce(i,r,e+1/3),this.g=Ce(i,r,e),this.b=Ce(i,r,e-1/3)}return this}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}}function Ce(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Fe(e,t,n){return Math.max(t,Math.min(n,e))}const Le=new a;class Ne{constructor(e=0,t=0,n=0,r=Ne.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this.onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this.onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this.onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this.onChangeCallback()}clone(){return new Ne(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this}set(e=0,t=0,n=0,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this.onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];return"XYZ"===t?(this._y=Math.asin(Ie(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-Ie(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,i),this._z=0)):"ZXY"===t?(this._x=Math.asin(Ie(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i))):"ZYX"===t?(this._y=Math.asin(-Ie(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(Ie(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-Ie(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-u,d),this._y=0)):console.warn("given unsupported order: "+t),this._order=t,!0===n&&this.onChangeCallback(),this}setFromQuaternion(e,t,n){return e.toMatrix4(Le),this.setFromRotationMatrix(Le,t,n)}onChange(e){return this.onChangeCallback=e,this}onChangeCallback(){}}function Ie(e,t,n){return Math.max(t,Math.min(n,e))}Ne.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ne.DefaultOrder="XYZ";class Re{constructor(){this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,a,s,o,l){const u=this.elements;return u[0]=e,u[3]=t,u[6]=n,u[1]=r,u[4]=i,u[7]=a,u[2]=s,u[5]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1)}inverse(){return this.getInverse(this)}getInverse(e){const t=e.elements,n=this.elements,r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=h*o-l*c,f=l*u-h*s,p=c*s-o*u,m=r*d+i*f+a*p;if(0===m)return console.warn("Matrix3: .getInverse() can not invert matrix, determinant is 0"),this.identity();const g=1/m;return n[0]=d*g,n[1]=(a*c-h*i)*g,n[2]=(l*i-a*o)*g,n[3]=f*g,n[4]=(h*r-a*u)*g,n[5]=(a*s-l*r)*g,n[6]=p*g,n[7]=(i*u-c*r)*g,n[8]=(o*r-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new Re).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],_=r[1],v=r[4],b=r[7],x=r[2],y=r[5],w=r[8];return i[0]=a*p+s*_+o*x,i[3]=a*m+s*v+o*y,i[6]=a*g+s*b+o*w,i[1]=l*p+u*_+c*x,i[4]=l*m+u*v+c*y,i[7]=l*g+u*b+c*w,i[2]=h*p+d*_+f*x,i[5]=h*m+d*v+f*y,i[8]=h*g+d*b+f*w,this}transform(e,t,n,r,i,a,s){const o=this.elements,l=Math.cos(i),u=Math.sin(i);return o[0]=l*n,o[3]=-u*r,o[6]=e,o[1]=u*n,o[4]=l*r,o[7]=t,o[2]=0,o[5]=0,o[8]=1,(a||s)&&(o[6]-=a*o[0]+s*o[3],o[7]-=a*o[1]+s*o[4]),this}setUvTransform(e,t,n,r,i,a,s){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1)}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10])}}const De=new r,Ue=new Re;class Oe{constructor(e=new r(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}normalize(){const e=1/this.normal.getLength();return this.normal.multiplyScalar(e),this.constant*=e,this}distanceToPoint(e){return this.normal.dot(e)+this.constant}coplanarPoint(e=new r){return e.copy(this.normal).multiplyScalar(-this.constant)}clone(){return(new Oe).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}applyMatrix4(e,t){const n=t||Ue.setFromMatrix4(e).inverse().transpose(),r=this.coplanarPoint(De).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}}const ke=new r;class $e{constructor(e=new Oe,t=new Oe,n=new Oe,r=new Oe,i=new Oe,a=new Oe){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}setFromMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],_=n[14],v=n[15];return t[0].setComponents(s-r,c-o,p-h,v-m).normalize(),t[1].setComponents(s+r,c+o,p+h,v+m).normalize(),t[2].setComponents(s+i,c+l,p+d,v+g).normalize(),t[3].setComponents(s-i,c-l,p-d,v-g).normalize(),t[4].setComponents(s-a,c-u,p-f,v-_).normalize(),t[5].setComponents(s+a,c+u,p+f,v+_).normalize(),this}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(ke.x=r.normal.x>0?e.max.x:e.min.x,ke.y=r.normal.y>0?e.max.y:e.min.y,ke.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ke)<0)return!1}return!0}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}}const ze=new r,Be=new r,Ge=new r,je=new r,Ve=new r,He=new Me,Xe=new r;class We{constructor(e=new r,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromArray(e,t=3,n=0){const r=this.center;He.setFromArray(e,t).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a+=t)Xe.fromArray(e,a+n),i=Math.max(i,r.distanceToSquared(Xe));return this.radius=Math.sqrt(i),this}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xe.subVectors(e,this.center);const t=Xe.getLengthSquared();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Xe,n/e),this.radius+=n}return this}clone(){return(new We).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}}class qe{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}clone(){return(new qe).copy(this)}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.radius=e.getLength(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Math.min(1,Math.max(-1,e.y/this.radius)))),this}}const Ye=new r,Qe=new r,Ze=new r,Ke=new r;class Je{constructor(e=new r,t=new r,n=new r){this.a=e,this.b=t,this.c=n}static normal(e,t,n,i){const a=i||new r;a.subVectors(n,t),Ye.subVectors(e,t),a.cross(Ye);const s=a.getLengthSquared();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static barycoordFromPoint(e,t,n,i,a){Ye.subVectors(i,t),Qe.subVectors(n,t),Ze.subVectors(e,t);const s=Ye.dot(Ye),o=Ye.dot(Qe),l=Ye.dot(Ze),u=Qe.dot(Qe),c=Qe.dot(Ze),h=s*u-o*o,d=a||new r;if(0===h)return d.set(-2,-1,-1);const f=1/h,p=(u*l-o*c)*f,m=(s*c-o*l)*f;return d.set(1-p-m,m,p)}static containsPoint(e,t,n,r){return this.barycoordFromPoint(e,t,n,r,Ke),Ke.x>=0&&Ke.y>=0&&Ke.x+Ke.y<=1}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}}class et{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}lerpVectors(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)}set(e=0,t=0,n=0,r=1){return this.x=e,this.y=t,this.z=n,this.w=r,this}normalize(){return this.multiplyScalar(1/(this.getLength()||1))}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}getLengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}getManhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}clone(){return new et(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}}const tt=[];for(let e=0;e<256;e++)tt[e]=(e<16?"0":"")+e.toString(16);function nt(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(tt[255&e]+tt[e>>8&255]+tt[e>>16&255]+tt[e>>24&255]+"-"+tt[255&t]+tt[t>>8&255]+"-"+tt[t>>16&15|64]+tt[t>>24&255]+"-"+tt[63&n|128]+tt[n>>8&255]+"-"+tt[n>>16&255]+tt[n>>24&255]+tt[255&r]+tt[r>>8&255]+tt[r>>16&255]+tt[r>>24&255]).toUpperCase()}function rt(e){return 0==(e&e-1)&&0!==e}function it(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}function at(e){const t={};for(const n in e){const r=e[n];Array.isArray(r)||ArrayBuffer.isView(r)?t[n]=r.slice():t[n]=r}return t}function st(e){const t=Array.isArray(e)?[]:{};if(e&&"object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n]&&"object"==typeof e[n]?st(e[n]):e[n]);return t}let ot=0;const lt=new a;class ut{constructor(){this.id=ot++,this.uuid=nt(),this.name="",this.position=new r,this.scale=new r(1,1,1),this.euler=new Ne,this.quaternion=new h;const e=this.euler,t=this.quaternion;e.onChange((function(){t.setFromEuler(e,!1)})),t.onChange((function(){e.setFromQuaternion(t,void 0,!1)})),this.matrix=new a,this.worldMatrix=new a,this.children=new Array,this.parent=null,this.castShadow=!1,this.receiveShadow=!1,this.shadowType=Y,this.frustumCulled=!0,this.visible=!0,this.renderOrder=0,this.renderLayer=0,this.renderable=!0,this.userData={},this.matrixAutoUpdate=!0,this.matrixNeedsUpdate=!0,this.worldMatrixNeedsUpdate=!0}onBeforeRender(){}onAfterRender(){}add(e){e!==this?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.worldMatrixNeedsUpdate=!0):console.error("Object3D.add: object can't be added as a child of itself.",e)}remove(e){const t=this.children.indexOf(e);-1!==t&&(e.parent=null,this.children.splice(t,1),e.worldMatrixNeedsUpdate=!0)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}updateMatrix(e){if((this.matrixAutoUpdate||this.matrixNeedsUpdate)&&(this.matrix.transform(this.position,this.scale,this.quaternion),this.matrixNeedsUpdate=!1,this.worldMatrixNeedsUpdate=!0),this.worldMatrixNeedsUpdate||e){if(this.worldMatrix.copy(this.matrix),this.parent){const e=this.parent.worldMatrix;this.worldMatrix.premultiply(e)}this.worldMatrixNeedsUpdate=!1,e=!0}const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrix(e)}getWorldDirection(e=new r){const t=this.worldMatrix.elements;return e.set(t[8],t[9],t[10]).normalize()}lookAt(e,t){lt.lookAtRH(e,this.position,t),this.quaternion.setFromRotationMatrix(lt)}raycast(e,t){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.worldMatrix.copy(e.worldMatrix),this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.shadowType=e.shadowType,this.frustumCulled=e.frustumCulled,this.visible=e.visible,this.renderOrder=e.renderOrder,this.renderLayer=e.renderLayer,this.renderable=e.renderable,this.userData=st(e.userData),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}const ct=new r,ht=[],dt=[],ft=[];class pt{constructor(){this.lights=[],this.ambient=new Float32Array([0,0,0]),this.hemisphere=[],this.directional=[],this.directionalShadow=[],this.directionalShadowMap=[],this.directionalShadowDepthMap=[],this.directionalShadowMatrix=new Float32Array(0),this.point=[],this.pointShadow=[],this.pointShadowMap=[],this.pointShadowMatrix=new Float32Array(0),this.spot=[],this.spotShadow=[],this.spotShadowMap=[],this.spotShadowDepthMap=[],this.spotShadowMatrix=new Float32Array(0),this.useAmbient=!1,this.hemisNum=0,this.directsNum=0,this.pointsNum=0,this.spotsNum=0,this.directShadowNum=0,this.pointShadowNum=0,this.spotShadowNum=0,this.totalNum=0,this.shadowsNum=0,this.hash=new bt}begin(){this.totalNum=0,this.shadowsNum=0}push(e){this.lights[this.totalNum++]=e,yt(e)&&this.shadowsNum++}end(e){this.lights.length=this.totalNum,this.lights.sort(xt),this._setupCache(e),this.hash.update(this)}_setupCache(e){for(let e=0;e<3;e++)this.ambient[e]=0;this.useAmbient=!1,this.hemisNum=0,this.directsNum=0,this.pointsNum=0,this.spotsNum=0,this.directShadowNum=0,this.pointShadowNum=0,this.spotShadowNum=0;for(let t=0,n=this.lights.length;t<n;t++){const n=this.lights[t];n.isAmbientLight?this._doAddAmbientLight(n):n.isHemisphereLight?this._doAddHemisphereLight(n,e):n.isDirectionalLight?this._doAddDirectLight(n,e):n.isPointLight?this._doAddPointLight(n,e):n.isSpotLight&&this._doAddSpotLight(n,e)}const t=this.directShadowNum;if(t>0){this.directionalShadowMap.length=t,this.directionalShadowDepthMap.length=t,ht.length=t,this.directionalShadowMatrix.length!==16*t&&(this.directionalShadowMatrix=new Float32Array(16*t));for(let e=0;e<t;e++)ht[e].toArray(this.directionalShadowMatrix,16*e)}const n=this.pointShadowNum;if(n>0){this.pointShadowMap.length=n,dt.length=n,this.pointShadowMatrix.length!==16*n&&(this.pointShadowMatrix=new Float32Array(16*n));for(let e=0;e<n;e++)dt[e].toArray(this.pointShadowMatrix,16*e)}const r=this.spotShadowNum;if(r>0){this.spotShadowMap.length=r,this.spotShadowDepthMap.length=r,ft.length=r,this.spotShadowMatrix.length!==16*r&&(this.spotShadowMatrix=new Float32Array(16*r));for(let e=0;e<r;e++)ft[e].toArray(this.spotShadowMatrix,16*e)}}_doAddAmbientLight(e){const t=e.intensity,n=e.color;this.ambient[0]+=n.r*t,this.ambient[1]+=n.g*t,this.ambient[2]+=n.b*t,this.useAmbient=!0}_doAddHemisphereLight(e,t){const n=e.intensity,r=e.color,i=e.groundColor,a=t.useAnchorMatrix,s=gt(e);s.skyColor[0]=r.r*n,s.skyColor[1]=r.g*n,s.skyColor[2]=r.b*n,s.groundColor[0]=i.r*n,s.groundColor[1]=i.g*n,s.groundColor[2]=i.b*n;const o=e.worldMatrix.elements,l=ct.set(o[4],o[5],o[6]).normalize();a&&l.transformDirection(t.anchorMatrixInverse),l.toArray(s.direction),this.hemisphere[this.hemisNum++]=s}_doAddDirectLight(e,t){const n=e.intensity,r=e.color,i=t.useAnchorMatrix,a=gt(e);a.color[0]=r.r*n,a.color[1]=r.g*n,a.color[2]=r.b*n;const s=e.getWorldDirection(ct);if(i&&s.transformDirection(t.anchorMatrixInverse),s.multiplyScalar(-1).toArray(a.direction),e.castShadow){const n=e.shadow,r=vt(e);r.shadowBias[0]=n.bias,r.shadowBias[1]=n.normalBias,r.shadowMapSize[0]=n.mapSize.x,r.shadowMapSize[1]=n.mapSize.y,r.shadowParams[0]=n.radius,r.shadowParams[1]=n.frustumEdgeFalloff,this.directionalShadow[this.directShadowNum++]=r,n.update(e),n.updateMatrix(),i&&n.matrix.multiply(t.anchorMatrix),this.directionalShadowMap[this.directsNum]=n.map,this.directionalShadowDepthMap[this.directsNum]=n.depthMap,ht[this.directsNum]=n.matrix}this.directional[this.directsNum++]=a}_doAddPointLight(e,t){const n=e.intensity,r=e.color,i=e.distance,a=e.decay,s=t.useAnchorMatrix,o=gt(e);o.color[0]=r.r*n,o.color[1]=r.g*n,o.color[2]=r.b*n,o.distance=i,o.decay=a;const l=ct.setFromMatrixPosition(e.worldMatrix);if(s&&l.applyMatrix4(t.anchorMatrixInverse),o.position[0]=l.x,o.position[1]=l.y,o.position[2]=l.z,e.castShadow){const t=e.shadow,n=vt(e);n.shadowBias[0]=t.bias,n.shadowBias[1]=t.normalBias,n.shadowMapSize[0]=t.mapSize.x,n.shadowMapSize[1]=t.mapSize.y,n.shadowParams[0]=t.radius,n.shadowParams[1]=0,n.shadowCameraRange[0]=t.cameraNear,n.shadowCameraRange[1]=t.cameraFar,this.pointShadow[this.pointShadowNum++]=n,t.update(e,0),t.matrix.makeTranslation(-l.x,-l.y,-l.z),this.pointShadowMap[this.pointsNum]=t.map,dt[this.pointsNum]=t.matrix}this.point[this.pointsNum++]=o}_doAddSpotLight(e,t){const n=e.intensity,r=e.color,i=e.distance,a=e.decay,s=t.useAnchorMatrix,o=gt(e);o.color[0]=r.r*n,o.color[1]=r.g*n,o.color[2]=r.b*n,o.distance=i,o.decay=a;const l=ct.setFromMatrixPosition(e.worldMatrix);s&&l.applyMatrix4(t.anchorMatrixInverse),o.position[0]=l.x,o.position[1]=l.y,o.position[2]=l.z;const u=e.getWorldDirection(ct);s&&u.transformDirection(t.anchorMatrixInverse),u.multiplyScalar(-1).toArray(o.direction);const c=Math.cos(e.angle),h=Math.cos(e.angle*(1-e.penumbra));if(o.coneCos=c,o.penumbraCos=h,e.castShadow){const n=e.shadow,r=vt(e);r.shadowBias[0]=n.bias,r.shadowBias[1]=n.normalBias,r.shadowMapSize[0]=n.mapSize.x,r.shadowMapSize[1]=n.mapSize.y,r.shadowParams[0]=n.radius,r.shadowParams[1]=n.frustumEdgeFalloff,this.spotShadow[this.spotShadowNum++]=r,n.update(e),n.updateMatrix(),s&&n.matrix.multiply(t.anchorMatrix),this.spotShadowMap[this.spotsNum]=n.map,this.spotShadowDepthMap[this.spotsNum]=n.depthMap,ft[this.spotsNum]=n.matrix}this.spot[this.spotsNum++]=o}}const mt=new WeakMap;function gt(e){if(mt.has(e))return mt.get(e);let t;return e.isHemisphereLight?t={direction:new Float32Array(3),skyColor:new Float32Array([0,0,0]),groundColor:new Float32Array([0,0,0])}:e.isDirectionalLight?t={direction:new Float32Array(3),color:new Float32Array([0,0,0])}:e.isPointLight?t={position:new Float32Array(3),color:new Float32Array([0,0,0]),distance:0,decay:0}:e.isSpotLight&&(t={position:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array([0,0,0]),distance:0,coneCos:0,penumbraCos:0,decay:0}),mt.set(e,t),t}const _t=new WeakMap;function vt(e){if(_t.has(e))return _t.get(e);let t;return e.isDirectionalLight?t={shadowBias:new Float32Array(2),shadowMapSize:new Float32Array(2),shadowParams:new Float32Array(2)}:e.isPointLight?t={shadowBias:new Float32Array(2),shadowMapSize:new Float32Array(2),shadowParams:new Float32Array(2),shadowCameraRange:new Float32Array(2)}:e.isSpotLight&&(t={shadowBias:new Float32Array(2),shadowMapSize:new Float32Array(2),shadowParams:new Float32Array(2)}),_t.set(e,t),t}class bt{constructor(){this._factor=new Uint16Array(8)}update(e){this._factor[0]=e.useAmbient?1:0,this._factor[1]=e.hemisNum,this._factor[2]=e.directsNum,this._factor[3]=e.pointsNum,this._factor[4]=e.spotsNum,this._factor[5]=e.directShadowNum,this._factor[6]=e.pointShadowNum,this._factor[7]=e.spotShadowNum}compare(e){if(!e)return!1;for(let t=0,n=e.length;t<n;t++)if(this._factor[t]!==e[t])return!1;return!0}copyTo(e){return e||(e=new this._factor.constructor(this._factor.length)),e.set(this._factor),e}}function xt(e,t){const n=yt(e)?1:0;return(yt(t)?1:0)-n}function yt(e){return e.shadow&&e.castShadow}function wt(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function At(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.material.id!==t.material.id?e.material.id-t.material.id:e.id-t.id}class Et{constructor(e){this.id=e,this.opaque=[],this.opaqueCount=0,this.transparent=[],this.transparentCount=0,this._cache=[],this._cacheIndex=0}begin(){this._cacheIndex=0,this.opaqueCount=0,this.transparentCount=0}end(){this.opaque.length=this.opaqueCount,this.transparent.length=this.transparentCount}addRenderable(e,t,n,r,i){const a=this._cache;let s=a[this._cacheIndex];void 0===s?(s={object:e,geometry:t,material:n,z:r,renderOrder:e.renderOrder,group:i},a[this._cacheIndex]=s):(s.object=e,s.geometry=t,s.material=n,s.z=r,s.renderOrder=e.renderOrder,s.group=i),n.transparent?(this.transparent[this.transparentCount]=s,this.transparentCount++):(this.opaque[this.opaqueCount]=s,this.opaqueCount++),this._cacheIndex++}sort(){this.opaque.sort(wt),this.transparent.sort(At)}}class St{constructor(){this.layerMap=new Map,this.layerList=[],this._lastLayer=this.createLayer(0)}begin(){for(let e=0,t=this.layerList.length;e<t;e++)this.layerList[e].begin()}end(){for(let e=0,t=this.layerList.length;e<t;e++)this.layerList[e].end(),this.layerList[e].sort()}push(e,t){if(e.frustumCulled&&t.frustumCulled&&(Mt.copy(e.geometry.boundingSphere).applyMatrix4(e.worldMatrix),!t.frustum.intersectsSphere(Mt)))return;Tt.setFromMatrixPosition(e.worldMatrix),Tt.applyMatrix4(t.projectionViewMatrix);const n=e.renderLayer||0;let r=this._lastLayer;if(r.id!==n&&(r=this.layerMap.get(n),r||(r=this.createLayer(n)),this._lastLayer=r),Array.isArray(e.material)){const t=e.geometry.groups;for(let n=0;n<t.length;n++){const i=t[n],a=e.material[i.materialIndex];a&&r.addRenderable(e,e.geometry,a,Tt.z,i)}}else r.addRenderable(e,e.geometry,e.material,Tt.z)}setLayer(e,t){this.layerMap.set(e,t),this.layerList.push(t),this.layerList.sort(Pt)}createLayer(e){const t=new Et(e);return this.setLayer(e,t),t}getLayer(e){return this.layerMap.get(e)}removeLayer(e){const t=this.layerMap.get(e);if(t){this.layerMap.delete(e);const n=this.layerList.indexOf(t);-1!==n&&this.layerList.splice(n,1),this._lastLayer===e&&(this._lastLayer=null)}}}const Tt=new r,Mt=new We;function Pt(e,t){return e.id-t.id}const Ct=new Oe;class Ft{constructor(){this.useAnchorMatrix=!1,this.anchorMatrix=new a,this.anchorMatrixInverse=new a,this.disableShadowSampler=!1,this.logarithmicDepthBuffer=!1,this.fog=null,this.environment=null,this.environmentLightIntensity=1,this.clippingPlanesData=new Float32Array([]),this.numClippingPlanes=0}update(e){this.useAnchorMatrix=!e.anchorMatrix.isIdentity(),this.anchorMatrix.copy(e.anchorMatrix),this.anchorMatrixInverse.getInverse(e.anchorMatrix),this.disableShadowSampler=e.disableShadowSampler,this.logarithmicDepthBuffer=e.logarithmicDepthBuffer,this.fog=e.fog,this.environment=e.environment,this.environmentLightIntensity=e.environmentLightIntensity,this.clippingPlanesData.length<4*e.clippingPlanes.length&&(this.clippingPlanesData=new Float32Array(4*e.clippingPlanes.length)),this.setClippingPlanesData(e.clippingPlanes,this.clippingPlanesData),this.numClippingPlanes=e.clippingPlanes.length}setClippingPlanesData(e,t){for(let n=0;n<e.length;n++)Ct.copy(e[n]),this.useAnchorMatrix&&Ct.applyMatrix4(this.anchorMatrixInverse),t[4*n+0]=Ct.normal.x,t[4*n+1]=Ct.normal.y,t[4*n+2]=Ct.normal.z,t[4*n+3]=Ct.constant;return t}}class Lt{constructor(e,t){this.scene=e,this.lights=t,this.camera={near:0,far:0,position:new r,viewMatrix:new a,projectionMatrix:new a,projectionViewMatrix:new a,rect:new et(0,0,1,1)},this.logDepthCameraNear=0,this.logDepthBufFC=0,this.gammaFactor=2,this.outputEncoding=J}updateCamera(e){const t=this.scene,n=e.projectionMatrix;let r=0,i=0;!function(e){return-1===e.elements[11]}(n)?(r=(n.elements[14]+1)/n.elements[10],i=(n.elements[14]-1)/n.elements[10]):(r=n.elements[14]/(n.elements[10]-1),i=n.elements[14]/(n.elements[10]+1)),this.camera.near=r,this.camera.far=i,t.logarithmicDepthBuffer?(this.logDepthCameraNear=r,this.logDepthBufFC=2/(Math.log(i-r+1)*Math.LOG2E)):(this.logDepthCameraNear=0,this.logDepthBufFC=0),this.camera.position.setFromMatrixPosition(e.worldMatrix),t.useAnchorMatrix&&this.camera.position.applyMatrix4(t.anchorMatrixInverse),this.camera.viewMatrix.copy(e.viewMatrix),t.useAnchorMatrix&&this.camera.viewMatrix.multiply(t.anchorMatrix),this.camera.projectionMatrix.copy(n),this.camera.projectionViewMatrix.copy(n).multiply(this.camera.viewMatrix),this.camera.rect.copy(e.rect),this.gammaFactor=e.gammaFactor,this.outputEncoding=e.outputEncoding}}class Nt extends ut{constructor(){super(),this.fog=null,this.environment=null,this.environmentLightIntensity=1,this.clippingPlanes=[],this.disableShadowSampler=!1,this.logarithmicDepthBuffer=!1,this.anchorMatrix=new a,this._sceneData=new Ft,this._lightData=new pt,this._skeletons=new Set,this._renderQueueMap=new WeakMap,this._renderStatesMap=new WeakMap}updateRenderStates(e,t){t=void 0===t||t,this._renderStatesMap.has(e)||this._renderStatesMap.set(e,new Lt(this._sceneData,this._lightData));const n=this._renderStatesMap.get(e);return t&&this._sceneData.update(this),n.updateCamera(e),n}getRenderStates(e){return this._renderStatesMap.get(e)}updateRenderQueue(e,t,n){t=void 0===t||t,n=void 0===n||n,this._renderQueueMap.has(e)||this._renderQueueMap.set(e,new St);const r=this._renderQueueMap.get(e);if(n&&this._skeletons.clear(),r.begin(),t?(this._lightData.begin(),this._doPushObject(this,e,r,n),this._lightData.end(this._sceneData)):this._doPushMesh(this,e,r,n),r.end(),n)for(const e of this._skeletons)e.updateBones(this._sceneData);return r}getRenderQueue(e){return this._renderQueueMap.get(e)}_doPushMesh(e,t,n,r){if(!e.visible)return;e.geometry&&e.material&&e.renderable&&(n.push(e,t),r&&e.skeleton&&this._skeletons.add(e.skeleton));const i=e.children;for(let e=0,a=i.length;e<a;e++)this._doPushMesh(i[e],t,n,r)}_doPushObject(e,t,n,r){if(!e.visible)return;e.geometry&&e.material&&e.renderable?(n.push(e,t),r&&e.skeleton&&this._skeletons.add(e.skeleton)):e.isLight&&this._lightData.push(e);const i=e.children;for(let e=0,a=i.length;e<a;e++)this._doPushObject(i[e],t,n,r)}}Nt.prototype.isScene=!0;class It extends ut{constructor(){super(),this.viewMatrix=new a,this.projectionMatrix=new a,this.projectionMatrixInverse=new a,this.projectionViewMatrix=new a,this.frustum=new $e,this.gammaFactor=2,this.outputEncoding=J,this.rect=new et(0,0,1,1),this.frustumCulled=!0}lookAt(e,t){Rt.lookAtRH(this.position,e,t),this.quaternion.setFromRotationMatrix(Rt)}setOrtho(e,t,n,r,i,a){this.projectionMatrix.set(2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-n),0,-(r+n)/(r-n),0,0,-2/(a-i),-(a+i)/(a-i),0,0,0,1),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}setPerspective(e,t,n,r){this.projectionMatrix.set(1/(t*Math.tan(e/2)),0,0,0,0,1/Math.tan(e/2),0,0,0,0,-(r+n)/(r-n),-2*r*n/(r-n),0,0,-1,0),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}getWorldDirection(e=new r){const t=this.worldMatrix.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrix(e){ut.prototype.updateMatrix.call(this,e),this.viewMatrix.getInverse(this.worldMatrix),this.projectionViewMatrix.multiplyMatrices(this.projectionMatrix,this.viewMatrix),this.frustum.setFromMatrix(this.projectionViewMatrix)}copy(e,t){return ut.prototype.copy.call(this,e,t),this.viewMatrix.copy(e.viewMatrix),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.frustum.copy(e.frustum),this.gammaFactor=e.gammaFactor,this.outputEncoding=e.outputEncoding,this.rect.copy(e.rect),this.frustumCulled=e.frustumCulled,this}}It.prototype.isCamera=!0;const Rt=new a,Dt=new We,Ut=new a,Ot=new class{constructor(e=new r,t=new r(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}at(e,t=new r){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}distanceSqToPoint(e){const t=ze.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ze.copy(this.direction).multiplyScalar(t).add(this.origin),ze.distanceToSquared(e))}intersectsBox(e){return null!==this.intersectBox(e,ze)}intersectBox(e,t){let n,r,i,a,s,o;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),c>=0?(s=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(s=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||s>r?null:((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}intersectSphere(e,t){ze.subVectors(e.center,this.origin);const n=ze.dot(this.direction),r=ze.dot(ze)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectTriangle(e,t,n,r,i){Ge.subVectors(t,e),je.subVectors(n,e),Ve.crossVectors(Ge,je);let a,s=this.direction.dot(Ve);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Be.subVectors(this.origin,e);const o=a*this.direction.dot(je.crossVectors(Be,je));if(o<0)return null;const l=a*this.direction.dot(Ge.cross(Be));if(l<0)return null;if(o+l>s)return null;const u=-a*Be.dot(Ve);return u<0?null:this.at(u/s,i)}},kt=new r,$t=new r,zt=new r,Bt=new r,Gt=new r,jt=new r,Vt=new r,Ht=new r,Xt=new r,Wt=new r,qt=new r,Yt=new et,Qt=new et,Zt=new r,Kt=new a,Jt=new Se,en=new Se,tn=new Se,nn=new r,rn=new r;class an extends ut{constructor(e,t){super(),this.geometry=e,this.material=t,this.morphTargetInfluences=null}raycast(e,t){const n=this.geometry,r=this.worldMatrix;if(Dt.copy(n.boundingSphere),Dt.applyMatrix4(r),!e.intersectsSphere(Dt))return;if(Ut.getInverse(r),Ot.copy(e).applyMatrix4(Ut),!Ot.intersectsBox(n.boundingBox))return;const i=n.getAttribute("a_Position"),a=n.getAttribute("a_Uv"),s=n.morphAttributes.position;let o;if(n.index){const r=n.index.buffer.array;for(let n=0;n<r.length;n+=3){const l=r[n],u=r[n+1],c=r[n+2];o=sn(this,e,Ot,i,s,a,l,u,c),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else for(let n=0;n<i.buffer.count;n+=3)o=sn(this,e,Ot,i,s,a,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}copy(e){return super.copy(e),e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),this}clone(){return new this.constructor(this.geometry,this.material).copy(this)}}function sn(e,t,n,i,a,s,o,l,u){$t.fromArray(i.buffer.array,3*o),zt.fromArray(i.buffer.array,3*l),Bt.fromArray(i.buffer.array,3*u);const c=e.morphTargetInfluences;if(a&&c){Ht.set(0,0,0),Xt.set(0,0,0),Wt.set(0,0,0);for(let e=0;e<a.length;e++){const t=c[e],n=a[e];0!==t&&(Gt.fromArray(n.buffer.array,3*o),jt.fromArray(n.buffer.array,3*l),Vt.fromArray(n.buffer.array,3*u),Ht.addScaledVector(Gt,t),Xt.addScaledVector(jt,t),Wt.addScaledVector(Vt,t))}$t.add(Ht),zt.add(Xt),Bt.add(Wt)}e.isSkinnedMesh&&(on(e,o,$t),on(e,l,zt),on(e,u,Bt));const h=function(e,t,n,r,i,a,s){let o;const l=e.material;if(o=l.side===w?n.intersectTriangle(a,i,r,!0,s):n.intersectTriangle(r,i,a,l.side!==A,s),null===o)return null;rn.copy(s),rn.applyMatrix4(e.worldMatrix);return{distance:t.origin.distanceTo(rn),point:rn.clone(),object:e}}(e,t,n,$t,zt,Bt,nn);if(h){s&&(Jt.fromArray(s.buffer.array,2*o),en.fromArray(s.buffer.array,2*l),tn.fromArray(s.buffer.array,2*u),h.uv=(d=nn,f=$t,p=zt,m=Bt,g=Jt,_=en,v=tn,Je.barycoordFromPoint(d,f,p,m,kt),g.multiplyScalar(kt.x),_.multiplyScalar(kt.y),v.multiplyScalar(kt.z),g.add(_).add(v),g.clone()));const e={a:o,b:l,c:u,normal:new r};Je.normal($t,zt,Bt,e.normal),h.face=e}var d,f,p,m,g,_,v;return h}function on(e,t,n){const r=e.skeleton,i=e.geometry.attributes.skinIndex,a=e.geometry.attributes.skinWeight;Yt.fromArray(i.buffer.array,t*i.size),Qt.fromArray(a.buffer.array,t*a.size),qt.copy(n).applyMatrix4(e.bindMatrix),n.set(0,0,0);for(let e=0;e<4;e++){const t=ln(Qt,e);if(0!==t){const i=ln(Yt,e);Kt.multiplyMatrices(r.bones[i].worldMatrix,r.boneInverses[i]),n.addScaledVector(Zt.copy(qt).applyMatrix4(Kt),t)}}return n.applyMatrix4(e.bindMatrixInverse)}function ln(e,t){switch(t){case 0:return e.x;case 1:return e.y;case 2:return e.z;case 3:return e.w;default:throw new Error("index is out of range: "+t)}}an.prototype.isMesh=!0;class un{constructor(e,t=e.stride,n=0,r=!1){this.buffer=e,this.size=t,this.offset=n,this.normalized=r,this.divisor=0}copy(e){return this.buffer=e.buffer,this.size=e.size,this.offset=e.offset,this.normalized=e.normalized,this.divisor=e.divisor,this}clone(e){let t;return e?(e.has(this.buffer)||e.set(this.buffer,this.buffer.clone()),t=new un(e.get(this.buffer),this.size,this.offset,this.normalized),t.divisor=this.divisor,t):(console.warn("t3d.Attribute.clone(): now requires a WeakMap as an argument to save shared buffers."),t=new un(this.buffer.clone(),this.size,this.offset,this.normalized),t.divisor=this.divisor,t)}}class cn{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}copy(e){return this.array=new e.array.constructor(e.array),this.stride=e.stride,this.count=e.array.length/this.stride,this.usage=e.usage,this}clone(){const e=new this.array.constructor(this.array),t=new cn(e,this.stride);return t.usage=this.usage,t}}let hn=0;const dn=new r,fn=new r,pn=new r,mn=new Me,gn=new Me;class _n extends ae{constructor(){super(),this.id=hn++,this.uuid=nt(),this.attributes={},this.morphAttributes={},this.index=null,this.boundingBox=new Me,this.boundingSphere=new We,this.groups=[],this.instanceCount=-1,this.version=0}addAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}removeAttribute(e){delete this.attributes[e]}setIndex(e){if(Array.isArray(e)){const t=new(function(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}(e)>65535?Uint32Array:Uint16Array)(e);this.index=new un(new cn(t,1))}else this.index=e}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}computeBoundingBox(){const e=this.attributes.a_Position||this.attributes.position,t=this.morphAttributes.position;if(this.boundingBox.setFromArray(e.buffer.array,e.buffer.stride,e.offset),t)for(let e=0;e<t.length;e++){const n=t[e];mn.setFromArray(n.buffer.array,n.buffer.stride,n.offset),dn.addVectors(this.boundingBox.min,mn.min),this.boundingBox.expandByPoint(dn),dn.addVectors(this.boundingBox.max,mn.max),this.boundingBox.expandByPoint(dn)}}computeBoundingSphere(){const e=this.attributes.a_Position||this.attributes.position,t=this.morphAttributes.position;if(t){mn.setFromArray(e.buffer.array,e.buffer.stride,e.offset);for(let e=0;e<t.length;e++){const n=t[e];gn.setFromArray(n.buffer.array,n.buffer.stride,n.offset),dn.addVectors(mn.min,gn.min),mn.expandByPoint(dn),dn.addVectors(mn.max,gn.max),mn.expandByPoint(dn)}const n=this.boundingSphere.center;mn.getCenter(n);let r=0;for(let i=0;i<e.buffer.count;i++){fn.fromArray(e.buffer.array,3*i),r=n.distanceToSquared(fn);for(let e=0;e<t.length;e++){const a=t[e];dn.fromArray(a.buffer.array,3*i),pn.addVectors(fn,dn);const s=n.distanceToSquared(pn);s>r&&(r=s,fn.add(dn))}}this.boundingSphere.radius=Math.sqrt(r)}else this.boundingSphere.setFromArray(e.buffer.array,e.buffer.stride,e.offset)}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){let t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[];const i=new WeakMap,a=e.index;null!==a&&this.setIndex(a.clone(i));const s=e.attributes;for(t in s){const e=s[t];this.addAttribute(t,e.clone(i))}const o=e.morphAttributes;for(t in o){const e=[],a=o[t];for(n=0,r=a.length;n<r;n++)e.push(a[n].clone(i));this.morphAttributes[t]=e}const l=e.groups;for(n=0,r=l.length;n<r;n++){const e=l[n];this.addGroup(e.start,e.count,e.materialIndex)}return this.boundingBox.copy(e.boundingBox),this.boundingSphere.copy(e.boundingSphere),this.instanceCount=e.instanceCount,this}clone(){return(new _n).copy(this)}}class vn extends _n{constructor(e=1,t=1,n=1,r=1){super();const i=e/2,a=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,u=o+1,c=e/s,h=t/o;let d,f;const p=[],m=[],g=[],_=[];for(f=0;f<u;f++){const e=f*h-a;for(d=0;d<l;d++){const t=d*c-i;m.push(t,0,e),g.push(0,1,0),_.push(d/s),_.push(1-f/o)}}for(f=0;f<o;f++)for(d=0;d<s;d++){const e=d+l*f,t=d+l*(f+1),n=d+1+l*(f+1),r=d+1+l*f;p.push(e,t,r),p.push(t,n,r)}this.setIndex(new un(new cn(m.length/3>65536?new Uint32Array(p):new Uint16Array(p),1))),this.addAttribute("a_Position",new un(new cn(new Float32Array(m),3))),this.addAttribute("a_Normal",new un(new cn(new Float32Array(g),3))),this.addAttribute("a_Uv",new un(new cn(new Float32Array(_),2))),this.computeBoundingBox(),this.computeBoundingSphere()}}let bn=0;class xn extends ae{constructor(){super(),this.id=bn++,this.uuid=nt(),this.type=p,this.shaderName="",this.defines={},this.uniforms={},this.vertexShader="",this.fragmentShader="",this.precision=null,this.transparent=!1,this.blending=g,this.blendSrc=203,this.blendDst=208,this.blendEquation=v,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.premultipliedAlpha=!1,this.vertexColors=0,this.vertexTangents=!1,this.opacity=1,this.diffuse=new Pe(16777215),this.diffuseMap=null,this.diffuseMapCoord=0,this.diffuseMapTransform=new Re,this.alphaMap=null,this.alphaMapCoord=0,this.alphaMapTransform=new Re,this.emissive=new Pe(0),this.emissiveMap=null,this.emissiveMapCoord=0,this.emissiveMapTransform=new Re,this.aoMap=null,this.aoMapIntensity=1,this.aoMapCoord=0,this.aoMapTransform=new Re,this.normalMap=null,this.normalScale=new Se(1,1),this.bumpMap=null,this.bumpScale=1,this.envMap=null,this.envMapIntensity=1,this.envMapCombine="ENVMAP_BLENDING_MULTIPLY",this.depthFunc=515,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.stencilTest=!1,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=W,this.stencilZFail=W,this.stencilZPass=W,this.stencilFuncBack=null,this.stencilRefBack=null,this.stencilFuncMaskBack=null,this.stencilFailBack=null,this.stencilZFailBack=null,this.stencilZPassBack=null,this.clippingPlanes=null,this.alphaTest=0,this.alphaToCoverage=!1,this.side=y,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.shading=E,this.dithering=!1,this.acceptLight=!1,this.fog=!0,this.drawMode=4,this.needsUpdate=!0}copy(e){return this.shaderName=e.shaderName,this.defines=Object.assign({},e.defines),this.uniforms=at(e.uniforms),this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.precision=e.precision,this.transparent=e.transparent,this.blending=e.blending,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.premultipliedAlpha=e.premultipliedAlpha,this.vertexColors=e.vertexColors,this.vertexTangents=e.vertexTangents,this.opacity=e.opacity,this.diffuse.copy(e.diffuse),this.diffuseMap=e.diffuseMap,this.diffuseMapCoord=e.diffuseMapCoord,this.diffuseMapTransform.copy(e.diffuseMapTransform),this.alphaMap=e.alphaMap,this.alphaMapCoord=e.alphaMapCoord,this.alphaMapTransform.copy(e.alphaMapTransform),this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveMapCoord=e.emissiveMapCoord,this.emissiveMapTransform.copy(e.emissiveMapTransform),this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.aoMapCoord=e.aoMapCoord,this.aoMapTransform.copy(e.aoMapTransform),this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.envMapCombine=e.envMapCombine,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.stencilTest=e.stencilTest,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilFuncBack=e.stencilFuncBack,this.stencilRefBack=e.stencilRefBack,this.stencilFuncMaskBack=e.stencilFuncMaskBack,this.stencilFailBack=e.stencilFailBack,this.stencilZFailBack=e.stencilZFailBack,this.stencilZPassBack=e.stencilZPassBack,this.clippingPlanes=e.clippingPlanes,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.side=e.side,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.shading=e.shading,this.dithering=e.dithering,this.acceptLight=e.acceptLight,this.fog=e.fog,this.drawMode=e.drawMode,this}clone(){return(new this.constructor).copy(this)}dispose(){this.dispatchEvent({type:"dispose"})}}class yn extends xn{constructor(e){super(),e&&(this.shaderName=e.name,Object.assign(this.defines,e.defines),this.uniforms=at(e.uniforms),this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader)}}class wn{constructor(e){const t=new Nt,n=this.camera=new It;n.frustumCulled=!1,n.position.set(0,1,0),n.lookAt(new r(0,0,0),new r(0,0,-1)),n.setOrtho(-1,1,-1,1,.1,2),t.add(n);const i=new vn(2,2,1,1),a=this.material=new yn(e);this.uniforms=a.uniforms;const s=new an(i,a);s.frustumCulled=!1,t.add(s),t.updateMatrix(),this.renderStates=t.updateRenderStates(n);const o=t.updateRenderQueue(n,!1,!1);this.renderQueueLayer=o.layerList[0],this.renderConfig={}}render(e){e.renderRenderableList(this.renderQueueLayer.opaque,this.renderStates,this.renderConfig)}}class An extends xn{constructor(){super(),this.type="depth",this.packToRGBA=!1}}class En extends xn{constructor(){super(),this.type="distance"}}class Sn{constructor(){this.getDepthMaterial=Fn,this.getDistanceMaterial=Ln,this.getGeometry=null,this.shadowLayers=null,this.transparentShadow=!1}render(e,t){const n=e.renderPass,r=this.getGeometry,i=this.getDepthMaterial,a=this.getDistanceMaterial;Tn.copy(n.getClearColor()),n.setClearColor(1,1,1,1);const s=t._lightData.lights,o=t._lightData.shadowsNum;for(let l=0;l<o;l++){const o=s[l],u=o.shadow;if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;const c=u.camera,h=u.renderTarget,d=o.isPointLight,f=d?6:1;u.prepareDepthMap(!t.disableShadowSampler,n.capabilities);for(let s=0;s<f;s++){d&&(u.update(o,s),h.activeCubeFace=s),n.setRenderTarget(h),n.clear(!0,!0);const l=t.updateRenderStates(c,0===s),f=t.updateRenderQueue(c,!1,!1);for(let t=0;t<f.layerList.length;t++){const n=f.layerList[t];if(null!==this.shadowLayers&&-1===this.shadowLayers.indexOf(n.id))continue;const s={getGeometry:r,getMaterial:function(e){return d?a(e,o):i(e,o)},ifRender:function(e){return e.object.castShadow}};e.renderRenderableList(n.opaque,l,s),this.transparentShadow&&e.renderRenderableList(n.transparent,l,s)}}u.needsUpdate=!1}n.setClearColor(Tn.x,Tn.y,Tn.z,Tn.w)}}const Tn=new et,Mn={front:w,back:y,double:A},Pn={},Cn={};function Fn(e,t){const n=!!e.object.skeleton,r=e.geometry.morphAttributes.position&&e.geometry.morphAttributes.position.length>0,i=e.material.clippingPlanes,a=i&&i.length>0?i.length:0,s=r<<0|n<<1;let o=Pn[s];void 0===o&&(o={},Pn[s]=o);let l=o[a];return void 0===l&&(l=new An,l.packToRGBA=!0,o[a]=l),l.side=Mn[e.material.side],l.clippingPlanes=e.material.clippingPlanes,l.drawMode=e.material.drawMode,l}function Ln(e,t){const n=!!e.object.skeleton,r=e.geometry.morphAttributes.position&&e.geometry.morphAttributes.position.length>0,i=e.material.clippingPlanes,a=i&&i.length>0?i.length:0,s=r<<0|n<<1;let o=Cn[s];void 0===o&&(o={},Cn[s]=o);let l=o[a];return void 0===l&&(l=new En,o[a]=l),l.side=Mn[e.material.side],l.uniforms.nearDistance=t.shadow.cameraNear,l.uniforms.farDistance=t.shadow.cameraFar,l.clippingPlanes=e.material.clippingPlanes,l.drawMode=e.material.drawMode,l}let Nn=0;class In extends ae{constructor(){super(),this.id=Nn++,this.mipmaps=[],this.border=0,this.format=P,this.internalformat=null,this.type=R,this.magFilter=B,this.minFilter=V,this.wrapS=X,this.wrapT=X,this.anisotropy=1,this.compare=void 0,this.generateMipmaps=!0,this.encoding=J,this.flipY=!0,this.premultiplyAlpha=!1,this.unpackAlignment=4,this.version=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.mipmaps=e.mipmaps.slice(0),this.border=e.border,this.format=e.format,this.internalformat=e.internalformat,this.type=e.type,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.anisotropy=e.anisotropy,this.compare=e.compare,this.generateMipmaps=e.generateMipmaps,this.encoding=e.encoding,this.flipY=e.flipY,this.premultiplyAlpha=e.premultiplyAlpha,this.unpackAlignment=e.unpackAlignment,this.version=e.version,this}dispose(){this.dispatchEvent({type:"dispose"}),this.version=0}}In.prototype.isTexture=!0;class Rn extends In{constructor(){super(),this.image=null}copy(e){return super.copy(e),this.image=e.image,this}}Rn.prototype.isTexture2D=!0;class Dn extends In{constructor(){super(),this.images=[],this.flipY=!1}copy(e){return super.copy(e),this.images=e.images.slice(0),this}}Dn.prototype.isTextureCube=!0;class Un extends In{constructor(){super(),this.image={data:new Uint8Array([255,255,255,255,255,255,255,255]),width:2,height:2,depth:2},this.wrapR=X,this.format=1004,this.type=R,this.magFilter=z,this.minFilter=z,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}copy(e){return super.copy(e),this.image=e.image,this}}Un.prototype.isTexture3D=!0;const On=new Rn;On.image={data:new Uint8Array([1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1]),width:2,height:2},On.magFilter=z,On.minFilter=z,On.generateMipmaps=!1,On.version++;const kn=new Rn;kn.image={data:null,width:2,height:2},kn.version++,kn.type=1509,kn.format=M,kn.magFilter=z,kn.minFilter=z,kn.compare=513,kn.generateMipmaps=!1,kn.version++;const $n=new Un,zn=new Dn;function Bn(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Gn(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}const jn=[];function Vn(e,t){let n=jn[t];void 0===n&&(n=new Int32Array(t),jn[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocTexUnit();return n}function Hn(e,t){const n=e.gl,r=e.type,i=e.location,a=e.cache;switch(r){case n.FLOAT:e.setValue=function(e){a[0]!==e&&(n.uniform1f(i,e),a[0]=e)},e.set=t?function(e){Bn(a,e)||(n.uniform1fv(i,e),Gn(a,e))}:e.setValue;break;case n.SAMPLER_2D:case n.SAMPLER_2D_SHADOW:e.setValue=function(e,t){const s=t.allocTexUnit();t.setTexture2D(e||(r===n.SAMPLER_2D_SHADOW?kn:On),s),a[0]!==s&&(n.uniform1i(i,s),a[0]=s)},e.set=t?function(e,t){const s=e.length,o=Vn(t,s);for(let i=0;i!==s;++i)t.setTexture2D(e[i]||(r===n.SAMPLER_2D_SHADOW?kn:On),o[i]);Bn(a,o)||(n.uniform1iv(i,o),Gn(a,o))}:e.setValue;break;case n.SAMPLER_CUBE:case n.SAMPLER_CUBE_SHADOW:e.setValue=function(e,t){const r=t.allocTexUnit();t.setTextureCube(e||zn,r),a[0]!==r&&(n.uniform1i(i,r),a[0]=r)},e.set=t?function(e,t){const r=e.length,s=Vn(t,r);for(let n=0;n!==r;++n)t.setTextureCube(e[n]||zn,s[n]);Bn(a,s)||(n.uniform1iv(i,s),Gn(a,s))}:e.setValue;break;case n.SAMPLER_3D:e.setValue=function(e,t){const r=t.allocTexUnit();t.setTexture3D(e||$n,r),a[0]!==r&&(n.uniform1i(i,r),a[0]=r)},e.set=t?function(e,t){const r=e.length,s=Vn(t,r);for(let n=0;n!==r;++n)t.setTexture3D(e[n]||$n,s[n]);Bn(a,s)||(n.uniform1iv(i,s),Gn(a,s))}:e.setValue;break;case n.BOOL:case n.INT:e.setValue=function(e){a[0]!==e&&(n.uniform1i(i,e),a[0]=e)},e.set=t?function(e){Bn(a,e)||(n.uniform1iv(i,e),Gn(a,e))}:e.setValue;break;case n.FLOAT_VEC2:e.setValue=function(e,t){a[0]===e&&a[1]===t||(n.uniform2f(i,e,t),a[0]=e,a[1]=t)},e.set=function(e){Bn(a,e)||(n.uniform2fv(i,e),Gn(a,e))};break;case n.BOOL_VEC2:case n.INT_VEC2:e.setValue=function(e,t){a[0]===e&&a[1]===t||(n.uniform2i(i,e,t),a[0]=e,a[1]=t)},e.set=function(e){Bn(a,e)||(n.uniform2iv(i,e),Gn(a,e))};break;case n.FLOAT_VEC3:e.setValue=function(e,t,r){a[0]===e&&a[1]===t&&a[2]===r||(n.uniform3f(i,e,t,r),a[0]=e,a[1]=t,a[2]=r)},e.set=function(e){Bn(a,e)||(n.uniform3fv(i,e),Gn(a,e))};break;case n.BOOL_VEC3:case n.INT_VEC3:e.setValue=function(e,t,r){a[0]===e&&a[1]===t&&a[2]===r||(n.uniform3i(i,e,t,r),a[0]=e,a[1]=t,a[2]=r)},e.set=function(e){Bn(a,e)||(n.uniform3iv(i,e),Gn(a,e))};break;case n.FLOAT_VEC4:e.setValue=function(e,t,r,s){a[0]===e&&a[1]===t&&a[2]===r&&a[3]===s||(n.uniform4f(i,e,t,r,s),a[0]=e,a[1]=t,a[2]=r,a[3]=s)},e.set=function(e){Bn(a,e)||(n.uniform4fv(i,e),Gn(a,e))};break;case n.BOOL_VEC4:case n.INT_VEC4:e.setValue=function(e,t,r,s){a[0]===e&&a[1]===t&&a[2]===r&&a[3]===s||(n.uniform4i(i,e,t,r,s),a[0]=e,a[1]=t,a[2]=r,a[3]=s)},e.set=function(e){Bn(a,e)||(n.uniform4iv(i,e),Gn(a,e))};break;case n.FLOAT_MAT2:e.setValue=e.set=function(e){Bn(a,e)||(n.uniformMatrix2fv(i,!1,e),Gn(a,e))};break;case n.FLOAT_MAT3:e.setValue=e.set=function(e){Bn(a,e)||(n.uniformMatrix3fv(i,!1,e),Gn(a,e))};break;case n.FLOAT_MAT4:e.setValue=e.set=function(e){Bn(a,e)||(n.uniformMatrix4fv(i,!1,e),Gn(a,e))}}}class Xn{constructor(e,t,n,r){this.gl=e,this.id=t,this.type=n.type,this.location=r,this.setValue=void 0,this.set=void 0,this.cache=[],Hn(this)}}class Wn{constructor(e,t,n,r){this.gl=e,this.id=t,this.type=n.type,this.size=n.size,this.location=r,this.setValue=void 0,this.set=void 0,this.cache=[],Hn(this,!0)}}class qn{constructor(){this.seq=[],this.map={}}}class Yn extends qn{constructor(e){super(),this.id=e}set(e,t){const n=this.seq;for(let r=0,i=n.length;r!==i;++r){const i=n[r];i.set(e[i.id],t)}}}const Qn=/(\w+)(\])?(\[|\.)?/g;function Zn(e,t){e.seq.push(t),e.map[t.id]=t}function Kn(e,t,n,r){const i=t.name,a=i.length;for(Qn.lastIndex=0;;){const s=Qn.exec(i),o=Qn.lastIndex;let l=s[1];const u="]"===s[2],c=s[3];if(u&&(l|=0),void 0===c||"["===c&&o+2===a){Zn(r,void 0===c?new Xn(e,l,t,n):new Wn(e,l,t,n));break}{let e=r.map[l];void 0===e&&(e=new Yn(l),Zn(r,e)),r=e}}}class Jn extends qn{constructor(e,t){super();const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);Kn(e,n,i,this)}}set(e,t,n){const r=this.map[e];void 0!==r&&r.set(t,n)}has(e){return!!this.map[e]}}class er{constructor(e,t,n){this.gl=e,this.name=n.name,this.type=n.type,this.size=n.size,this.location=e.getAttribLocation(t,this.name),this.count=function(e,t){switch(t){case e.FLOAT:case e.BYTE:case e.UNSIGNED_BYTE:case e.UNSIGNED_SHORT:return 1;case e.FLOAT_VEC2:return 2;case e.FLOAT_VEC3:return 3;case e.FLOAT_VEC4:case e.FLOAT_MAT2:return 4;case e.FLOAT_MAT3:return 9;case e.FLOAT_MAT4:return 16;default:return 0}}(e,this.type),this.format=function(e,t){switch(t){case e.FLOAT:case e.FLOAT_VEC2:case e.FLOAT_VEC3:case e.FLOAT_VEC4:case e.FLOAT_MAT2:case e.FLOAT_MAT3:case e.FLOAT_MAT4:return e.FLOAT;case e.UNSIGNED_BYTE:return e.UNSIGNED_BYTE;case e.UNSIGNED_SHORT:return e.UNSIGNED_SHORT;case e.BYTE:return e.BYTE;default:return e.FLOAT}}(e,this.type),this.locationSize=1,this.type===e.FLOAT_MAT2&&(this.locationSize=2),this.type===e.FLOAT_MAT3&&(this.locationSize=3),this.type===e.FLOAT_MAT4&&(this.locationSize=4)}}let tr=0;class nr{constructor(e,t,n){const r=rr(e,e.VERTEX_SHADER,t),i=rr(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(e.attachShader(a,r),e.attachShader(a,i),e.linkProgram(a),!1===e.getProgramParameter(a,e.LINK_STATUS)){const t=e.getProgramInfoLog(a).trim(),n=ir(e,r,"VERTEX"),s=ir(e,i,"FRAGMENT");console.error("THREE.WebGLProgram: Shader Error "+e.getError()+" - VALIDATE_STATUS "+e.getProgramParameter(a,e.VALIDATE_STATUS)+"\n\nProgram Info Log: "+t+"\n"+n+"\n"+s)}let s,o;e.deleteShader(r),e.deleteShader(i),this.getUniforms=function(){return void 0===s&&(s=new Jn(e,a)),s},this.getAttributes=function(){return void 0===o&&(o=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i);n[r.name]=new er(e,t,r)}return n}(e,a)),o},this.dispose=function(){e.deleteProgram(a),this.program=void 0},this.id=tr++,this.usedTimes=1,this.code="",this.gl=e,this.vshaderSource=t,this.fshaderSource=n,this.program=a}}function rr(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function ir(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}const ar={alphaTest_frag:"#ifdef ALPHATEST\n\tif ( outColor.a < ALPHATEST ) {\n\t\tdiscard;\n\t} else {\n\t\toutColor.a = u_Opacity;\n\t}\n#endif",aoMap_pars_frag:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\tvarying vec2 vAOMapUV;\n#endif",aoMap_pars_vert:"#ifdef USE_AOMAP\n\tuniform mat3 aoMapUVTransform;\n\tvarying vec2 vAOMapUV;\n#endif",aoMap_vert:"#ifdef USE_AOMAP\n\t#if (USE_AOMAP == 2)\n        vAOMapUV = (aoMapUVTransform * vec3(a_Uv2, 1.)).xy;\n    #else\n        vAOMapUV = (aoMapUVTransform * vec3(a_Uv, 1.)).xy;\n    #endif\n#endif",aoMap_frag:"\n#ifdef USE_AOMAP\n    float ambientOcclusion = (texture2D(aoMap, vAOMapUV).r - 1.0) * aoMapIntensity + 1.0;\n    \n    reflectedLight.indirectDiffuse *= ambientOcclusion;\n    #if defined(USE_ENV_MAP) && defined(USE_PBR)\n        float dotNV = saturate(dot(N, V));\n        reflectedLight.indirectSpecular *= computeSpecularOcclusion(dotNV, ambientOcclusion, GGXRoughnessToBlinnExponent(roughness));\n    #endif\n#endif",begin_frag:"vec4 outColor = vec4(u_Color, u_Opacity);",begin_vert:"vec3 transformed = vec3(a_Position);\nvec3 objectNormal = vec3(a_Normal);\n#ifdef USE_TANGENT\n    vec3 objectTangent = vec3(a_Tangent.xyz);\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nvec3 BRDF_Diffuse_Lambert(vec3 diffuseColor) {\n    return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent(const in vec3 F0, const in float dotNV, const in float roughness) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nvec3 BRDF_Specular_BlinnPhong(vec3 specularColor, vec3 N, vec3 L, vec3 V, float shininess) {\n    vec3 H = normalize(L + V);\n    float dotNH = saturate(dot(N, H));\n    float dotLH = saturate(dot(L, H));\n    vec3 F = F_Schlick(specularColor, dotLH);\n    float G = G_BlinnPhong_Implicit( );\n    float D = D_BlinnPhong(shininess, dotNH);\n    return F * G * D;\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nvec3 BRDF_Specular_GGX(vec3 specularColor, vec3 N, vec3 L, vec3 V, float roughness) {\n\tfloat alpha = pow2( roughness );\n\tvec3 H = normalize(L + V);\n\tfloat dotNL = saturate( dot(N, L) );\n\tfloat dotNV = saturate( dot(N, V) );\n\tfloat dotNH = saturate( dot(N, H) );\n\tfloat dotLH = saturate( dot(L, H) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * G * D;\n}\nvec3 BRDF_Specular_GGX_Environment(const in vec3 N, const in vec3 V, const in vec3 specularColor, const in float roughness) {\n\tfloat dotNV = saturate(dot(N, V));\n\tvec2 brdf = integrateSpecularBRDF(dotNV, roughness);\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment(const in vec3 N, const in vec3 V, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter) {\n\tfloat dotNV = saturate(dot(N, V));\n\tvec3 F = F_Schlick_RoughnessDependent(specularColor, dotNV, roughness);\n\tvec2 brdf = integrateSpecularBRDF(dotNV, roughness);\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + (1.0 - specularColor) * 0.047619;\tvec3 Fms = FssEss * Favg / (1.0 - Ems * Favg);\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpMap_pars_frag:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd(vec2 uv) {\n\t\tvec2 dSTdx = dFdx( uv );\n\t\tvec2 dSTdy = dFdy( uv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, uv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, uv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, uv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clippingPlanes_frag:"\n#if NUM_CLIPPING_PLANES > 0\n    vec4 plane;\n    #pragma unroll_loop_start\n    for (int i = 0; i < NUM_CLIPPING_PLANES; i++) {\n        plane = clippingPlanes[i];\n        if ( dot( -v_modelPos, plane.xyz ) > plane.w ) discard;\n    }\n    #pragma unroll_loop_end\n#endif",clippingPlanes_pars_frag:"#if NUM_CLIPPING_PLANES > 0\n    uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",color_frag:"#ifdef USE_VCOLOR_RGB\n    outColor.rgb *= v_Color;\n#endif\n#ifdef USE_VCOLOR_RGBA\n    outColor *= v_Color;\n#endif",color_pars_frag:"#ifdef USE_VCOLOR_RGB\n    varying vec3 v_Color;\n#endif\n#ifdef USE_VCOLOR_RGBA\n    varying vec4 v_Color;\n#endif",color_pars_vert:"#ifdef USE_VCOLOR_RGB\n    attribute vec3 a_Color;\n    varying vec3 v_Color;\n#endif\n#ifdef USE_VCOLOR_RGBA\n    attribute vec4 a_Color;\n    varying vec4 v_Color;\n#endif",color_vert:"#if defined(USE_VCOLOR_RGB) || defined(USE_VCOLOR_RGBA)\n    v_Color = a_Color;\n#endif",common_frag:"uniform mat4 u_View;\nuniform float u_Opacity;\nuniform vec3 u_Color;\nuniform vec3 u_CameraPosition;\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};",common_vert:"attribute vec3 a_Position;\nattribute vec3 a_Normal;\n#ifdef USE_TANGENT\n\tattribute vec4 a_Tangent;\n#endif\n#include <transpose>\n#include <inverse>\nuniform mat4 u_Projection;\nuniform mat4 u_View;\nuniform mat4 u_Model;\nuniform mat4 u_ProjectionView;\nuniform vec3 u_CameraPosition;\n#define EPSILON 1e-6\n#ifdef USE_MORPHTARGETS\n    attribute vec3 morphTarget0;\n    attribute vec3 morphTarget1;\n    attribute vec3 morphTarget2;\n    attribute vec3 morphTarget3;\n    #ifdef USE_MORPHNORMALS\n    \tattribute vec3 morphNormal0;\n    \tattribute vec3 morphNormal1;\n    \tattribute vec3 morphNormal2;\n    \tattribute vec3 morphNormal3;\n    #else\n    \tattribute vec3 morphTarget4;\n    \tattribute vec3 morphTarget5;\n    \tattribute vec3 morphTarget6;\n    \tattribute vec3 morphTarget7;\n    #endif\n#endif\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}",diffuseMap_frag:"#ifdef USE_DIFFUSE_MAP\n    #if (USE_DIFFUSE_MAP == 2)\n        vec4 texelColor = texture2D(diffuseMap, v_Uv2);\n    #else \n        vec4 texelColor = texture2D(diffuseMap, v_Uv);\n    #endif\n    \n    texelColor = mapTexelToLinear(texelColor);\n    outColor *= texelColor;\n#endif",diffuseMap_pars_frag:"#ifdef USE_DIFFUSE_MAP\n    uniform sampler2D diffuseMap;\n#endif",emissiveMap_frag:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D(emissiveMap, vEmissiveMapUV);\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissiveMap_pars_frag:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n\tvarying vec2 vEmissiveMapUV;\n#endif",emissiveMap_vert:"#ifdef USE_EMISSIVEMAP\n\t#if (USE_EMISSIVEMAP == 2)\n        vEmissiveMapUV = (emissiveMapUVTransform * vec3(a_Uv2, 1.)).xy;\n    #else\n        vEmissiveMapUV = (emissiveMapUVTransform * vec3(a_Uv, 1.)).xy;\n    #endif\n#endif",emissiveMap_pars_vert:"#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapUVTransform;\n\tvarying vec2 vEmissiveMapUV;\n#endif",encodings_frag:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_frag:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}",end_frag:"gl_FragColor = outColor;",envMap_frag:"#ifdef USE_ENV_MAP\n    vec3 envDir;\n    #ifdef USE_VERTEX_ENVDIR\n        envDir = v_EnvDir;\n    #else\n        envDir = reflect(normalize(v_modelPos - u_CameraPosition), N);\n    #endif\n    vec4 envColor = textureCube(envMap, vec3(u_EnvMap_Flip * envDir.x, envDir.yz));\n    envColor = envMapTexelToLinear( envColor );\n    #ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutColor = mix(outColor, envColor * outColor, u_EnvMap_Intensity);\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutColor = mix(outColor, envColor, u_EnvMap_Intensity);\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutColor += envColor * u_EnvMap_Intensity;\n\t#endif\n#endif",envMap_pars_frag:"#ifdef USE_ENV_MAP\n    #ifdef USE_VERTEX_ENVDIR\n        varying vec3 v_EnvDir;\n    #endif\n    uniform samplerCube envMap;\n    uniform float u_EnvMap_Flip;\n    uniform float u_EnvMap_Intensity;\n    uniform float u_EnvMapLight_Intensity;\n    uniform int maxMipLevel;\n#endif",envMap_pars_vert:"#ifdef USE_ENV_MAP\n    #ifdef USE_VERTEX_ENVDIR\n        varying vec3 v_EnvDir;\n    #endif\n#endif",envMap_vert:"\n#ifdef USE_ENV_MAP\n    #ifdef USE_VERTEX_ENVDIR\n        vec3 transformedNormal = (transposeMat4(inverseMat4(u_Model)) * vec4(objectNormal, 0.0)).xyz;\n        transformedNormal = normalize(transformedNormal);\n        v_EnvDir = reflect(normalize(worldPosition.xyz - u_CameraPosition), transformedNormal);\n    #endif\n#endif",fog_frag:"#ifdef USE_FOG\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    #ifdef USE_EXP2_FOG\n        float fogFactor = 1.0 - exp(-u_FogDensity * u_FogDensity * depth * depth);\n    #else\n        float fogFactor = smoothstep(u_FogNear, u_FogFar, depth);\n    #endif\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, u_FogColor, fogFactor);\n#endif",fog_pars_frag:"#ifdef USE_FOG\n    uniform vec3 u_FogColor;\n    #ifdef USE_EXP2_FOG\n        uniform float u_FogDensity;\n    #else\n        uniform float u_FogNear;\n        uniform float u_FogFar;\n    #endif\n#endif",inverse:"mat4 inverseMat4(mat4 m) {\n    float\n    a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n    a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n    a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n    a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    return mat4(\n        a11 * b11 - a12 * b10 + a13 * b09,\n        a02 * b10 - a01 * b11 - a03 * b09,\n        a31 * b05 - a32 * b04 + a33 * b03,\n        a22 * b04 - a21 * b05 - a23 * b03,\n        a12 * b08 - a10 * b11 - a13 * b07,\n        a00 * b11 - a02 * b08 + a03 * b07,\n        a32 * b02 - a30 * b05 - a33 * b01,\n        a20 * b05 - a22 * b02 + a23 * b01,\n        a10 * b10 - a11 * b08 + a13 * b06,\n        a01 * b08 - a00 * b10 - a03 * b06,\n        a30 * b04 - a31 * b02 + a33 * b00,\n        a21 * b02 - a20 * b04 - a23 * b00,\n        a11 * b07 - a10 * b09 - a12 * b06,\n        a00 * b09 - a01 * b07 + a02 * b06,\n        a31 * b01 - a30 * b03 - a32 * b00,\n        a20 * b03 - a21 * b01 + a22 * b00) / det;\n}",light_frag:"\n#if (defined(USE_PHONG) || defined(USE_PBR))\n    vec3 V = normalize(u_CameraPosition - v_modelPos);\n#endif\n#ifdef USE_PBR\n    #ifdef USE_PBR2\n        vec3 diffuseColor = outColor.xyz;\n        vec3 specularColor = specularFactor.xyz;\n        float roughness = max(1.0 - glossinessFactor, 0.0525);\n    #else\n        vec3 diffuseColor = outColor.xyz * (1.0 - metalnessFactor);\n        vec3 specularColor = mix(vec3(0.04), outColor.xyz, metalnessFactor);\n        float roughness = max(roughnessFactor, 0.0525);\n    #endif\n    vec3 dxy = max(abs(dFdx(geometryNormal)), abs(dFdy(geometryNormal)));\n    float geometryRoughness = max(max(dxy.x, dxy.y), dxy.z);\n    roughness += geometryRoughness;\n    roughness = min(roughness, 1.0);\n#else\n    vec3 diffuseColor = outColor.xyz;\n    #ifdef USE_PHONG\n        vec3 specularColor = u_SpecularColor.xyz;\n        float shininess = u_Specular;\n    #endif\n#endif\n#ifdef USE_LIGHT\n    vec3 L;\n    float falloff;\n    float dotNL;\n    vec3 irradiance;\n    #if NUM_DIR_LIGHTS > 0\n        #pragma unroll_loop_start\n        for (int i = 0; i < NUM_DIR_LIGHTS; i++) {\n            L = normalize(-u_Directional[i].direction);\n            falloff = 1.0;\n            #if defined(USE_SHADOW) && (UNROLLED_LOOP_INDEX < NUM_DIR_SHADOWS)\n                #ifdef USE_PCSS_SOFT_SHADOW\n                    falloff *= getShadowWithPCSS(directionalDepthMap[i], directionalShadowMap[i], vDirectionalShadowCoord[i], u_DirectionalShadow[i].shadowMapSize, u_DirectionalShadow[i].shadowBias, u_DirectionalShadow[i].shadowParams);\n                #else\n                    falloff *= getShadow(directionalShadowMap[i], vDirectionalShadowCoord[i], u_DirectionalShadow[i].shadowMapSize, u_DirectionalShadow[i].shadowBias, u_DirectionalShadow[i].shadowParams);\n                #endif\n            #endif\n            dotNL = saturate(dot(N, L));\n            irradiance = u_Directional[i].color * falloff * dotNL * PI;\n            reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert(diffuseColor);\n            #ifdef USE_PHONG\n                reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong(specularColor, N, L, V, shininess) * specularStrength;\n            #endif\n            #ifdef USE_PBR\n                reflectedLight.directSpecular += irradiance * BRDF_Specular_GGX(specularColor, N, L, V, roughness);\n            #endif\n        }\n        #pragma unroll_loop_end\n    #endif\n    #if NUM_POINT_LIGHTS > 0\n        vec3 worldV;\n        #pragma unroll_loop_start\n        for (int i = 0; i < NUM_POINT_LIGHTS; i++) {\n            worldV = v_modelPos - u_Point[i].position;\n            L = -worldV;\n            falloff = pow(clamp(1. - length(L) / u_Point[i].distance, 0.0, 1.0), u_Point[i].decay);\n            L = normalize(L);\n            #if defined(USE_SHADOW) && (UNROLLED_LOOP_INDEX < NUM_POINT_SHADOWS)\n                falloff *= getPointShadow(pointShadowMap[i], vPointShadowCoord[i], u_PointShadow[i].shadowMapSize, u_PointShadow[i].shadowBias, u_PointShadow[i].shadowParams, u_PointShadow[i].shadowCameraRange);\n            #endif\n            dotNL = saturate(dot(N, L));\n            irradiance = u_Point[i].color * falloff * dotNL * PI;\n            reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert(diffuseColor);\n            #ifdef USE_PHONG\n                reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong(specularColor, N, L, V, shininess) * specularStrength;\n            #endif\n            #ifdef USE_PBR\n                reflectedLight.directSpecular += irradiance * BRDF_Specular_GGX(specularColor, N, L, V, roughness);\n            #endif\n        }\n        #pragma unroll_loop_end\n    #endif\n    #if NUM_SPOT_LIGHTS > 0\n        float lightDistance;\n        float angleCos;\n        #pragma unroll_loop_start\n        for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {\n            L = u_Spot[i].position - v_modelPos;\n            lightDistance = length(L);\n            L = normalize(L);\n            angleCos = dot(L, -normalize(u_Spot[i].direction));\n            falloff = smoothstep(u_Spot[i].coneCos, u_Spot[i].penumbraCos, angleCos);\n            falloff *= pow(clamp(1. - lightDistance / u_Spot[i].distance, 0.0, 1.0), u_Spot[i].decay);\n            #if defined(USE_SHADOW) && (UNROLLED_LOOP_INDEX < NUM_SPOT_SHADOWS)\n                #ifdef USE_PCSS_SOFT_SHADOW\n                    falloff *= getShadowWithPCSS(spotDepthMap[i], spotShadowMap[i], vSpotShadowCoord[i], u_SpotShadow[i].shadowMapSize, u_SpotShadow[i].shadowBias, u_SpotShadow[i].shadowParams);\n                #else\n                    falloff *= getShadow(spotShadowMap[i], vSpotShadowCoord[i], u_SpotShadow[i].shadowMapSize, u_SpotShadow[i].shadowBias, u_SpotShadow[i].shadowParams);\n                #endif\n            #endif\n            dotNL = saturate(dot(N, L));\n            irradiance = u_Spot[i].color * falloff * dotNL * PI;\n            reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert(diffuseColor);\n            #ifdef USE_PHONG\n                reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong(specularColor, N, L, V, shininess) * specularStrength;\n            #endif\n            #ifdef USE_PBR\n                reflectedLight.directSpecular += irradiance * BRDF_Specular_GGX(specularColor, N, L, V, roughness);\n            #endif\n        }\n        #pragma unroll_loop_end\n    #endif\n    vec3 iblIrradiance = vec3(0., 0., 0.);\n    vec3 indirectIrradiance = vec3(0., 0., 0.);\n    vec3 indirectRadiance = vec3(0., 0., 0.);\n    #ifdef USE_AMBIENT_LIGHT\n        indirectIrradiance += u_AmbientLightColor * PI;\n    #endif\n    #if NUM_HEMI_LIGHTS > 0\n        float hemiDiffuseWeight;\n        #pragma unroll_loop_start\n        for (int i = 0; i < NUM_HEMI_LIGHTS; i++) {\n            L = normalize(u_Hemi[i].direction);\n            dotNL = dot(N, L);\n            hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n            indirectIrradiance += mix(u_Hemi[i].groundColor, u_Hemi[i].skyColor, hemiDiffuseWeight) * PI;\n        }\n        #pragma unroll_loop_end\n    #endif\n    #if defined(USE_ENV_MAP) && defined(USE_PBR)\n        vec3 envDir;\n        #ifdef USE_VERTEX_ENVDIR\n            envDir = v_EnvDir;\n        #else\n            envDir = reflect(normalize(v_modelPos - u_CameraPosition), N);\n        #endif\n        iblIrradiance += getLightProbeIndirectIrradiance(maxMipLevel, N);\n        indirectRadiance += getLightProbeIndirectRadiance(GGXRoughnessToBlinnExponent(roughness), maxMipLevel, envDir);\n    #endif\n    reflectedLight.indirectDiffuse += indirectIrradiance * BRDF_Diffuse_Lambert(diffuseColor);\n    #if defined(USE_ENV_MAP) && defined(USE_PBR)\n        float clearcoatDHR = 0.0;\n        float clearcoatInv = 1.0 - clearcoatDHR;\n        vec3 singleScattering = vec3(0.0);\n\t    vec3 multiScattering = vec3(0.0);\n        vec3 cosineWeightedIrradiance = iblIrradiance * RECIPROCAL_PI;\n        BRDF_Specular_Multiscattering_Environment(N, V, specularColor, roughness, singleScattering, multiScattering);\n        vec3 diffuse = diffuseColor * (1.0 - (singleScattering + multiScattering));\n        reflectedLight.indirectSpecular += clearcoatInv * indirectRadiance * singleScattering;\n        reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n        reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n    #endif\n#endif",light_pars_frag:"#ifdef USE_AMBIENT_LIGHT\n    uniform vec3 u_AmbientLightColor;\n#endif\n#if NUM_HEMI_LIGHTS > 0\n    struct HemisphereLight {\n        vec3 direction;\n        vec3 skyColor;\n\t\tvec3 groundColor;\n    };\n    uniform HemisphereLight u_Hemi[NUM_HEMI_LIGHTS];\n#endif\n#if NUM_DIR_LIGHTS > 0\n    struct DirectLight {\n        vec3 direction;\n        vec3 color;\n    };\n    uniform DirectLight u_Directional[NUM_DIR_LIGHTS];\n#endif\n#if NUM_POINT_LIGHTS > 0\n    struct PointLight {\n        vec3 position;\n        vec3 color;\n        float distance;\n        float decay;\n    };\n    uniform PointLight u_Point[NUM_POINT_LIGHTS];\n#endif\n#if NUM_SPOT_LIGHTS > 0\n    struct SpotLight {\n        vec3 position;\n        vec3 color;\n        float distance;\n        float decay;\n        float coneCos;\n        float penumbraCos;\n        vec3 direction;\n    };\n    uniform SpotLight u_Spot[NUM_SPOT_LIGHTS];\n#endif\n#if defined(USE_PBR) && defined(USE_ENV_MAP)\n    vec3 getLightProbeIndirectIrradiance(const in int maxMIPLevel, const in vec3 N) {\n        vec3 coordVec = vec3(u_EnvMap_Flip * N.x, N.yz);\n    \t#ifdef TEXTURE_LOD_EXT\n    \t\tvec4 envMapColor = textureCubeLodEXT(envMap, coordVec, float(maxMIPLevel));\n    \t#else\n    \t\tvec4 envMapColor = textureCube(envMap, coordVec, float(maxMIPLevel));\n    \t#endif\n        envMapColor = envMapTexelToLinear(envMapColor);\n        return PI * envMapColor.rgb * u_EnvMap_Intensity * u_EnvMapLight_Intensity;\n    }\n    float getSpecularMIPLevel(const in float blinnShininessExponent, const in int maxMIPLevel) {\n    \tfloat maxMIPLevelScalar = float(maxMIPLevel);\n    \tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2(pow2(blinnShininessExponent) + 1.0);\n    \treturn clamp(desiredMIPLevel, 0.0, maxMIPLevelScalar);\n    }\n    vec3 getLightProbeIndirectRadiance(const in float blinnShininessExponent, const in int maxMIPLevel, const in vec3 envDir) {\n        float specularMIPLevel = getSpecularMIPLevel(blinnShininessExponent, maxMIPLevel);\n        vec3 coordVec = vec3(u_EnvMap_Flip * envDir.x, envDir.yz);\n        #ifdef TEXTURE_LOD_EXT\n    \t\tvec4 envMapColor = textureCubeLodEXT(envMap, coordVec, specularMIPLevel);\n    \t#else\n    \t\tvec4 envMapColor = textureCube(envMap, coordVec, specularMIPLevel);\n    \t#endif\n        envMapColor = envMapTexelToLinear(envMapColor);\n        return envMapColor.rgb * u_EnvMap_Intensity;\n    }\n    float computeSpecularOcclusion(const in float dotNV, const in float ambientOcclusion, const in float roughness) {\n    \treturn saturate(pow(dotNV + ambientOcclusion, exp2(-16.0 * roughness - 1.0)) - 1.0 + ambientOcclusion);\n    }\n#endif",alphamap_pars_frag:"#ifdef USE_ALPHA_MAP\n\tuniform sampler2D alphaMap;\n\tvarying vec2 vAlphaMapUV;\n#endif",alphamap_frag:"#ifdef USE_ALPHA_MAP\n\toutColor.a *= texture2D(alphaMap, vAlphaMapUV).g;\n#endif",alphamap_pars_vert:"#ifdef USE_ALPHA_MAP\n    uniform mat3 alphaMapUVTransform;\n\tvarying vec2 vAlphaMapUV;\n#endif",alphamap_vert:"#ifdef USE_ALPHA_MAP\n\t#if (USE_ALPHA_MAP == 2)\n        vAlphaMapUV = (alphaMapUVTransform * vec3(a_Uv2, 1.)).xy;\n    #else\n        vAlphaMapUV = (alphaMapUVTransform * vec3(a_Uv, 1.)).xy;\n    #endif\n#endif",normalMap_pars_frag:"#ifdef USE_NORMAL_MAP\n    #if !defined(USE_TANGENT) || defined(FLAT_SHADED)\n        #include <tsn>\n    #endif\n    uniform sampler2D normalMap;\n    uniform vec2 normalScale;\n#endif",normal_frag:"\n#ifdef FLAT_SHADED\n    vec3 fdx = vec3( dFdx( v_modelPos.x ), dFdx( v_modelPos.y ), dFdx( v_modelPos.z ) );\n    vec3 fdy = vec3( dFdy( v_modelPos.x ), dFdy( v_modelPos.y ), dFdy( v_modelPos.z ) );\n    vec3 N = normalize( cross( fdx, fdy ) );\n#else\n    vec3 N = normalize(v_Normal);\n    #ifdef DOUBLE_SIDED\n        N = N * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n    #endif  \n#endif\nvec3 geometryNormal = N;\n#ifdef USE_NORMAL_MAP\n    vec3 mapN = texture2D(normalMap, v_Uv).rgb * 2.0 - 1.0;\n    mapN.xy *= normalScale;\n    #if defined(USE_TANGENT) && !defined(FLAT_SHADED)\n        vec3 tangent = normalize(v_Tangent);\n        vec3 bitangent = normalize(v_Bitangent);\n        #ifdef DOUBLE_SIDED\n            tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n            bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n        #endif  \n        mat3 tspace = mat3(tangent, bitangent, N);\n    #else\n        mat3 tspace = tsn(N, v_modelPos, v_Uv);\n        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n    #endif\n    N = normalize(tspace * mapN);\n#elif defined(USE_BUMPMAP)\n    N = perturbNormalArb(v_modelPos, N, dHdxy_fwd(v_Uv));\n#endif",normal_pars_frag:"#ifndef FLAT_SHADED\n    varying vec3 v_Normal;\n    #ifdef USE_TANGENT\n        varying vec3 v_Tangent;\n\t\tvarying vec3 v_Bitangent;\n    #endif\n#endif",normal_pars_vert:"#ifndef FLAT_SHADED\n    varying vec3 v_Normal;\n    #ifdef USE_TANGENT\n        varying vec3 v_Tangent;\n\t\tvarying vec3 v_Bitangent;\n    #endif\n#endif",normal_vert:"#ifndef FLAT_SHADED\n    v_Normal = (transposeMat4(inverseMat4(u_Model)) * vec4(objectNormal, 0.0)).xyz;\n    #ifdef FLIP_SIDED\n    \tv_Normal = - v_Normal;\n    #endif\n    #ifdef USE_TANGENT\n        v_Tangent = (transposeMat4(inverseMat4(u_Model)) * vec4(objectTangent, 0.0)).xyz;\n        #ifdef FLIP_SIDED\n            v_Tangent = - v_Tangent;\n        #endif\n        v_Bitangent = normalize(cross(v_Normal, v_Tangent) * a_Tangent.w);\n    #endif\n#endif",packing:"const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n    vec4 r = vec4( fract( v * PackFactors ), v );\n    r.yzw -= r.xyz * ShiftRight8;    return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n    return dot( v, UnpackFactors );\n}",premultipliedAlpha_frag:"#ifdef USE_PREMULTIPLIED_ALPHA\n    gl_FragColor.rgb = gl_FragColor.rgb * gl_FragColor.a;\n#endif",pvm_vert:"vec4 worldPosition = u_Model * vec4(transformed, 1.0);\ngl_Position = u_ProjectionView * worldPosition;",dithering_frag:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_frag:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",shadow:"#ifdef USE_SHADOW_SAMPLER\n    float computeShadow(sampler2DShadow shadowMap, vec3 shadowCoord) {\n        return texture2D( shadowMap, shadowCoord );\n    }\n#else\n    float computeShadow(sampler2D shadowMap, vec3 shadowCoord) {\n        return step(shadowCoord.z, unpackRGBAToDepth(texture2D(shadowMap, shadowCoord.xy)));\n    }\n#endif\nfloat computeShadowWithPoissonSampling(sampler2DShadow shadowMap, vec3 shadowCoord, float texelSize) {\n    vec3 poissonDisk[4];\n    poissonDisk[0] = vec3(-0.94201624, -0.39906216, 0);\n    poissonDisk[1] = vec3(0.94558609, -0.76890725, 0);\n    poissonDisk[2] = vec3(-0.094184101, -0.92938870, 0);\n    poissonDisk[3] = vec3(0.34495938, 0.29387760, 0);\n    return computeShadow(shadowMap, shadowCoord + poissonDisk[0] * texelSize) * 0.25 +\n        computeShadow(shadowMap, shadowCoord + poissonDisk[1] * texelSize) * 0.25 +\n        computeShadow(shadowMap, shadowCoord + poissonDisk[2] * texelSize) * 0.25 +\n        computeShadow(shadowMap, shadowCoord + poissonDisk[3] * texelSize) * 0.25;\n}\nfloat computeShadowWithPCF1(sampler2DShadow shadowSampler, vec3 shadowCoord) {\n    return computeShadow(shadowSampler, shadowCoord);\n}\nfloat computeShadowWithPCF3(sampler2DShadow shadowSampler, vec3 shadowCoord, vec2 shadowMapSizeAndInverse) {\n    vec2 uv = shadowCoord.xy * shadowMapSizeAndInverse.x;    uv += 0.5;    vec2 st = fract(uv);    vec2 base_uv = floor(uv) - 0.5;    base_uv *= shadowMapSizeAndInverse.y;\n    vec2 uvw0 = 3. - 2. * st;\n    vec2 uvw1 = 1. + 2. * st;\n    vec2 u = vec2((2. - st.x) / uvw0.x - 1., st.x / uvw1.x + 1.) * shadowMapSizeAndInverse.y;\n    vec2 v = vec2((2. - st.y) / uvw0.y - 1., st.y / uvw1.y + 1.) * shadowMapSizeAndInverse.y;\n    float shadow = 0.;\n    shadow += uvw0.x * uvw0.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[0], v[0]), shadowCoord.z));\n    shadow += uvw1.x * uvw0.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[1], v[0]), shadowCoord.z));\n    shadow += uvw0.x * uvw1.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[0], v[1]), shadowCoord.z));\n    shadow += uvw1.x * uvw1.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[1], v[1]), shadowCoord.z));\n    shadow = shadow / 16.;\n    return shadow;\n}\nfloat computeShadowWithPCF5(sampler2DShadow shadowSampler, vec3 shadowCoord, vec2 shadowMapSizeAndInverse) {\n    vec2 uv = shadowCoord.xy * shadowMapSizeAndInverse.x;    uv += 0.5;    vec2 st = fract(uv);    vec2 base_uv = floor(uv) - 0.5;    base_uv *= shadowMapSizeAndInverse.y;\n    vec2 uvw0 = 4. - 3. * st;\n    vec2 uvw1 = vec2(7.);\n    vec2 uvw2 = 1. + 3. * st;\n    vec3 u = vec3((3. - 2. * st.x) / uvw0.x - 2., (3. + st.x) / uvw1.x, st.x / uvw2.x + 2.) * shadowMapSizeAndInverse.y;\n    vec3 v = vec3((3. - 2. * st.y) / uvw0.y - 2., (3. + st.y) / uvw1.y, st.y / uvw2.y + 2.) * shadowMapSizeAndInverse.y;\n    float shadow = 0.;\n    shadow += uvw0.x * uvw0.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[0], v[0]), shadowCoord.z));\n    shadow += uvw1.x * uvw0.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[1], v[0]), shadowCoord.z));\n    shadow += uvw2.x * uvw0.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[2], v[0]), shadowCoord.z));\n    shadow += uvw0.x * uvw1.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[0], v[1]), shadowCoord.z));\n    shadow += uvw1.x * uvw1.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[1], v[1]), shadowCoord.z));\n    shadow += uvw2.x * uvw1.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[2], v[1]), shadowCoord.z));\n    shadow += uvw0.x * uvw2.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[0], v[2]), shadowCoord.z));\n    shadow += uvw1.x * uvw2.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[1], v[2]), shadowCoord.z));\n    shadow += uvw2.x * uvw2.y * computeShadow(shadowSampler, vec3(base_uv.xy + vec2(u[2], v[2]), shadowCoord.z));\n    shadow = shadow / 144.;\n    return shadow;\n}\nfloat computeFallOff(float value, vec2 clipSpace, float frustumEdgeFalloff) {\n    float mask = smoothstep(1.0 - frustumEdgeFalloff, 1.00000012, clamp(dot(clipSpace, clipSpace), 0., 1.));\n    return mix(value, 1.0, mask);\n}\nfloat getShadow(sampler2DShadow shadowMap, vec4 shadowCoord, vec2 shadowMapSize, vec2 shadowBias, vec2 shadowParams) {\n    shadowCoord.xyz /= shadowCoord.w;\n    shadowCoord.z += shadowBias.x;\n    bvec4 inFrustumVec = bvec4 (shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0);\n    bool inFrustum = all(inFrustumVec);\n    bvec2 frustumTestVec = bvec2(inFrustum, shadowCoord.z <= 1.0);\n    bool frustumTest = all(frustumTestVec);\n    float shadow = 1.0;\n    if (frustumTest) {\n        #ifdef USE_HARD_SHADOW\n            shadow = computeShadow(shadowMap, shadowCoord.xyz);\n        #else\n            #ifdef USE_PCF3_SOFT_SHADOW\n                vec2 shadowMapSizeAndInverse = vec2(shadowMapSize.x, 1. / shadowMapSize.x);\n                shadow = computeShadowWithPCF3(shadowMap, shadowCoord.xyz, shadowMapSizeAndInverse);\n            #else\n                #ifdef USE_PCF5_SOFT_SHADOW\n                    vec2 shadowMapSizeAndInverse = vec2(shadowMapSize.x, 1. / shadowMapSize.x);\n                    shadow = computeShadowWithPCF5(shadowMap, shadowCoord.xyz, shadowMapSizeAndInverse);\n                #else\n                    float texelSize = shadowParams.x / shadowMapSize.x;\n                    shadow = computeShadowWithPoissonSampling(shadowMap, shadowCoord.xyz, texelSize);\n                #endif\n            #endif\n        #endif\n        shadow = computeFallOff(shadow, shadowCoord.xy * 2. - 1., shadowParams.y);\n    }\n    return shadow;\n}\nfloat textureCubeCompare(samplerCube depths, vec3 uv, float compare) {\n    return step(compare, unpackRGBAToDepth(textureCube(depths, uv)));\n}\nfloat getPointShadow(samplerCube shadowMap, vec4 shadowCoord, vec2 shadowMapSize, vec2 shadowBias, vec2 shadowParams, vec2 shadowCameraRange) {\n    vec3 V = shadowCoord.xyz;\n    float depth = (length(V) - shadowCameraRange.x) / (shadowCameraRange.y - shadowCameraRange.x);    depth += shadowBias.x;\n    #ifdef USE_HARD_SHADOW\n        return textureCubeCompare(shadowMap, normalize(V), depth);\n    #else\n        float texelSize = shadowParams.x / shadowMapSize.x;\n        vec3 poissonDisk[4];\n        poissonDisk[0] = vec3(-1.0, 1.0, -1.0);\n        poissonDisk[1] = vec3(1.0, -1.0, -1.0);\n        poissonDisk[2] = vec3(-1.0, -1.0, -1.0);\n        poissonDisk[3] = vec3(1.0, -1.0, 1.0);\n        return textureCubeCompare(shadowMap, normalize(V) + poissonDisk[0] * texelSize, depth) * 0.25 +\n            textureCubeCompare(shadowMap, normalize(V) + poissonDisk[1] * texelSize, depth) * 0.25 +\n            textureCubeCompare(shadowMap, normalize(V) + poissonDisk[2] * texelSize, depth) * 0.25 +\n            textureCubeCompare(shadowMap, normalize(V) + poissonDisk[3] * texelSize, depth) * 0.25;\n    #endif\n}\n#ifdef USE_PCSS_SOFT_SHADOW\n    const vec3 PoissonSamplers32[64] = vec3[64](\n        vec3(0.06407013, 0.05409927, 0.),\n        vec3(0.7366577, 0.5789394, 0.),\n        vec3(-0.6270542, -0.5320278, 0.),\n        vec3(-0.4096107, 0.8411095, 0.),\n        vec3(0.6849564, -0.4990818, 0.),\n        vec3(-0.874181, -0.04579735, 0.),\n        vec3(0.9989998, 0.0009880066, 0.),\n        vec3(-0.004920578, -0.9151649, 0.),\n        vec3(0.1805763, 0.9747483, 0.),\n        vec3(-0.2138451, 0.2635818, 0.),\n        vec3(0.109845, 0.3884785, 0.),\n        vec3(0.06876755, -0.3581074, 0.),\n        vec3(0.374073, -0.7661266, 0.),\n        vec3(0.3079132, -0.1216763, 0.),\n        vec3(-0.3794335, -0.8271583, 0.),\n        vec3(-0.203878, -0.07715034, 0.),\n        vec3(0.5912697, 0.1469799, 0.),\n        vec3(-0.88069, 0.3031784, 0.),\n        vec3(0.5040108, 0.8283722, 0.),\n        vec3(-0.5844124, 0.5494877, 0.),\n        vec3(0.6017799, -0.1726654, 0.),\n        vec3(-0.5554981, 0.1559997, 0.),\n        vec3(-0.3016369, -0.3900928, 0.),\n        vec3(-0.5550632, -0.1723762, 0.),\n        vec3(0.925029, 0.2995041, 0.),\n        vec3(-0.2473137, 0.5538505, 0.),\n        vec3(0.9183037, -0.2862392, 0.),\n        vec3(0.2469421, 0.6718712, 0.),\n        vec3(0.3916397, -0.4328209, 0.),\n        vec3(-0.03576927, -0.6220032, 0.),\n        vec3(-0.04661255, 0.7995201, 0.),\n        vec3(0.4402924, 0.3640312, 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.),\n        vec3(0., 0., 0.)\n    );\n    const vec3 PoissonSamplers64[64] = vec3[64](\n        vec3(-0.613392, 0.617481, 0.),\n        vec3(0.170019, -0.040254, 0.),\n        vec3(-0.299417, 0.791925, 0.),\n        vec3(0.645680, 0.493210, 0.),\n        vec3(-0.651784, 0.717887, 0.),\n        vec3(0.421003, 0.027070, 0.),\n        vec3(-0.817194, -0.271096, 0.),\n        vec3(-0.705374, -0.668203, 0.),\n        vec3(0.977050, -0.108615, 0.),\n        vec3(0.063326, 0.142369, 0.),\n        vec3(0.203528, 0.214331, 0.),\n        vec3(-0.667531, 0.326090, 0.),\n        vec3(-0.098422, -0.295755, 0.),\n        vec3(-0.885922, 0.215369, 0.),\n        vec3(0.566637, 0.605213, 0.),\n        vec3(0.039766, -0.396100, 0.),\n        vec3(0.751946, 0.453352, 0.),\n        vec3(0.078707, -0.715323, 0.),\n        vec3(-0.075838, -0.529344, 0.),\n        vec3(0.724479, -0.580798, 0.),\n        vec3(0.222999, -0.215125, 0.),\n        vec3(-0.467574, -0.405438, 0.),\n        vec3(-0.248268, -0.814753, 0.),\n        vec3(0.354411, -0.887570, 0.),\n        vec3(0.175817, 0.382366, 0.),\n        vec3(0.487472, -0.063082, 0.),\n        vec3(-0.084078, 0.898312, 0.),\n        vec3(0.488876, -0.783441, 0.),\n        vec3(0.470016, 0.217933, 0.),\n        vec3(-0.696890, -0.549791, 0.),\n        vec3(-0.149693, 0.605762, 0.),\n        vec3(0.034211, 0.979980, 0.),\n        vec3(0.503098, -0.308878, 0.),\n        vec3(-0.016205, -0.872921, 0.),\n        vec3(0.385784, -0.393902, 0.),\n        vec3(-0.146886, -0.859249, 0.),\n        vec3(0.643361, 0.164098, 0.),\n        vec3(0.634388, -0.049471, 0.),\n        vec3(-0.688894, 0.007843, 0.),\n        vec3(0.464034, -0.188818, 0.),\n        vec3(-0.440840, 0.137486, 0.),\n        vec3(0.364483, 0.511704, 0.),\n        vec3(0.034028, 0.325968, 0.),\n        vec3(0.099094, -0.308023, 0.),\n        vec3(0.693960, -0.366253, 0.),\n        vec3(0.678884, -0.204688, 0.),\n        vec3(0.001801, 0.780328, 0.),\n        vec3(0.145177, -0.898984, 0.),\n        vec3(0.062655, -0.611866, 0.),\n        vec3(0.315226, -0.604297, 0.),\n        vec3(-0.780145, 0.486251, 0.),\n        vec3(-0.371868, 0.882138, 0.),\n        vec3(0.200476, 0.494430, 0.),\n        vec3(-0.494552, -0.711051, 0.),\n        vec3(0.612476, 0.705252, 0.),\n        vec3(-0.578845, -0.768792, 0.),\n        vec3(-0.772454, -0.090976, 0.),\n        vec3(0.504440, 0.372295, 0.),\n        vec3(0.155736, 0.065157, 0.),\n        vec3(0.391522, 0.849605, 0.),\n        vec3(-0.620106, -0.328104, 0.),\n        vec3(0.789239, -0.419965, 0.),\n        vec3(-0.545396, 0.538133, 0.),\n        vec3(-0.178564, -0.596057, 0.)\n    );\n    float getRand(vec2 seed) {\n        return fract(sin(dot(seed.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    float computeShadowWithPCSS(sampler2D depthSampler, sampler2DShadow shadowSampler, vec3 shadowCoord, float shadowMapSizeInverse, float lightSizeUV, int searchTapCount, int pcfTapCount, vec3[64] poissonSamplers) {\n        float depthMetric = shadowCoord.z;\n        float blockerDepth = 0.0;\n        float sumBlockerDepth = 0.0;\n        float numBlocker = 0.0;\n        for (int i = 0; i < searchTapCount; i++) {\n            blockerDepth = unpackRGBAToDepth(texture(depthSampler, shadowCoord.xy + (lightSizeUV * shadowMapSizeInverse * PoissonSamplers32[i].xy)));\n            if (blockerDepth < depthMetric) {\n                sumBlockerDepth += blockerDepth;\n                numBlocker++;\n            }\n        }\n        if (numBlocker < 1.0) {\n            return 1.0;\n        }\n        float avgBlockerDepth = sumBlockerDepth / numBlocker;\n        float AAOffset = shadowMapSizeInverse * 10.;\n        float penumbraRatio = ((depthMetric - avgBlockerDepth) + AAOffset);\n        float filterRadius = penumbraRatio * lightSizeUV * shadowMapSizeInverse;\n        float random = getRand(shadowCoord.xy);        float rotationAngle = random * 3.1415926;\n        vec2 rotationVector = vec2(cos(rotationAngle), sin(rotationAngle));\n        float shadow = 0.;\n        for (int i = 0; i < pcfTapCount; i++) {\n            vec3 offset = poissonSamplers[i];\n            offset = vec3(offset.x * rotationVector.x - offset.y * rotationVector.y, offset.y * rotationVector.x + offset.x * rotationVector.y, 0.);\n            shadow += texture(shadowSampler, shadowCoord + offset * filterRadius);\n        }\n        shadow /= float(pcfTapCount);\n        shadow = mix(shadow, 1., depthMetric - avgBlockerDepth);\n        return shadow;\n    }\n    float getShadowWithPCSS(sampler2D depthSampler, sampler2DShadow shadowMap, vec4 shadowCoord, vec2 shadowMapSize, vec2 shadowBias, vec2 shadowParams) {\n        shadowCoord.xyz /= shadowCoord.w;\n        shadowCoord.z += shadowBias.x;\n        bvec4 inFrustumVec = bvec4 (shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0);\n        bool inFrustum = all(inFrustumVec);\n        bvec2 frustumTestVec = bvec2(inFrustum, shadowCoord.z <= 1.0);\n        bool frustumTest = all(frustumTestVec);\n        float shadow = 1.0;\n        if (frustumTest) {\n            #ifdef USE_PCSS16_SOFT_SHADOW\n                shadow = computeShadowWithPCSS(depthSampler, shadowMap, shadowCoord.xyz, 1. / shadowMapSize.x, 0.1 * shadowMapSize.x, 16, 16, PoissonSamplers32);\n            #else\n                #ifdef USE_PCSS32_SOFT_SHADOW\n                    shadow = computeShadowWithPCSS(depthSampler, shadowMap, shadowCoord.xyz, 1. / shadowMapSize.x, 0.1 * shadowMapSize.x, 16, 32, PoissonSamplers32);\n                #else\n                    shadow = computeShadowWithPCSS(depthSampler, shadowMap, shadowCoord.xyz, 1. / shadowMapSize.x, 0.1 * shadowMapSize.x, 32, 64, PoissonSamplers64);\n                #endif\n            #endif\n            shadow = computeFallOff(shadow, shadowCoord.xy * 2. - 1., shadowParams.y);\n        }\n        return shadow;\n    }\n#endif",shadowMap_frag:"#ifdef USE_SHADOW\n#endif",shadowMap_pars_frag:"#ifdef USE_SHADOW\n\t#if NUM_DIR_SHADOWS > 0\n\t\tuniform sampler2DShadow directionalShadowMap[NUM_DIR_SHADOWS];\n\t\tvarying vec4 vDirectionalShadowCoord[NUM_DIR_SHADOWS];\n\t\t#ifdef USE_PCSS_SOFT_SHADOW\n\t\t\tuniform sampler2D directionalDepthMap[NUM_DIR_SHADOWS];\n\t\t#endif\n\t\tstruct DirectLightShadow {\n\t\t\tvec2 shadowBias;\n\t\t\tvec2 shadowMapSize;\n\t\t\tvec2 shadowParams;\n\t\t};\n\t\tuniform DirectLightShadow u_DirectionalShadow[NUM_DIR_SHADOWS];\n\t#endif\n\t#if NUM_POINT_SHADOWS > 0\n\t\tuniform samplerCube pointShadowMap[NUM_POINT_SHADOWS];\n\t\tvarying vec4 vPointShadowCoord[NUM_POINT_SHADOWS];\n\t\tstruct PointLightShadow {\n\t\t\tvec2 shadowBias;\n\t\t\tvec2 shadowMapSize;\n\t\t\tvec2 shadowParams;\n\t\t\tvec2 shadowCameraRange;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow u_PointShadow[NUM_POINT_LIGHTS];\n\t#endif\n\t#if NUM_SPOT_SHADOWS > 0\n\t\tuniform sampler2DShadow spotShadowMap[NUM_SPOT_SHADOWS];\n\t\tvarying vec4 vSpotShadowCoord[NUM_SPOT_SHADOWS];\n\t\t#ifdef USE_PCSS_SOFT_SHADOW\n\t\t\tuniform sampler2D spotDepthMap[NUM_SPOT_SHADOWS];\n\t\t#endif\n\t\tstruct SpotLightShadow {\n\t\t\tvec2 shadowBias;\n\t\t\tvec2 shadowMapSize;\n\t\t\tvec2 shadowParams;\n\t\t};\n\t\tuniform SpotLightShadow u_SpotShadow[NUM_SPOT_LIGHTS];\n\t#endif\n\t#include <packing>\n\t#include <shadow>\n#endif",shadowMap_pars_vert:"#ifdef USE_SHADOW\n\t#if NUM_DIR_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[NUM_DIR_SHADOWS];\n\t\tvarying vec4 vDirectionalShadowCoord[NUM_DIR_SHADOWS];\n\t\tstruct DirectLightShadow {\n\t\t\tvec2 shadowBias;\n\t\t\tvec2 shadowMapSize;\n\t\t\tvec2 shadowParams;\n\t\t};\n\t\tuniform DirectLightShadow u_DirectionalShadow[NUM_DIR_SHADOWS];\n\t#endif\n\t#if NUM_POINT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[NUM_POINT_SHADOWS];\n\t\tvarying vec4 vPointShadowCoord[NUM_POINT_SHADOWS];\n\t\tstruct PointLightShadow {\n\t\t\tvec2 shadowBias;\n\t\t\tvec2 shadowMapSize;\n\t\t\tvec2 shadowParams;\n\t\t\tvec2 shadowCameraRange;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow u_PointShadow[NUM_POINT_LIGHTS];\n\t#endif\n\t#if NUM_SPOT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[NUM_SPOT_SHADOWS];\n\t\tvarying vec4 vSpotShadowCoord[NUM_SPOT_SHADOWS];\n\t\tstruct SpotLightShadow {\n\t\t\tvec2 shadowBias;\n\t\t\tvec2 shadowMapSize;\n\t\t\tvec2 shadowParams;\n\t\t};\n\t\tuniform SpotLightShadow u_SpotShadow[NUM_SPOT_LIGHTS];\n\t#endif\n#endif",shadowMap_vert:"\n#ifdef USE_SHADOW\n\t#if NUM_DIR_SHADOWS > 0 || NUM_POINT_SHADOWS > 0 || NUM_SPOT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = (transposeMat4(inverseMat4(u_Model)) * vec4(objectNormal, 0.0)).xyz;\n\t\tshadowWorldNormal = normalize(shadowWorldNormal);\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor (int i = 0; i < NUM_DIR_SHADOWS; i++) {\n\t\t\tshadowWorldPosition = worldPosition + vec4(shadowWorldNormal * u_DirectionalShadow[i].shadowBias[1], 0);\n\t\t\tvDirectionalShadowCoord[i] = directionalShadowMatrix[i] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor (int i = 0; i < NUM_POINT_SHADOWS; i++) {\n\t\t\tshadowWorldPosition = worldPosition + vec4(shadowWorldNormal * u_PointShadow[i].shadowBias[1], 0);\n\t\t\tvPointShadowCoord[i] = pointShadowMatrix[i] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor (int i = 0; i < NUM_SPOT_SHADOWS; i++) {\n\t\t\tshadowWorldPosition = worldPosition + vec4(shadowWorldNormal * u_SpotShadow[i].shadowBias[1], 0);\n\t\t\tvSpotShadowCoord[i] = spotShadowMatrix[i] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif",morphnormal_vert:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vert:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vert:"#ifdef USE_MORPHTARGETS\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n        transformed += morphTarget4 * morphTargetInfluences[ 4 ];\n        transformed += morphTarget5 * morphTargetInfluences[ 5 ];\n        transformed += morphTarget6 * morphTargetInfluences[ 6 ];\n        transformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",skinning_pars_vert:"#ifdef USE_SKINNING\n    attribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n    uniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n    #ifdef BONE_TEXTURE\n        uniform sampler2D boneTexture;\n        uniform int boneTextureSize;\n        mat4 getBoneMatrix( const in float i ) {\n            float j = i * 4.0;\n            float x = mod( j, float( boneTextureSize ) );\n            float y = floor( j / float( boneTextureSize ) );\n            float dx = 1.0 / float( boneTextureSize );\n            float dy = 1.0 / float( boneTextureSize );\n            y = dy * ( y + 0.5 );\n            vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n            vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n            vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n            vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n            mat4 bone = mat4( v1, v2, v3, v4 );\n            return bone;\n        }\n    #else\n        uniform mat4 boneMatrices[MAX_BONES];\n        mat4 getBoneMatrix(const in float i) {\n            mat4 bone = boneMatrices[int(i)];\n            return bone;\n        }\n    #endif\n#endif",skinning_vert:"#ifdef USE_SKINNING\n    mat4 boneMatX = getBoneMatrix( skinIndex.x );\n    mat4 boneMatY = getBoneMatrix( skinIndex.y );\n    mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n    mat4 boneMatW = getBoneMatrix( skinIndex.w );\n    vec4 skinVertex = bindMatrix * vec4(transformed, 1.0);\n    vec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned = bindMatrixInverse * skinned;\n    transformed = skinned.xyz / skinned.w;\n#endif",skinnormal_vert:"#ifdef USE_SKINNING\n    mat4 skinMatrix = mat4( 0.0 );\n    skinMatrix += skinWeight.x * boneMatX;\n    skinMatrix += skinWeight.y * boneMatY;\n    skinMatrix += skinWeight.z * boneMatZ;\n    skinMatrix += skinWeight.w * boneMatW;\n    skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n    objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n    #ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularMap_frag:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, v_Uv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularMap_pars_frag:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",transpose:"mat4 transposeMat4(mat4 inMatrix) {\n    vec4 i0 = inMatrix[0];\n    vec4 i1 = inMatrix[1];\n    vec4 i2 = inMatrix[2];\n    vec4 i3 = inMatrix[3];\n    mat4 outMatrix = mat4(\n        vec4(i0.x, i1.x, i2.x, i3.x),\n        vec4(i0.y, i1.y, i2.y, i3.y),\n        vec4(i0.z, i1.z, i2.z, i3.z),\n        vec4(i0.w, i1.w, i2.w, i3.w)\n    );\n    return outMatrix;\n}",tsn:"mat3 tsn(vec3 N, vec3 V, vec2 uv) {\n    vec3 q0 = vec3(dFdx(V.x), dFdx(V.y), dFdx(V.z));\n    vec3 q1 = vec3(dFdy(V.x), dFdy(V.y), dFdy(V.z));\n    vec2 st0 = dFdx( uv.st );\n    vec2 st1 = dFdy( uv.st );\n    float scale = sign( st1.t * st0.s - st0.t * st1.s );\n    vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n    vec3 T = normalize( ( -q0 * st1.s + q1 * st0.s ) * scale );\n    mat3 tsn = mat3( S, T, N );\n    return tsn;\n}",uv_pars_frag:"#ifdef USE_UV1\n    varying vec2 v_Uv;\n#endif\n#ifdef USE_UV2\n    varying vec2 v_Uv2;\n#endif",uv_pars_vert:"#if defined(USE_UV1) || defined(USE_UV2)\n    uniform mat3 uvTransform;\n#endif\n#ifdef USE_UV1\n    attribute vec2 a_Uv;\n    varying vec2 v_Uv;\n#endif\n#ifdef USE_UV2\n    attribute vec2 a_Uv2;\n    varying vec2 v_Uv2;\n#endif",uv_vert:"#ifdef USE_UV1\n    v_Uv = (uvTransform * vec3(a_Uv, 1.)).xy;\n#endif\n#ifdef USE_UV2\n    v_Uv2 = (uvTransform * vec3(a_Uv2, 1.)).xy;\n#endif",modelPos_pars_frag:"varying vec3 v_modelPos;",modelPos_pars_vert:"varying vec3 v_modelPos;",modelPos_vert:"\nv_modelPos = worldPosition.xyz;",logdepthbuf_frag:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_frag:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vert:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tuniform float logDepthCameraNear;\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t\tuniform float logDepthCameraNear;\n\t#endif\n#endif",logdepthbuf_vert:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w - logDepthCameraNear;\n\t\tvIsPerspective = float( isPerspectiveMatrix( u_Projection ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( u_Projection ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w - logDepthCameraNear + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif"};var sr="#define USE_PBR\n#include <common_vert>\n#include <normal_pars_vert>\n#include <uv_pars_vert>\n#include <color_pars_vert>\n#include <modelPos_pars_vert>\n#include <envMap_pars_vert>\n#include <aoMap_pars_vert>\n#include <alphamap_pars_vert>\n#include <emissiveMap_pars_vert>\n#include <shadowMap_pars_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\n#include <logdepthbuf_pars_vert>\nvoid main() {\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <morphnormal_vert>\n    #include <skinning_vert>\n    #include <skinnormal_vert>\n    #include <pvm_vert>\n    #include <normal_vert>\n    #include <logdepthbuf_vert>\n    #include <uv_vert>\n    #include <color_vert>\n    #include <modelPos_vert>\n    #include <envMap_vert>\n    #include <aoMap_vert>\n    #include <alphamap_vert>\n    #include <emissiveMap_vert>\n    #include <shadowMap_vert>\n}";const or={basic_frag:"#include <common_frag>\n#include <uv_pars_frag>\n#include <color_pars_frag>\n#include <diffuseMap_pars_frag>\n#include <alphamap_pars_frag>\n#include <modelPos_pars_frag>\n#if defined(USE_ENV_MAP) && !defined(USE_VERTEX_ENVDIR)\n    #include <normalMap_pars_frag>\n    #include <normal_pars_frag>    \n#endif\n#include <envMap_pars_frag>\n#include <aoMap_pars_frag>\n#include <fog_pars_frag>\n#include <logdepthbuf_pars_frag>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    #include <logdepthbuf_frag>\n    #include <begin_frag>\n    #include <color_frag>\n    #include <diffuseMap_frag>\n    #include <alphamap_frag>\n    #include <alphaTest_frag>\n    ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n    reflectedLight.indirectDiffuse += vec3(1.0);\n    #include <aoMap_frag>\n    reflectedLight.indirectDiffuse *= outColor.xyz;\n    outColor.xyz = reflectedLight.indirectDiffuse;\n    #if defined(USE_ENV_MAP) && !defined(USE_VERTEX_ENVDIR)\n        #include <normal_frag>\n    #endif\n    #include <envMap_frag>\n    #include <end_frag>\n    #include <encodings_frag>\n    #include <premultipliedAlpha_frag>\n    #include <fog_frag>\n}",basic_vert:"#include <common_vert>\n#include <uv_pars_vert>\n#include <color_pars_vert>\n#include <modelPos_pars_vert>\n#if defined(USE_ENV_MAP) && !defined(USE_VERTEX_ENVDIR)\n    #include <normal_pars_vert>\n#endif\n#include <envMap_pars_vert>\n#include <aoMap_pars_vert>\n#include <alphamap_pars_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\n#include <logdepthbuf_pars_vert>\nvoid main() {\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <skinning_vert>\n    #include <pvm_vert>\n    #include <logdepthbuf_vert>\n    #include <uv_vert>\n    #include <color_vert>\n    #include <modelPos_vert>\n    #ifdef USE_ENV_MAP\n        #include <morphnormal_vert>\n        #include <skinnormal_vert>\n        #ifndef USE_VERTEX_ENVDIR\n            #include <normal_vert>\n        #endif  \n    #endif\n    #include <envMap_vert>\n    #include <aoMap_vert>\n    #include <alphamap_vert>\n}",depth_frag:"#include <common_frag>\n#include <diffuseMap_pars_frag>\n#include <modelPos_pars_frag>\n#include <uv_pars_frag>\n#include <packing>\n#include <logdepthbuf_pars_frag>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    #if defined(USE_DIFFUSE_MAP) && defined(ALPHATEST)\n        vec4 texelColor = texture2D( diffuseMap, v_Uv );\n        float alpha = texelColor.a * u_Opacity;\n        if(alpha < ALPHATEST) discard;\n    #endif\n    #include <logdepthbuf_frag>\n    \n    #ifdef DEPTH_PACKING_RGBA\n        gl_FragColor = packDepthToRGBA(gl_FragCoord.z);\n    #else\n        gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), u_Opacity );\n    #endif\n}",depth_vert:"#include <common_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\n#include <uv_pars_vert>\n#include <modelPos_pars_vert>\n#include <logdepthbuf_pars_vert>\nvoid main() {\n    #include <uv_vert>\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <skinning_vert>\n    #include <pvm_vert>\n    #include <logdepthbuf_vert>\n    #include <modelPos_vert>\n}",distance_frag:"#include <common_frag>\nuniform float nearDistance;\nuniform float farDistance;\n#include <modelPos_pars_frag>\n#include <packing>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    \n    float dist = length( v_modelPos - u_CameraPosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n    gl_FragColor = packDepthToRGBA(dist);\n}",distance_vert:"#include <common_vert>\n#include <modelPos_pars_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\nvoid main() {\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <skinning_vert>\n    #include <pvm_vert>\n    #include <modelPos_vert>\n}",lambert_frag:"#define USE_LAMBERT\n#include <common_frag>\n#include <dithering_pars_frag>\nuniform vec3 emissive;\n#include <uv_pars_frag>\n#include <color_pars_frag>\n#include <diffuseMap_pars_frag>\n#include <normalMap_pars_frag>\n#include <alphamap_pars_frag>\n#include <bumpMap_pars_frag>\n#include <light_pars_frag>\n#include <normal_pars_frag>\n#include <modelPos_pars_frag>\n#include <bsdfs>\n#include <envMap_pars_frag>\n#include <aoMap_pars_frag>\n#include <shadowMap_pars_frag>\n#include <fog_pars_frag>\n#include <emissiveMap_pars_frag>\n#include <logdepthbuf_pars_frag>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    #include <logdepthbuf_frag>\n    #include <begin_frag>\n    #include <color_frag>\n    #include <diffuseMap_frag>\n    #include <alphamap_frag>\n    #include <alphaTest_frag>\n    #include <normal_frag>\n    ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n    #include <light_frag>\n    #include <aoMap_frag>\n    outColor.xyz = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n    #include <envMap_frag>\n    #include <shadowMap_frag>\n    vec3 totalEmissiveRadiance = emissive;\n    #include <emissiveMap_frag>\n    outColor.xyz += totalEmissiveRadiance;\n    #include <end_frag>\n    #include <encodings_frag>\n    #include <premultipliedAlpha_frag>\n    #include <fog_frag>\n    #include <dithering_frag>\n}",lambert_vert:"#define USE_LAMBERT\n#include <common_vert>\n#include <normal_pars_vert>\n#include <uv_pars_vert>\n#include <color_pars_vert>\n#include <modelPos_pars_vert>\n#include <envMap_pars_vert>\n#include <aoMap_pars_vert>\n#include <alphamap_pars_vert>\n#include <emissiveMap_pars_vert>\n#include <shadowMap_pars_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\n#include <logdepthbuf_pars_vert>\nvoid main() {\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <morphnormal_vert>\n    #include <skinning_vert>\n    #include <skinnormal_vert>\n    #include <pvm_vert>\n    #include <normal_vert>\n    #include <logdepthbuf_vert>\n    #include <uv_vert>\n    #include <color_vert>\n    #include <modelPos_vert>\n    #include <envMap_vert>\n    #include <aoMap_vert>\n    #include <alphamap_vert>\n    #include <emissiveMap_vert>\n    #include <shadowMap_vert>\n}",normaldepth_frag:"#include <common_frag>\n#include <diffuseMap_pars_frag>\n#include <uv_pars_frag>\n#include <packing>\n#include <normal_pars_frag>\n#include <logdepthbuf_pars_frag>\nvoid main() {\n    #if defined(USE_DIFFUSE_MAP) && defined(ALPHATEST)\n        vec4 texelColor = texture2D( diffuseMap, v_Uv );\n        float alpha = texelColor.a * u_Opacity;\n        if(alpha < ALPHATEST) discard;\n    #endif\n    #include <logdepthbuf_frag>\n    vec4 packedNormalDepth;\n    packedNormalDepth.xyz = normalize(v_Normal) * 0.5 + 0.5;\n    packedNormalDepth.w = gl_FragCoord.z;\n    gl_FragColor = packedNormalDepth;\n}",normaldepth_vert:"#include <common_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\n#include <normal_pars_vert>\n#include <uv_pars_vert>\n#include <logdepthbuf_pars_vert>\nvoid main() {\n    #include <uv_vert>\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <morphnormal_vert>\n    #include <skinning_vert>\n    #include <skinnormal_vert>\n    #include <normal_vert>\n    #include <pvm_vert>\n    #include <logdepthbuf_vert>\n}",pbr_frag:"#define USE_PBR\n#include <common_frag>\n#include <dithering_pars_frag>\nuniform float u_Metalness;\n#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif\nuniform float u_Roughness;\n#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif\nuniform vec3 emissive;\n#include <uv_pars_frag>\n#include <color_pars_frag>\n#include <diffuseMap_pars_frag>\n#include <alphamap_pars_frag>\n#include <normalMap_pars_frag>\n#include <bumpMap_pars_frag>\n#include <envMap_pars_frag>\n#include <aoMap_pars_frag>\n#include <light_pars_frag>\n#include <normal_pars_frag>\n#include <modelPos_pars_frag>\n#include <bsdfs>\n#include <shadowMap_pars_frag>\n#include <fog_pars_frag>\n#include <emissiveMap_pars_frag>\n#include <logdepthbuf_pars_frag>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    #include <logdepthbuf_frag>\n    #include <begin_frag>\n    #include <color_frag>\n    #include <diffuseMap_frag>\n    #include <alphamap_frag>\n    #include <alphaTest_frag>\n    #include <normal_frag>\n    float roughnessFactor = u_Roughness;\n    #ifdef USE_ROUGHNESSMAP\n    \tvec4 texelRoughness = texture2D( roughnessMap, v_Uv );\n    \troughnessFactor *= texelRoughness.g;\n    #endif\n    float metalnessFactor = u_Metalness;\n    #ifdef USE_METALNESSMAP\n    \tvec4 texelMetalness = texture2D( metalnessMap, v_Uv );\n    \tmetalnessFactor *= texelMetalness.b;\n    #endif\n    ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n    #include <light_frag>\n    #include <aoMap_frag>\n    outColor.xyz = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n    #include <shadowMap_frag>\n    vec3 totalEmissiveRadiance = emissive;\n    #include <emissiveMap_frag>\n    outColor.xyz += totalEmissiveRadiance;\n    #include <end_frag>\n    #include <encodings_frag>\n    #include <premultipliedAlpha_frag>\n    #include <fog_frag>\n    #include <dithering_frag>\n}",pbr_vert:sr,pbr2_frag:"#define USE_PBR\n#define USE_PBR2\n#include <common_frag>\n#include <dithering_pars_frag>\nuniform vec3 u_SpecularColor;\n#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif\nuniform float glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif\nuniform vec3 emissive;\n#include <uv_pars_frag>\n#include <color_pars_frag>\n#include <diffuseMap_pars_frag>\n#include <alphamap_pars_frag>\n#include <normalMap_pars_frag>\n#include <bumpMap_pars_frag>\n#include <envMap_pars_frag>\n#include <aoMap_pars_frag>\n#include <light_pars_frag>\n#include <normal_pars_frag>\n#include <modelPos_pars_frag>\n#include <bsdfs>\n#include <shadowMap_pars_frag>\n#include <fog_pars_frag>\n#include <emissiveMap_pars_frag>\n#include <logdepthbuf_pars_frag>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    #include <logdepthbuf_frag>\n    #include <begin_frag>\n    #include <color_frag>\n    #include <diffuseMap_frag>\n    #include <alphamap_frag>\n    #include <alphaTest_frag>\n    #include <normal_frag>\n    vec3 specularFactor = u_SpecularColor;\n    #ifdef USE_SPECULARMAP\n        vec4 texelSpecular = texture2D(specularMap, v_Uv);\n        texelSpecular = sRGBToLinear(texelSpecular);\n        specularFactor *= texelSpecular.rgb;\n    #endif\n    float glossinessFactor = glossiness;\n    #ifdef USE_GLOSSINESSMAP\n        vec4 texelGlossiness = texture2D(glossinessMap, v_Uv);\n        glossinessFactor *= texelGlossiness.a;\n    #endif\n    ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n    #include <light_frag>\n    #include <aoMap_frag>\n    outColor.xyz = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n    #include <shadowMap_frag>\n    vec3 totalEmissiveRadiance = emissive;\n    #include <emissiveMap_frag>\n    outColor.xyz += totalEmissiveRadiance;\n    #include <end_frag>\n    #include <encodings_frag>\n    #include <premultipliedAlpha_frag>\n    #include <fog_frag>\n    #include <dithering_frag>\n}",pbr2_vert:sr,matcap_frag:"#define MATCAP\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common_frag>\n#include <dithering_pars_frag>\n#include <uv_pars_frag>\n#include <color_pars_frag>\n#include <diffuseMap_pars_frag>\n#include <alphamap_pars_frag>\n#include <normalMap_pars_frag>\n#include <modelPos_pars_frag>\n#include <bumpMap_pars_frag>\n#include <normal_pars_frag>\n#include <fog_pars_frag>\n#include <logdepthbuf_pars_frag>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    #include <logdepthbuf_frag>\n    #include <begin_frag>\n    #include <color_frag>\n    #include <diffuseMap_frag>\n    #include <alphamap_frag>\n    #include <alphaTest_frag>\n    #include <normal_frag>\n    vec3 viewDir = normalize(vViewPosition);\n\tvec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n\tvec3 y = cross(viewDir, x);\n    vec3 viewN = (u_View * vec4(N, 0.0)).xyz;\n\tvec2 uv = vec2(dot(x, viewN), dot(y, viewN)) * 0.495 + 0.5;\n    #ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D(matcap, uv);\n\t\tmatcapColor = matcapTexelToLinear(matcapColor);\n\t#else\n\t\tvec4 matcapColor = vec4(1.0);\n\t#endif\n\toutColor.rgb *= matcapColor.rgb;\n    #include <end_frag>\n    #include <encodings_frag>\n    #include <premultipliedAlpha_frag>\n    #include <fog_frag>\n    #include <dithering_frag>\n}",matcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common_vert>\n#include <normal_pars_vert>\n#include <uv_pars_vert>\n#include <color_pars_vert>\n#include <alphamap_pars_vert>\n#include <modelPos_pars_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\n#include <logdepthbuf_pars_vert>\nvoid main() {\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <morphnormal_vert>\n    #include <skinning_vert>\n    #include <skinnormal_vert>\n    #include <pvm_vert>\n    #include <normal_vert>\n    #include <logdepthbuf_vert>\n    #include <uv_vert>\n    #include <color_vert>\n    #include <alphamap_vert>\n    #include <modelPos_vert>\n    vec4 mvPosition = u_View * worldPosition;\n    vViewPosition = - mvPosition.xyz;\n}",phong_frag:"#define USE_PHONG\n#include <common_frag>\n#include <dithering_pars_frag>\nuniform float u_Specular;\nuniform vec3 u_SpecularColor;\n#include <specularMap_pars_frag>\nuniform vec3 emissive;\n#include <uv_pars_frag>\n#include <color_pars_frag>\n#include <diffuseMap_pars_frag>\n#include <alphamap_pars_frag>\n#include <normalMap_pars_frag>\n#include <bumpMap_pars_frag>\n#include <light_pars_frag>\n#include <normal_pars_frag>\n#include <modelPos_pars_frag>\n#include <bsdfs>\n#include <envMap_pars_frag>\n#include <aoMap_pars_frag>\n#include <shadowMap_pars_frag>\n#include <fog_pars_frag>\n#include <emissiveMap_pars_frag>\n#include <logdepthbuf_pars_frag>\n#include <clippingPlanes_pars_frag>\nvoid main() {\n    #include <clippingPlanes_frag>\n    #include <logdepthbuf_frag>\n    #include <begin_frag>\n    #include <color_frag>\n    #include <diffuseMap_frag>\n    #include <alphamap_frag>\n    #include <alphaTest_frag>\n    #include <normal_frag>\n    #include <specularMap_frag>\n    ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n    #include <light_frag>\n    #include <aoMap_frag>\n    outColor.xyz = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n    #include <envMap_frag>\n    #include <shadowMap_frag>\n    vec3 totalEmissiveRadiance = emissive;\n    #include <emissiveMap_frag>\n    outColor.xyz += totalEmissiveRadiance;\n    #include <end_frag>\n    #include <encodings_frag>\n    #include <premultipliedAlpha_frag>\n    #include <fog_frag>\n    #include <dithering_frag>\n}",phong_vert:"#define USE_PHONG\n#include <common_vert>\n#include <normal_pars_vert>\n#include <uv_pars_vert>\n#include <color_pars_vert>\n#include <modelPos_pars_vert>\n#include <envMap_pars_vert>\n#include <aoMap_pars_vert>\n#include <alphamap_pars_vert>\n#include <emissiveMap_pars_vert>\n#include <shadowMap_pars_vert>\n#include <morphtarget_pars_vert>\n#include <skinning_pars_vert>\n#include <logdepthbuf_pars_vert>\nvoid main() {\n    #include <begin_vert>\n    #include <morphtarget_vert>\n    #include <morphnormal_vert>\n    #include <skinning_vert>\n    #include <skinnormal_vert>\n    #include <pvm_vert>\n    #include <normal_vert>\n    #include <logdepthbuf_vert>\n    #include <uv_vert>\n    #include <color_vert>\n    #include <modelPos_vert>\n    #include <envMap_vert>\n    #include <aoMap_vert>\n    #include <alphamap_vert>\n    #include <emissiveMap_vert>\n    #include <shadowMap_vert>\n}",point_frag:"#include <common_frag>\n#include <color_pars_frag>\n#include <diffuseMap_pars_frag>\n#include <fog_pars_frag>\n#include <logdepthbuf_pars_frag>\nvoid main() {\n    #include <begin_frag>\n    #include <color_frag>\n    #include <logdepthbuf_frag>\n    #ifdef USE_DIFFUSE_MAP\n        outColor *= texture2D(diffuseMap, vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y));\n    #endif\n    #include <end_frag>\n    #include <encodings_frag>\n    #include <premultipliedAlpha_frag>\n    #include <fog_frag>\n}",point_vert:"#include <common_vert>\n#include <color_pars_vert>\n#include <logdepthbuf_pars_vert>\nuniform float u_PointSize;\nuniform float u_PointScale;\nvoid main() {\n    #include <begin_vert>\n    #include <pvm_vert>\n    #include <color_vert>\n    vec4 mvPosition = u_View * u_Model * vec4(transformed, 1.0);\n    #ifdef USE_SIZEATTENUATION\n        gl_PointSize = u_PointSize * ( u_PointScale / - mvPosition.z );\n    #else\n        gl_PointSize = u_PointSize;\n    #endif\n    #include <logdepthbuf_vert>\n}"};class lr{constructor(e,t,n){this._gl=e,this._state=t,this._capabilities=n,this._programs=[]}getProgram(e,t,n){const r=this._programs,i=function(e,t,n,r,i){const a=n.acceptLight?i.lights:null,s=n.fog?i.scene.fog:null,o=void 0!==n.envMap?n.envMap||i.scene.environment:null,l=i.scene.logarithmicDepthBuffer,u=i.scene.disableShadowSampler,c=n.clippingPlanes&&n.clippingPlanes.length>0?n.clippingPlanes.length:i.scene.numClippingPlanes,h={};h.shaderName=n.type===p&&n.shaderName?n.shaderName:n.type,h.version=t.version,h.precision=n.precision||t.maxPrecision,h.useStandardDerivatives=t.version>=2||!!t.getExtension("OES_standard_derivatives")||!!t.getExtension("GL_OES_standard_derivatives"),h.useShaderTextureLOD=t.version>=2||!!t.getExtension("EXT_shader_texture_lod"),h.useDiffuseMap=n.diffuseMap?n.diffuseMapCoord+1:0,h.useAlphaMap=n.alphaMap?n.alphaMapCoord+1:0,h.useEmissiveMap=n.emissiveMap?n.emissiveMapCoord+1:0,h.useAOMap=n.aoMap?n.aoMapCoord+1:0,h.useNormalMap=!!n.normalMap,h.useBumpMap=!!n.bumpMap,h.useSpecularMap=!!n.specularMap,h.useRoughnessMap=!!n.roughnessMap,h.useMetalnessMap=!!n.metalnessMap,h.useGlossinessMap=!!n.glossinessMap,h.useMatcap=!!n.matcap,h.useEnvMap=!!o,h.envMapCombine=n.envMapCombine,h.useUv1=1===h.useDiffuseMap||1===h.useAlphaMap||1===h.useEmissiveMap||1===h.useAOMap||h.useNormalMap||h.useBumpMap||h.useSpecularMap||h.useRoughnessMap||h.useMetalnessMap||h.useGlossinessMap,h.useUv2=2===h.useDiffuseMap||2===h.useAlphaMap||2===h.useEmissiveMap||2===h.useAOMap,h.useAmbientLight=!!a&&a.useAmbient,h.hemisphereLightNum=a?a.hemisNum:0,h.directLightNum=a?a.directsNum:0,h.pointLightNum=a?a.pointsNum:0,h.spotLightNum=a?a.spotsNum:0,h.directShadowNum=r.receiveShadow&&a?a.directShadowNum:0,h.pointShadowNum=r.receiveShadow&&a?a.pointShadowNum:0,h.spotShadowNum=r.receiveShadow&&a?a.spotShadowNum:0,h.useShadow=r.receiveShadow&&!!a&&a.shadowsNum>0,h.useShadowSampler=t.version>=2&&!u,h.shadowType=h.useShadowSampler?r.shadowType:q,h.dithering=n.dithering;const d=e.currentRenderTarget;h.gammaFactor=i.gammaFactor,h.outputEncoding=d.texture?ur(d.texture):i.outputEncoding,h.diffuseMapEncoding=ur(n.diffuseMap||n.cubeMap),h.envMapEncoding=ur(o),h.emissiveMapEncoding=ur(n.emissiveMap),h.matcapEncoding=ur(n.matcap),h.alphaTest=n.alphaTest,h.premultipliedAlpha=n.premultipliedAlpha,h.useVertexColors=n.vertexColors,h.useVertexTangents=!!n.normalMap&&n.vertexTangents,h.numClippingPlanes=c,h.flatShading=n.shading===S,h.fog=!!s,h.fogExp2=!!s&&s.isFogExp2,h.sizeAttenuation=n.sizeAttenuation,h.doubleSided=n.side===A,h.flipSided=n.side===w,h.packDepthToRGBA=n.packToRGBA,h.logarithmicDepthBuffer=!!l,h.rendererExtensionFragDepth=t.version>=2||!!t.getExtension("EXT_frag_depth"),h.morphTargets=!!r.morphTargetInfluences,h.morphNormals=!!r.morphTargetInfluences&&r.geometry.morphAttributes.normal;const f=r.isSkinnedMesh&&r.skeleton,m=t.maxVertexUniformVectors,g=t.maxVertexTextures>0&&(!!t.getExtension("OES_texture_float")||t.version>=2);let _=0;return g?_=1024:(_=r.skeleton?r.skeleton.bones.length:0,16*_>m&&(console.warn("Program: too many bones ("+_+"), current cpu only support "+Math.floor(m/16)+" bones!!"),_=Math.floor(m/16))),h.useSkinning=f,h.bonesNum=_,h.useVertexTexture=g,h}(this._state,this._capabilities,e,t,n),a=function(e,t){let n="";for(const t in e)n+=e[t]+"_";for(const e in t.defines)n+=e+"_"+t.defines[e]+"_";return t.type!==p||t.shaderName||(n+=t.vertexShader,n+=t.fragmentShader),n}(i,e);let s;for(let e=0,t=r.length;e<t;e++){const t=r[e];if(t.code===a){s=t,++s.usedTimes;break}}if(void 0===s){const t=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(e.defines),n=or[e.type+"_vert"]||e.vertexShader||or.basic_vert,o=or[e.type+"_frag"]||e.fragmentShader||or.basic_frag;s=function(e,t,n,r,i){let a=["precision "+n.precision+" float;","precision "+n.precision+" int;","precision "+n.precision+" sampler2D;","#define SHADER_NAME "+n.shaderName,t,n.version>=2?"#define WEBGL2":"",n.useRoughnessMap?"#define USE_ROUGHNESSMAP":"",n.useMetalnessMap?"#define USE_METALNESSMAP":"",n.useGlossinessMap?"#define USE_GLOSSINESSMAP":"",n.useAmbientLight?"#define USE_AMBIENT_LIGHT":"",n.pointLightNum>0||n.directLightNum>0||n.useAmbientLight||n.hemisphereLightNum>0||n.spotLightNum>0?"#define USE_LIGHT":"",n.useNormalMap?"#define USE_NORMAL_MAP":"",n.useBumpMap?"#define USE_BUMPMAP":"",n.useSpecularMap?"#define USE_SPECULARMAP":"",n.useEmissiveMap?"#define USE_EMISSIVEMAP "+n.useEmissiveMap:"",n.useShadow?"#define USE_SHADOW":"",n.flatShading?"#define FLAT_SHADED":"",n.flipSided?"#define FLIP_SIDED":"",n.useDiffuseMap?"#define USE_DIFFUSE_MAP "+n.useDiffuseMap:"",n.useAlphaMap?"#define USE_ALPHA_MAP "+n.useAlphaMap:"",n.useEnvMap?"#define USE_ENV_MAP":"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useAOMap?"#define USE_AOMAP "+n.useAOMap:"",1==n.useVertexColors?"#define USE_VCOLOR_RGB":"",2==n.useVertexColors?"#define USE_VCOLOR_RGBA":"",n.useVertexTangents?"#define USE_TANGENT":"",n.useUv1?"#define USE_UV1":"",n.useUv2?"#define USE_UV2":"",n.fog?"#define USE_FOG":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.useSkinning?"#define USE_SKINNING":"",n.bonesNum>0?"#define MAX_BONES "+n.bonesNum:"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","\n"].filter(pr).join("\n"),s=[n.useStandardDerivatives&&n.version<2?"#extension GL_OES_standard_derivatives : enable":"",n.useShaderTextureLOD&&n.version<2?"#extension GL_EXT_shader_texture_lod : enable":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth&&n.version<2?"#extension GL_EXT_frag_depth : enable":"","precision "+n.precision+" float;","precision "+n.precision+" int;","precision "+n.precision+" sampler2D;",n.version>=2?"precision "+n.precision+" sampler2DShadow;":"",n.version>=2?"precision "+n.precision+" samplerCubeShadow;":"","#define SHADER_NAME "+n.shaderName,"#define PI 3.14159265359","#define EPSILON 1e-6","float pow2(const in float x) { return x * x; }","#define LOG2 1.442695","#define RECIPROCAL_PI 0.31830988618","#define saturate(a) clamp(a, 0.0, 1.0)","#define whiteCompliment(a) (1.0 - saturate(a))","highp float rand(const in vec2 uv) {","\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;","\thighp float dt = dot(uv.xy, vec2(a, b)), sn = mod(dt, PI);","\treturn fract(sin(sn) * c);","}",t,n.version>=2?"#define WEBGL2":"",n.useShadowSampler?"#define USE_SHADOW_SAMPLER":"#define sampler2DShadow sampler2D",n.useRoughnessMap?"#define USE_ROUGHNESSMAP":"",n.useMetalnessMap?"#define USE_METALNESSMAP":"",n.useGlossinessMap?"#define USE_GLOSSINESSMAP":"",n.useAmbientLight?"#define USE_AMBIENT_LIGHT":"",n.pointLightNum>0||n.directLightNum>0||n.useAmbientLight||n.hemisphereLightNum>0||n.spotLightNum>0?"#define USE_LIGHT":"",n.useNormalMap?"#define USE_NORMAL_MAP":"",n.useBumpMap?"#define USE_BUMPMAP":"",n.useSpecularMap?"#define USE_SPECULARMAP":"",n.useEmissiveMap?"#define USE_EMISSIVEMAP "+n.useEmissiveMap:"",n.useShadow?"#define USE_SHADOW":"","hard"===n.shadowType?"#define USE_HARD_SHADOW":"",n.shadowType===q?"#define USE_POISSON_SOFT_SHADOW":"",n.shadowType===Y?"#define USE_PCF3_SOFT_SHADOW":"","pcf5_soft"===n.shadowType?"#define USE_PCF5_SOFT_SHADOW":"",n.shadowType===Q?"#define USE_PCSS16_SOFT_SHADOW":"",n.shadowType===Z?"#define USE_PCSS32_SOFT_SHADOW":"",n.shadowType===K?"#define USE_PCSS64_SOFT_SHADOW":"",n.shadowType===Q||n.shadowType===Z||n.shadowType===K?"#define USE_PCSS_SOFT_SHADOW":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.useShaderTextureLOD?"#define TEXTURE_LOD_EXT":"",n.useDiffuseMap?"#define USE_DIFFUSE_MAP "+n.useDiffuseMap:"",n.useAlphaMap?"#define USE_ALPHA_MAP "+n.useAlphaMap:"",n.useEnvMap?"#define USE_ENV_MAP":"",n.useAOMap?"#define USE_AOMAP "+n.useAOMap:"",1==n.useVertexColors?"#define USE_VCOLOR_RGB":"",2==n.useVertexColors?"#define USE_VCOLOR_RGBA":"",n.useVertexTangents?"#define USE_TANGENT":"",n.premultipliedAlpha?"#define USE_PREMULTIPLIED_ALPHA":"",n.fog?"#define USE_FOG":"",n.fogExp2?"#define USE_EXP2_FOG":"",n.alphaTest?"#define ALPHATEST "+n.alphaTest:"",n.useEnvMap?"#define "+n.envMapCombine:"","#define GAMMA_FACTOR "+n.gammaFactor,n.useMatcap?"#define USE_MATCAP":"",n.useUv1?"#define USE_UV1":"",n.useUv2?"#define USE_UV2":"",n.dithering?"#define DITHERING":"",ar.encodings_pars_frag,hr("mapTexelToLinear",n.diffuseMapEncoding),n.useEnvMap?hr("envMapTexelToLinear",n.envMapEncoding):"",n.useEmissiveMap?hr("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.useMatcap?hr("matcapTexelToLinear",n.matcapEncoding):"",dr("linearToOutputTexel",n.outputEncoding),n.packDepthToRGBA?"#define DEPTH_PACKING_RGBA":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","\n"].filter(pr).join("\n"),o=r,l=i;if(o=fr(o),l=fr(l),o=mr(o,n),l=mr(l,n),o=gr(o,n),l=gr(l,n),o=br(o),l=br(l),n.version>1){a=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,l=l.replace("#extension GL_EXT_draw_buffers : require","");let e=0;const t=[];for(;l.indexOf("gl_FragData["+e+"]")>-1;)l=l.replace("gl_FragData["+e+"]","pc_fragData"+e),t.push("layout(location = "+e+") out highp vec4 pc_fragData"+e+";"),e++;s=["#version 300 es\n","#define varying in",l.indexOf("layout")>-1||t.length>0?"":"out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad",t.join("\n")].join("\n")+"\n"+s}return o=a+o,l=s+l,new nr(e,o,l)}(this._gl,t,i,n,o),s.code=a,r.push(s)}return s}releaseProgram(e){if(0==--e.usedTimes){const t=this._programs,n=t.indexOf(e);t[n]=t[t.length-1],t.pop(),e.dispose(this._gl)}}}function ur(e){let t;return e?e.encoding&&(t=e.encoding):t=J,t}function cr(e){switch(e){case J:return["Linear","(value)"];case ee:return["sRGB","(value)"];case"RGBE":return["RGBE","(value)"];case"RGBM7":return["RGBM","(value, 7.0)"];case"RGBM16":return["RGBM","(value, 16.0)"];case"RGBD":return["RGBD","(value, 256.0)"];case te:return["Gamma","(value, float(GAMMA_FACTOR))"];default:console.error("unsupported encoding: "+e)}}function hr(e,t){const n=cr(t);return"vec4 "+e+"(vec4 value) { return "+n[0]+"ToLinear"+n[1]+"; }"}function dr(e,t){const n=cr(t);return"vec4 "+e+"(vec4 value) { return LinearTo"+n[0]+n[1]+"; }"}const fr=function(e){return e.replace(/#include +<([\w\d.]+)>/g,(function(e,t){const n=ar[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return fr(n)}))};function pr(e){return""!==e}function mr(e,t){return e.replace(/NUM_HEMI_LIGHTS/g,t.hemisphereLightNum).replace(/NUM_DIR_LIGHTS/g,t.directLightNum).replace(/NUM_SPOT_LIGHTS/g,t.spotLightNum).replace(/NUM_POINT_LIGHTS/g,t.pointLightNum).replace(/NUM_DIR_SHADOWS/g,t.directShadowNum).replace(/NUM_SPOT_SHADOWS/g,t.spotShadowNum).replace(/NUM_POINT_SHADOWS/g,t.pointShadowNum)}function gr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes)}const _r=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vr(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"["+e+"]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function br(e){return e.replace(_r,vr)}class xr{constructor(){this._map=new WeakMap}get(e){let t=this._map.get(e);return void 0===t&&(t={},this._map.set(e,t)),t}delete(e){this._map.delete(e)}clear(){this._map=new WeakMap}}class yr{constructor(e){this._gl=e,this._extensions={},this.version=parseFloat(/^WebGL\ (\d)/.exec(e.getParameter(e.VERSION))[1]);const t=this.getExtension("EXT_texture_filter_anisotropic");this.anisotropyExt=t,this.maxAnisotropy=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1;let n=null,r=!1;try{this.version>1?(n=this.getExtension("EXT_disjoint_timer_query_webgl2"),n&&(r=(e.getQuery(n.TIMESTAMP_EXT,n.QUERY_COUNTER_BITS_EXT)??0)>0)):(n=this.getExtension("EXT_disjoint_timer_query"),n&&(r=(n.getQueryEXT(n.TIMESTAMP_EXT,n.QUERY_COUNTER_BITS_EXT)??0)>0))}catch(e){console.warn(e)}this.timerQuery=n,this.canUseTimestamp=r,this.maxPrecision=function(e,t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}(e,"highp"),this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxCubemapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxVertexUniformVectors=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),this.maxSamples=this.version>1?e.getParameter(e.MAX_SAMPLES):1,this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE)}getExtension(e){const t=this._gl,n=this._extensions;if(void 0!==n[e])return n[e];let r=null;for(let n in wr)if(r=t.getExtension(wr[n]+e),r)break;return n[e]=r,r}}const wr=["","WEBKIT_","MOZ_"];class Ar{constructor(e,t){this._gl=e,this._capabilities=t}getGLType(e){const t=this._gl,n=this._capabilities,r=n.version>=2;if(e===R)return t.UNSIGNED_BYTE;if(1501===e)return t.UNSIGNED_SHORT_5_6_5;if(1502===e)return t.UNSIGNED_SHORT_4_4_4_4;if(1503===e)return t.UNSIGNED_SHORT_5_5_5_1;let i;if(r){if(e===D)return t.UNSIGNED_SHORT;if(e===U)return t.UNSIGNED_INT;if(e===O)return t.UNSIGNED_INT_24_8;if(e===k)return t.FLOAT;if(e===$)return t.HALF_FLOAT;if(1509===e)return t.FLOAT_32_UNSIGNED_INT_24_8_REV;if(1510===e)return t.BYTE;if(1511===e)return t.SHORT;if(1512===e)return t.INT}else{if(e===D||e===U||e===O){if(i=n.getExtension("WEBGL_depth_texture"),!i)return console.warn("extension WEBGL_depth_texture is not support."),null;if(e===D)return t.UNSIGNED_SHORT;if(e===U)return t.UNSIGNED_INT;if(e===O)return i.UNSIGNED_INT_24_8_WEBGL}if(e===k)return i=n.getExtension("OES_texture_float"),i?t.FLOAT:(console.warn("extension OES_texture_float is not support."),null);if(e===$)return i=n.getExtension("OES_texture_half_float"),i?i.HALF_FLOAT_OES:(console.warn("extension OES_texture_half_float is not support."),null)}return void 0!==t[e]?t[e]:e}getGLFormat(e){const t=this._gl,n=this._capabilities;if(1005===e)return t.RGB;if(e===P)return t.RGBA;if(1003===e)return t.ALPHA;if(1007===e)return t.LUMINANCE;if(1008===e)return t.LUMINANCE_ALPHA;if(e===T)return t.DEPTH_COMPONENT;if(e===M)return t.DEPTH_STENCIL;if(1004===e)return t.RED;if(1010===e)return t.RED_INTEGER;if(1011===e)return t.RG;if(1012===e)return t.RG_INTEGER;if(1013===e)return t.RGB_INTEGER;if(1014===e)return t.RGBA_INTEGER;let r;if(1200===e||1201===e||1202===e||1203===e){if(r=n.getExtension("WEBGL_compressed_texture_s3tc"),!r)return console.warn("extension WEBGL_compressed_texture_s3tc is not support."),null;if(1200===e)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(1201===e)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(1202===e)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(1203===e)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(1204===e||1205===e||1206===e||1207===e){if(r=n.getExtension("WEBGL_compressed_texture_pvrtc"),!r)return console.warn("extension WEBGL_compressed_texture_pvrtc is not support."),null;if(1204===e)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(1205===e)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(1206===e)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(1207===e)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return 1208===e?(r=n.getExtension("WEBGL_compressed_texture_etc1"),r?r.COMPRESSED_RGB_ETC1_WEBGL:(console.warn("extension WEBGL_compressed_texture_etc1 is not support."),null)):1209===e?(r=n.getExtension("WEBGL_compressed_texture_astc"),r?r.COMPRESSED_RGBA_ASTC_4x4_KHR:(console.warn("extension WEBGL_compressed_texture_astc is not support."),null)):1210===e?(r=n.getExtension("EXT_texture_compression_bptc"),r?r.COMPRESSED_RGBA_BPTC_UNORM_EXT:(console.warn("extension EXT_texture_compression_bptc is not support."),null)):void 0!==t[e]?t[e]:e}getGLInternalFormat(e){const t=this._gl,n=this._capabilities,r=n.version>=2;if(1112===e)return t.RGBA4;if(1113===e)return t.RGB5_A1;if(e===N)return t.DEPTH_COMPONENT16;if(1002===e)return t.STENCIL_INDEX8;if(e===M)return t.DEPTH_STENCIL;let i;if(r){if(1102===e)return t.R8;if(1105===e)return t.RG8;if(1108===e)return t.RGB8;if(e===L)return t.RGBA8;if(1115===e)return t.DEPTH_COMPONENT24;if(1114===e)return t.DEPTH_COMPONENT32F;if(e===I)return t.DEPTH24_STENCIL8;if(1118===e)return t.DEPTH32F_STENCIL8;if(1101===e||1104===e||1107===e||1110===e||1100===e||1103===e||e===C||e===F){if(i=n.getExtension("EXT_color_buffer_float"),!i)return console.warn("extension EXT_color_buffer_float is not support."),null;if(1101===e)return t.R16F;if(1104===e)return t.RG16F;if(1107===e)return t.RGB16F;if(1110===e)return t.RGBA16F;if(1100===e)return t.R32F;if(1103===e)return t.RG32F;if(e===C)return t.RGB32F;if(e===F)return t.RGBA32F}}else if(e===F||e===C){if(i=n.getExtension("WEBGL_color_buffer_float"),!i)return console.warn("extension WEBGL_color_buffer_float is not support."),null;if(e===F)return i.RGBA32F_EXT;if(e===C)return i.RGB32F_EXT}return void 0!==t[e]?t[e]:e}}function Er(e,t,n,r){const i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let t=0;t<r;t++)e.texImage2D(n+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}function Sr(e){let t=!1;const n=new et;let r=null;const i=new et(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},getClear:function(){return i},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function Tr(e,t){let n=!1,r=null,i=null,a=null;return{setTest:function(n){n?t.enable(e.DEPTH_TEST):t.disable(e.DEPTH_TEST)},setMask:function(t){r===t||n||(e.depthMask(t),r=t)},setFunc:function(t){i!==t&&(e.depthFunc(t),i=t)},setLocked:function(e){n=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){n=!1,r=null,i=null,a=null}}}function Mr(e,t){let n=!1,r=null,i=null,a=null,s=null,o=null,l=null,u=null,c=null,h=null,d=null,f=null,p=null,m=null,g=null;return{setTest:function(n){n?t.enable(e.STENCIL_TEST):t.disable(e.STENCIL_TEST)},setMask:function(t){r===t||n||(e.stencilMask(t),r=t)},setFunc:function(t,n,r,o,l,u){i===t&&a===n&&s===r&&c===o&&h===l&&d===u||(null===o||null===l||null===u?e.stencilFunc(t,n,r):(e.stencilFuncSeparate(e.FRONT,t,n,r),e.stencilFuncSeparate(e.BACK,o,l,u)),i=t,a=n,s=r,c=o,h=l,d=u)},setOp:function(t,n,r,i,a,s){o===t&&l===n&&u===r&&f===i&&p===a&&m===s||(null===i||null===a||null===s?e.stencilOp(t,n,r):(e.stencilOpSeparate(e.FRONT,t,n,r),e.stencilOpSeparate(e.BACK,i,a,s)),o=t,l=n,u=r,f=i,p=a,m=s)},setLocked:function(e){n=e},setClear:function(t){g!==t&&(e.clearStencil(t),g=t)},reset:function(){n=!1,r=null,i=null,a=null,s=null,o=null,l=null,u=null,c=null,h=null,d=null,f=null,p=null,m=null,g=null}}}class Pr{constructor(e,t){this.gl=e,this.capabilities=t,this.colorBuffer=new Sr(e),this.depthBuffer=new Tr(e,this),this.stencilBuffer=new Mr(e,this),this.states={},this.currentBlending=null,this.currentBlendEquation=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendEquationAlpha=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipliedAlpha=null,this.currentFlipSided=!1,this.currentCullFace=null;const n=e.getParameter(e.VIEWPORT);this.currentViewport=(new et).fromArray(n),this.currentLineWidth=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentProgram=null,this.currentBoundBuffers={},this.currentRenderTarget=null,this.currentTextureSlot=null,this.currentBoundTextures={},this.emptyTextures={},this.emptyTextures[e.TEXTURE_2D]=Er(e,e.TEXTURE_2D,e.TEXTURE_2D,1),this.emptyTextures[e.TEXTURE_CUBE_MAP]=Er(e,e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),this.blendEquationToGL={[v]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT},this.blendFactorToGL={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,203:e.SRC_ALPHA,204:e.SRC_ALPHA_SATURATE,205:e.DST_COLOR,206:e.DST_ALPHA,207:e.ONE_MINUS_SRC_COLOR,208:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,210:e.ONE_MINUS_DST_ALPHA},this.colorBuffer.setClear(0,0,0,1),this.depthBuffer.setClear(1),this.stencilBuffer.setClear(0),this.depthBuffer.setTest(!0),this.depthBuffer.setFunc(515),this.setFlipSided(!1),this.setCullFace(x)}enable(e){!0!==this.states[e]&&(this.gl.enable(e),this.states[e]=!0)}disable(e){!1!==this.states[e]&&(this.gl.disable(e),this.states[e]=!1)}setBlending(e,t,n,r,i,a,s,o){const l=this.gl;if(e!==m){if(this.enable(l.BLEND),"custom"!==e)e===this.currentBlending&&o===this.currentPremultipliedAlpha||(this.currentBlendEquation===v&&this.currentBlendEquationAlpha===v||(l.blendEquation(l.FUNC_ADD),this.currentBlendEquation=v,this.currentBlendEquationAlpha=v),e===g?o?l.blendFuncSeparate(l.ONE,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA):l.blendFuncSeparate(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA):e===_?o?l.blendFunc(l.ONE,l.ONE):l.blendFunc(l.SRC_ALPHA,l.ONE):"sub"===e?l.blendFuncSeparate(l.ZERO,l.ONE_MINUS_SRC_COLOR,l.ZERO,l.ONE):"mul"===e?o?l.blendFuncSeparate(l.ZERO,l.SRC_COLOR,l.ZERO,l.SRC_ALPHA):l.blendFunc(l.ZERO,l.SRC_COLOR):console.error("WebGLState: Invalid blending: ",e)),this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null;else{i=i||t,a=a||n,s=s||r;const e=this.blendEquationToGL,o=this.blendFactorToGL;t===this.currentBlendEquation&&i===this.currentBlendEquationAlpha||(l.blendEquationSeparate(e[t],e[i]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=i),n===this.currentBlendSrc&&r===this.currentBlendDst&&a===this.currentBlendSrcAlpha&&s===this.currentBlendDstAlpha||(l.blendFuncSeparate(o[n],o[r],o[a],o[s]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=s)}this.currentBlending=e,this.currentPremultipliedAlpha=o}else this.disable(l.BLEND)}setFlipSided(e){const t=this.gl;this.currentFlipSided!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e)}setCullFace(e){const t=this.gl;e!==b?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===x?t.cullFace(t.BACK):"front"===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}viewport(e,t,n,r){const i=this.currentViewport;i.x===e&&i.y===t&&i.z===n&&i.w===r||(this.gl.viewport(e,t,n,r),i.set(e,t,n,r))}setLineWidth(e){if(e!==this.currentLineWidth){const t=this.capabilities.lineWidthRange;t[0]<=e&&e<=t[1]?this.gl.lineWidth(e):console.warn("GL_ALIASED_LINE_WIDTH_RANGE is ["+t[0]+","+t[1]+"], but set to "+e+"."),this.currentLineWidth=e}}setPolygonOffset(e,t,n){const r=this.gl;e?(this.enable(r.POLYGON_OFFSET_FILL),this.currentPolygonOffsetFactor===t&&this.currentPolygonOffsetUnits===n||(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}setProgram(e){this.currentProgram!==e&&(this.gl.useProgram(e.program),this.currentProgram=e)}bindBuffer(e,t){const n=this.gl;this.currentBoundBuffers[e]!==t&&(n.bindBuffer(e,t),this.currentBoundBuffers[e]=t)}activeTexture(e){const t=this.gl;void 0===e&&(e=t.TEXTURE0+this.capabilities.maxTextures-1),this.currentTextureSlot!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t){const n=this.gl;null===this.currentTextureSlot&&this.activeTexture();let r=this.currentBoundTextures[this.currentTextureSlot];void 0===r&&(r={type:void 0,texture:void 0},this.currentBoundTextures[this.currentTextureSlot]=r),r.type===e&&r.texture===t||(n.bindTexture(e,t||this.emptyTextures[e]),r.type=e,r.texture=t)}reset(){const e=this.gl;e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.cullFace(e.BACK),e.frontFace(e.CCW),e.viewport(0,0,e.canvas.width,e.canvas.height),e.lineWidth(1),e.polygonOffset(0,0),e.useProgram(null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.activeTexture(e.TEXTURE0),this.colorBuffer.reset(),this.depthBuffer.reset(),this.stencilBuffer.reset(),this.states={},this.currentBlending=null,this.currentBlendEquation=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendEquationAlpha=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipliedAlpha=null,this.currentFlipSided=!1,this.currentCullFace=null,this.currentViewport.set(0,0,e.canvas.width,e.canvas.height),this.currentLineWidth=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentProgram=null,this.currentBoundBuffers={},this.currentRenderTarget=null,this.currentTextureSlot=null,this.currentBoundTextures={}}setMaterial(e,t){this.setCullFace(e.side===A?b:x);let n=e.side===w;t&&(n=!n),this.setFlipSided(n),e.blending===g&&!1===e.transparent?this.setBlending(m):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.depthBuffer.setFunc(e.depthFunc),this.depthBuffer.setTest(e.depthTest),this.depthBuffer.setMask(e.depthWrite),this.colorBuffer.setMask(e.colorWrite);const r=e.stencilTest;this.stencilBuffer.setTest(r),r&&(this.stencilBuffer.setMask(e.stencilWriteMask),this.stencilBuffer.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask,e.stencilFuncBack,e.stencilRefBack,e.stencilFuncMaskBack),this.stencilBuffer.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass,e.stencilFailBack,e.stencilZFailBack,e.stencilZPassBack)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),void 0!==e.lineWidth&&this.setLineWidth(e.lineWidth),!0===e.alphaToCoverage?this.enable(this.gl.SAMPLE_ALPHA_TO_COVERAGE):this.disable(this.gl.SAMPLE_ALPHA_TO_COVERAGE)}}class Cr{constructor(e,t,n,r,i){this.gl=e,this.state=t,this.properties=n,this.capabilities=r,this.constants=i,this._usedTextureUnits=0,this._onTextureDispose=function t(r){const i=r.target,a=n.get(i);i.removeEventListener("dispose",t),a.__webglTexture&&!a.__external&&e.deleteTexture(a.__webglTexture),n.delete(i)},this._wrappingToGL={[H]:e.REPEAT,[X]:e.CLAMP_TO_EDGE,1702:e.MIRRORED_REPEAT},this._filterToGL={[z]:e.NEAREST,[B]:e.LINEAR,[G]:e.NEAREST_MIPMAP_NEAREST,1603:e.LINEAR_MIPMAP_NEAREST,[j]:e.NEAREST_MIPMAP_LINEAR,[V]:e.LINEAR_MIPMAP_LINEAR}}allocTexUnit(){const e=this._usedTextureUnits++;return e>=this.capabilities.maxTextures&&console.warn("trying to use "+e+" texture units while this GPU supports only "+this.capabilities.maxTextures),e}resetTextureUnits(){this._usedTextureUnits=0}setTexture2D(e,t){const n=this.gl,r=this.state,i=this.capabilities,a=this.constants;void 0!==t&&(t=n.TEXTURE0+t);const s=this.properties.get(e);if(e.image&&s.__version!==e.version&&(!e.image.rtt||void 0===t)&&!s.__external){void 0===s.__webglTexture&&(e.addEventListener("dispose",this._onTextureDispose),s.__webglTexture=n.createTexture()),r.activeTexture(t),r.bindTexture(n.TEXTURE_2D,s.__webglTexture);let o=e.image;const l=Ur(o);l&&(o=Rr(o,i.maxTextureSize),Fr(e)&&!1===Nr(o)&&i.version<2&&(o=Ir(o)));const u=!Nr(o)&&i.version<2;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,e.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),this._setTextureParameters(e,u);const c=a.getGLFormat(e.format),h=a.getGLType(e.type),d=null!==e.internalformat?a.getGLInternalFormat(e.internalformat):Dr(n,i,c,h),f=e.mipmaps;let p;if(l)if(f.length>0&&!u){for(let e=0,t=f.length;e<t;e++)p=f[e],n.texImage2D(n.TEXTURE_2D,e,d,c,h,p);e.generateMipmaps=!1,s.__maxMipLevel=f.length-1}else n.texImage2D(n.TEXTURE_2D,0,d,c,h,o),s.__maxMipLevel=0;else if(f.length>0&&!u){const t=o.isCompressed;for(let r=0,i=f.length;r<i;r++)p=f[r],t?n.compressedTexImage2D(n.TEXTURE_2D,r,d,p.width,p.height,0,p.data):n.texImage2D(n.TEXTURE_2D,r,d,p.width,p.height,e.border,c,h,p.data);e.generateMipmaps=!1,s.__maxMipLevel=f.length-1}else n.texImage2D(n.TEXTURE_2D,0,d,o.width,o.height,e.border,c,h,o.data),s.__maxMipLevel=0;return e.generateMipmaps&&!u&&this._generateMipmap(n.TEXTURE_2D,e,o.width,o.height),s.__version=e.version,s}return r.activeTexture(t),r.bindTexture(n.TEXTURE_2D,s.__webglTexture),s}setTextureCube(e,t){const n=this.gl,r=this.state,i=this.capabilities,a=this.constants;void 0!==t&&(t=n.TEXTURE0+t);const s=this.properties.get(e);if(!(6!==e.images.length||s.__version===e.version||e.images[0].rtt&&void 0!==t||s.__external)){void 0===s.__webglTexture&&(e.addEventListener("dispose",this._onTextureDispose),s.__webglTexture=n.createTexture()),r.activeTexture(t),r.bindTexture(n.TEXTURE_CUBE_MAP,s.__webglTexture);const o=[];let l=!1;for(let t=0;t<6;t++){let n=e.images[t];const r=Ur(n);r&&(n=Rr(n,i.maxTextureSize),Fr(e)&&!1===Nr(n)&&i.version<2&&(n=Ir(n))),!Nr(n)&&i.version<2&&(l=!0),o[t]=n,n.__isDom=r}n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,e.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),this._setTextureParameters(e,l);const u=a.getGLFormat(e.format),c=a.getGLType(e.type),h=null!==e.internalformat?a.getGLInternalFormat(e.internalformat):Dr(n,i,u,c),d=e.mipmaps;let f;for(let t=0;t<6;t++){const r=o[t];if(r.__isDom)if(d.length>0&&!l){for(let e=0,r=d.length;e<r;e++)f=d[e][t],n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,h,u,c,f);s.__maxMipLevel=d.length-1,e.generateMipmaps=!1}else n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,h,u,c,r),s.__maxMipLevel=0;else if(d.length>0&&!l){const i=r.isCompressed;for(let r=0,a=d.length;r<a;r++)f=d[r][t],i?n.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,h,f.width,f.height,0,f.data):n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,h,f.width,f.height,e.border,u,c,f.data);s.__maxMipLevel=d.length-1,e.generateMipmaps=!1}else n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,h,r.width,r.height,e.border,u,c,r.data),s.__maxMipLevel=0}return e.generateMipmaps&&!l&&this._generateMipmap(n.TEXTURE_CUBE_MAP,e,o[0].width,o[0].height),s.__version=e.version,s}return r.activeTexture(t),r.bindTexture(n.TEXTURE_CUBE_MAP,s.__webglTexture),s}setTexture3D(e,t){const n=this.gl,r=this.state,i=this.capabilities,a=this.constants;if(i.version<2)return void console.warn("Try to use Texture3D but browser not support WebGL2.0");void 0!==t&&(t=n.TEXTURE0+t);const s=this.properties.get(e);if(e.image&&s.__version!==e.version&&!s.__external){void 0===s.__webglTexture&&(e.addEventListener("dispose",this._onTextureDispose),s.__webglTexture=n.createTexture()),r.activeTexture(t),r.bindTexture(n.TEXTURE_3D,s.__webglTexture);const o=e.image;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,e.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),this._setTextureParameters(e,!1);const l=a.getGLFormat(e.format),u=a.getGLType(e.type),c=null!==e.internalformat?a.getGLInternalFormat(e.internalformat):Dr(n,i,l,u);return n.texImage3D(n.TEXTURE_3D,0,c,o.width,o.height,o.depth,e.border,l,u,o.data),e.generateMipmaps&&this._generateMipmap(n.TEXTURE_3D,e,o.width,o.height),s.__version=e.version,s}return r.activeTexture(t),r.bindTexture(n.TEXTURE_3D,s.__webglTexture),s}setTextureExternal(e,t){const n=this.gl,r=this.properties.get(e);r.__external||(r.__webglTexture?n.deleteTexture(r.__webglTexture):e.addEventListener("dispose",this._onTextureDispose)),r.__webglTexture=t,r.__external=!0}_setTextureParameters(e,t){const n=this.gl,r=this.capabilities,i=this._wrappingToGL,a=this._filterToGL;let s=n.TEXTURE_2D;e.isTextureCube&&(s=n.TEXTURE_CUBE_MAP),e.isTexture3D&&(s=n.TEXTURE_3D);const o=function(e,t){let n=e.wrapS,r=e.wrapT,i=e.wrapR,a=e.magFilter,s=e.minFilter;const o=e.anisotropy,l=e.compare;return t&&(n=X,r=X,e.isTexture3D&&(i=X),e.wrapS===X&&e.wrapT===X||console.warn("Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to t3d.TEXTURE_WRAP.CLAMP_TO_EDGE.",e),a=Lr(e.magFilter),s=Lr(e.minFilter),(e.minFilter!==z&&e.minFilter!==B||e.magFilter!==z&&e.magFilter!==B)&&console.warn("Texture is not power of two. Texture.minFilter and Texture.magFilter should be set to t3d.TEXTURE_FILTER.NEAREST or t3d.TEXTURE_FILTER.LINEAR.",e)),[n,r,i,a,s,o,l]}(e,t);n.texParameteri(s,n.TEXTURE_WRAP_S,i[o[0]]),n.texParameteri(s,n.TEXTURE_WRAP_T,i[o[1]]),e.isTexture3D&&n.texParameteri(s,n.TEXTURE_WRAP_R,i[o[2]]),n.texParameteri(s,n.TEXTURE_MAG_FILTER,a[o[3]]),n.texParameteri(s,n.TEXTURE_MIN_FILTER,a[o[4]]);const l=r.anisotropyExt;l&&n.texParameterf(s,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o[5],r.maxAnisotropy)),r.version>=2&&(void 0!==o[6]?(n.texParameteri(s,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(s,n.TEXTURE_COMPARE_FUNC,o[6])):n.texParameteri(s,n.TEXTURE_COMPARE_MODE,n.NONE))}_generateMipmap(e,t,n,r){this.gl.generateMipmap(e),this.properties.get(t).__maxMipLevel=Math.log(Math.max(n,r))*Math.LOG2E}}function Fr(e){return e.wrapS!==X||e.wrapT!==X||e.minFilter!==z&&e.minFilter!==B}function Lr(e){return e===z||e===j||e===G?z:B}function Nr(e){return rt(e.width)&&rt(e.height)}function Ir(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=it(e.width),t.height=it(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function Rr(e,t){if(e.width>t||e.height>t){const n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function Dr(e,t,n,r){if(!1==t.version>=2)return n;let i=n;return n===e.RED&&(r===e.FLOAT&&(i=e.R32F),r===e.HALF_FLOAT&&(i=e.R16F),r===e.UNSIGNED_BYTE&&(i=e.R8)),n===e.RG&&(r===e.FLOAT&&(i=e.RG32F),r===e.HALF_FLOAT&&(i=e.RG16F),r===e.UNSIGNED_BYTE&&(i=e.RG8)),n===e.RGB&&(r===e.FLOAT&&(i=e.RGB32F),r===e.HALF_FLOAT&&(i=e.RGB16F),r===e.UNSIGNED_BYTE&&(i=e.RGB8)),n===e.RGBA&&(r===e.FLOAT&&(i=e.RGBA32F),r===e.HALF_FLOAT&&(i=e.RGBA16F),r===e.UNSIGNED_BYTE&&(i=e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(i=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(i=e.RGB5_A1)),n!==e.DEPTH_COMPONENT&&n!==e.DEPTH_STENCIL||(i=e.DEPTH_COMPONENT16,r===e.FLOAT&&(i=e.DEPTH_COMPONENT32F),r===e.UNSIGNED_INT&&(i=e.DEPTH_COMPONENT24),r===e.UNSIGNED_INT_24_8&&(i=e.DEPTH24_STENCIL8),r===e.FLOAT_32_UNSIGNED_INT_24_8_REV&&(i=e.DEPTH32F_STENCIL8)),i!==e.R16F&&i!==e.R32F&&i!==e.RG16F&&i!==e.RG32F&&i!==e.RGB16F&&i!==e.RGB32F&&i!==e.RGBA16F&&i!==e.RGBA32F||t.getExtension("EXT_color_buffer_float"),i}function Ur(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}class Or{constructor(e,t,n,r){this.gl=e,this.properties=t,this.capabilities=n,this.constants=r,this._onRenderBufferDispose=function n(r){const i=r.target;i.removeEventListener("dispose",n);const a=t.get(i);a.__webglRenderbuffer&&!a.__external&&e.deleteRenderbuffer(a.__webglRenderbuffer),t.delete(i)}}setRenderBuffer(e){const t=this.gl,n=this.capabilities,r=this.constants,i=this.properties.get(e);if(void 0===i.__webglRenderbuffer){e.addEventListener("dispose",this._onRenderBufferDispose),i.__webglRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,i.__webglRenderbuffer);const a=r.getGLInternalFormat(e.format);e.multipleSampling>0?(n.version<2&&console.error("render buffer multipleSampling is not support in webgl 1.0."),t.renderbufferStorageMultisample(t.RENDERBUFFER,Math.min(e.multipleSampling,n.maxSamples),a,e.width,e.height)):t.renderbufferStorage(t.RENDERBUFFER,a,e.width,e.height)}else t.bindRenderbuffer(t.RENDERBUFFER,i.__webglRenderbuffer);return i}setRenderBufferExternal(e,t){const n=this.gl,r=this.properties.get(e);r.__external||(r.__webglRenderbuffer?n.deleteRenderbuffer(r.__webglRenderbuffer):e.addEventListener("dispose",this._onRenderBufferDispose)),r.__webglRenderbuffer=t,r.__external=!0}}class kr{constructor(e,t,n,r,i,a,s){this._gl=e,this._state=t,this._textures=n,this._renderBuffers=r,this._properties=i,this._capabilities=a,this._constants=s,this._onRenderTargetDispose=function n(r){const a=r.target;a.removeEventListener("dispose",n);const s=i.get(a);s.__webglFramebuffer&&e.deleteFramebuffer(s.__webglFramebuffer),i.delete(a),t.currentRenderTarget===a&&(t.currentRenderTarget=null)}}_setupRenderTarget(e){const t=this._gl,n=this._state,r=this._textures,i=this._renderBuffers,a=this._capabilities,s=this._properties.get(e);e.addEventListener("dispose",this._onRenderTargetDispose);const o=t.createFramebuffer(),l=[];s.__webglFramebuffer=o,s.__drawBuffers=l,e.isRenderTargetCube&&(s.__currentActiveCubeFace=e.activeCubeFace),t.bindFramebuffer(t.FRAMEBUFFER,o);for(const s in e._attachments){const o=$r[s];o===t.DEPTH_ATTACHMENT||o===t.DEPTH_STENCIL_ATTACHMENT?a.version<2&&!a.getExtension("WEBGL_depth_texture")&&console.warn("WebGLRenderTargets: extension WEBGL_depth_texture is not support."):o!==t.STENCIL_ATTACHMENT&&l.push(o);const u=e._attachments[s];if(u.isTexture2D){const e=r.setTexture2D(u);t.framebufferTexture2D(t.FRAMEBUFFER,o,t.TEXTURE_2D,e.__webglTexture,0),n.bindTexture(t.TEXTURE_2D,null)}else if(u.isTextureCube){const i=r.setTextureCube(u);t.framebufferTexture2D(t.FRAMEBUFFER,o,t.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,0),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else{const e=i.setRenderBuffer(u);t.framebufferRenderbuffer(t.FRAMEBUFFER,o,t.RENDERBUFFER,e.__webglRenderbuffer)}}l.sort(zr),a.version>=2?t.drawBuffers(l):a.getExtension("WEBGL_draw_buffers")&&a.getExtension("WEBGL_draw_buffers").drawBuffersWEBGL(l)}setRenderTarget(e){const t=this._gl,n=this._state,r=this._properties;let i;if(n.currentRenderTarget!==e&&(e.isRenderTargetBack?t.bindFramebuffer(t.FRAMEBUFFER,null):(i=r.get(e),void 0===i.__webglFramebuffer?this._setupRenderTarget(e):t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer)),n.currentRenderTarget=e),e.isRenderTargetCube){i=r.get(e);const n=e.activeCubeFace;if(i.__currentActiveCubeFace!==n){for(const i in e._attachments){const a=e._attachments[i];if(a.isTextureCube){const e=r.get(a);t.framebufferTexture2D(t.FRAMEBUFFER,$r[i],t.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.__webglTexture,0)}}i.__currentActiveCubeFace=n}}}blitRenderTarget(e,t,n=!0,r=!0,i=!0){const a=this._gl,s=this._properties,o=this._capabilities;if(o.version<2)return void console.warn("WebGLRenderTargets: blitFramebuffer not support by WebGL"+o.version);const l=s.get(e).__webglFramebuffer,u=s.get(t).__webglFramebuffer;a.bindFramebuffer(a.READ_FRAMEBUFFER,l),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,u);let c=0;n&&(c|=a.COLOR_BUFFER_BIT),r&&(c|=a.DEPTH_BUFFER_BIT),i&&(c|=a.STENCIL_BUFFER_BIT),a.blitFramebuffer(0,0,e.width,e.height,0,0,t.width,t.height,c,a.NEAREST)}readRenderTargetPixels(e,t,n,r,i){const a=this._gl,s=this._state,o=this._constants,l=s.currentRenderTarget;if(l&&l.texture){if(e>=0&&e<=l.width-n&&t>=0&&t<=l.height-r){const s=o.getGLType(l.texture.type),u=o.getGLFormat(l.texture.format);a.readPixels(e,t,n,r,u,s,i)}}else console.warn("WebGLRenderTargets.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not bound or texture not attached.")}updateRenderTargetMipmap(e){const t=this._gl,n=this._state,r=this._capabilities,i=e.texture;if(i.generateMipmaps&&i.minFilter!==z&&i.minFilter!==B&&(function(e){return rt(e.width)&&rt(e.height)}(e)||r.version>=2)){let e=t.TEXTURE_2D;i.isTextureCube&&(e=t.TEXTURE_CUBE_MAP),i.isTexture3D&&(e=t.TEXTURE_3D);const r=this._properties.get(i).__webglTexture;n.bindTexture(e,r),t.generateMipmap(e),n.bindTexture(e,null)}}}const $r={[ne]:36064,2001:36065,2002:36066,2003:36067,2004:36068,2005:36069,2006:36070,2007:36071,2008:36072,2009:36073,2010:36074,2011:36075,2012:36076,2013:36077,2014:36078,2015:36079,[re]:36096,2021:36128,[ie]:33306};function zr(e,t){return e-t}class Br{constructor(e,t,n,r){this._gl=e,this._properties=t,this._capabilities=n,this._vertexArrayBindings=r,this._onGeometryDispose=function n(i){const a=i.target,s=t.get(a);a.removeEventListener("dispose",n),null!==a.index&&Xr(e,t,a.index.buffer);for(const n in a.attributes)Xr(e,t,a.attributes[n].buffer);for(const n in a.morphAttributes){const r=a.morphAttributes[n];for(let n=0,i=r.length;n<i;n++)Xr(e,t,r[n].buffer)}for(const e in s._vaos){const t=s[e];t&&r.disposeVAO(t.object)}s._vaos={},s.created=!1,t.delete(a)}}setGeometry(e){const t=this._gl,n=this._properties,r=this._capabilities,i=this._vertexArrayBindings,a=n.get(e);if(a.created||(e.addEventListener("dispose",this._onGeometryDispose),a.created=!0,a._vaos={}),null!==e.index){const a=e.index.buffer,s=n.get(a);void 0===s.glBuffer?(i.reset(),jr(t,s,a,t.ELEMENT_ARRAY_BUFFER)):s.version<a.version&&(i.reset(),Vr(t,r,s.glBuffer,a,t.ELEMENT_ARRAY_BUFFER),s.version=a.version)}for(const i in e.attributes)Hr(t,n,r,e.attributes[i].buffer,t.ARRAY_BUFFER);for(const i in e.morphAttributes){const a=e.morphAttributes[i];for(let e=0,i=a.length;e<i;e++)Hr(t,n,r,a[e].buffer,t.ARRAY_BUFFER)}return a}setBufferExternal(e,t){const n=this._gl,r=this._properties.get(e);r.__external||r.glBuffer&&n.deleteBuffer(r.glBuffer);const i=Gr(n,e.array);r.glBuffer=t,r.type=i,r.bytesPerElement=e.array.BYTES_PER_ELEMENT,r.version=e.version,r.__external=!0}}function Gr(e,t){let n;return t instanceof Float32Array?n=e.FLOAT:t instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array."):n=t instanceof Uint16Array?e.UNSIGNED_SHORT:t instanceof Int16Array?e.SHORT:t instanceof Uint32Array?e.UNSIGNED_INT:t instanceof Int32Array?e.INT:t instanceof Int8Array?e.BYTE:t instanceof Uint8Array?e.UNSIGNED_BYTE:e.FLOAT,n}function jr(e,t,n,r){const i=n.array,a=n.usage,s=e.createBuffer();e.bindBuffer(r,s),e.bufferData(r,i,a),n.onUploadCallback();const o=Gr(e,i);t.glBuffer=s,t.type=o,t.bytesPerElement=i.BYTES_PER_ELEMENT,t.version=n.version}function Vr(e,t,n,r,i){const a=r.array,s=r.updateRange;e.bindBuffer(i,n),-1===s.count?e.bufferSubData(i,0,a):(t.version>=2?e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}function Hr(e,t,n,r,i){const a=t.get(r);void 0===a.glBuffer?jr(e,a,r,i):a.version<r.version&&(a.__external?(delete a.glBuffer,jr(e,a,r,i)):(Vr(e,n,a.glBuffer,r,i),a.version=r.version))}function Xr(e,t,n){const r=t.get(n);r.glBuffer&&!r.__external&&e.deleteBuffer(r.glBuffer),t.delete(n)}class Wr{constructor(e,t,n){this._gl=e,this._properties=t,this._capabilities=n,this._isWebGL2=n.version>=2,this._vaoExt=n.getExtension("OES_vertex_array_object"),this._currentGeometryProgram="",this._currentVAO=null}setup(e,t,n){const r=this._properties.get(t);if(e.morphTargetInfluences)this.reset(),this._setupVertexAttributes(n,t),this._currentGeometryProgram="";else if(this._isWebGL2||this._vaoExt){let e;e=r._vaos[n.id]?r._vaos[n.id]:r._vaos[n.id]={version:-1,object:this._createVAO()},this._bindVAO(e.object),e.version!==t.version&&(this._setupVertexAttributes(n,t),e.version=t.version)}else{const e=n.id+"_"+t.id+"_"+t.version;e!==this._currentGeometryProgram&&(this._setupVertexAttributes(n,t),this._currentGeometryProgram=e)}}disposeVAO(e){this._isWebGL2?this._gl.deleteVertexArray(e):this._vaoExt&&this._vaoExt.deleteVertexArrayOES(e)}reset(e){(null!==this._currentVAO||e)&&(this._isWebGL2?this._gl.bindVertexArray(null):this._vaoExt&&this._vaoExt.bindVertexArrayOES(null),this._currentVAO=null),""!==this._currentGeometryProgram&&(this._currentGeometryProgram="")}_createVAO(){return this._isWebGL2?this._gl.createVertexArray():this._vaoExt?this._vaoExt.createVertexArrayOES():null}_bindVAO(e){this._currentVAO!==e&&(this._isWebGL2?this._gl.bindVertexArray(e):this._vaoExt&&this._vaoExt.bindVertexArrayOES(e),this._currentVAO=e)}_setupVertexAttributes(e,t){const n=this._gl,r=this._isWebGL2,i=e.getAttributes(),a=this._properties,s=this._capabilities;for(const e in i){const o=i[e],l=t.getAttribute(e);if(l){const t=l.size;o.count!==t&&console.warn("WebGLVertexArrayBindings: attribute "+e+" size not match! "+o.count+" : "+t);const i=l.buffer,u=a.get(i),c=u.type;o.format;for(let e=0,t=o.locationSize;e<t;e++)n.enableVertexAttribArray(o.location+e);if(l.divisor>0)for(let e=0,t=o.locationSize;e<t;e++)r?n.vertexAttribDivisor(o.location+e,l.divisor):s.getExtension("ANGLE_instanced_arrays")?s.getExtension("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(o.location+e,l.divisor):console.warn("vertexAttribDivisor not supported");const h=u.bytesPerElement,d=u.glBuffer,f=i.stride,p=l.offset,m=l.normalized;if(n.bindBuffer(n.ARRAY_BUFFER,d),o.count===f&&1===o.locationSize)n.vertexAttribPointer(o.location,o.count,c,m,0,0);else for(let e=0;e<o.locationSize;e++)n.vertexAttribPointer(o.location+e,o.count/o.locationSize,c,m,h*f,h*(p+o.count/o.locationSize*e))}}if(t.index){const e=a.get(t.index.buffer);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.glBuffer)}}}class qr{constructor(e,t){this._gl=e,this._capabilities=t;const n=t.timerQuery;this._map=new WeakMap;const r=i=>{const a=i.target,s=this._map.get(a);a.removeEventListener("dispose",r),s._webglQuery&&(t.version>1?e.deleteQuery(s._webglQuery):n.deleteQueryEXT(s._webglQuery)),this._map.delete(a)};this._onQueryDispose=r,this._typeToGL={7e3:35887,7001:36202,7002:35007}}get(e){const t=this._capabilities,n=this._map;let r=n.get(e);return void 0===r&&(r={},e.addEventListener("dispose",this._onQueryDispose),r._webglQuery=t.version>1?this._gl.createQuery():t.timerQuery.createQueryEXT(),r._target=null,r._result=null,n.set(e,r)),r}clear(){this._map=new WeakMap}begin(e,t){const n=this._capabilities,r=this._typeToGL,i=this.get(e);n.version>1?this._gl.beginQuery(r[t],i._webglQuery):n.timerQuery.beginQueryEXT(r[t],i._webglQuery),i._target=t,i._result=null}end(e){const t=this._capabilities,n=this._typeToGL,r=this.get(e);t.version>1?this._gl.endQuery(n[r._target]):t.timerQuery.endQueryEXT(n[r._target])}counter(e){const t=this._capabilities.timerQuery,n=this.get(e);t.queryCounterEXT(n._webglQuery,t.TIMESTAMP_EXT),n._target=t.TIMESTAMP_EXT,n._result=null}isResultAvailable(e){const t=this._gl,n=this._capabilities,r=n.timerQuery,i=this.get(e);let a;return a=n.version>1?t.getQueryParameter(i._webglQuery,t.QUERY_RESULT_AVAILABLE):r.getQueryObjectEXT(i._webglQuery,r.QUERY_RESULT_AVAILABLE),a}isTimerDisjoint(){return this._gl.getParameter(this._capabilities.timerQuery.GPU_DISJOINT_EXT)}getResult(e){const t=this._gl,n=this._capabilities,r=n.timerQuery,i=this.get(e);return null===i._result&&(n.version>1?i._result=t.getQueryParameter(i._webglQuery,t.QUERY_RESULT):i._result=r.getQueryObjectEXT(i._webglQuery,r.QUERY_RESULT_EXT)),i._result}}const Yr=new et,Qr=new a,Zr=new WeakMap,Kr=new Float32Array(8);let Jr=new Float32Array([]);function ei(e){return e.geometry}function ti(e){return e.material}function ni(e){return!0}function ri(){}function ii(e){const t=e.target,n=this._properties.get(t);t.removeEventListener("dispose",ii,this);const r=n.program;void 0!==r&&this._programs.releaseProgram(r),this._properties.delete(t)}class ai{constructor(e){this.gl=e;const t=new xr,n=new yr(e),r=new Ar(e,n),i=new Pr(e,n),a=new Wr(e,t,n),s=new Cr(e,i,t,n,r),o=new Or(e,t,n,r),l=new kr(e,i,s,o,t,n,r),u=new Br(e,t,n,a),c=new lr(e,i,n),h=new qr(e,n);this.capabilities=n,this._properties=t,this._textures=s,this._renderBuffers=o,this._renderTargets=l,this._geometries=u,this._programs=c,this._state=i,this._vertexArrayBindings=a,this._queries=h}clear(e,t,n){const r=this.gl;let i=0;(void 0===e||e)&&(i|=r.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=r.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=r.STENCIL_BUFFER_BIT),i>0&&r.clear(i)}setClearColor(e,t,n,r,i){this._state.colorBuffer.setClear(e,t,n,r,i)}getClearColor(){return this._state.colorBuffer.getClear()}setRenderTarget(e){this._renderTargets.setRenderTarget(e)}getRenderTarget(){return this._state.currentRenderTarget}blitRenderTarget(e,t,n=!0,r=!0,i=!0){this._renderTargets.blitRenderTarget(e,t,n,r,i)}readRenderTargetPixels(e,t,n,r,i){this._renderTargets.readRenderTargetPixels(e,t,n,r,i)}updateRenderTargetMipmap(e){this._renderTargets.updateRenderTargetMipmap(e)}setTextureExternal(e,t){this._textures.setTextureExternal(e,t)}setRenderBufferExternal(e,t){this._renderBuffers.setRenderBufferExternal(e,t)}setBufferExternal(e,t){this._geometries.setBufferExternal(e,t)}resetVertexArrayBindings(e){this._vertexArrayBindings.reset(e)}resetState(){this._state.reset()}beginQuery(e,t){this._queries.begin(e,t)}endQuery(e){this._queries.end(e)}queryCounter(e){this._queries.counter(e)}isTimerQueryDisjoint(e){return this._queries.isTimerDisjoint(e)}isQueryResultAvailable(e){return this._queries.isResultAvailable(e)}getQueryResult(e){return this._queries.getResult(e)}render(e,t,n){const r=this._state,i=this.capabilities,a=this._vertexArrayBindings,s=this._textures,o=n.getGeometry||ei,l=n.getMaterial||ti,u=n.beforeRender||ri,c=n.afterRender||ri,h=n.ifRender||ni,d=n.renderInfo,f=t.scene,p=t.lights,m=t.camera,g=r.currentRenderTarget;if(!h(e))return;const _=e.object,v=l.call(this,e),b=o.call(this,e),x=e.group,y=v.fog?f.fog:null,w=void 0!==v.envMap?v.envMap||f.environment:null;let A=f.clippingPlanesData,E=f.numClippingPlanes;v.clippingPlanes&&v.clippingPlanes.length>0&&(Jr.length<4*v.clippingPlanes.length&&(Jr=new Float32Array(4*v.clippingPlanes.length)),A=f.setClippingPlanesData(v.clippingPlanes,Jr),E=v.clippingPlanes.length),_.onBeforeRender(e,v),u.call(this,e,v);const S=this._properties.get(v);if(!1===v.needsUpdate)if(void 0===S.program)v.needsUpdate=!0;else if(S.fog!==y)v.needsUpdate=!0;else if(S.envMap!==w)v.needsUpdate=!0;else if(S.numClippingPlanes!==E)v.needsUpdate=!0;else if(S.logarithmicDepthBuffer!==f.logarithmicDepthBuffer)v.needsUpdate=!0;else if(t.outputEncoding!==S.outputEncoding||t.gammaFactor!==S.gammaFactor)v.needsUpdate=!0;else if(i.version>1&&f.disableShadowSampler!==S.disableShadowSampler)v.needsUpdate=!0;else{const e=v.acceptLight&&p.totalNum>0;e!==S.acceptLight?v.needsUpdate=!0:e&&(p.hash.compare(S.lightsHash)&&_.receiveShadow===S.receiveShadow&&_.shadowType===S.shadowType||(v.needsUpdate=!0))}if(v.needsUpdate){void 0===S.program&&v.addEventListener("dispose",ii,this);const e=S.program;S.program=this._programs.getProgram(v,_,t),e&&this._programs.releaseProgram(e),S.fog=y,S.envMap=w,S.logarithmicDepthBuffer=f.logarithmicDepthBuffer,S.acceptLight=v.acceptLight,S.lightsHash=p.hash.copyTo(S.lightsHash),S.receiveShadow=_.receiveShadow,S.shadowType=_.shadowType,S.numClippingPlanes=E,S.outputEncoding=t.outputEncoding,S.gammaFactor=t.gammaFactor,S.disableShadowSampler=f.disableShadowSampler,v.needsUpdate=!1}const T=S.program;r.setProgram(T),this._geometries.setGeometry(b),_.morphTargetInfluences&&this._updateMorphtargets(_,b,T),a.setup(_,b,T);const M=T.getUniforms();v.acceptLight&&this._uploadLights(M,p,f.disableShadowSampler),_.isSkinnedMesh&&this._uploadSkeleton(M,_,f);for(let e=0,n=M.seq.length;e<n;e++){const n=M.seq[e],r=n.id;if(v.uniforms&&void 0!==v.uniforms[r]){n.set(v.uniforms[r],s);continue}let i,a,o;switch(r){case"u_Projection":n.set(m.projectionMatrix.elements);break;case"u_View":n.set(m.viewMatrix.elements);break;case"u_Model":i=_.worldMatrix,f.useAnchorMatrix&&(i=Qr.copy(i).premultiply(f.anchorMatrixInverse)),n.set(i.elements);break;case"u_ProjectionView":n.set(m.projectionViewMatrix.elements);break;case"u_CameraPosition":n.setValue(m.position.x,m.position.y,m.position.z);break;case"u_Color":a=v.diffuse,n.setValue(a.r,a.g,a.b);break;case"u_Opacity":n.set(v.opacity);break;case"diffuseMap":n.set(v.diffuseMap,s);break;case"alphaMap":n.set(v.alphaMap,s);break;case"alphaMapUVTransform":n.set(v.alphaMapTransform.elements);break;case"normalMap":n.set(v.normalMap,s);break;case"normalScale":n.setValue(v.normalScale.x,v.normalScale.y);break;case"bumpMap":n.set(v.bumpMap,s);break;case"bumpScale":n.set(v.bumpScale);break;case"envMap":n.set(w,s);break;case"cubeMap":n.set(v.cubeMap,s);break;case"u_EnvMap_Flip":n.set(w.images[0]&&w.images[0].rtt?1:-1);break;case"u_EnvMap_Intensity":n.set(v.envMapIntensity);break;case"u_EnvMapLight_Intensity":n.set(f.environmentLightIntensity);break;case"maxMipLevel":n.set(this._properties.get(w).__maxMipLevel||8);break;case"u_Specular":n.set(v.shininess);break;case"u_SpecularColor":a=v.specular,n.setValue(a.r,a.g,a.b);break;case"specularMap":n.set(v.specularMap,s);break;case"aoMap":n.set(v.aoMap,s);break;case"aoMapIntensity":n.set(v.aoMapIntensity);break;case"aoMapUVTransform":n.set(v.aoMapTransform.elements);break;case"u_Roughness":n.set(v.roughness);break;case"roughnessMap":n.set(v.roughnessMap,s);break;case"u_Metalness":n.set(v.metalness);break;case"metalnessMap":n.set(v.metalnessMap,s);break;case"glossiness":n.set(v.glossiness);break;case"glossinessMap":n.set(v.glossinessMap,s);break;case"emissive":a=v.emissive,n.setValue(a.r,a.g,a.b);break;case"emissiveMap":n.set(v.emissiveMap,s);break;case"emissiveMapUVTransform":n.set(v.emissiveMapTransform.elements);break;case"u_FogColor":a=f.fog.color,n.setValue(a.r,a.g,a.b);break;case"u_FogDensity":n.set(f.fog.density);break;case"u_FogNear":n.set(f.fog.near);break;case"u_FogFar":n.set(f.fog.far);break;case"logDepthBufFC":n.set(t.logDepthBufFC);break;case"logDepthCameraNear":n.set(t.logDepthCameraNear);break;case"u_PointSize":n.set(v.size);break;case"u_PointScale":o=.5*g.height,n.set(o);break;case"dashSize":n.set(v.dashSize);break;case"totalSize":n.set(v.dashSize+v.gapSize);break;case"scale":n.set(v.scale);break;case"matcap":n.set(v.matcap,s);break;case"clippingPlanes":n.set(A);break;case"uvTransform":n.set(v.diffuseMapTransform.elements)}}const P=_.worldMatrix.determinant()<0;r.setMaterial(v,P);const C=Yr.set(g.width,g.height,g.width,g.height).multiply(m.rect);C.z-=C.x,C.w-=C.y,C.x=Math.floor(C.x),C.y=Math.floor(C.y),C.z=Math.floor(C.z),C.w=Math.floor(C.w),r.viewport(C.x,C.y,C.z,C.w),this._draw(b,v,x,d),s.resetTextureUnits(),r.depthBuffer.setTest(!0),r.depthBuffer.setMask(!0),r.colorBuffer.setMask(!0),c(e),_.onAfterRender(e)}_uploadLights(e,t,n){const r=this._textures;t.useAmbient&&e.set("u_AmbientLightColor",t.ambient),t.hemisNum>0&&e.set("u_Hemi",t.hemisphere),t.directsNum>0&&(e.set("u_Directional",t.directional),t.directShadowNum>0&&(e.set("u_DirectionalShadow",t.directionalShadow),e.has("directionalShadowMap")&&(this.capabilities.version>=2&&!n?e.set("directionalShadowMap",t.directionalShadowDepthMap,r):e.set("directionalShadowMap",t.directionalShadowMap,r),e.set("directionalShadowMatrix",t.directionalShadowMatrix)),e.has("directionalDepthMap")&&e.set("directionalDepthMap",t.directionalShadowMap,r))),t.pointsNum>0&&(e.set("u_Point",t.point),t.pointShadowNum>0&&(e.set("u_PointShadow",t.pointShadow),e.has("pointShadowMap")&&(e.set("pointShadowMap",t.pointShadowMap,r),e.set("pointShadowMatrix",t.pointShadowMatrix)))),t.spotsNum>0&&(e.set("u_Spot",t.spot),t.spotShadowNum>0&&(e.set("u_SpotShadow",t.spotShadow),e.has("spotShadowMap")&&(this.capabilities.version>=2&&!n?e.set("spotShadowMap",t.spotShadowDepthMap,r):e.set("spotShadowMap",t.spotShadowMap,r),e.set("spotShadowMatrix",t.spotShadowMatrix)),e.has("spotDepthMap")&&e.set("spotDepthMap",t.spotShadowMap,r)))}_uploadSkeleton(e,t,n){if(t.skeleton&&t.skeleton.bones.length>0){const r=t.skeleton,i=this.capabilities;i.maxVertexTextures>0&&(i.getExtension("OES_texture_float")||i.version>=2)?(void 0===r.boneTexture&&r.generateBoneTexture(i.version>=2),e.set("boneTexture",r.boneTexture,this._textures),e.set("boneTextureSize",r.boneTexture.image.width)):e.set("boneMatrices",r.boneMatrices),e.set("bindMatrix",t.bindMatrix.elements),Qr.copy(t.bindMatrixInverse),n.useAnchorMatrix&&Qr.multiply(n.anchorMatrix),e.set("bindMatrixInverse",Qr.elements)}}_updateMorphtargets(e,t,n){const r=e.morphTargetInfluences;Zr.has(t)||Zr.set(t,r.slice(0));const i=t.morphAttributes.position,a=t.morphAttributes.normal,s=Zr.get(t);for(let e=0;e<s.length;e++)0!==s[e]&&(i&&t.removeAttribute("morphTarget"+e),a&&t.removeAttribute("morphNormal"+e));for(let e=0;e<r.length;e++)s[e]=r[e];s.length=r.length;let o=0;for(let e=0;e<s.length;e++){const n=s[e];n>0&&(i&&t.addAttribute("morphTarget"+o,i[e]),a&&t.addAttribute("morphNormal"+o,a[e]),Kr[o]=n,o++)}for(;o<8;o++)Kr[o]=0;n.getUniforms().set("morphTargetInfluences",Kr)}_draw(e,t,n,r){const i=this.gl,a=this._properties,s=this.capabilities,o=null!==e.index;let l=0,u=o?e.index.buffer.count:e.getAttribute("a_Position").buffer.count;const c=n?n.start:0,h=n?n.count:1/0;l=Math.max(l,c),u=Math.min(u,h);const d=e.instanceCount,f=d>=0;if(o){const n=a.get(e.index.buffer),r=n.bytesPerElement,o=n.type;if(o===i.UNSIGNED_INT&&s.version<2&&!s.getExtension("OES_element_index_uint")&&console.warn("draw elements type not support UNSIGNED_INT!"),f){if(d>0)if(s.version>=2)i.drawElementsInstanced(t.drawMode,u,o,l*r,d);else{if(!s.getExtension("ANGLE_instanced_arrays"))return void console.warn("no support instanced draw.");s.getExtension("ANGLE_instanced_arrays").drawElementsInstancedANGLE(t.drawMode,u,o,l*r,d)}}else i.drawElements(t.drawMode,u,o,l*r)}else if(f){if(d>0)if(s.version>=2)i.drawArraysInstanced(t.drawMode,l,u,d);else{if(!s.getExtension("ANGLE_instanced_arrays"))return void console.warn("no support instanced draw.");s.getExtension("ANGLE_instanced_arrays").drawArraysInstancedANGLE(t.drawMode,l,u,d)}}else i.drawArrays(t.drawMode,l,u);r&&r.update(u,t.drawMode,d<0?1:d)}}class si{constructor(e){this.renderPass=new ai(e)}renderScene(e,t){const n=e.getRenderStates(t),r=e.getRenderQueue(t);let i;for(let e=0,t=r.layerList.length;e<t;e++)i=r.layerList[e],this.renderRenderableList(i.opaque,n),this.renderRenderableList(i.transparent,n)}renderRenderableList(e,t,n={}){const r=this.renderPass;for(let i=0,a=e.length;i<a;i++)r.render(e[i],t,n)}}class oi{constructor(e=0,t=1,n=1e3){this.color=new Pe(e),this.near=t,this.far=n}}oi.prototype.isFog=!0;class li{constructor(e=0,t=25e-5){this.color=new Pe(e),this.density=t}}li.prototype.isFogExp2=!0;class ui extends _n{constructor(e=1,t=1,n=1,i=1,a=1,s=1){super();const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],c=[],h=[];let d=0,f=0;function p(e,t,n,i,a,s,p,m,g,_,v){const b=s/g,x=p/_,y=s/2,w=p/2,A=m/2,E=g+1,S=_+1;let T=0,M=0;const P=new r;for(let r=0;r<S;r++){const s=r*x-w;for(let o=0;o<E;o++){const l=o*b-y;P[e]=l*i,P[t]=s*a,P[n]=A,u.push(P.x,P.y,P.z),P[e]=0,P[t]=0,P[n]=m>0?1:-1,c.push(P.x,P.y,P.z),h.push(o/g),h.push(1-r/_),T+=1}}for(let e=0;e<_;e++)for(let t=0;t<g;t++){const n=d+t+E*e,r=d+t+E*(e+1),i=d+(t+1)+E*(e+1),a=d+(t+1)+E*e;l.push(n,r,a),l.push(r,i,a),M+=6}o.addGroup(f,M,v),f+=M,d+=T}p("z","y","x",-1,-1,n,t,e,s,a,0),p("z","y","x",1,-1,n,t,-e,s,a,1),p("x","z","y",1,1,e,n,t,i,s,2),p("x","z","y",1,-1,e,n,-t,i,s,3),p("x","y","z",1,-1,e,t,n,i,a,4),p("x","y","z",-1,-1,e,t,-n,i,a,5),this.setIndex(new un(new cn(u.length/3>65536?new Uint32Array(l):new Uint16Array(l),1))),this.addAttribute("a_Position",new un(new cn(new Float32Array(u),3))),this.addAttribute("a_Normal",new un(new cn(new Float32Array(c),3))),this.addAttribute("a_Uv",new un(new cn(new Float32Array(h),2))),this.computeBoundingBox(),this.computeBoundingSphere()}}class ci extends xn{constructor(){super(),this.type="basic"}}class hi extends xn{constructor(){super(),this.type="line",this.lineWidth=1,this.drawMode=1}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this}}class di extends xn{constructor(){super(),this.type="pbr2",this.specular=new Pe(1118481),this.glossiness=.5,this.specularMap=null,this.glossinessMap=null,this.acceptLight=!0}copy(e){return super.copy(e),this.specular=e.specular,this.glossiness=e.glossiness,this.specularMap=e.specularMap,this.glossinessMap=e.glossinessMap,this}}class fi extends xn{constructor(){super(),this.type="pbr",this.roughness=.5,this.metalness=.5,this.roughnessMap=null,this.metalnessMap=null,this.acceptLight=!0}copy(e){return super.copy(e),this.roughness=e.roughness,this.metalness=e.metalness,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this}}class pi extends xn{constructor(){super(),this.type="point",this.size=1,this.sizeAttenuation=!0,this.drawMode=0}copy(e){return super.copy(e),this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}class mi extends ae{constructor(e,t){super(),this.width=e,this.height=t}resize(e,t){return(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,!0)}dispose(){this.dispatchEvent({type:"dispose"})}}mi.prototype.isRenderTarget=!0;class gi extends ae{constructor(e,t,n=1111,r=0){super(),this.width=e,this.height=t,this.format=n,this.multipleSampling=r}resize(e,t){return(this.width!==e||this.height!==t)&&(this.dispose(),this.width=e,this.height=t,!0)}clone(){return(new this.constructor).copy(this)}copy(e){return this.format=e.format,this.multipleSampling=e.multipleSampling,this}dispose(){this.dispatchEvent({type:"dispose"})}}gi.prototype.isRenderBuffer=!0;class _i extends mi{constructor(e,t){super(e,t),this._attachments={},this.attach(new Rn,ne),this.attach(new gi(e,t,M),ie)}attach(e,t=2e3){e.isTexture?e.image&&e.image.rtt?e.image.width===this.width&&e.image.height===this.height||(e.version++,e.image.width=this.width,e.image.height=this.height):(e.version++,e.image={rtt:!0,data:null,width:this.width,height:this.height}):e.resize(this.width,this.height),this._attachments[t]=e}detach(e=2e3){delete this._attachments[e]}resize(e,t){const n=super.resize(e,t);if(n){this.dispose(!1);for(const n in this._attachments){const r=this._attachments[n];r.isTexture?(r.image={rtt:!0,data:null,width:this.width,height:this.height},r.version++):r.resize(e,t)}}return n}dispose(e=!0){if(super.dispose(),e)for(const e in this._attachments)this._attachments[e].dispose()}}_i.prototype.isRenderTarget2D=!0,Object.defineProperties(_i.prototype,{texture:{set:function(e){e?e.isTexture&&this.attach(e,ne):this.detach(ne)},get:function(){const e=this._attachments[2e3];return e.isTexture?e:null}}});class vi extends mi{constructor(e){super(e.width,e.height),this.view=e}resize(e,t){this.view.width=e,this.view.height=t,this.width=e,this.height=t}dispose(){}}vi.prototype.isRenderTargetBack=!0;class bi extends mi{constructor(e,t){super(e,t),this._attachments={},this.attach(new Dn,ne),this.attach(new gi(e,t,M),ie),this.activeCubeFace=0}attach(e,t=2e3){if(e.isTexture){let t=!1;for(let n=0;n<6;n++)e.images[n]&&e.images[n].rtt?e.images[n].width===this.width&&e.images[n].height===this.height||(e.images[n].width=this.width,e.images[n].height=this.height,t=!0):(e.images[n]={rtt:!0,data:null,width:this.width,height:this.height},t=!0);t&&e.version++}else e.resize(this.width,this.height);this._attachments[t]=e}detach(e=2e3){delete this._attachments[e]}resize(e,t){if(super.resize(e,t)){this.dispose(!1);for(const n in this._attachments){const r=this._attachments[n];if(r.isTexture){for(let e=0;e<6;e++)r.images[e]={rtt:!0,data:null,width:this.width,height:this.height};r.version++}else r.resize(e,t)}}}dispose(e=!0){if(super.dispose(),e)for(const e in this._attachments)this._attachments[e].dispose()}}bi.prototype.isRenderTargetCube=!0,Object.defineProperties(bi.prototype,{texture:{set:function(e){e?e.isTexture&&this.attach(e,ne):this.detach(ne)},get:function(){const e=this._attachments[2e3];return e.isTexture?e:null}}});const xi=new a;class yi{constructor(e,t){this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=new Float32Array(16*this.bones.length),this.boneTexture=void 0}pose(){const e=this.boneInverses;for(let t=0;t<this.bones.length;t++)this.bones[t].worldMatrix.getInverse(e[t]);for(let e=0;e<this.bones.length;e++){const t=this.bones[e];t.parent&&"bone"==t.parent.type?(t.matrix.getInverse(t.parent.worldMatrix),t.matrix.multiply(t.worldMatrix)):t.matrix.copy(t.worldMatrix),t.matrix.decompose(t.position,t.quaternion,t.scale)}}clone(){return new yi(this.bones,this.boneInverses)}updateBones(e){const t=e.useAnchorMatrix,n=e.anchorMatrixInverse,r=this.boneInverses;for(let e=0;e<this.bones.length;e++){const i=this.bones[e];xi.multiplyMatrices(i.worldMatrix,r[e]),t&&xi.premultiply(n),xi.toArray(this.boneMatrices,16*e)}void 0!==this.boneTexture&&this.boneTexture.version++}generateBoneTexture(){let e=Math.sqrt(4*this.bones.length);var t;t=Math.ceil(e),t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,e=++t,e=Math.max(4,e);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Rn;r.image={data:n,width:e,height:e},r.format=P,r.type=k,r.magFilter=z,r.minFilter=z,r.generateMipmaps=!1,r.flipY=!1,this.boneMatrices=n,this.boneTexture=r}}class wi extends ut{constructor(e=16777215,t=1){super(),this.color=new Pe(e),this.intensity=t}lookAt(e,t){Ai.lookAtRH(this.position,e,t),this.quaternion.setFromRotationMatrix(Ai)}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}}wi.prototype.isLight=!0;const Ai=new a;class Ei extends wi{constructor(e,t){super(e,t)}}Ei.prototype.isAmbientLight=!0;class Si{constructor(){this.camera=new It,this.matrix=new a,this.bias=0,this.normalBias=0,this.radius=1,this.cameraNear=1,this.cameraFar=500,this.mapSize=new Se(512,512),this.autoUpdate=!0,this.needsUpdate=!1,this.renderTarget=null,this.map=null,this.depthMap=null}update(e,t){}updateMatrix(){const e=this.matrix,t=this.camera;e.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),e.multiply(t.projectionMatrix),e.multiply(t.viewMatrix)}copy(e){return this.camera.copy(e.camera),this.matrix.copy(e.matrix),this.bias=e.bias,this.normalBias=e.normalBias,this.radius=e.radius,this.cameraNear=e.cameraNear,this.cameraFar=e.cameraFar,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}prepareDepthMap(e,t){}}class Ti extends Si{constructor(){super(),this.windowSize=500,this.frustumEdgeFalloff=0,this.camera.frustumCulled=!1,this.renderTarget=new _i(this.mapSize.x,this.mapSize.y);const e=this.renderTarget.texture;e.generateMipmaps=!1,e.minFilter=B;const t=new Rn;t.type=U,t.format=T,t.magFilter=B,t.minFilter=B,t.compare=513,t.generateMipmaps=!1;const n=new gi(this.mapSize.x,this.mapSize.y,N);this.renderTarget.detach(ie),this.renderTarget.attach(n,re),this.map=e,this.depthMap=t,this._depthBuffer=n,this._lookTarget=new r,this._up=new r(0,1,0)}update(e){this._updateCamera(e),this.mapSize.x===this.renderTarget.width&&this.mapSize.y===this.renderTarget.height||this.renderTarget.resize(this.mapSize.x,this.mapSize.y)}_updateCamera(e){const t=this.camera,n=this._lookTarget;e.getWorldDirection(n),t.position.setFromMatrixPosition(e.worldMatrix),n.multiplyScalar(-1).add(t.position),t.lookAt(n,this._up),t.updateMatrix();const r=this.windowSize/2;t.setOrtho(-r,r,-r,r,this.cameraNear,this.cameraFar)}copy(e){return super.copy(e),this.windowSize=e.windowSize,this.frustumEdgeFalloff=e.frustumEdgeFalloff,this}prepareDepthMap(e,t){const n=e&&t.version>=2,r=this.renderTarget;n!==(r._attachments[2020]===this.depthMap)&&(n?(t.getExtension("OES_texture_float_linear")&&(this.depthMap.type=k),r.dispose(),r.attach(this.depthMap,re)):(r.dispose(),r.attach(this._depthBuffer,re)))}}class Mi extends wi{constructor(e,t){super(e,t),this.shadow=new Ti}copy(e){return super.copy(e),this.shadow.copy(e.shadow),this}}Mi.prototype.isDirectionalLight=!0;class Pi extends wi{constructor(e,t,n){super(e,n),this.groundColor=new Pe(void 0!==t?t:16777215)}copy(e){super.copy(e),this.groundColor.copy(e.groundColor)}}Pi.prototype.isHemisphereLight=!0;class Ci extends Si{constructor(){super(),this.renderTarget=new bi(this.mapSize.x,this.mapSize.y);const e=this.renderTarget.texture;e.generateMipmaps=!1,e.minFilter=B,this.map=e,this._targets=[new r(1,0,0),new r(-1,0,0),new r(0,1,0),new r(0,-1,0),new r(0,0,1),new r(0,0,-1)],this._ups=[new r(0,-1,0),new r(0,-1,0),new r(0,0,1),new r(0,0,-1),new r(0,-1,0),new r(0,-1,0)],this._lookTarget=new r}update(e,t){this._updateCamera(e,t),this.mapSize.x===this.renderTarget.width&&this.mapSize.y===this.renderTarget.height||this.renderTarget.resize(this.mapSize.x,this.mapSize.y)}_updateCamera(e,t){const n=this.camera,r=this._lookTarget,i=this._targets,a=this._ups;n.position.setFromMatrixPosition(e.worldMatrix),r.set(i[t].x+n.position.x,i[t].y+n.position.y,i[t].z+n.position.z),n.lookAt(r,a[t]),n.updateMatrix(),n.setPerspective(.5*Math.PI,1,this.cameraNear,this.cameraFar)}}class Fi extends wi{constructor(e,t,n,r){super(e,t),this.decay=void 0!==r?r:1,this.distance=void 0!==n?n:200,this.shadow=new Ci}copy(e){return super.copy(e),this.shadow.copy(e.shadow),this}}Fi.prototype.isPointLight=!0;class Li extends Si{constructor(){super(),this.frustumEdgeFalloff=0,this.renderTarget=new _i(this.mapSize.x,this.mapSize.y);const e=this.renderTarget.texture;e.generateMipmaps=!1,e.minFilter=B;const t=new Rn;t.type=U,t.format=T,t.magFilter=B,t.minFilter=B,t.compare=513,t.generateMipmaps=!1;const n=new gi(this.mapSize.x,this.mapSize.y,N);this.renderTarget.detach(ie),this.renderTarget.attach(n,re),this.map=e,this.depthMap=t,this._depthBuffer=n,this._lookTarget=new r,this._up=new r(0,1,0)}update(e){this._updateCamera(e),this.mapSize.x===this.renderTarget.width&&this.mapSize.y===this.renderTarget.height||this.renderTarget.resize(this.mapSize.x,this.mapSize.y)}_updateCamera(e){const t=this.camera,n=this._lookTarget;e.getWorldDirection(n),t.position.setFromMatrixPosition(e.worldMatrix),n.multiplyScalar(-1).add(t.position),t.lookAt(n,this._up),t.updateMatrix(),t.setPerspective(2*e.angle,1,this.cameraNear,this.cameraFar)}copy(e){return super.copy(e),this.frustumEdgeFalloff=e.frustumEdgeFalloff,this}prepareDepthMap(e,t){const n=e&&t.version>=2,r=this.renderTarget;n!==(r._attachments[2020]===this.depthMap)&&(n?(t.getExtension("OES_texture_float_linear")&&(this.depthMap.type=k),r.dispose(),r.attach(this.depthMap,re)):(r.dispose(),r.attach(this._depthBuffer,re)))}}class Ni extends wi{constructor(e,t,n,r,i,a){super(e,t),this.decay=void 0!==a?a:1,this.distance=void 0!==n?n:200,this.penumbra=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/6,this.shadow=new Li}copy(e){return super.copy(e),this.shadow.copy(e.shadow),this}}Ni.prototype.isSpotLight=!0;class Ii extends ut{constructor(){super()}}Ii.prototype.isBone=!0;class Ri extends an{constructor(e,t){super(e,t),this.skeleton=void 0,this.bindMode="attached",this.bindMatrix=new a,this.bindMatrixInverse=new a}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrix(),t=this.worldMatrix),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)}updateMatrix(e){super.updateMatrix(e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.worldMatrix):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("t3d.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}}Ri.prototype.isSkinnedMesh=!0;class Di extends ut{constructor(){super()}}Di.prototype.isGroup=!0,r.prototype.applyProjection=function(e){console.error("t3d.Vector3: .applyProjection has been removed. Use .applyMatrix4 instead.")},Object.defineProperties(It.prototype,{gammaInput:{get:function(){return console.warn("t3d.Camera: .gammaInput has been removed. Use texture.encoding instead."),!1},set:function(e){console.warn("t3d.Camera: .gammaInput has been removed. Use texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("t3d.Camera: .gammaOutput has been removed. Use .outputEncoding or renderTarget.texture.encoding instead."),this.outputEncoding==te},set:function(e){console.warn("t3d.Camera: .gammaOutput has been removed. Use .outputEncoding or renderTarget.texture.encoding instead."),this.outputEncoding=e?te:J}}}),Object.defineProperties(xn.prototype,{emissiveIntensity:{get:function(){return console.warn("t3d.Material: .emissiveIntensity has been removed. Use material.emissive instead."),!1},set:function(e){console.warn("t3d.Material: .emissiveIntensity has been removed. Use material.emissive instead.")}}}),Object.defineProperties(ai.prototype,{textures:{get:function(){return console.warn("WebGLRenderPass: .textures has been deprecated. All methods are moved to WebGLRenderPass."),this._textures}},renderBuffers:{get:function(){return console.warn("WebGLRenderPass: .renderBuffers has been deprecated. All methods are moved to WebGLRenderPass."),this._renderBuffers}},renderTarget:{get:function(){return this._renderTargets}},state:{get:function(){return this._state}},vertexArrayBindings:{get:function(){return console.warn("WebGLRenderPass: .vertexArrayBindings has been deprecated. All methods are moved to WebGLRenderPass."),this._vertexArrayBindings}}}),Wr.prototype.resetBinding=function(){console.error("WebGLVertexArrayBindings: .resetBinding() has been removed. Use WebGLRenderPass.resetVertexArrayBindings() instead.")};Object.defineProperties(In.prototype,{textureType:{get:function(){return console.warn("TextureBase: .textureType has been removed."),""},set:function(e){console.warn("TextureBase: .textureType has been removed.")}}}),Object.defineProperties(Rn,{textureType:{get:function(){return console.warn("Texture2D: .textureType has been removed."),3553},set:function(e){console.warn("Texture2D: .textureType has been removed.")}}}),Object.defineProperties(Un,{textureType:{get:function(){return console.warn("Texture3D: .textureType has been removed."),32879},set:function(e){console.warn("Texture3D: .textureType has been removed.")}}}),Object.defineProperties(Dn,{textureType:{get:function(){return console.warn("TextureCube: .textureType has been removed."),34067},set:function(e){console.warn("TextureCube: .textureType has been removed.")}}});Object.defineProperties(wi.prototype,{lightType:{get:function(){return console.warn("Light: .lightType has been removed."),""},set:function(e){console.warn("Light: .lightType has been removed.")}}}),Object.defineProperties(Ei.prototype,{lightType:{get:function(){return console.warn("AmbientLight: .lightType has been removed."),"ambient"},set:function(e){console.warn("AmbientLight: .lightType has been removed.")}}}),Object.defineProperties(Mi.prototype,{lightType:{get:function(){return console.warn("DirectionalLight: .lightType has been removed."),"direct"},set:function(e){console.warn("DirectionalLight: .lightType has been removed.")}}}),Object.defineProperties(Pi.prototype,{lightType:{get:function(){return console.warn("HemisphereLight: .lightType has been removed."),"hemisphere"},set:function(e){console.warn("HemisphereLight: .lightType has been removed.")}}}),Object.defineProperties(Fi.prototype,{lightType:{get:function(){return console.warn("PointLight: .lightType has been removed."),"point"},set:function(e){console.warn("PointLight: .lightType has been removed.")}}}),Object.defineProperties(Ni.prototype,{lightType:{get:function(){return console.warn("SpotLight: .lightType has been removed."),"spot"},set:function(e){console.warn("SpotLight: .lightType has been removed.")}}});Object.defineProperties(an.prototype,{type:{get:function(){return console.warn("Mesh: .type has been removed, use .isMesh instead."),"mesh"},set:function(e){console.warn("Mesh: .type has been removed.")}}}),Object.defineProperties(Ri.prototype,{type:{get:function(){return console.warn("SkinnedMesh: .type has been removed, use .isSkinnedMesh instead."),"skinned_mesh"},set:function(e){console.warn("SkinnedMesh: .type has been removed.")}}}),Object.defineProperties(wi.prototype,{type:{get:function(){return console.warn("Light: .type has been removed, use .isLight instead."),"light"},set:function(e){console.warn("Light: .type has been removed.")}}}),Object.defineProperties(It.prototype,{type:{get:function(){return console.warn("Camera: .type has been removed, use .isCamera instead."),"camera"},set:function(e){console.warn("Camera: .type has been removed.")}}}),Object.defineProperties(Nt.prototype,{type:{get:function(){return console.warn("Scene: .type has been removed, use .isScene instead."),"scene"},set:function(e){console.warn("Scene: .type has been removed.")}}}),Object.defineProperties(Di.prototype,{type:{get:function(){return console.warn("Group: .type has been removed, use .isGroup instead."),"group"},set:function(e){console.warn("Group: .type has been removed.")}}});Object.defineProperties(oi.prototype,{fogType:{get:function(){return console.warn("Fog: .fogType has been removed, use .isFog instead."),"normal"},set:function(e){console.warn("Fog: .fogType has been removed.")}}}),Object.defineProperties(li.prototype,{fogType:{get:function(){return console.warn("FogExp2: .fogType has been removed, use .isFogExp2 instead."),"exp2"},set:function(e){console.warn("FogExp2: .fogType has been removed.")}}}),Rn.fromImage=function(e){console.warn("Texture2D.fromImage has been removed.");const t=new Rn;return t.image=e,t.version++,t},Rn.fromSrc=function(e){console.warn("Texture2D.fromSrc has been removed, use Texture2DLoader(jsm) instead.");const t=new Rn;return(new Ee).load(e,(function(e){t.image=e,t.version++,t.dispatchEvent({type:"onload"})})),t},Dn.fromImage=function(e){console.warn("TextureCube.fromImage has been removed.");const t=new Dn,n=t.images;for(let t=0;t<6;t++)n[t]=e[t];return t.version++,t},Dn.fromSrc=function(e){console.warn("TextureCube.fromSrc has been removed, use TextureCubeLoader(jsm) instead.");const t=new Dn,n=t.images,r=new Ee;let i=0;return function a(s){if(s&&(n.push(s),i++),i>=6)return t.version++,void t.dispatchEvent({type:"onload"});r.load(e[i],a)}(),t};class Ui{constructor(e,t){this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r,this.up=new r(0,1,0),this.minDistance=0,this.maxDistance=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!0,this.dampingFactor=.1,this.enableDollying=!0,this.dollyingSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:0,DOLLY:1,PAN:2},this.touches={ORBIT:1,DOLLY_PAN:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",U),n._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position)},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),a=i.NONE},this.update=function(){const e=new r,t=new r(0,1,0),d=new h,f=d.clone(),p=new r,m=new h,g=2*Math.PI;return function(){d.setFromUnitVectors(n.up,t),f.copy(d).conjugate();const r=n.object.position;e.copy(r).sub(n.target),e.applyQuaternion(d),o.setFromVector3(e),n.autoRotate&&a===i.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(o.theta+=l.theta*n.dampingFactor,o.phi+=l.phi*n.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let h=n.minAzimuthAngle,_=n.maxAzimuthAngle;return isFinite(h)&&isFinite(_)&&(h<-Math.PI?h+=g:h>Math.PI&&(h-=g),_<-Math.PI?_+=g:_>Math.PI&&(_-=g),o.theta=h<=_?Math.max(h,Math.min(_,o.theta)):o.theta>(h+_)/2?Math.max(h,o.theta):Math.min(_,o.theta)),o.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=u,o.radius=Math.max(n.minDistance,Math.min(n.maxDistance,o.radius)),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),e.setFromSpherical(o),e.applyQuaternion(f),r.copy(n.target).add(e),n.object.lookAt(n.target,n.up),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),u=1,(p.distanceToSquared(n.object.position)>s||8*(1-m.dot(n.object.quaternion))>s)&&(p.copy(n.object.position),m.copy(n.object.quaternion),!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",O),n.domElement.removeEventListener("pointerdown",L),n.domElement.removeEventListener("pointercancel",R),n.domElement.removeEventListener("wheel",D),n.domElement.removeEventListener("pointermove",N),n.domElement.removeEventListener("pointerup",I),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",U)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4};let a=i.NONE;const s=1e-6,o=new qe,l=new qe;let u=1;const c=new r,d=new Se,f=new Se,p=new Se,m=new Se,g=new Se,_=new Se,v=new Se,b=new Se,x=new Se,y=[],w={};function A(){return Math.pow(.95,n.dollyingSpeed)}function E(e){l.theta-=e}function S(e){l.phi-=e}const T=function(){const e=new r;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),M=function(){const e=new r;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.up,e)),e.multiplyScalar(t),c.add(e)}}(),P=function(){const e=new r,t=new r;return function(r,i){const a=n.domElement,s=n.object.position;e.copy(s).sub(n.target);const o=e.getLength(),l=t.set(0,0,o).applyMatrix4(n.object.projectionMatrix).z;let u=t.set(0,-1,l).applyMatrix4(n.object.projectionMatrixInverse).y;T(2*r*u/a.clientHeight,n.object.matrix),M(2*i*u/a.clientHeight,n.object.matrix)}}();function C(e){u/=e}function F(e){u*=e}function L(e){!1!==n.enabled&&(0===y.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",N),n.domElement.addEventListener("pointerup",I)),function(e){y.push(e)}(e),"touch"===e.pointerType?function(e){switch($(e),y.length){case n.touches.ORBIT:if(!1===n.enableRotate)return;!function(){if(1===y.length)d.set(y[0].pageX,y[0].pageY);else{const e=.5*(y[0].pageX+y[1].pageX),t=.5*(y[0].pageY+y[1].pageY);d.set(e,t)}}(),a=i.TOUCH_ROTATE;break;case n.touches.DOLLY_PAN:if(!1===n.enableDollying&&!1===n.enablePan)return;n.enableDollying&&function(){const e=y[0].pageX-y[1].pageX,t=y[0].pageY-y[1].pageY,n=Math.sqrt(e*e+t*t);v.set(0,n)}(),n.enablePan&&function(){if(1===y.length)m.set(y[0].pageX,y[0].pageY);else{const e=.5*(y[0].pageX+y[1].pageX),t=.5*(y[0].pageY+y[1].pageY);m.set(e,t)}}(),a=i.TOUCH_DOLLY_PAN;break;default:a=i.NONE}}(e):function(e){switch(e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;!function(e){d.set(e.clientX,e.clientY)}(e),a=i.ROTATE;break;case n.mouseButtons.DOLLY:if(!1===n.enableDollying)return;!function(e){v.set(e.clientX,e.clientY)}(e),a=i.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;!function(e){m.set(e.clientX,e.clientY)}(e),a=i.PAN}}(e))}function N(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch($(e),a){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;!function(e){if(1==y.length)f.set(e.pageX,e.pageY);else{const t=z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}p.subVectors(f,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;E(2*Math.PI*p.x/t.clientHeight),S(2*Math.PI*p.y/t.clientHeight),d.copy(f)}(e);break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableDollying&&!1===n.enablePan)return;!function(e){n.enableDollying&&function(e){const t=z(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);b.set(0,a),x.set(0,Math.pow(b.y/v.y,n.dollyingSpeed)),C(x.y),v.copy(b)}(e),n.enablePan&&function(e){if(1===y.length)g.set(e.pageX,e.pageY);else{const t=z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);g.set(n,r)}_.subVectors(g,m).multiplyScalar(n.panSpeed),P(_.x,_.y),m.copy(g)}(e)}(e);break;default:a=i.NONE}}(e):function(e){switch(a){case i.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),p.subVectors(f,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;E(2*Math.PI*p.x/t.clientHeight),S(2*Math.PI*p.y/t.clientHeight),d.copy(f)}(e);break;case i.DOLLY:if(!1===n.enableDollying)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,v),x.y>0?C(A()):x.y<0&&F(A()),v.copy(b)}(e);break;case i.PAN:if(!1===n.enablePan)return;!function(e){g.set(e.clientX,e.clientY),_.subVectors(g,m).multiplyScalar(n.panSpeed),P(_.x,_.y),m.copy(g)}(e)}}(e))}function I(e){k(e),0===y.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",N),n.domElement.removeEventListener("pointerup",I)),a=i.NONE}function R(e){k(e)}function D(e){!1!==n.enabled&&!1!==n.enableDollying&&a===i.NONE&&(e.preventDefault(),function(e){e.deltaY<0?F(A()):e.deltaY>0&&C(A())}(e))}function U(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.keyCode){case n.keys.UP:P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),t=!0}t&&e.preventDefault()}(e)}function O(e){!1!==n.enabled&&e.preventDefault()}function k(e){delete w[e.pointerId];for(let t=0;t<y.length;t++)if(y[t].pointerId==e.pointerId)return void y.splice(t,1)}function $(e){let t=w[e.pointerId];void 0===t&&(t=new Se,w[e.pointerId]=t),t.set(e.pageX,e.pageY)}function z(e){const t=e.pointerId===y[0].pointerId?y[1]:y[0];return w[t.pointerId]}n.domElement.addEventListener("contextmenu",O),n.domElement.addEventListener("pointerdown",L),n.domElement.addEventListener("pointercancel",R),n.domElement.addEventListener("wheel",D,{passive:!1}),this.update()}}class Oi extends ye{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}const ki=new RegExp("[\\[\\]\\.:\\/]","g");class $i{constructor(){}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ki,"")}static extractUrlBase(e){const t=e.split("/");return t.pop(),(t.length<1?".":t.join("/"))+"/"}static resolveURL(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e}static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static parseGLB(e){const t=new DataView(e),n={magic:t.getUint32(0,!0),version:t.getUint32(4,!0),length:t.getUint32(8,!0)};if(1179937895!==n.magic)return console.error("Invalid glb magic number. Expected 0x46546C67, found 0x"+n.magic.toString(16)),null;n.version<2&&console.error("GLTFLoader: Legacy binary file detected.");let r=t.getUint32(12,!0),i=t.getUint32(16,!0);if(1313821514!==i)return console.error("Invalid glb chunk type. Expected 0x4E4F534A, found 0x"+i.toString(16)),null;const a=new Uint8Array(e,20,r),s=JSON.parse($i.decodeText(a)),o=[];let l=20+r;for(;l<n.length;){if(r=t.getUint32(l,!0),i=t.getUint32(l+4,!0),5130562!==i)return console.error("Invalid glb chunk type. Expected 0x004E4942, found 0x"+i.toString(16)),null;const n=l+8,a=e.slice(n,n+r);o.push(a),l+=r+8}return{gltf:s,buffers:o}}static getNormalizedComponentScale(e){if(e===Int8Array)return 1/127;if(e===Uint8Array)return 1/255;if(e===Int16Array)return 1/32767;if(e===Uint16Array)return 1/65535;throw new Error("Unsupported normalized accessor component type.")}}const zi={POSITION:"a_Position",NORMAL:"a_Normal",TANGENT:"a_Tangent",TEXCOORD_0:"a_Uv",TEXCOORD_1:"a_Uv2",TEXCOORD_2:"a_Uv3",TEXCOORD_3:"a_Uv4",TEXCOORD_4:"a_Uv5",TEXCOORD_5:"a_Uv6",TEXCOORD_6:"a_Uv7",TEXCOORD_7:"a_Uv8",COLOR_0:"a_Color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex",TEXCOORD0:"a_Uv",TEXCOORD:"a_Uv",COLOR0:"a_Color",COLOR:"a_Color",WEIGHT:"skinWeight",JOINT:"skinIndex"},Bi={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Gi={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ji={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Vi={9728:z,9729:B,9984:G,9985:1603,9986:j,9987:V},Hi={33071:X,33648:1702,10497:H};class Xi{static getMaterial(){return new ci}}class Wi{static transform(e,t){let n=0,r=0,i=1,a=1,s=0;void 0!==t.offset&&(n=t.offset[0],r=t.offset[1]),void 0!==t.rotation&&(s=t.rotation),void 0!==t.scale&&(i=t.scale[0],a=t.scale[1]),e.setUvTransform(n,r,i,a,s,0,0),void 0!==t.texCoord&&console.warn("Custom UV sets in KHR_texture_transform extension not yet supported.")}}class qi{static getMaterial(){return new di}static parseParams(e,t,n){const{diffuseFactor:r,diffuseTexture:i,specularFactor:a,glossinessFactor:s,specularGlossinessTexture:o}=t;Array.isArray(r)&&(e.diffuse.fromArray(r),e.opacity=r[3]||1),i&&(e.diffuseMap=n[i.index],e.diffuseMapCoord=i.texCoord||0,e.diffuseMap&&(e.diffuseMap.encoding=ee),Yi(e,"diffuseMap",i.extensions)),e.glossiness=void 0!==s?s:1,Array.isArray(a)&&e.specular.fromArray(a),o&&(e.glossinessMap=n[o.index],e.specularMap=n[o.index],Yi(e,"glossinessMap",o.extensions),Yi(e,"specularMap",o.extensions))}}function Yi(e,t,n={}){const r=n.KHR_texture_transform;r&&(e[t]=Wi.transform(e[t],r))}function Qi(e,t,n={}){const r=n.KHR_texture_transform;r&&Wi.transform(e[t+"Transform"],r)}class Zi{static getGeometry(e,t,n){const{bufferView:r,attributes:i}=e;if(!n)throw new Error("GLTFLoader: No DRACOLoader instance provided.");const a={};for(let e in i)a[void 0===zi[e]?e:zi[e]]=i[e];const s=t[r];return new Promise((function(e){n.decodeDracoFile(s,e,a)}))}}function Ki(e,t,n,r){const{attributes:i,indices:a,targets:s}=t;for(const t in i){const n=i[t],a=void 0===zi[t]?t:zi[t];a in e.attributes||e.addAttribute(a,r[n])}void 0===a||e.index||e.setIndex(r[a]);const{boundingBox:o,boundingSphere:l}=e;if(void 0!==i.POSITION){const t=i.POSITION,r=n.accessors[t];if(r.min&&r.max){if(o.min.fromArray(r.min),o.max.fromArray(r.max),r.normalized){const e=$i.getNormalizedComponentScale(ji[r.componentType]);o.min.multiplyScalar(e),o.max.multiplyScalar(e)}}else e.computeBoundingBox()}else e.computeBoundingBox();if(o.getCenter(l.center),l.radius=o.min.distanceTo(o.max)/2,s){let t=!1,n=!1;for(let e=0,r=s.length;e<r;e++){const r=s[e];if(void 0!==r.POSITION&&(t=!0),void 0!==r.NORMAL&&(n=!0),t&&n)break}if(t||n){const i=[],a=[];for(let o=0,l=s.length;o<l;o++){const l=s[o];t&&i.push(void 0!==l.POSITION?r[l.POSITION]:e.attributes[zi.POSITION]),n&&a.push(void 0!==l.NORMAL?r[l.NORMAL]:e.attributes[zi.NORMAL])}t&&(e.morphAttributes.position=i),n&&(e.morphAttributes.normal=a)}}return e}function Ji(e,t){let{geometry:n,material:r,skinned:i,mode:a}=e;const s=void 0!==n.attributes[zi.TANGENT],o=void 0!==n.attributes[zi.COLOR_0],l=void 0===n.attributes[zi.NORMAL],u=i;if(0===a){const e="PointsMaterial:"+r.id;let n=t.get(e);n||(n=new pi,xn.prototype.copy.call(n,r),n.diffuse.copy(r.diffuse),n.diffuseMap=r.map,n.acceptLight=!1,t.set(e,n)),r=n}else if(1===a||3===a||2===a){const e="LineMaterial:"+r.id;let n=t.get(e);n||(n=new hi,n.lineWidth=r.lineWidth,n.diffuse.copy(r.diffuse),n.diffuseMap=r.diffuseMap,n.lights=!1,n.drawMode=a,t.set(e,n))}else 5===a?(console.warn("TRIANGLE_STRIP will be removed later."),r.drawMode=5):6===a&&(console.warn("TRIANGLE_FAN will be removed later."),r.drawMode=6);if(s||o||l||u){let e="ClonedMaterial:"+r.id+":";s&&(e+="vertex-tangents:"),o&&(3===n.attributes[zi.COLOR_0].size?e+="vertex-colors-rgb:":4===n.attributes[zi.COLOR_0].size&&(e+="vertex-colors-rgba:")),l&&(e+="flat-shading:");let i=t.get(e);i||(i=r.clone(),s&&(i.vertexTangents=!0,i.normalMap&&(i.normalScale.y*=-1)),o&&(3===n.attributes[zi.COLOR_0].size?i.vertexColors=1:4===n.attributes[zi.COLOR_0].size?i.vertexColors=2:console.warn("Illegal vertex color size: "+n.attributes[zi.COLOR_0].size)),l&&(i.shading=S)),r=i}e.material=r}function ea(e){const t=e.extensions&&e.extensions.KHR_draco_mesh_compression;let n;if(n=t?"draco:"+t.bufferView+":"+t.indices+":"+ta(t.attributes):e.indices+":"+ta(e.attributes)+":"+e.mode,e.targets)for(let t=0,r=e.targets.length;t<r;t++)n+=":"+ta(e.targets[t]);return n}function ta(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}class na{static getLight(e){const{color:t,intensity:n=1,type:r,range:i,spot:a}=e;let s;if("directional"===r)s=new Mi;else if("point"===r)s=new Fi,void 0!==i&&(s.distance=i);else{if("spot"!==r)throw new Error("Unexpected light type: "+r);if(s=new Ni,void 0!==i&&(s.distance=i),a){const{innerConeAngle:e=0,outerConeAngle:t=Math.PI/4}=a;s.angle=t,s.penumbra=1-e/t}}return t&&s.color.fromArray(t),s.intensity=n,s}}const ra=new et;function ia(e,t,n,r){const i=r[e],a=n[e];if(t.add(i),a.children){const e=a.children;for(let t=0,a=e.length;t<a;t++)ia(e[t],i,n,r)}}let aa=0;class sa{constructor(){this.id=++aa,this.url="",this.path="",this.options=null,this.gltf=null,this.loadItems=null,this.buffers=null,this.bufferViews=null,this.images=null,this.textures=null,this.materials=null,this.accessors=null,this.primitives=null,this.nodes=null,this.cameras=null,this.lights=null,this.skins=null,this.root=null,this.roots=null,this.animations=null}}const oa=[class{static parse(e,t){const{url:n}=e;return t.loadFile(n,"arraybuffer").then((t=>{if("glTF"===$i.decodeText(new Uint8Array(t,0,4))){const n=$i.parseGLB(t);e.gltf=n.gltf,e.buffers=n.buffers}else{const n=$i.decodeText(new Uint8Array(t));e.gltf=JSON.parse(n)}}))}},class{static parse(e,t){const{gltf:n,path:r}=e,{nodes:i=[],skins:a=[],meshes:s=[],buffers:o,images:l}=n;if(a.forEach((e=>{const{joints:t=[]}=e;t.forEach((e=>{i[e].isBone=!0}))})),i.forEach((e=>{void 0!==e.mesh&&void 0!==e.skin&&(s[e.mesh].isSkinned=!0)})),t.detailLoadProgress){const n=new Set;o&&o.forEach((e=>{if(!e.uri)return;const t=$i.resolveURL(e.uri,r);n.add(t)})),l&&l.forEach(((e,t)=>{const{uri:i,bufferView:a}=e;let s=i;void 0!==a&&(s="blob<"+t+">"),s=$i.resolveURL(s,r),n.add(s)})),n.forEach((e=>t.manager.itemStart(e))),e.loadItems=n}}},class{static parse(e){const{gltf:{asset:{version:t}}}=e,n=Number(t);if(!(n>=2&&n<3))throw"Only support gltf 2.x."}},class{static parse(e,t){const{gltf:n,loadItems:r}=e;return null!==e.buffers?null:Promise.all(n.buffers.map((n=>{const i=$i.resolveURL(n.uri,e.path);t.detailLoadProgress&&r.delete(i);const a=t.loadFile(i,"arraybuffer").then((e=>(t.detailLoadProgress&&t.manager.itemEnd(i),e)));return t.detailLoadProgress&&a.catch((()=>t.manager.itemEnd(i))),a}))).then((t=>{e.buffers=t}))}},class{static parse(e){const{buffers:t,gltf:n}=e;if(!n.bufferViews)return;const r=n.bufferViews.map((e=>{const{buffer:n,byteOffset:r=0,byteLength:i=0}=e;return t[n].slice(r,r+i)}));e.bufferViews=r}},class{static parse(e,t){const{gltf:n,bufferViews:r,path:i,loadItems:a}=e;if(n.images)return Promise.all(n.images.map((({uri:e,bufferView:n,mimeType:s,name:o},l)=>{let u=!1,c=e||"";if(void 0!==n){const e=r[n],t=new Blob([e],{type:s});c=URL.createObjectURL(t),u=!0}const h=$i.resolveURL(c,i);t.detailLoadProgress&&a.delete(h);const d=t.loadImage(h).then((e=>(e.__name=o,!0===u&&URL.revokeObjectURL(c),t.detailLoadProgress&&(u?t.manager.itemEnd($i.resolveURL("blob<"+l+">",i)):t.manager.itemEnd(h)),e)));return t.detailLoadProgress&&d.catch((()=>t.manager.itemEnd(h))),d}))).then((t=>{e.images=t}))}},class{static parse(e){const{gltf:t,images:n}=e;if(t.textures)return Promise.all(t.textures.map((({sampler:e,source:r=0,name:i},a)=>{const s=n[r],o=new Rn;return o.image=s,o.version++,o.name=i||s.__name||`texture_${a}`,o.flipY=!1,function(e,t={}){const{magFilter:n,minFilter:r,wrapS:i,wrapT:a}=t;e.magFilter=Vi[n]||B,e.minFilter=Vi[r]||V,e.wrapS=Hi[i]||H,e.wrapT=Hi[a]||H}(o,(t.samplers||{})[e]),o}))).then((t=>{e.textures=t}))}},class{static parse(e){const{gltf:t,textures:n}=e;if(!t.materials)return;const r=[];for(let e=0;e<t.materials.length;e++){const{extensions:i={},pbrMetallicRoughness:a,normalTexture:s,occlusionTexture:o,emissiveTexture:l,emissiveFactor:u,alphaMode:c,alphaCutoff:h,doubleSided:d,name:f=""}=t.materials[e],{KHR_materials_unlit:p,KHR_materials_pbrSpecularGlossiness:m}=i;let g=null;if(p?g=Xi.getMaterial():m?(g=qi.getMaterial(),qi.parseParams(g,m,n)):g=new fi,g.name=f,a){const{baseColorFactor:e,baseColorTexture:t,metallicFactor:r,roughnessFactor:i,metallicRoughnessTexture:s}=a;Array.isArray(e)&&(g.diffuse.fromArray(e),g.opacity=void 0!==e[3]?e[3]:1),t&&(g.diffuseMap=n[t.index],g.diffuseMapCoord=t.texCoord||0,g.diffuseMap&&(g.diffuseMap.encoding=ee,Qi(g,"diffuseMap",t.extensions))),p||m||(g.metalness=void 0!==r?r:1,g.roughness=void 0!==i?i:1,s&&(g.metalnessMap=n[s.index],g.roughnessMap=n[s.index]))}u&&g.emissive.fromArray(u),l&&(g.emissiveMap=n[l.index],g.emissiveMapCoord=l.texCoord||0,g.emissiveMap&&(g.emissiveMap.encoding=ee,Qi(g,"emissiveMap",l.extensions))),o&&(g.aoMap=n[o.index],g.aoMapCoord=o.texCoord||0,void 0!==o.strength&&(g.aoMapIntensity=o.strength),g.aoMap&&Qi(g,"aoMap",o.extensions)),p||s&&(g.normalMap=n[s.index],g.normalScale.set(1,-1),void 0!==s.scale&&g.normalScale.set(s.scale,-s.scale),g.normalMap),g.side=!0===d?A:y,"BLEND"===c?g.transparent=!0:(g.transparent=!1,"MASK"===c&&(g.alphaTest=void 0!==h?h:.5)),r[e]=g}e.materials=r}},class{static parse(e){const{bufferViews:t,gltf:n}=e;if(!n.accessors)return;const r=new Map,i=n.accessors.map((e=>{const{bufferView:i,type:a,componentType:s,count:o,byteOffset:l=0,normalized:u=!1,sparse:c}=e;if(void 0===i&&void 0===c)return null;const h=void 0!==i?t[i]:null,d=void 0!==i?n.bufferViews[i].byteStride:void 0,f=Gi[a],p=ji[s],m=p.BYTES_PER_ELEMENT;let g,_;if(d&&d!==m*f){const e="Buffer:"+i+":"+s;let t=r.get(e);t||(g=new p(h),t=new cn(g,d/m),r.set(e,t)),_=new un(t,f,l/m,u)}else g=null===h?new p(o*f):new p(h,l,o*f),_=new un(new cn(g,f),f,0,u);if(c){const e=Gi.SCALAR,n=ji[c.indices.componentType],r=c.indices.byteOffset||0,i=c.values.byteOffset||0,a=new n(t[c.indices.bufferView],r,c.count*e),s=new p(t[c.values.bufferView],i,c.count*f);null!==h&&(_=new un(_.buffer.clone(),_.size,_.offset,_.normalized));const o=_.buffer;for(let e=0,t=a.length;e<t;e++){let t=a[e];if(o.array[t*_.size]=s[e*f],f>=2&&(o.array[t*_.size+1]=s[e*f+1]),f>=3&&(o.array[t*_.size+2]=s[e*f+2]),f>=4&&(o.array[t*_.size+3]=s[e*f+3]),f>=5)throw new Error("Unsupported itemSize in sparse Attribute.")}}return _}));r.clear(),e.accessors=i}},class{static parse(e,t){const{gltf:n,accessors:r,materials:i,bufferViews:a}=e;if(!n.meshes)return;const s=new Map,o=new Map,l=[];for(let e=0;e<n.meshes.length;e++){const u=n.meshes[e],c=[];for(let e=0;e<u.primitives.length;e++){const l=u.primitives[e],{extensions:h={},mode:d,material:f}=l,{KHR_draco_mesh_compression:p}=h;let m;const g=ea(l);o.has(g)?m=o.get(g):(m=p?Zi.getGeometry(p,a,t.getDRACOLoader()):Promise.resolve(new _n),m=m.then((e=>(Ki(e,l,n,r),e))),o.set(g,m));const _=m.then((e=>{const t={mode:d,geometry:e,material:void 0===f?new fi:i[f],weights:Object.keys(e.morphAttributes).length>0&&u.weights?u.weights.slice(0):void 0,skinned:u.isSkinned};return Ji(t,s),t}));c.push(_)}l.push(Promise.all(c))}return s.clear(),o.clear(),Promise.all(l).then((t=>{e.primitives=t}))}},class{static parse(e){const{gltf:{nodes:t,cameras:n,extensions:r}}=e;if(!t)return;const i=new Set,a=[],s=[],o=t.map((t=>{const{matrix:o,translation:l,rotation:u,scale:c,camera:h,mesh:d,extensions:f={}}=t,{KHR_lights_punctual:p}=f;let m=null;if(t.isBone)m=new Ii;else if(void 0!==d)m=function(e,t){const{primitives:n}=e,{mesh:r,skin:i}=t,a=n[r].map((e=>{const{geometry:t,material:n,weights:r}=e;let a;return void 0!==i?(a=new Ri(t,n),t.attributes.skinWeight&&!t.attributes.skinWeight.normalized&&function(e){const t=e.offset,n=e.buffer,r=n.stride;for(let e=0,i=n.count;e<i;e++){ra.fromArray(n.array,e*r+t);const i=1/ra.getManhattanLength();i!==1/0?ra.multiplyScalar(i):ra.set(1,0,0,0),ra.toArray(n.array,e*r+t)}}(t.attributes.skinWeight)):(a=new an(t,n),r&&(a.morphTargetInfluences=r.slice())),a}));if(a.length>1){const e=new ut;return a.forEach((t=>e.add(t))),e}return a[0]}(e,t);else if(void 0!==h)m=function(e){const{orthographic:t,perspective:n,type:r}=e,i=new It;if("perspective"==r){const{aspectRatio:e,yfov:t,zfar:r,znear:a}=n;i.setPerspective(t,e||1,a||1,r||2e6)}else if("orthographic"==r){const{xmag:e,ymag:n,zfar:r,znear:a}=t;i.setOrtho(-e,e,-n,n,a||1,r||2e6)}return i}(n[h]),a.push(m);else if(p){const e=p.light,t=r.KHR_lights_punctual.lights;m=na.getLight(t[e]),s.push(m)}else m=new ut;if(void 0!==t.name&&(m.name=function(e,t){const n=$i.sanitizeNodeName(e||"");let r=n;for(let e=1;t.has(r);++e)r=n+"-"+e;return t.add(r),r}(t.name,i),m.children.length>0))for(let e=0;e<m.children.length;e++)m.children[e].name=m.name+"_"+e;return void 0!==o?(m.matrix.fromArray(o),m.matrix.decompose(m.position,m.quaternion,m.scale)):(void 0!==l&&m.position.fromArray(l),void 0!==u&&m.quaternion.fromArray(u),void 0!==c&&m.scale.fromArray(c)),m}));i.clear(),e.nodes=o,e.cameras=a,e.lights=s}},class{static parse(e){const{gltf:t,accessors:n,nodes:r}=e,i=t.skins;if(!i)return;const s=i.map((e=>{const{inverseBindMatrices:t,joints:i}=e,s=n[t],o=[],l=[];return i.forEach(((e,t)=>{const n=r[e];if(n){o.push(n);const e=new a;s&&e.fromArray(s.buffer.array,16*t),l.push(e)}else console.warn("Joint "+e+" could not be found.")})),new yi(o,l)}));e.skins=s,r.forEach(((e,n)=>{const{skin:r}=t.nodes[n];void 0!==r&&e.traverse((function(e){e.isSkinnedMesh&&e.bind(s[r],e.worldMatrix)}))}))}},class{static parse(e){const{gltf:t,nodes:n}=e,r=t.scenes.map((e=>{const{name:r="",nodes:i=[]}=e,a=new ut;a.name=r;for(let e=0;e<i.length;e++)ia(i[e],a,t.nodes,n);return a}));e.roots=r,e.root=r[t.scene]}},class{static parse(e){const{gltf:n,nodes:r,accessors:i}=e,{animations:a}=n;if(!a)return;const s=a.map(((e,n)=>{const{channels:a,samplers:s,name:o=`animation_${n}`}=e,l=[];let u=0;for(let e=0;e<a.length;e++){const n=a[e],o=s[n.sampler];if(o){const e=n.target,a=void 0!==e.node?e.node:e.id,s=i[o.input],c=i[o.output],h=r[a];if(!h)continue;let p;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,Bi[e.path]){case Bi.rotation:p=d;break;case Bi.weights:p=t;break;default:p=f}if(!p)continue;const m=new s.buffer.array.constructor(s.buffer.array),g=new c.buffer.array.constructor(c.buffer.array);if(c.normalized){const e=$i.getNormalizedComponentScale(g.constructor);for(let t=0,n=g.length;t<n;t++)g[t]*=e}const _=[];Bi[e.path]===Bi.weights?h.traverse((function(e){e.isMesh&&e.morphTargetInfluences&&_.push(e)})):_.push(h);for(let t=0,n=_.length;t<n;t++){const n=new p(_[t],Bi[e.path],m,g);l.push(n)}const v=m[m.length-1];u<v&&(u=v)}}return new ve(o,l,u)}));e.animations=s}}];class la{constructor(e=xe,t=oa){this.manager=e,this.detailLoadProgress=!0,this.autoLogError=!0,this._parsers=t.slice(0),this._dracoLoader=null,this._fileLoader=new we;const n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||n||r&&i<98?this._imageLoader=new Ee:this._imageLoader=new Oi}load(e,t={}){return this.manager.itemStart(e),new Promise(((n,r)=>{const i=new sa;i.url=e,i.path=$i.extractUrlBase(e),i.options=t,this._parse(i).then(n).then((()=>this.manager.itemEnd(e))).catch((t=>{this.autoLogError&&console.error(t),this.detailLoadProgress&&i.loadItems&&i.loadItems.forEach((e=>{this.manager.itemEnd(e)})),this.manager.itemError(e),this.manager.itemEnd(e),r(`Error loading glTF model from ${e} .`)}))}))}_parse(e){let t;return new Promise(((n,r)=>{this._parsers.forEach((n=>{t=t?t.then((()=>n.parse(e,this))):n.parse(e,this)})),t?t.then((()=>n(e))).catch(r):n(e)}))}setDRACOLoader(e){return this._dracoLoader=e,this}getDRACOLoader(){return this._dracoLoader}loadFile(e,t="json"){return this._fileLoader.setResponseType(t),new Promise(((t,n)=>{e=this.manager.resolveURL(e),this._fileLoader.load(e,t,void 0,n)}))}loadImage(e){return new Promise(((t,n)=>{e=this.manager.resolveURL(e),this._imageLoader.load(e,t,void 0,n)}))}insertParser(e,t){this._parsers.splice(t,0,e)}replaceParser(e,t){this._parsers.splice(t,1,e)}}var ua=function(e){this.timeLoaded=0,this.manager=e,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=4,this.nativeAttributeMap={a_Position:"POSITION",a_Normal:"NORMAL",a_Color:"COLOR",a_Uv:"TEX_COORD"}};ua.prototype={constructor:ua,load:function(e,t,n,r){var i=this,a=new we(i.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.load(e,(function(e){i.decodeDracoFile(e,t)}),n,r)},setPath:function(e){return this.path=e,this},setVerbosity:function(e){return this.verbosity=e,this},setDrawMode:function(e){return this.drawMode=e,this},setSkipDequantization:function(e,t){var n=!0;return void 0!==t&&(n=t),this.getAttributeOptions(e).skipDequantization=n,this},decodeDracoFile:function(e,t,n,r){var i=this;ua.getDecoderModule().then((function(a){i.decodeDracoFileInternal(e,a.decoder,t,n||{},r||{})}))},decodeDracoFileInternal:function(e,t,n,r,i){var a=new t.DecoderBuffer;a.Init(new Int8Array(e),e.byteLength);var s=new t.Decoder,o=s.GetEncodedGeometryType(a);if(o==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(o!=t.POINT_CLOUD){var l="t3d.DRACOLoader: Unknown geometry type.";throw console.error(l),new Error(l)}this.verbosity>0&&console.log("Loaded a point cloud.")}n(this.convertDracoGeometryTot3d(t,s,o,a,r,i))},addAttributeToGeometry:function(e,t,n,r,i,a,s,o){if(0===a.ptr){var l="t3d.DRACOLoader: No attribute "+r;throw console.error(l),new Error(l)}var u,c=a.num_components(),h=n.num_points()*c;switch(i){case Float32Array:u=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,a,u),o[r]=new Float32Array(h);break;case Int8Array:u=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,a,u),o[r]=new Int8Array(h);break;case Int16Array:u=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,a,u),o[r]=new Int16Array(h);break;case Int32Array:u=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,a,u),o[r]=new Int32Array(h);break;case Uint8Array:u=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,a,u),o[r]=new Uint8Array(h);break;case Uint16Array:u=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,a,u),o[r]=new Uint16Array(h);break;case Uint32Array:u=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,a,u),o[r]=new Uint32Array(h);break;default:throw l="t3d.DRACOLoader: Unexpected attribute type.",console.error(l),new Error(l)}for(var d=0;d<h;d++)o[r][d]=u.GetValue(d);s.addAttribute(r,new un(new cn(o[r],c))),e.destroy(u)},convertDracoGeometryTot3d:function(e,t,n,r,i,a){var s,o;!0===this.getAttributeOptions("a_Position").skipDequantization&&t.SkipAttributeTransform(e.POSITION);const l=performance.now();if(n===e.TRIANGULAR_MESH?(s=new e.Mesh,o=t.DecodeBufferToMesh(r,s)):(s=new e.PointCloud,o=t.DecodeBufferToPointCloud(r,s)),!o.ok()||0==s.ptr){var u="t3d.DRACOLoader: Decoding failed: ";throw u+=o.error_msg(),console.error(u),e.destroy(t),e.destroy(s),new Error(u)}var c,h=performance.now();e.destroy(r),n==e.TRIANGULAR_MESH?(c=s.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+c.toString())):c=0;var d=s.num_points(),f=s.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+d.toString()),console.log("Number of attributes loaded: "+f.toString()));var p=t.GetAttributeId(s,e.POSITION);if(-1==p)throw u="t3d.DRACOLoader: No position attribute found.",console.error(u),e.destroy(t),e.destroy(s),new Error(u);var m=t.GetAttribute(s,p),g={},_=new _n;for(var v in this.nativeAttributeMap)if(void 0===i[v]){var b=t.GetAttributeId(s,e[this.nativeAttributeMap[v]]);if(-1!==b){this.verbosity>0&&console.log("Loaded "+v+" attribute.");var x=t.GetAttribute(s,b);this.addAttributeToGeometry(e,t,s,v,Float32Array,x,_,g)}}for(var v in i){var y=a[v]||Float32Array,w=i[v];x=t.GetAttributeByUniqueId(s,w),this.addAttributeToGeometry(e,t,s,v,y,x,_,g)}if(n==e.TRIANGULAR_MESH)if(5===this.drawMode){var A=new e.DracoInt32Array;g.indices=new Array(A.size());for(var E=0;E<A.size();++E)g.indices[E]=A.GetValue(E);e.destroy(A)}else{var S=3*c;g.indices=new Array(S);var T=new e.DracoInt32Array;for(E=0;E<c;++E){t.GetFaceFromMesh(s,E,T);var M=3*E;g.indices[M]=T.GetValue(0),g.indices[M+1]=T.GetValue(1),g.indices[M+2]=T.GetValue(2)}e.destroy(T)}_.drawMode=this.drawMode,n==e.TRIANGULAR_MESH&&_.setIndex(g.indices.length>65535?new un(new cn(new Uint16Array(g.indices),1)):new un(new cn(new Uint32Array(g.indices),1)));var P=new e.AttributeQuantizationTransform;if(P.InitFromAttribute(m))for(_.attributes.a_Position.isQuantized=!0,_.attributes.a_Position.maxRange=P.range(),_.attributes.a_Position.numQuantizationBits=P.quantization_bits(),_.attributes.a_Position.minValues=new Float32Array(3),E=0;E<3;++E)_.attributes.a_Position.minValues[E]=P.min_value(E);return e.destroy(P),e.destroy(t),e.destroy(s),this.decode_time=h-l,this.import_time=performance.now()-h,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),_},isVersionSupported:function(e,t){ua.getDecoderModule().then((function(n){t(n.decoder.isVersionSupported(e))}))},getAttributeOptions:function(e){return void 0===this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},ua.decoderPath="./",ua.decoderConfig={},ua.decoderModulePromise=null,ua.setDecoderPath=function(e){ua.decoderPath=e},ua.setDecoderConfig=function(e){var t=ua.decoderConfig.wasmBinary;ua.decoderConfig=e||{},ua.releaseDecoderModule(),t&&(ua.decoderConfig.wasmBinary=t)},ua.releaseDecoderModule=function(){ua.decoderModulePromise=null},ua.getDecoderModule=function(){var e=this,t=ua.decoderPath,n=ua.decoderConfig,r=ua.decoderModulePromise;return r||("undefined"!=typeof DracoDecoderModule?r=Promise.resolve():"object"!=typeof WebAssembly||"js"===n.type?r=ua._loadScript(t+"draco_decoder.js"):(n.wasmBinaryFile=t+"draco_decoder.wasm",r=ua._loadScript(t+"draco_wasm_wrapper.js").then((function(){return ua._loadArrayBuffer(n.wasmBinaryFile)})).then((function(e){n.wasmBinary=e}))),r=r.then((function(){return new Promise((function(t){n.onModuleLoaded=function(n){e.timeLoaded=performance.now(),t({decoder:n})},DracoDecoderModule(n)}))})),ua.decoderModulePromise=r,r)},ua._loadScript=function(e){var t=document.getElementById("decoder_script");null!==t&&t.parentNode.removeChild(t);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");return r.id="decoder_script",r.type="text/javascript",r.src=e,new Promise((function(e){r.onload=e,n.appendChild(r)}))},ua._loadArrayBuffer=function(e){var t=new we;return t.setResponseType("arraybuffer"),new Promise((function(n,r){t.load(e,n,void 0,r)}))};class ca extends ye{constructor(e){super(e)}load(e,t,n,r){const i=new Rn,a=new Ee(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.version++,t&&t(i)}),n,r),i}}class ha extends ye{constructor(e){super(e),this.type=$}load(e,t,n,r){const i=this,a=new we(this.manager);a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){void 0!==t&&t(i.parse(e))}),n,r)}parse(e){const t=new Uint8Array(e);t.pos=0;const n=ma(t);if(da!==n){const e=n.width,r=n.height,i=ga(t.subarray(t.pos),e,r);if(da!==i){let t,a,s;if(this.type===k){s=i.length/4;const e=new Float32Array(4*s);for(let t=0;t<s;t++)_a(i,4*t,e,4*t);t=e,a=k}else if(this.type===$){s=i.length/4;const e=new Uint16Array(4*s);for(let t=0;t<s;t++)va(i,4*t,e,4*t);t=e,a=$}else this.type===R?(t=i,a=R):console.error("RGBELoader: unsupported type: ",this.type);const o=a===k||a===$;return{width:e,height:r,data:t,header:n.string,gamma:n.gamma,exposure:n.exposure,format:P,internalformat:null,type:a,generateMipmaps:!o&&void 0,flipY:!!o||void 0,minFilter:o?B:void 0,magFilter:o?B:void 0}}}}}const da=-1,fa=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:console.error("RGBELoader: Error: "+(t||""))}return da},pa=function(e,t,n){t=t||1024;let r=e.pos,i=-1,a=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=o.indexOf("\n"))&&a<t&&r<e.byteLength;)s+=o,a+=o.length,r+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=a+i+1),s+o.slice(0,i))},ma=function(e){const t=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,n=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*FORMAT=(\S+)\s*$/,i=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let s,o;if(e.pos>=e.byteLength||!(s=pa(e)))return fa(1,"no header found");if(!(o=s.match(/^#\?(\S+)$/)))return fa(3,"bad initial token");for(a.valid|=1,a.programtype=o[1],a.string+=s+"\n";s=pa(e),!1!==s;)if(a.string+=s+"\n","#"!==s.charAt(0)){if((o=s.match(t))&&(a.gamma=parseFloat(o[1])),(o=s.match(n))&&(a.exposure=parseFloat(o[1])),(o=s.match(r))&&(a.valid|=2,a.format=o[1]),(o=s.match(i))&&(a.valid|=4,a.height=parseInt(o[1],10),a.width=parseInt(o[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=s+"\n";return 2&a.valid?4&a.valid?a:fa(3,"missing image size specifier"):fa(3,"missing format specifier")},ga=function(e,t,n){const r=t;if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(r!==(e[2]<<8|e[3]))return fa(3,"wrong scanline width");const i=new Uint8Array(4*t*n);if(!i.length)return fa(4,"unable to allocate buffer space");let a=0,s=0;const o=4*r,l=new Uint8Array(4),u=new Uint8Array(o);let c=n;for(;c>0&&s<e.byteLength;){if(s+4>e.byteLength)return fa(1);if(l[0]=e[s++],l[1]=e[s++],l[2]=e[s++],l[3]=e[s++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=r)return fa(3,"bad rgbe scanline format");let t,n=0;for(;n<o&&s<e.byteLength;){t=e[s++];const r=t>128;if(r&&(t-=128),0===t||n+t>o)return fa(3,"bad scanline data");if(r){const r=e[s++];for(let e=0;e<t;e++)u[n++]=r}else u.set(e.subarray(s,s+t),n),n+=t,s+=t}const h=r;for(let e=0;e<h;e++){let t=0;i[a]=u[e+t],t+=r,i[a+1]=u[e+t],t+=r,i[a+2]=u[e+t],t+=r,i[a+3]=u[e+t],a+=4}c--}return i},_a=function(e,t,n,r){const i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*a,n[r+1]=e[t+1]*a,n[r+2]=e[t+2]*a,n[r+3]=1},va=function(e,t,n,r){const i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=ya(Math.min(e[t+0]*a,65504)),n[r+1]=ya(Math.min(e[t+1]*a,65504)),n[r+2]=ya(Math.min(e[t+2]*a,65504)),n[r+3]=ya(1)},ba=new Float32Array(1),xa=new Int32Array(ba.buffer);function ya(e){e>65504&&(console.warn("toHalfFloat(): value exceeds 65504."),e=65504),ba[0]=e;const t=xa[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}class wa{constructor(e){this.camera=new It,this.targets=[new r(1,0,0),new r(-1,0,0),new r(0,1,0),new r(0,-1,0),new r(0,0,1),new r(0,0,-1)],this.ups=[new r(0,-1,0),new r(0,-1,0),new r(0,0,1),new r(0,0,-1),new r(0,-1,0),new r(0,-1,0)],this.camera.setPerspective(.5*Math.PI,1,1,1e3),this.position=new r,this.lookTarget=new r,this.renderTarget=e||new bi(512,512),this.renderTexture=this.renderTarget.texture,this.renderTexture.minFilter=V,this.renderOption={ifRender:function(e){return!e.object.skipReflectionProbe}}}render(e,t){const n=e.renderPass;this.camera.position.copy(this.position);for(let r=0;r<6;r++){this.lookTarget.set(this.targets[r].x+this.camera.position.x,this.targets[r].y+this.camera.position.y,this.targets[r].z+this.camera.position.z),this.camera.lookAt(this.lookTarget,this.ups[r]),this.camera.updateMatrix(),this.renderTarget.activeCubeFace=r,n.setRenderTarget(this.renderTarget),n.clear(!0,!0,!0);const i=t.updateRenderStates(this.camera,!1),a=t.updateRenderQueue(this.camera,!1,!1);let s;for(let t=0,n=a.layerList.length;t<n;t++)s=a.layerList[t],e.renderRenderableList(s.opaque,i,this.renderOption),e.renderRenderableList(s.transparent,i,this.renderOption);n.updateRenderTargetMipmap(this.renderTarget)}}}class Aa{static prefilterEnvironmentMap(e,t,n={}){const r=n.sampleSize||1024,i=t.isTextureCube;let a;a=i?0===t.images.length?16:t.images[0].width:t.image.width/4;const s=Math.floor(Math.log2(a));a=Math.pow(2,s);const o=e.renderPass.capabilities;o.version>1?o.getExtension("EXT_color_buffer_float"):(o.getExtension("OES_texture_half_float"),o.getExtension("OES_texture_half_float_linear")),o.getExtension("OES_texture_float_linear"),o.getExtension("EXT_color_buffer_half_float");let l=Uint16Array;const u=n.outputTexture||new Dn;u.type=1508,u.format=1006,u.generateMipmaps=!1;const c=new bi(a,a);c.texture.type=1508,c.texture.format=1006,c.texture.magFilter=B,c.texture.minFilter=B,c.texture.generateMipmaps=!1;const h=function(e,t){e=e||256,t=t||1024;const n=new Rn,r=new Float32Array(t*e*4);n.image={width:e,height:t,data:r},n.type=k,n.minFilter=z,n.magFilter=z,n.generateMipmaps=!1,n.version++;const i=[];for(let n=0;n<e;n++){const a=n/e,s=a*a;for(let e=0;e<t;e++){let t=(e<<16|e>>>16)>>>0;t=((1431655765&t)<<1|(2863311530&t)>>>1)>>>0,t=((858993459&t)<<2|(3435973836&t)>>>2)>>>0,t=((252645135&t)<<4|(4042322160&t)>>>4)>>>0,t=(((16711935&t)<<8|(4278255360&t)>>>8)>>>0)/4294967296;const n=Math.sqrt((1-t)/(1+(s*s-1)*t));i[e]=n}for(let a=0;a<t;a++){const s=4*(a*e+n),o=i[a],l=Math.sqrt(1-o*o),u=a/t,c=2*Math.PI*u;r[s]=l*Math.cos(c),r[s+1]=o,r[s+2]=l*Math.sin(c),r[s+3]=1}}return n}(256,r),d=new wa(c),f=new Nt,p=new ui(1,1,1),m=new yn(Ea);m.side=w,m.cubeMap=t;const g=new an(p,m);g.frustumCulled=!1,m.uniforms.environmentMap=t,i?(m.uniforms.envMapFlip=t.images[0]&&t.images[0].rtt?-1:1,m.defines.PANORAMA=!1):(m.uniforms.envMapFlip=1,m.defines.PANORAMA=!0),m.uniforms.normalDistribution=h,d.camera.add(g),f.add(d.camera);for(let t=0;t<s+1;t++){m.uniforms.roughness=Math.max(t-1,0)/s,d.render(e,f),u.mipmaps[t]=[];for(let n=0;n<6;n++){const r=new l(c.width*c.height*4);c.activeCubeFace=n,e.renderPass.setRenderTarget(c),e.renderPass.readRenderTargetPixels(0,0,c.width,c.height,r),0===t&&(u.images[n]={width:c.width,height:c.height,data:r}),u.mipmaps[t].push({width:c.width,height:c.height,data:r})}c.resize(c.width/2,c.height/2)}return c.dispose(),p.dispose(),m.dispose(),h.dispose(),u.version++,u}}const Ea={name:"rmrem",defines:{PANORAMA:!1,SAMPLE_NUMBER:1024},uniforms:{environmentMap:null,normalDistribution:null,roughness:.5,envMapFlip:1},vertexShader:"\n\t\t#include <common_vert>\n\t\tvarying vec3 vDir;\n\t\tvoid main() {\n\t\t\tvDir = (u_Model * vec4(a_Position, 0.0)).xyz;\n\t\t\tgl_Position = u_ProjectionView * u_Model * vec4(a_Position, 1.0);\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\t\t}\n\t",fragmentShader:"\n\t\t#include <common_frag>\n\t\t#ifdef PANORAMA\n\t\t\tuniform sampler2D environmentMap;\n\t\t#else\n\t\t\tuniform samplerCube environmentMap;\n\t\t#endif\n\t\tuniform sampler2D normalDistribution;\n\t\tuniform float roughness;\n\t\tuniform float envMapFlip;\n\t\tvarying vec3 vDir;\n\n\t\tvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n\t\t\tvec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n\t\t\n\t\t\tvec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n\t\t\tvec3 tangentX = normalize(cross(N, upVector));\n\t\t\tvec3 tangentZ = cross(N, tangentX);\n\t\t\t// Tangent to world space\n\t\t\treturn normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tvec3 V = normalize(vDir);\n\n\t\t\tvec3 N = V;\n\n\t\t\tvec3 prefilteredColor = vec3(0.0);\n\t\t\tfloat totalWeight = 0.0;\n\t\t\tfloat fMaxSampleNumber = float(SAMPLE_NUMBER);\n\n\t\t\tfor (int i = 0; i < SAMPLE_NUMBER; i++) {\n\t\t\t\tvec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\n\t\t\t\tvec3 L = reflect(-V, H);\n\t\t\n\t\t\t\tfloat NoL = clamp(dot(N, L), 0.0, 1.0);\n\t\t\t\tif (NoL > 0.0) {\n\t\t\t\t\t#ifdef PANORAMA\n\t\t\t\t\t\tfloat phi = acos(L.y);\n\t\t\t\t\t\tfloat theta = envMapFlip * atan(L.x, L.z) + PI * 0.5;\n\t\t\t\t\t\tvec2 uv = vec2(theta / 2.0 / PI, -phi / PI);\n\t\t\t\t\t\tprefilteredColor += mapTexelToLinear(texture2D(environmentMap, fract(uv))).rgb * NoL;\n\t\t\t\t\t#else\n\t\t\t\t\t\tprefilteredColor += mapTexelToLinear(textureCube(environmentMap, vec3(envMapFlip * L.x, L.yz))).rgb * NoL;\n\t\t\t\t\t#endif\n\t\t\t\t\ttotalWeight += NoL;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4(prefilteredColor / totalWeight, 1.0);\n\t\t\t#include <encodings_frag>\n\t\t}\n\t"};class Sa{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}class Ta extends an{constructor(e){const t=new ui(1,1,1),n=new yn(Ta.SkyBoxShader);n.side=w,super(t,n),this.material=n,e&&(this.texture=e),this.frustumCulled=!1}set level(e){this.material.uniforms.level=e}get level(){return this.material.uniforms.level}set gamma(e){this.material.defines.GAMMA=e,this.material.needsUpdate=!0}get gamma(){return this.material.defines.GAMMA}set texture(e){e.isTextureCube?(this.material.cubeMap=e,this.material.uniforms.flip=e.images[0]&&e.images[0].rtt?1:-1,this.material.defines.PANORAMA=!1):(this.material.diffuseMap=e,this.material.uniforms.flip=-1,this.material.defines.PANORAMA=""),this.material.needsUpdate=!0}get texture(){return this.material.diffuseMap||this.material.cubeMap}}Ta.SkyBoxShader={name:"skybox",defines:{GAMMA:!1,PANORAMA:!1},uniforms:{level:0,flip:-1},vertexShader:["#include <common_vert>","varying vec3 vDir;","void main() {","\tvDir = (u_Model * vec4(a_Position, 0.0)).xyz;","\tgl_Position = u_ProjectionView * u_Model * vec4(a_Position, 1.0);","\tgl_Position.z = gl_Position.w;","}"].join("\n"),fragmentShader:["#include <common_frag>","#ifdef PANORAMA","\tuniform sampler2D diffuseMap;","#else","\tuniform samplerCube cubeMap;","#endif","uniform float flip;","uniform float level;","varying vec3 vDir;","void main() {","\t#include <begin_frag>","\tvec3 V = normalize(vDir);","\t#ifdef PANORAMA","\t\tfloat phi = acos(V.y);","\t\tfloat theta = flip * atan(V.x, V.z) + PI * 0.5;","\t\tvec2 uv = vec2(theta / 2.0 / PI, -phi / PI);","\t\t#ifdef TEXTURE_LOD_EXT","\t\t\toutColor *= mapTexelToLinear(texture2DLodEXT(diffuseMap, fract(uv), level));","\t\t#else","\t\t\toutColor *= mapTexelToLinear(texture2D(diffuseMap, fract(uv), level));","\t\t#endif","\t#else","\t\tvec3 coordVec = vec3(flip * V.x, V.yz);","\t\t#ifdef TEXTURE_LOD_EXT","\t\t\toutColor *= mapTexelToLinear(textureCubeLodEXT(cubeMap, coordVec, level));","\t\t#else","\t\t\toutColor *= mapTexelToLinear(textureCube(cubeMap, coordVec, level));","\t\t#endif","\t#endif","\t#include <end_frag>","\t#ifdef GAMMA","\t\t#include <encodings_frag>","\t#endif","}"].join("\n")};const Ma={Pisa:{name:"pisa",ext:"hdr"},Factory_Catwalk:{name:"Factory_Catwalk",ext:"hdr"},Barce_Rooftop_C:{name:"Barce_Rooftop_C",ext:"hdr"},Grand_Canyon_C:{name:"Grand_Canyon_C",ext:"hdr"},Hall:{name:"Hall",ext:"hdr"},Ice_Lake:{name:"Ice_Lake",ext:"hdr"},Old_Industrial_Hall:{name:"Old_Industrial_Hall",ext:"hdr"}};var Pa,Ca,Fa=new r,La={computeNormals:function(e){var t=e.index,n=e.attributes,i=n.a_Position;if(void 0!==i){var a=n.a_Normal;if(void 0===a)a=new un(new cn(new Float32Array(3*i.buffer.count),3)),e.addAttribute("a_Normal",a);else{for(let e=0;e<a.buffer.array.length;e++)a.buffer.array[e]=0;a.buffer.version++}var s=new r,o=new r,l=new r,u=new r,c=new r,h=new r,d=new r,f=new r;if(t)for(let e=0,n=t.buffer.count;e<n;e+=3){var p=t.buffer.array[e+0],m=t.buffer.array[e+1],g=t.buffer.array[e+2];s.fromArray(i.buffer.array,3*p),o.fromArray(i.buffer.array,3*m),l.fromArray(i.buffer.array,3*g),d.subVectors(l,o),f.subVectors(s,o),d.cross(f),u.fromArray(a.buffer.array,3*p),c.fromArray(a.buffer.array,3*m),h.fromArray(a.buffer.array,3*g),u.add(d),c.add(d),h.add(d),u.toArray(a.buffer.array,3*p),c.toArray(a.buffer.array,3*m),h.toArray(a.buffer.array,3*g)}else for(let e=0,t=3*i.buffer.count;e<t;e+=9)s.fromArray(i.buffer.array,e+0),o.fromArray(i.buffer.array,e+3),l.fromArray(i.buffer.array,e+6),d.subVectors(l,o),f.subVectors(s,o),d.cross(f),d.toArray(a.buffer.array,e+0),d.toArray(a.buffer.array,e+3),d.toArray(a.buffer.array,e+6);this.normalizeNormals(e)}else console.warn("t3d.Geometry: Missing required attributes (position) in GeometryUtils.computeNormals()")},normalizeNormals:function(e){const t=e.attributes.a_Normal.buffer;for(let e=0;e<t.array.length;e+=3)Fa.fromArray(t.array,e),Fa.normalize(),Fa.toArray(t.array,e)},computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.a_Position&&void 0!==n.a_Normal&&void 0!==n.a_Uv){var i=t.buffer.array,a=n.a_Position.buffer.array,s=n.a_Normal.buffer.array,o=n.a_Uv.buffer.array,l=a.length/3;void 0===n.tangent&&e.addAttribute("a_Tangent",new un(new cn(new Float32Array(4*l),4)));for(var u=n.a_Tangent.buffer.array,c=[],h=[],d=0;d<l;d++)c[d]=new r,h[d]=new r;var f=new r,p=new r,m=new r,g=new Se,_=new Se,v=new Se,b=new r,x=new r,y=e.groups;0===y.length&&(y=[{start:0,count:i.length}]),d=0;for(var w=y.length;d<w;++d)for(var A=I=(N=y[d]).start,E=I+N.count;A<E;A+=3)R(i[A+0],i[A+1],i[A+2]);var S,T,M,P=new r,C=new r,F=new r,L=new r;for(d=0,w=y.length;d<w;++d){var N,I;for(A=I=(N=y[d]).start,E=I+N.count;A<E;A+=3)D(i[A+0]),D(i[A+1]),D(i[A+2])}}else console.warn("t3d.Geometry: Missing required attributes (index, position, normal or uv) in GeometryUtils.computeTangents()");function R(e,t,n){f.fromArray(a,3*e),p.fromArray(a,3*t),m.fromArray(a,3*n),g.fromArray(o,2*e),_.fromArray(o,2*t),v.fromArray(o,2*n),p.sub(f),m.sub(f),_.sub(g),v.sub(g);var r=1/(_.x*v.y-v.x*_.y);isFinite(r)&&(b.copy(p).multiplyScalar(v.y).addScaledVector(m,-_.y).multiplyScalar(r),x.copy(m).multiplyScalar(_.x).addScaledVector(p,-v.x).multiplyScalar(r),c[e].add(b),c[t].add(b),c[n].add(b),h[e].add(x),h[t].add(x),h[n].add(x))}function D(e){F.fromArray(s,3*e),L.copy(F),T=c[e],P.copy(T),P.sub(F.multiplyScalar(F.dot(T))).normalize(),C.crossVectors(L,T),M=C.dot(h[e]),S=M<0?-1:1,u[4*e]=P.x,u[4*e+1]=P.y,u[4*e+2]=P.z,u[4*e+3]=-S}},mergeGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i={},a=new _n,s=0,o=0;o<e.length;++o){var l=e[o];if(n!==(null!==l.index))return null;for(var u in l.attributes){if(!r.has(u))return null;void 0===i[u]&&(i[u]=[]),i[u].push(l.attributes[u])}if(t){var c;if(n)c=l.index.buffer.count;else{if(void 0===l.attributes.a_Position)return null;c=l.attributes.a_Position.buffer.count}a.addGroup(s,c,o),s+=c}}if(n){var h=0,d=[];for(o=0;o<e.length;++o){for(var f=e[o].index,p=0;p<f.buffer.count;++p)d.push(f.buffer.array[p]+h);h+=e[o].attributes.a_Position.buffer.count}a.setIndex(d)}for(var u in i){var m=this.mergeBufferAttributes(i[u]);if(!m)return null;a.addAttribute(u,m)}return a},mergeBufferAttributes:function(e){for(var t,n,r,i=0,a=0;a<e.length;++a){var s=e[a];if(s.buffer.stride!==s.size)return null;if(void 0===t&&(t=s.buffer.array.constructor),t!==s.buffer.array.constructor)return null;if(void 0===n&&(n=s.size),n!==s.size)return null;if(void 0===r&&(r=s.normalized),r!==s.normalized)return null;i+=s.buffer.array.length}var o=new t(i),l=0;for(a=0;a<e.length;++a)o.set(e[a].buffer.array,l),l+=e[a].buffer.array.length;return new un(new cn(o,n),n,0,r)},applyMatrix4:(Pa=new r,Ca=new Re,function(e,t,n){var r,i,a=e.attributes.a_Position;if(void 0!==a){r=a.buffer.array,i=a.buffer.count;for(var s=0;s<i;s++)Pa.fromArray(r,3*s),Pa.applyMatrix4(t),Pa.toArray(r,3*s);a.buffer.version++}var o=e.attributes.a_Normal;if(void 0!==o){r=o.buffer.array,i=o.buffer.count;var l=Ca.setFromMatrix4(t).inverse().transpose();for(s=0;s<i;s++)Pa.fromArray(r,3*s),Pa.applyMatrix3(l).normalize(),Pa.toArray(r,3*s);o.buffer.version++}var u=e.attributes.a_Tangent;if(void 0!==u){for(r=u.buffer.array,i=u.buffer.count,s=0;s<i;s++)Pa.fromArray(r,3*s),Pa.transformDirection(t),Pa.toArray(r,3*s);u.buffer.version++}null!==e.boundingBox&&n&&e.computeBoundingBox(),null!==e.boundingSphere&&n&&e.computeBoundingSphere()}),getWireframeAttribute(e){const t=[],n=e.index,r=e.attributes.a_Position;if(null!==n){const e=n.buffer.array;for(let n=0,r=e.length;n<r;n+=3){const r=e[n+0],i=e[n+1],a=e[n+2];t.push(r,i,i,a,a,r)}}else for(let e=0,n=r.buffer.array.length/3-1;e<n;e+=3){const n=e+0,r=e+1,i=e+2;t.push(n,r,r,i,i,n)}return new un(new cn(r.buffer.array.length/3>65536?new Uint32Array(t):new Uint16Array(t),1))}};class Na{constructor(e,t,n){this.autoUpdate=!0,this.needsUpdate=!0}needRender(){return!!this.autoUpdate||!!this.needsUpdate&&(this.needsUpdate=!1,!0)}setGeometryReplaceFunction(e){}render(e,t,n,r){}output(e){}resize(e,t){this.needsUpdate=!0}dispose(){this.needsUpdate=!0}}class Ia{constructor(){this.name="",this.bufferDependencies=[],this.active=!0}render(e,t,n,r,i){console.error("Effect: .render() must be implemented in subclass.")}resize(e,t){}dispose(){}}const Ra="\n    attribute vec3 a_Position;\n    attribute vec2 a_Uv;\n\n    uniform mat4 u_ProjectionView;\n    uniform mat4 u_Model;\n\n    varying vec2 v_Uv;\n\n    void main() {\n        v_Uv = a_Uv;\n        gl_Position = u_ProjectionView * u_Model * vec4(a_Position, 1.0);\n    }\n",Da={name:"ec_blur",defines:{NORMALTEX_ENABLED:0,DEPTHTEX_ENABLED:0,DEPTH_PACKING:0,KERNEL_SIZE_INT:"5",KERNEL_SIZE_FLOAT:"5.0"},uniforms:{tDiffuse:null,textureSize:[512,512],direction:0,blurSize:1,kernel:[.122581,.233062,.288713,.233062,.122581],normalTex:null,depthTex:null,projection:new Float32Array(16),viewInverseTranspose:new Float32Array(16),depthRange:1},vertexShader:Ra,fragmentShader:"\n        uniform vec2 textureSize;\n        uniform int direction;\n        uniform float blurSize;\n        uniform float kernel[KERNEL_SIZE_INT];\n\n        #if NORMALTEX_ENABLED == 1\n            uniform sampler2D normalTex;\n            uniform mat4 viewInverseTranspose;\n            vec3 getViewNormal(const in vec2 screenPosition) {\n                vec3 normal = texture2D(normalTex, screenPosition).xyz * 2.0 - 1.0;\n                // Convert to view space\n                return (viewInverseTranspose * vec4(normal, 0.0)).xyz;\n            }\n        #endif\n\n        #if DEPTHTEX_ENABLED == 1\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\t\t#include <packing>\n\t\t\t#endif\n\t\t\tuniform sampler2D depthTex;\n\t\t\tuniform mat4 projection;\n\t\t\tuniform float depthRange;\n\t\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t\t#if DEPTH_PACKING == 1\n\t\t\t\t\treturn unpackRGBAToDepth( texture2D( depthTex, screenPosition ) );\n\t\t\t\t#else\n\t\t\t\t\treturn texture2D( depthTex, screenPosition ).r;\n\t\t\t\t#endif\n\t\t\t}\n\t\t\tfloat getLinearDepth(vec2 coord) {\n\t\t\t\tfloat depth = getDepth(coord) * 2.0 - 1.0;\n\t\t\t\treturn projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n\t\t\t}\n\t\t#endif\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            vec2 off = vec2(0.0);\n            if (direction == 0) {\n                off[0] = blurSize / textureSize.x;\n            } else {\n                off[1] = blurSize / textureSize.y;\n            }\n\n            vec4 sum = vec4(0.0);\n            float weightAll = 0.0;\n\n            #if NORMALTEX_ENABLED == 1\n                vec3 centerNormal = getViewNormal(v_Uv);\n            #endif\n            #if DEPTHTEX_ENABLED == 1\n                float centerDepth = getLinearDepth(v_Uv);\n            #endif\n\n            for (int i = 0; i < KERNEL_SIZE_INT; i++) {\n\t\t\t\tvec2 coord = clamp(v_Uv + vec2(float(i) - (KERNEL_SIZE_FLOAT - 1.) / 2.) * off, vec2(0.0), vec2(1.0));\n\t\t\t\tfloat w = kernel[i];\n\n\t\t\t\t#if NORMALTEX_ENABLED == 1\n\t\t\t\t\tvec3 normal = getViewNormal(coord);\n\t\t\t\t\tw *= clamp(dot(normal, centerNormal), 0.0, 1.0);\n\t\t\t\t#endif\n\t\t\t\t#if DEPTHTEX_ENABLED == 1\n\t\t\t\t\tfloat d = getLinearDepth(coord);\n\t\t            // PENDING Better equation?\n\t\t            // w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));\n\t\t\t\t\tw *= (1.0 - smoothstep(0.0, 1.0, abs(centerDepth - d) / depthRange));\n\t\t\t\t#endif\n\n\t\t\t\tweightAll += w;\n\t\t\t\tsum += w * texture2D(tDiffuse, coord);\n\t\t\t}\n\n\t\t\tgl_FragColor = sum / weightAll;\n        }\n    "},Ua={name:"ec_additive",defines:{},uniforms:{texture1:null,colorWeight1:1,alphaWeight1:1,texture2:null,colorWeight2:1,alphaWeight2:1},vertexShader:Ra,fragmentShader:"\n        uniform sampler2D texture1;\n        uniform float colorWeight1;\n        uniform float alphaWeight1;\n\n        uniform sampler2D texture2;\n        uniform float colorWeight2;\n        uniform float alphaWeight2;\n\n        varying vec2 v_Uv;\n\n        void main() {\n            vec4 texel1 = texture2D(texture1, v_Uv);\n            vec4 texel2 = texture2D(texture2, v_Uv);\n            vec3 color = texel1.rgb * colorWeight1 + texel2.rgb * colorWeight2;\n            float alpha = texel1.a * alphaWeight1 + texel2.a * alphaWeight2;\n            gl_FragColor = vec4(color, alpha);\n        }\n    "},Oa={name:"ec_multiply",defines:{},uniforms:{texture1:null,texture2:null},vertexShader:Ra,fragmentShader:"\n        uniform sampler2D texture1;\n        uniform sampler2D texture2;\n\n        varying vec2 v_Uv;\n\n        void main() {\n            vec4 texel1 = texture2D(texture1, v_Uv);\n            vec4 texel2 = texture2D(texture2, v_Uv);\n            gl_FragColor = texel1 * texel2;\n        }\n    "},ka={name:"ec_copy",defines:{},uniforms:{tDiffuse:null},vertexShader:Ra,fragmentShader:"\n        uniform sampler2D tDiffuse;\n\n        varying vec2 v_Uv;\n\n        void main() {\n            gl_FragColor = texture2D(tDiffuse, v_Uv);\n        }\n    "},$a={name:"ec_channel",defines:{},uniforms:{tDiffuse:null,channelMask:[1,0,0,0]},vertexShader:Ra,fragmentShader:"\n        uniform sampler2D tDiffuse;\n\t\tuniform vec4 channelMask;\n\n        varying vec2 v_Uv;\n\n        void main() {\n\t\t\tfloat value = dot(texture2D(tDiffuse, v_Uv), channelMask);\n            gl_FragColor = vec4(vec3(value), 1.0);\n        }\n    "},za={name:"ec_mask",defines:{},uniforms:{colorTexture:null,maskTexture:null,additiveTexture:null,channel:[1,0,0,0]},vertexShader:Ra,fragmentShader:"\n        uniform sampler2D colorTexture;\n\t\tuniform sampler2D maskTexture;\n\n\t\tuniform sampler2D additiveTexture;\n\n\t\tuniform vec4 channel;\n\n        varying vec2 v_Uv;\n\n        void main() {\n\t\t\tvec4 colorTex = texture2D(colorTexture, v_Uv);\n\t\t\tvec4 maskTex = texture2D(maskTexture, v_Uv);\n\t\t\tvec4 addTex = texture2D(additiveTexture, v_Uv);\n            gl_FragColor = colorTex * dot(maskTex, channel) + addTex;\n        }\n    "},Ba={name:"ec_highlight",defines:{},uniforms:{tDiffuse:null,threshold:1,smoothWidth:.01},vertexShader:Ra,fragmentShader:"\n        uniform float threshold;\n\t\tuniform float smoothWidth;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            vec4 texel = texture2D(tDiffuse, v_Uv);\n            vec3 luma = vec3(0.299, 0.587, 0.114);\n            float v = dot(texel.xyz, luma);\n            gl_FragColor = smoothstep(threshold, threshold + smoothWidth, v) * texel;\n        }\n    "},Ga={name:"ec_seperable_blur",defines:{MAX_RADIUS:4},uniforms:{tDiffuse:null,texSize:[.5,.5],direction:[.5,.5],kernelRadius:1},vertexShader:Ra,fragmentShader:"\n        uniform vec2 texSize;\n        uniform vec2 direction;\n        uniform float kernelRadius;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        float gaussianPdf(in float x, in float sigma) {\n\t\t\treturn 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n\t\t}\n\n        void main() {\n            vec2 invSize = 1.0 / texSize;\n\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\n\t\t\tvec4 diffuseColor = texture2D(tDiffuse, v_Uv);\n\t\t\tvec4 diffuseSum = diffuseColor * weightSum;\n\t\t\tvec2 delta = direction * invSize * kernelRadius / float(MAX_RADIUS);\n\t\t\tvec2 uvOffset = delta;\n\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\n\t\t\t\tvec4 sample1 = texture2D(tDiffuse, v_Uv + uvOffset);\n\t\t\t\tvec4 sample2 = texture2D(tDiffuse, v_Uv - uvOffset);\n\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\tuvOffset += delta;\n\t\t\t}\n\t\t\tvec4 color = diffuseSum / weightSum;\n\t\t\tgl_FragColor = color;\n        }\n    "},ja={name:"ec_h_blur",uniforms:{tDiffuse:null,h:1/512},vertexShader:Ra,fragmentShader:"\n\t\tuniform float h;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            vec4 sum = vec4(0.0);\n           \n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x - 4.0 * h, v_Uv.y)) * 0.051;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x - 3.0 * h, v_Uv.y)) * 0.0918;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x - 2.0 * h, v_Uv.y)) * 0.12245;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x - 1.0 * h, v_Uv.y)) * 0.1531;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y)) * 0.1633;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x + 1.0 * h, v_Uv.y)) * 0.1531;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x + 2.0 * h, v_Uv.y)) * 0.12245;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x + 3.0 * h, v_Uv.y)) * 0.0918;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x + 4.0 * h, v_Uv.y)) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n        }\n    "},Va={name:"ec_v_blur",uniforms:{tDiffuse:null,v:1/512},vertexShader:Ra,fragmentShader:"\n\t\tuniform float v;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            vec4 sum = vec4(0.0);\n           \n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y - 4.0 * v)) * 0.051;\n            sum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y - 3.0 * v)) * 0.0918;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y - 2.0 * v)) * 0.12245;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y - 1.0 * v)) * 0.1531;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y)) * 0.1633;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y + 1.0 * v)) * 0.1531;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y + 2.0 * v)) * 0.12245;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y + 3.0 * v)) * 0.0918;\n\t\t\tsum += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y + 4.0 * v)) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n        }\n    "};function Ha(e){return e.format===M||e.format===I}class Xa extends Ia{constructor(){super(),this.threshold=.7,this.smoothWidth=.01,this.blurSize=2,this.strength=1,this._highlightPass=new wn(Ba),this._blurPass=new wn(Da),this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0}resize(e,t){this._blurPass.uniforms.textureSize[0]=e,this._blurPass.uniforms.textureSize[1]=t}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(1),o=t._renderTargetCache.allocate(1);e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._highlightPass.uniforms.tDiffuse=n.texture,this._highlightPass.uniforms.threshold=this.threshold,this._highlightPass.uniforms.smoothWidth=this.smoothWidth,this._highlightPass.render(e),e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.tDiffuse=a.texture,this._blurPass.uniforms.direction=0,this._blurPass.uniforms.blurSize=this.blurSize,this._blurPass.render(e),e.renderPass.setRenderTarget(o),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.tDiffuse=s.texture,this._blurPass.uniforms.direction=1,this._blurPass.uniforms.blurSize=this.blurSize,this._blurPass.render(e),e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=o.texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=this.strength,this._blendPass.uniforms.alphaWeight2=this.strength,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,1),t._renderTargetCache.release(o,1)}}class Wa extends Ia{constructor(){super(),this.chromaFactor=.025,this._mainPass=new wn(qa),this._mainPass.material.premultipliedAlpha=!0}resize(e,t){this._mainPass.uniforms.resolution[0]=1/e,this._mainPass.uniforms.resolution[1]=1/t}render(e,t,n,r,i){e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1);const a=this._mainPass;a.uniforms.tDiffuse=n.texture,a.uniforms.uChromaFactor=this.chromaFactor,i&&(a.material.transparent=t._tempClearColor[3]<1||!t.clearColor,a.renderStates.camera.rect.fromArray(t._tempViewport)),a.render(e),i&&(a.material.transparent=!1,a.renderStates.camera.rect.set(0,0,1,1))}}const qa={name:"ec_chromatic_aberration",defines:{},uniforms:{tDiffuse:null,uChromaFactor:.025,uResolutionRatio:[1,1],resolution:[1/1024,1/512]},vertexShader:Ra,fragmentShader:"\n        uniform float uChromaFactor;\n        uniform vec2 uResolutionRatio;\n        uniform vec2 resolution;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            vec2 uv = v_Uv;\n            vec2 dist = uv - 0.5;\n            vec2 offset = uChromaFactor * dist * length(dist);\n            vec4 col = texture2D(tDiffuse, min(uv, 1.0 - resolution) * uResolutionRatio);\n            col.r = texture2D(tDiffuse, min(uv - offset, 1.0 - resolution) * uResolutionRatio).r;\n            col.b = texture2D(tDiffuse, min(uv + offset, 1.0 - resolution) * uResolutionRatio).b;\n            gl_FragColor = col;\n        }\n    "};class Ya extends Ia{constructor(){super(),this.brightness=0,this.contrast=1.02,this.exposure=0,this.gamma=1,this.saturation=1.02,this._mainPass=new wn(Qa),this._mainPass.material.premultipliedAlpha=!0,this._mainPass.uniforms.contrast=1.02,this._mainPass.uniforms.saturation=1.02}render(e,t,n,r,i){e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1);const a=this._mainPass;a.uniforms.tDiffuse=n.texture,a.uniforms.brightness=this.brightness,a.uniforms.contrast=this.contrast,a.uniforms.exposure=this.exposure,a.uniforms.gamma=this.gamma,a.uniforms.saturation=this.saturation,i&&(a.material.transparent=t._tempClearColor[3]<1||!t.clearColor,a.renderStates.camera.rect.fromArray(t._tempViewport)),a.render(e),i&&(a.material.transparent=!1,a.renderStates.camera.rect.set(0,0,1,1))}}const Qa={name:"ec_color_correction",defines:{},uniforms:{tDiffuse:null,brightness:0,contrast:1,exposure:0,gamma:1,saturation:1},vertexShader:Ra,fragmentShader:'\n        uniform float brightness;\n        uniform float contrast;\n        uniform float exposure;\n        uniform float gamma;\n        uniform float saturation;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        // Values from "Graphics Shaders: Theory and Practice" by Bailey and Cunningham\n        const vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\n        void main() {\n            vec4 tex = texture2D(tDiffuse, v_Uv);\n            // brightness\n            vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\n            // contrast\n            color = clamp((color - vec3(0.5)) * contrast + vec3(0.5), 0.0, 1.0);\n            // exposure\n            color = clamp(color * pow(2.0, exposure), 0.0, 1.0);\n            // gamma\n            color = clamp(pow(color, vec3(gamma)), 0.0, 1.0);\n            float luminance = dot(color, w);\n            color = mix(vec3(luminance), color, saturation);\n            gl_FragColor = vec4(color, tex.a);\n        }\n    '};class Za extends Ia{constructor(){super(),this.bufferDependencies=[{key:"GBuffer"}],this.focalDepth=1,this.focalLength=24,this.fstop=.9,this.maxblur=1,this.threshold=.9,this.gain=1,this.bias=.5,this.dithering=1e-4,this._mainPass=new wn(Ka),this._mainPass.material.premultipliedAlpha=!0}resize(e,t){this._mainPass.uniforms.resolution[0]=1/e,this._mainPass.uniforms.resolution[1]=1/t}render(e,t,n,r,i){e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1);const a=t.getBuffer("GBuffer"),s=a.getCurrentRenderStates();this._mainPass.uniforms.tColor=n.texture,this._mainPass.uniforms.tDepth=a.output()._attachments[2030];let o=0,l=0;const u=s.camera.projectionMatrix;!function(e){return-1===e.elements[11]}(u)?(o=(u.elements[14]+1)/u.elements[10],l=(u.elements[14]-1)/u.elements[10]):(o=u.elements[14]/(u.elements[10]-1),l=u.elements[14]/(u.elements[10]+1)),this._mainPass.uniforms.znear=o,this._mainPass.uniforms.zfar=l,this._mainPass.uniforms.focalDepth=this.focalDepth,this._mainPass.uniforms.focalLength=this.focalLength,this._mainPass.uniforms.fstop=this.fstop,this._mainPass.uniforms.maxblur=this.maxblur,this._mainPass.uniforms.threshold=this.threshold,this._mainPass.uniforms.gain=this.gain,this._mainPass.uniforms.bias=this.bias,this._mainPass.uniforms.dithering=this.dithering,i&&(this._mainPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._mainPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._mainPass.render(e),i&&(this._mainPass.material.transparent=!1,this._mainPass.renderStates.camera.rect.set(0,0,1,1))}}const Ka={name:"ec_bokeh",defines:{RINGS:3,SAMPLES:4},uniforms:{tColor:null,tDepth:null,resolution:[1/1024,1/512],znear:.1,zfar:100,focalDepth:1,focalLength:24,fstop:.9,maxblur:1,threshold:.5,gain:2,bias:.5,dithering:1e-4},vertexShader:Ra,fragmentShader:"\n        varying vec2 v_Uv;\n\n        uniform sampler2D tColor;\n        uniform sampler2D tDepth;\n        \n        uniform vec2 resolution;  \n        \n        uniform float znear;\n        uniform float zfar;\n\n        uniform float focalDepth;\n        uniform float focalLength;\n        uniform float fstop;\n\n        uniform float maxblur; // clamp value of max blur (0.0 = no blur, 1.0 default)\n        uniform float threshold; // highlight threshold\n        uniform float gain; // highlight gain\n        uniform float bias; // bokeh edge bias\n        uniform float dithering;\n\n        const int samples = SAMPLES;\n        const int rings = RINGS;\n        const int maxringsamples = rings * samples;\n\n        float CoC = 0.03; // circle of confusion size in mm (35mm film = 0.03mm)\n\n        vec4 color(vec2 coords, float blur) {\n            vec4 col = texture2D(tColor, coords);\n            vec3 lumcoeff = vec3(0.299, 0.587, 0.114);\n            float lum = dot(col.rgb, lumcoeff);\n            float thresh = max((lum - threshold) * gain, 0.0);\n            return vec4(col.rgb + mix(vec3(0.0), col.rgb, thresh * blur), col.a);\n        }\n\n        float linearize(float depth) {\n            return -zfar * znear / (depth * (zfar - znear) - zfar);\n        }\n\n        float gather(float i, float j, int ringsamples, inout vec3 colorSum, float w, float h, float blur) {\n            float rings2 = float(rings);\n            float step = PI * 2.0 / float(ringsamples);\n            float pw = cos(j * step) * i;\n            float ph = sin(j * step) * i;\n\t\t\tvec4 sampleColor = color(v_Uv + vec2(pw * w, ph * h), blur);\n\t\t\tfloat weight = mix(1.0, i / rings2, bias) * sampleColor.a;\n            colorSum += sampleColor.rgb  * weight;\n            return weight;\n        }\n\n        void main() {\n            float depth = linearize(texture2D(tDepth,  v_Uv).x);\n            float fDepth = focalDepth;\n\n            // dof blur factor calculation\n\n            float f = focalLength; // focal length in mm\n            float d = fDepth * 1000.; // focal plane in mm\n            float o = depth * 1000.; // depth in mm\n\n            float a = (o * f) / (o - f);\n            float b = (d * f) / (d - f);\n            float c = (d - f) / (d * fstop * CoC);\n\n            float blur = abs(a - b) * c;\n            blur = clamp(blur, 0.0, 1.0);\n\n            // calculation of pattern for dithering\n\n            vec2 noise = vec2(rand( v_Uv), rand( v_Uv + vec2(0.4, 0.6))) * dithering * blur;\n\n            // getting blur x and y step factor\n\n            float w = resolution.x * blur * maxblur + noise.x;\n            float h = resolution.y * blur * maxblur + noise.y;\n\n            // calculation of final color\n\n            vec3 col = vec3(0.0);\n\t\t\tvec4 centerColor = texture2D(tColor,  v_Uv);\n\n            if (blur < 0.05) {\n                col = centerColor.rgb;\n            } else {\n                col = centerColor.rgb;\n\n                float s = 1.0;\n                int ringsamples;\n\n                for(int i = 1; i <= rings; i++) {\n                    ringsamples = i * samples;\n\n                    for (int j = 0; j < maxringsamples; j++) {\n                        if (j >= ringsamples) break;\n                        s += gather(float(i), float(j), ringsamples, col, w, h, blur);\n                    }\n                }\n\n                col /= s; // divide by sample count\n            }\n\n            gl_FragColor = vec4(col, centerColor.a);\n        }\n    "};class Ja extends Ia{constructor(){super(),this.noiseIntensity=.35,this.scanlinesIntensity=.5,this.scanlinesCount=2048,this.grayscale=!0,this._time=0,this._mainPass=new wn(es),this._mainPass.material.premultipliedAlpha=!0}render(e,t,n,r,i){e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1);const a=this._mainPass;a.uniforms.tDiffuse=n.texture,a.uniforms.nIntensity=this.noiseIntensity,a.uniforms.sIntensity=this.scanlinesIntensity,a.uniforms.sCount=this.scanlinesCount,a.uniforms.grayscale=this.grayscale,this._time+=.01667,a.uniforms.time=this._time,i&&(a.material.transparent=t._tempClearColor[3]<1||!t.clearColor,a.renderStates.camera.rect.fromArray(t._tempViewport)),a.render(e),i&&(a.material.transparent=!1,a.renderStates.camera.rect.set(0,0,1,1))}}const es={name:"ec_film",defines:{},uniforms:{tDiffuse:null,time:0,nIntensity:.5,sIntensity:.05,sCount:4096,grayscale:!0},vertexShader:Ra,fragmentShader:"\n        uniform float time;\n        uniform float nIntensity;\n        uniform float sIntensity;\n        uniform float sCount;\n        uniform bool grayscale;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            // sample the source\n            vec4 cTextureScreen = texture2D(tDiffuse, v_Uv);\n            // make some noise\n            float dx = rand(v_Uv + time);\n            // add noise\n            vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp(0.1 + dx, 0.0, 1.0);\n            // get us a sine and cosine\n            vec2 sc = vec2(sin(v_Uv.y * sCount), cos(v_Uv.y * sCount));\n            // add scanlines\n            cResult += cTextureScreen.rgb * vec3(sc.x, sc.y, sc.x) * sIntensity;\n            // interpolate between source and result by intensity\n            cResult = cTextureScreen.rgb + clamp(nIntensity, 0.0, 1.0) * (cResult - cTextureScreen.rgb);\n            // convert to grayscale if desired\n            if(grayscale) {\n                cResult = vec3(cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11);\n            }\n            gl_FragColor = vec4(cResult, cTextureScreen.a);\n        }\n    "};class ts extends Ia{constructor(){super(),this._mainPass=new wn(ns),this._mainPass.material.premultipliedAlpha=!0}resize(e,t){this._mainPass.uniforms.resolution[0]=1/e,this._mainPass.uniforms.resolution[1]=1/t}render(e,t,n,r,i){e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._mainPass.uniforms.tDiffuse=n.texture,i&&(this._mainPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._mainPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._mainPass.render(e),i&&(this._mainPass.material.transparent=!1,this._mainPass.renderStates.camera.rect.set(0,0,1,1))}}const ns={name:"ec_fxaa",defines:{},uniforms:{tDiffuse:null,resolution:[1/1024,1/512]},vertexShader:Ra,fragmentShader:"\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n        \n        uniform vec2 resolution;  \n        \n        // FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n        \n        //----------------------------------------------------------------------------------\n        // File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n        // SDK Version: v3.00\n        // Email:       gameworks@nvidia.com\n        // Site:        http://developer.nvidia.com/\n        //\n        // Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n        //\n        // Redistribution and use in source and binary forms, with or without\n        // modification, are permitted provided that the following conditions\n        // are met:\n        //  * Redistributions of source code must retain the above copyright\n        //    notice, this list of conditions and the following disclaimer.\n        //  * Redistributions in binary form must reproduce the above copyright\n        //    notice, this list of conditions and the following disclaimer in the\n        //    documentation and/or other materials provided with the distribution.\n        //  * Neither the name of NVIDIA CORPORATION nor the names of its\n        //    contributors may be used to endorse or promote products derived\n        //    from this software without specific prior written permission.\n        //\n        // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS \"AS IS\" AND ANY\n        // EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n        // IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n        // PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n        // CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n        // EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n        // PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n        // PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n        // OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n        // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n        // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n        //\n        //----------------------------------------------------------------------------------\n        \n        #define FXAA_PC 1\n        #define FXAA_GLSL_100 1\n        #define FXAA_QUALITY_PRESET 39\n        \n        #define FXAA_GREEN_AS_LUMA 1\n        \n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_PC_CONSOLE\n            //\n            // The console algorithm for PC is included\n            // for developers targeting really low spec machines.\n            // Likely better to just run FXAA_PC, and use a really low preset.\n            //\n            #define FXAA_PC_CONSOLE 0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_GLSL_120\n            #define FXAA_GLSL_120 0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_GLSL_130\n            #define FXAA_GLSL_130 0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_HLSL_3\n            #define FXAA_HLSL_3 0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_HLSL_4\n            #define FXAA_HLSL_4 0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_HLSL_5\n            #define FXAA_HLSL_5 0\n        #endif\n        /*==========================================================================*/\n        #ifndef FXAA_GREEN_AS_LUMA\n            //\n            // For those using non-linear color,\n            // and either not able to get luma in alpha, or not wanting to,\n            // this enables FXAA to run using green as a proxy for luma.\n            // So with this enabled, no need to pack luma in alpha.\n            //\n            // This will turn off AA on anything which lacks some amount of green.\n            // Pure red and blue or combination of only R and B, will get no AA.\n            //\n            // Might want to lower the settings for both,\n            //    fxaaConsoleEdgeThresholdMin\n            //    fxaaQualityEdgeThresholdMin\n            // In order to insure AA does not get turned off on colors\n            // which contain a minor amount of green.\n            //\n            // 1 = On.\n            // 0 = Off.\n            //\n            #define FXAA_GREEN_AS_LUMA 0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_EARLY_EXIT\n            //\n            // Controls algorithm's early exit path.\n            // On PS3 turning this ON adds 2 cycles to the shader.\n            // On 360 turning this OFF adds 10ths of a millisecond to the shader.\n            // Turning this off on console will result in a more blurry image.\n            // So this defaults to on.\n            //\n            // 1 = On.\n            // 0 = Off.\n            //\n            #define FXAA_EARLY_EXIT 1\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_DISCARD\n            //\n            // Only valid for PC OpenGL currently.\n            // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n            //\n            // 1 = Use discard on pixels which don't need AA.\n            //     For APIs which enable concurrent TEX+ROP from same surface.\n            // 0 = Return unchanged color on pixels which don't need AA.\n            //\n            #define FXAA_DISCARD 0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_FAST_PIXEL_OFFSET\n            //\n            // Used for GLSL 120 only.\n            //\n            // 1 = GL API supports fast pixel offsets\n            // 0 = do not use fast pixel offsets\n            //\n            #ifdef GL_EXT_gpu_shader4\n                #define FXAA_FAST_PIXEL_OFFSET 1\n            #endif\n            #ifdef GL_NV_gpu_shader5\n                #define FXAA_FAST_PIXEL_OFFSET 1\n            #endif\n            #ifdef GL_ARB_gpu_shader5\n                #define FXAA_FAST_PIXEL_OFFSET 1\n            #endif\n            #ifndef FXAA_FAST_PIXEL_OFFSET\n                #define FXAA_FAST_PIXEL_OFFSET 0\n            #endif\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #ifndef FXAA_GATHER4_ALPHA\n            //\n            // 1 = API supports gather4 on alpha channel.\n            // 0 = API does not support gather4 on alpha channel.\n            //\n            #if (FXAA_HLSL_5 == 1)\n                #define FXAA_GATHER4_ALPHA 1\n            #endif\n            #ifdef GL_ARB_gpu_shader5\n                #define FXAA_GATHER4_ALPHA 1\n            #endif\n            #ifdef GL_NV_gpu_shader5\n                #define FXAA_GATHER4_ALPHA 1\n            #endif\n            #ifndef FXAA_GATHER4_ALPHA\n                #define FXAA_GATHER4_ALPHA 0\n            #endif\n        #endif\n        \n        \n        /*============================================================================\n                                FXAA QUALITY - TUNING KNOBS\n        ------------------------------------------------------------------------------\n        NOTE the other tuning knobs are now in the shader function inputs!\n        ============================================================================*/\n        #ifndef FXAA_QUALITY_PRESET\n            //\n            // Choose the quality preset.\n            // This needs to be compiled into the shader as it effects code.\n            // Best option to include multiple presets is to\n            // in each shader define the preset, then include this file.\n            //\n            // OPTIONS\n            // -----------------------------------------------------------------------\n            // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n            // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n            // 39       - no dither, very expensive\n            //\n            // NOTES\n            // -----------------------------------------------------------------------\n            // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n            // 13 = about same speed as FXAA 3.9 and better than 12\n            // 23 = closest to FXAA 3.9 visually and performance wise\n            //  _ = the lowest digit is directly related to performance\n            // _  = the highest digit is directly related to style\n            //\n            #define FXAA_QUALITY_PRESET 12\n        #endif\n        \n        \n        /*============================================================================\n        \n                                FXAA QUALITY - PRESETS\n        \n        ============================================================================*/\n        \n        /*============================================================================\n                            FXAA QUALITY - MEDIUM DITHER PRESETS\n        ============================================================================*/\n        #if (FXAA_QUALITY_PRESET == 10)\n            #define FXAA_QUALITY_PS 3\n            #define FXAA_QUALITY_P0 1.5\n            #define FXAA_QUALITY_P1 3.0\n            #define FXAA_QUALITY_P2 12.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 11)\n            #define FXAA_QUALITY_PS 4\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 3.0\n            #define FXAA_QUALITY_P3 12.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 12)\n            #define FXAA_QUALITY_PS 5\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 4.0\n            #define FXAA_QUALITY_P4 12.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 13)\n            #define FXAA_QUALITY_PS 6\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 4.0\n            #define FXAA_QUALITY_P5 12.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 14)\n            #define FXAA_QUALITY_PS 7\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 4.0\n            #define FXAA_QUALITY_P6 12.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 15)\n            #define FXAA_QUALITY_PS 8\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 2.0\n            #define FXAA_QUALITY_P6 4.0\n            #define FXAA_QUALITY_P7 12.0\n        #endif\n        \n        /*============================================================================\n                            FXAA QUALITY - LOW DITHER PRESETS\n        ============================================================================*/\n        #if (FXAA_QUALITY_PRESET == 20)\n            #define FXAA_QUALITY_PS 3\n            #define FXAA_QUALITY_P0 1.5\n            #define FXAA_QUALITY_P1 2.0\n            #define FXAA_QUALITY_P2 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 21)\n            #define FXAA_QUALITY_PS 4\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 22)\n            #define FXAA_QUALITY_PS 5\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 23)\n            #define FXAA_QUALITY_PS 6\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 24)\n            #define FXAA_QUALITY_PS 7\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 3.0\n            #define FXAA_QUALITY_P6 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 25)\n            #define FXAA_QUALITY_PS 8\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 2.0\n            #define FXAA_QUALITY_P6 4.0\n            #define FXAA_QUALITY_P7 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 26)\n            #define FXAA_QUALITY_PS 9\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 2.0\n            #define FXAA_QUALITY_P6 2.0\n            #define FXAA_QUALITY_P7 4.0\n            #define FXAA_QUALITY_P8 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 27)\n            #define FXAA_QUALITY_PS 10\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 2.0\n            #define FXAA_QUALITY_P6 2.0\n            #define FXAA_QUALITY_P7 2.0\n            #define FXAA_QUALITY_P8 4.0\n            #define FXAA_QUALITY_P9 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 28)\n            #define FXAA_QUALITY_PS 11\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 2.0\n            #define FXAA_QUALITY_P6 2.0\n            #define FXAA_QUALITY_P7 2.0\n            #define FXAA_QUALITY_P8 2.0\n            #define FXAA_QUALITY_P9 4.0\n            #define FXAA_QUALITY_P10 8.0\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PRESET == 29)\n            #define FXAA_QUALITY_PS 12\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.5\n            #define FXAA_QUALITY_P2 2.0\n            #define FXAA_QUALITY_P3 2.0\n            #define FXAA_QUALITY_P4 2.0\n            #define FXAA_QUALITY_P5 2.0\n            #define FXAA_QUALITY_P6 2.0\n            #define FXAA_QUALITY_P7 2.0\n            #define FXAA_QUALITY_P8 2.0\n            #define FXAA_QUALITY_P9 2.0\n            #define FXAA_QUALITY_P10 4.0\n            #define FXAA_QUALITY_P11 8.0\n        #endif\n        \n        /*============================================================================\n                            FXAA QUALITY - EXTREME QUALITY\n        ============================================================================*/\n        #if (FXAA_QUALITY_PRESET == 39)\n            #define FXAA_QUALITY_PS 12\n            #define FXAA_QUALITY_P0 1.0\n            #define FXAA_QUALITY_P1 1.0\n            #define FXAA_QUALITY_P2 1.0\n            #define FXAA_QUALITY_P3 1.0\n            #define FXAA_QUALITY_P4 1.0\n            #define FXAA_QUALITY_P5 1.5\n            #define FXAA_QUALITY_P6 2.0\n            #define FXAA_QUALITY_P7 2.0\n            #define FXAA_QUALITY_P8 2.0\n            #define FXAA_QUALITY_P9 2.0\n            #define FXAA_QUALITY_P10 4.0\n            #define FXAA_QUALITY_P11 8.0\n        #endif\n        \n        \n        \n        /*============================================================================\n        \n                                        API PORTING\n        \n        ============================================================================*/\n        #if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n            #define FxaaBool bool\n            #define FxaaDiscard discard\n            #define FxaaFloat float\n            #define FxaaFloat2 vec2\n            #define FxaaFloat3 vec3\n            #define FxaaFloat4 vec4\n            #define FxaaHalf float\n            #define FxaaHalf2 vec2\n            #define FxaaHalf3 vec3\n            #define FxaaHalf4 vec4\n            #define FxaaInt2 ivec2\n            #define FxaaSat(x) clamp(x, 0.0, 1.0)\n            #define FxaaTex sampler2D\n        #else\n            #define FxaaBool bool\n            #define FxaaDiscard clip(-1)\n            #define FxaaFloat float\n            #define FxaaFloat2 float2\n            #define FxaaFloat3 float3\n            #define FxaaFloat4 float4\n            #define FxaaHalf half\n            #define FxaaHalf2 half2\n            #define FxaaHalf3 half3\n            #define FxaaHalf4 half4\n            #define FxaaSat(x) saturate(x)\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_GLSL_100 == 1)\n        #define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n        #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_GLSL_120 == 1)\n            // Requires,\n            //  #version 120\n            // And at least,\n            //  #extension GL_EXT_gpu_shader4 : enable\n            //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n            #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n            #if (FXAA_FAST_PIXEL_OFFSET == 1)\n                #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n            #else\n                #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n            #endif\n            #if (FXAA_GATHER4_ALPHA == 1)\n                // use #extension GL_ARB_gpu_shader5 : enable\n                #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n                #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n                #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n                #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n            #endif\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_GLSL_130 == 1)\n            // Requires '#version 130' or better\n            #define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n            #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n            #if (FXAA_GATHER4_ALPHA == 1)\n                // use #extension GL_ARB_gpu_shader5 : enable\n                #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n                #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n                #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n                #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n            #endif\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_HLSL_3 == 1)\n            #define FxaaInt2 float2\n            #define FxaaTex sampler2D\n            #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\n            #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_HLSL_4 == 1)\n            #define FxaaInt2 int2\n            struct FxaaTex { SamplerState smpl; Texture2D tex; };\n            #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n            #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n        #endif\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_HLSL_5 == 1)\n            #define FxaaInt2 int2\n            struct FxaaTex { SamplerState smpl; Texture2D tex; };\n            #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n            #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n            #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\n            #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\n            #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\n            #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\n        #endif\n        \n        \n        /*============================================================================\n                        GREEN AS LUMA OPTION SUPPORT FUNCTION\n        ============================================================================*/\n        #if (FXAA_GREEN_AS_LUMA == 0)\n            FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n        #else\n            FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n        #endif\n        \n        \n        \n        \n        /*============================================================================\n        \n                                    FXAA3 QUALITY - PC\n        \n        ============================================================================*/\n        #if (FXAA_PC == 1)\n        /*--------------------------------------------------------------------------*/\n        FxaaFloat4 FxaaPixelShader(\n            //\n            // Use noperspective interpolation here (turn off perspective interpolation).\n            // {xy} = center of pixel\n            FxaaFloat2 pos,\n            //\n            // Used only for FXAA Console, and not used on the 360 version.\n            // Use noperspective interpolation here (turn off perspective interpolation).\n            // {xy_} = upper left of pixel\n            // {_zw} = lower right of pixel\n            FxaaFloat4 fxaaConsolePosPos,\n            //\n            // Input color texture.\n            // {rgb_} = color in linear or perceptual color space\n            // if (FXAA_GREEN_AS_LUMA == 0)\n            //     {__a} = luma in perceptual color space (not linear)\n            FxaaTex tex,\n            //\n            // Only used on the optimized 360 version of FXAA Console.\n            // For everything but 360, just use the same input here as for 'tex'.\n            // For 360, same diffuseMap, just alias with a 2nd sampler.\n            // This sampler needs to have an exponent bias of -1.\n            FxaaTex fxaaConsole360TexExpBiasNegOne,\n            //\n            // Only used on the optimized 360 version of FXAA Console.\n            // For everything but 360, just use the same input here as for 'tex'.\n            // For 360, same diffuseMap, just alias with a 3nd sampler.\n            // This sampler needs to have an exponent bias of -2.\n            FxaaTex fxaaConsole360TexExpBiasNegTwo,\n            //\n            // Only used on FXAA Quality.\n            // This must be from a constant/uniform.\n            // {x_} = 1.0/screenWidthInPixels\n            // {_y} = 1.0/screenHeightInPixels\n            FxaaFloat2 fxaaQualityRcpFrame,\n            //\n            // Only used on FXAA Console.\n            // This must be from a constant/uniform.\n            // This effects sub-pixel AA quality and inversely sharpness.\n            //   Where N ranges between,\n            //     N = 0.50 (default)\n            //     N = 0.33 (sharper)\n            // {x__} = -N/screenWidthInPixels\n            // {_y_} = -N/screenHeightInPixels\n            // {_z_} =  N/screenWidthInPixels\n            // {__w} =  N/screenHeightInPixels\n            FxaaFloat4 fxaaConsoleRcpFrameOpt,\n            //\n            // Only used on FXAA Console.\n            // Not used on 360, but used on PS3 and PC.\n            // This must be from a constant/uniform.\n            // {x__} = -2.0/screenWidthInPixels\n            // {_y_} = -2.0/screenHeightInPixels\n            // {_z_} =  2.0/screenWidthInPixels\n            // {__w} =  2.0/screenHeightInPixels\n            FxaaFloat4 fxaaConsoleRcpFrameOpt2,\n            //\n            // Only used on FXAA Console.\n            // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n            // This must be from a constant/uniform.\n            // {x__} =  8.0/screenWidthInPixels\n            // {_y_} =  8.0/screenHeightInPixels\n            // {_z_} = -4.0/screenWidthInPixels\n            // {__w} = -4.0/screenHeightInPixels\n            FxaaFloat4 fxaaConsole360RcpFrameOpt2,\n            //\n            // Only used on FXAA Quality.\n            // This used to be the FXAA_QUALITY_SUBPIX define.\n            // It is here now to allow easier tuning.\n            // Choose the amount of sub-pixel aliasing removal.\n            // This can effect sharpness.\n            //   1.00 - upper limit (softer)\n            //   0.75 - default amount of filtering\n            //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n            //   0.25 - almost off\n            //   0.00 - completely off\n            FxaaFloat fxaaQualitySubpix,\n            //\n            // Only used on FXAA Quality.\n            // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n            // It is here now to allow easier tuning.\n            // The minimum amount of local contrast required to apply algorithm.\n            //   0.333 - too little (faster)\n            //   0.250 - low quality\n            //   0.166 - default\n            //   0.125 - high quality\n            //   0.063 - overkill (slower)\n            FxaaFloat fxaaQualityEdgeThreshold,\n            //\n            // Only used on FXAA Quality.\n            // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n            // It is here now to allow easier tuning.\n            // Trims the algorithm from processing darks.\n            //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n            //   0.0625 - high quality (faster)\n            //   0.0312 - visible limit (slower)\n            // Special notes when using FXAA_GREEN_AS_LUMA,\n            //   Likely want to set this to zero.\n            //   As colors that are mostly not-green\n            //   will appear very dark in the green channel!\n            //   Tune by looking at mostly non-green content,\n            //   then start at zero and increase until aliasing is a problem.\n            FxaaFloat fxaaQualityEdgeThresholdMin,\n            //\n            // Only used on FXAA Console.\n            // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\n            // It is here now to allow easier tuning.\n            // This does not effect PS3, as this needs to be compiled in.\n            //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\n            //   Due to the PS3 being ALU bound,\n            //   there are only three safe values here: 2 and 4 and 8.\n            //   These options use the shaders ability to a free *|/ by 2|4|8.\n            // For all other platforms can be a non-power of two.\n            //   8.0 is sharper (default!!!)\n            //   4.0 is softer\n            //   2.0 is really soft (good only for vector graphics inputs)\n            FxaaFloat fxaaConsoleEdgeSharpness,\n            //\n            // Only used on FXAA Console.\n            // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\n            // It is here now to allow easier tuning.\n            // This does not effect PS3, as this needs to be compiled in.\n            //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\n            //   Due to the PS3 being ALU bound,\n            //   there are only two safe values here: 1/4 and 1/8.\n            //   These options use the shaders ability to a free *|/ by 2|4|8.\n            // The console setting has a different mapping than the quality setting.\n            // Other platforms can use other values.\n            //   0.125 leaves less aliasing, but is softer (default!!!)\n            //   0.25 leaves more aliasing, and is sharper\n            FxaaFloat fxaaConsoleEdgeThreshold,\n            //\n            // Only used on FXAA Console.\n            // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\n            // It is here now to allow easier tuning.\n            // Trims the algorithm from processing darks.\n            // The console setting has a different mapping than the quality setting.\n            // This only applies when FXAA_EARLY_EXIT is 1.\n            // This does not apply to PS3,\n            // PS3 was simplified to avoid more shader instructions.\n            //   0.06 - faster but more aliasing in darks\n            //   0.05 - default\n            //   0.04 - slower and less aliasing in darks\n            // Special notes when using FXAA_GREEN_AS_LUMA,\n            //   Likely want to set this to zero.\n            //   As colors that are mostly not-green\n            //   will appear very dark in the green channel!\n            //   Tune by looking at mostly non-green content,\n            //   then start at zero and increase until aliasing is a problem.\n            FxaaFloat fxaaConsoleEdgeThresholdMin,\n            //\n            // Extra constants for 360 FXAA Console only.\n            // Use zeros or anything else for other platforms.\n            // These must be in physical constant registers and NOT immedates.\n            // Immedates will result in compiler un-optimizing.\n            // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n            FxaaFloat4 fxaaConsole360ConstDir\n        ) {\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat2 posM;\n            posM.x = pos.x;\n            posM.y = pos.y;\n            #if (FXAA_GATHER4_ALPHA == 1)\n                #if (FXAA_DISCARD == 0)\n                    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n                    #if (FXAA_GREEN_AS_LUMA == 0)\n                        #define lumaM rgbyM.w\n                    #else\n                        #define lumaM rgbyM.y\n                    #endif\n                #endif\n                #if (FXAA_GREEN_AS_LUMA == 0)\n                    FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n                    FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n                #else\n                    FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n                    FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n                #endif\n                #if (FXAA_DISCARD == 1)\n                    #define lumaM luma4A.w\n                #endif\n                #define lumaE luma4A.z\n                #define lumaS luma4A.x\n                #define lumaSE luma4A.y\n                #define lumaNW luma4B.w\n                #define lumaN luma4B.z\n                #define lumaW luma4B.x\n            #else\n                FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n                #if (FXAA_GREEN_AS_LUMA == 0)\n                    #define lumaM rgbyM.w\n                #else\n                    #define lumaM rgbyM.y\n                #endif\n                #if (FXAA_GLSL_100 == 1)\n                FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n                #else\n                FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n                #endif\n            #endif\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat maxSM = max(lumaS, lumaM);\n            FxaaFloat minSM = min(lumaS, lumaM);\n            FxaaFloat maxESM = max(lumaE, maxSM);\n            FxaaFloat minESM = min(lumaE, minSM);\n            FxaaFloat maxWN = max(lumaN, lumaW);\n            FxaaFloat minWN = min(lumaN, lumaW);\n            FxaaFloat rangeMax = max(maxWN, maxESM);\n            FxaaFloat rangeMin = min(minWN, minESM);\n            FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n            FxaaFloat range = rangeMax - rangeMin;\n            FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n            FxaaBool earlyExit = range < rangeMaxClamped;\n        /*--------------------------------------------------------------------------*/\n            if(earlyExit)\n                #if (FXAA_DISCARD == 1)\n                    FxaaDiscard;\n                #else\n                    return rgbyM;\n                #endif\n        /*--------------------------------------------------------------------------*/\n            #if (FXAA_GATHER4_ALPHA == 0)\n                #if (FXAA_GLSL_100 == 1)\n                FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n                #else\n                FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n                #endif\n            #else\n                FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n                FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n            #endif\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat lumaNS = lumaN + lumaS;\n            FxaaFloat lumaWE = lumaW + lumaE;\n            FxaaFloat subpixRcpRange = 1.0/range;\n            FxaaFloat subpixNSWE = lumaNS + lumaWE;\n            FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n            FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat lumaNESE = lumaNE + lumaSE;\n            FxaaFloat lumaNWNE = lumaNW + lumaNE;\n            FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n            FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat lumaNWSW = lumaNW + lumaSW;\n            FxaaFloat lumaSWSE = lumaSW + lumaSE;\n            FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n            FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n            FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n            FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n            FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n            FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n            FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n            FxaaBool horzSpan = edgeHorz >= edgeVert;\n            FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n        /*--------------------------------------------------------------------------*/\n            if(!horzSpan) lumaN = lumaW;\n            if(!horzSpan) lumaS = lumaE;\n            if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n            FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat gradientN = lumaN - lumaM;\n            FxaaFloat gradientS = lumaS - lumaM;\n            FxaaFloat lumaNN = lumaN + lumaM;\n            FxaaFloat lumaSS = lumaS + lumaM;\n            FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n            FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n            if(pairN) lengthSign = -lengthSign;\n            FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat2 posB;\n            posB.x = posM.x;\n            posB.y = posM.y;\n            FxaaFloat2 offNP;\n            offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n            offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n            if(!horzSpan) posB.x += lengthSign * 0.5;\n            if( horzSpan) posB.y += lengthSign * 0.5;\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat2 posN;\n            posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n            posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n            FxaaFloat2 posP;\n            posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n            posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n            FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n            FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n            FxaaFloat subpixE = subpixC * subpixC;\n            FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n        /*--------------------------------------------------------------------------*/\n            if(!pairN) lumaNN = lumaSS;\n            FxaaFloat gradientScaled = gradient * 1.0/4.0;\n            FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n            FxaaFloat subpixF = subpixD * subpixE;\n            FxaaBool lumaMLTZero = lumaMM < 0.0;\n        /*--------------------------------------------------------------------------*/\n            lumaEndN -= lumaNN * 0.5;\n            lumaEndP -= lumaNN * 0.5;\n            FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n            FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n            FxaaBool doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n        /*--------------------------------------------------------------------------*/\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n        /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 3)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n        /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 4)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n        /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 5)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n        /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITY_PS > 6)\n                            if(doneNP) {\n                                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                                doneNP = (!doneN) || (!doneP);\n                                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n        /*--------------------------------------------------------------------------*/\n                                #if (FXAA_QUALITY_PS > 7)\n                                if(doneNP) {\n                                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                    doneN = abs(lumaEndN) >= gradientScaled;\n                                    doneP = abs(lumaEndP) >= gradientScaled;\n                                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                                    doneNP = (!doneN) || (!doneP);\n                                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n        /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 8)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n        /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 9)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n        /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 10)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n        /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 11)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n        /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITY_PS > 12)\n                            if(doneNP) {\n                                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                                doneNP = (!doneN) || (!doneP);\n                                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n        /*--------------------------------------------------------------------------*/\n                            }\n                            #endif\n        /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n        /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n        /*--------------------------------------------------------------------------*/\n                }\n                #endif\n        /*--------------------------------------------------------------------------*/\n            }\n            #endif\n        /*--------------------------------------------------------------------------*/\n                                }\n                                #endif\n        /*--------------------------------------------------------------------------*/\n                            }\n                            #endif\n        /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n        /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n        /*--------------------------------------------------------------------------*/\n                }\n                #endif\n        /*--------------------------------------------------------------------------*/\n            }\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat dstN = posM.x - posN.x;\n            FxaaFloat dstP = posP.x - posM.x;\n            if(!horzSpan) dstN = posM.y - posN.y;\n            if(!horzSpan) dstP = posP.y - posM.y;\n        /*--------------------------------------------------------------------------*/\n            FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n            FxaaFloat spanLength = (dstP + dstN);\n            FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n            FxaaFloat spanLengthRcp = 1.0/spanLength;\n        /*--------------------------------------------------------------------------*/\n            FxaaBool directionN = dstN < dstP;\n            FxaaFloat dst = min(dstN, dstP);\n            FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n            FxaaFloat subpixG = subpixF * subpixF;\n            FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n            FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n        /*--------------------------------------------------------------------------*/\n            FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n            FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n            if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n            if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n            #if (FXAA_DISCARD == 1)\n                return FxaaTexTop(tex, posM);\n            #else\n                return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n            #endif\n        }\n        /*==========================================================================*/\n        #endif\n        \n        void main() {\n        gl_FragColor = FxaaPixelShader(\n            v_Uv,\n            vec4(0.0),\n            tDiffuse,\n            tDiffuse,\n            tDiffuse,\n            resolution,\n            vec4(0.0),\n            vec4(0.0),\n            vec4(0.0),\n            0.75,\n            0.166,\n            0.0833,\n            0.0,\n            0.0,\n            0.0,\n            vec4(0.0)\n        );\n        \n        // TODO avoid querying texture twice for same texel\n        gl_FragColor.a = texture2D(tDiffuse, v_Uv).a;\n        }\n    "};class rs extends Ia{constructor(){super(),this.bufferDependencies=[{key:"GBuffer"}],this._ssaoPass=new wn(hs),this.radius=.5,this.power=1,this.bias=.1,this.intensity=1,this.quality="Medium",this._kernelCode="",this._kernelSize=-1,this._setNoiseSize(64),this._setKernelSize(16),this._blurPass=new wn(Da),this._blurPass.material.defines.NORMALTEX_ENABLED=1,this._blurPass.material.defines.DEPTHTEX_ENABLED=1,this.blurSize=1,this.depthRange=1,this._blendPass=new wn(Oa),this._blendPass.material.premultipliedAlpha=!0}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(0),o=t.getBuffer("GBuffer"),l=o.getCurrentRenderStates();is.copy(l.camera.projectionMatrix),as.copy(l.camera.projectionMatrix).inverse(),ss.copy(l.camera.viewMatrix).inverse().transpose(),e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(1,1,1,1),e.renderPass.clear(!0,!0,!1),this._ssaoPass.uniforms.normalTex=o.output()._attachments[2e3],this._ssaoPass.uniforms.depthTex=o.output()._attachments[2030],this._ssaoPass.uniforms.texSize[0]=o.output().width,this._ssaoPass.uniforms.texSize[1]=o.output().height,is.toArray(this._ssaoPass.uniforms.projection),as.toArray(this._ssaoPass.uniforms.projectionInv),ss.toArray(this._ssaoPass.uniforms.viewInverseTranspose),this._setKernelSize(os[this.quality]),this._ssaoPass.uniforms.radius=this.radius,this._ssaoPass.uniforms.power=this.power,this._ssaoPass.uniforms.bias=this.bias,this._ssaoPass.uniforms.intensity=this.intensity,this._ssaoPass.render(e),e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.normalTex=o.output()._attachments[2e3],this._blurPass.uniforms.depthTex=o.output()._attachments[2030],this._blurPass.uniforms.textureSize[0]=o.output().width,this._blurPass.uniforms.textureSize[1]=o.output().height,is.toArray(this._blurPass.uniforms.projection),ss.toArray(this._blurPass.uniforms.viewInverseTranspose),this._blurPass.uniforms.blurSize=this.blurSize,this._blurPass.uniforms.depthRange=this.depthRange,this._blurPass.uniforms.direction=0,this._blurPass.uniforms.tDiffuse=a.texture,this._blurPass.render(e),e.renderPass.setRenderTarget(n?a:r),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.direction=1,this._blurPass.uniforms.tDiffuse=s.texture,this._blurPass.render(e),n&&(e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=a.texture,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1))),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,0)}_setKernelSize(e,t=0){const n=e+"_"+t;this._kernelCode!==n&&(this._kernelCode=n,us[n]||(us[n]=function(e,t=0){const n=new Float32Array(3*e);for(let r=0;r<e;r++){const e=ls(r+t,2)*Math.PI*2,i=1-(.85*ls(r+t,3)+.15),a=Math.sqrt(1-i*i),s=Math.random(),o=Math.cos(e)*a*s,l=Math.sin(e)*a*s,u=i*s;n[3*r]=o,n[3*r+1]=l,n[3*r+2]=u}return n}(e,t*e)),this._ssaoPass.uniforms.kernel=us[n],this._ssaoPass.material.defines.KERNEL_SIZE=e,this._ssaoPass.material.needsUpdate=!0)}_setNoiseSize(e){if(this._noiseSize===e)return;this._noiseSize=e;const t=this._ssaoPass.uniforms;t.noiseTex?(t.noiseTex.image.data=cs(e),t.noiseTex.image.width=e,t.noiseTex.image.height=e,t.noiseTex.version++):t.noiseTex=function(e){const t=new Rn;return t.image={data:cs(e),width:e,height:e},t.type=R,t.magFilter=z,t.minFilter=z,t.wrapS=H,t.wrapT=H,t.generateMipmaps=!1,t.flipY=!1,t.version++,t}(e),t.noiseTexSize[0]=e,t.noiseTexSize[1]=e}}const is=new a,as=new a,ss=new a,os={Low:6,Medium:12,High:32,Ultra:64};function ls(e,t){let n=0,r=1/t,i=e;for(;i>0;)n+=r*(i%t),i=Math.floor(i/t),r/=t;return n}const us={};function cs(e){const t=new Uint8Array(e*e*4);let n=0;const i=new r;for(let r=0;r<e;r++)for(let r=0;r<e;r++)i.set(2*Math.random()-1,2*Math.random()-1,0).normalize(),t[n++]=255*(.5*i.x+.5),t[n++]=255*(.5*i.y+.5),t[n++]=0,t[n++]=255;return t}const hs={name:"ec_ssao",defines:{ALCHEMY:!1,DEPTH_PACKING:0,KERNEL_SIZE:64},uniforms:{normalTex:null,depthTex:null,texSize:[512,512],noiseTex:null,noiseTexSize:[4,4],projection:new Float32Array(16),projectionInv:new Float32Array(16),viewInverseTranspose:new Float32Array(16),kernel:null,radius:.2,power:1,bias:1e-4,intensity:1},vertexShader:Ra,fragmentShader:"\n        #include <packing>\n\n        varying vec2 v_Uv;\n\n        uniform sampler2D normalTex;\n        uniform sampler2D depthTex;\n        uniform vec2 texSize;\n\n        uniform sampler2D noiseTex;\n        uniform vec2 noiseTexSize;\n\n        uniform mat4 projection;\n        uniform mat4 projectionInv;\n        uniform mat4 viewInverseTranspose;\n\n        uniform vec3 kernel[KERNEL_SIZE];\n\n        uniform float radius;\n        uniform float power;\n        uniform float bias;\n        uniform float intensity;\n\n        float getDepth(const in vec2 screenPosition) {\n            #if DEPTH_PACKING == 1\n                return unpackRGBAToDepth(texture2D(depthTex, screenPosition));\n            #else\n                return texture2D(depthTex, screenPosition).r;\n            #endif\n        }\n\n        vec3 getViewNormal(const in vec2 screenPosition) {\n            vec3 normal = texture2D(normalTex, screenPosition).xyz * 2.0 - 1.0;\n            // Convert to view space\n            return (viewInverseTranspose * vec4(normal, 0.0)).xyz;\n        }\n\n        float ssaoEstimator(in mat3 kernelBasis, in vec3 originPos, in vec3 N) {\n            float occlusion = 0.0;\n\n            for (int i = 0; i < KERNEL_SIZE; i++) {\n                vec3 samplePos = kernel[i];\n                samplePos = kernelBasis * samplePos;\n                samplePos = samplePos * radius + originPos;\n\n                vec4 texCoord = projection * vec4(samplePos, 1.0);\n                texCoord.xy /= texCoord.w;\n                texCoord.xy = texCoord.xy * 0.5 + 0.5;\n\n                float sampleDepth = getDepth(texCoord.xy);\n                float z = sampleDepth * 2.0 - 1.0;\n\n                #ifdef ALCHEMY\n                    vec4 projectedPos = vec4(texCoord.xy * 2.0 - 1.0, z, 1.0);\n                    vec4 p4 = projectionInv * projectedPos;\n                    p4.xyz /= p4.w;\n\n                    vec3 cDir = p4.xyz - originPos;\n\n                    float vv = dot(cDir, cDir);\n                    float vn = dot(cDir, N);\n\n                    float radius2 = radius * radius;\n                    vn = max(vn + p4.z * bias, 0.0);\n                    float f = max(radius2 - vv, 0.0) / radius2;\n                    occlusion += f * f * f * max(vn / (0.01 + vv), 0.0);\n                #else\n                    if (projection[3][3] == 0.0) {\n                        z = projection[3][2] / (z * projection[2][3] - projection[2][2]);\n                    } else {\n                        z = (z - projection[3][2]) / projection[2][2];\n                    }\n\n                    float factor = step(samplePos.z, z - bias);\n                    float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - z));\n                    occlusion += rangeCheck * factor;\n                #endif\n            }\n\n            occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\n\n            return pow(occlusion, power);\n        }\n\n        void main() {\n            float centerDepth = getDepth(v_Uv);\n            if(centerDepth >= (1.0 - EPSILON)) {\n                discard;\n            }\n\n            vec3 N = getViewNormal(v_Uv);\n\n            vec2 noiseTexCoord = texSize / vec2(noiseTexSize) * v_Uv;\n            vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\n\n            // Tangent\n            vec3 T = normalize(rvec - N * dot(rvec, N));\n            // Bitangent\n            vec3 BT = normalize(cross(N, T));\n\n            mat3 kernelBasis = mat3(T, BT, N);\n\n            // view position\n            float z = centerDepth * 2.0 - 1.0;\n            vec4 projectedPos = vec4(v_Uv * 2.0 - 1.0, z, 1.0);\n            vec4 p4 = projectionInv * projectedPos;\n            vec3 position = p4.xyz / p4.w;\n\n            float ao = ssaoEstimator(kernelBasis, position, N);\n            ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\n\n            gl_FragColor = vec4(vec3(ao), 1.0);\n        }\n    "};class ds extends Ia{constructor(){super(),this.bufferDependencies=[{key:"SceneBuffer"},{key:"GBuffer"}],this._ssrPass=new wn(gs),this.maxRayDistance=200,this.pixelStride=16,this.pixelStrideZCutoff=50,this.screenEdgeFadeStart=.9,this.eyeFadeStart=.4,this.eyeFadeEnd=.8,this.minGlossiness=.2,this._blurPass=new wn(Da),this._blurPass.material.defines.NORMALTEX_ENABLED=1,this._blurPass.material.defines.DEPTHTEX_ENABLED=1,this.blurSize=2,this.depthRange=1,this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(0),o=t.getBuffer("SceneBuffer"),l=t.getBuffer("GBuffer"),u=l.getCurrentRenderStates();fs.copy(u.camera.projectionMatrix),ps.copy(u.camera.projectionMatrix).inverse(),ms.copy(u.camera.viewMatrix).inverse().transpose(),e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,1),e.renderPass.clear(!0,!0,!1),this._ssrPass.uniforms.colorTex=o.output()._attachments[2e3],this._ssrPass.uniforms.gBufferTexture1=l.output()._attachments[2e3],this._ssrPass.uniforms.gBufferTexture2=l.output()._attachments[2030],this._ssrPass.uniforms.viewportSize[0]=l.output().width,this._ssrPass.uniforms.viewportSize[1]=l.output().height,fs.toArray(this._ssrPass.uniforms.projection),ps.toArray(this._ssrPass.uniforms.projectionInv),ms.toArray(this._ssrPass.uniforms.viewInverseTranspose),this._ssrPass.uniforms.maxRayDistance=this.maxRayDistance,this._ssrPass.uniforms.pixelStride=this.pixelStride,this._ssrPass.uniforms.pixelStrideZCutoff=this.pixelStrideZCutoff,this._ssrPass.uniforms.screenEdgeFadeStart=this.screenEdgeFadeStart,this._ssrPass.uniforms.eyeFadeStart=this.eyeFadeStart,this._ssrPass.uniforms.eyeFadeEnd=this.eyeFadeEnd,this._ssrPass.uniforms.minGlossiness=this.minGlossiness,this._ssrPass.render(e),e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.normalTex=l.output()._attachments[2e3],this._blurPass.uniforms.depthTex=l.output()._attachments[2030],this._blurPass.uniforms.textureSize[0]=l.output().width,this._blurPass.uniforms.textureSize[1]=l.output().height,fs.toArray(this._blurPass.uniforms.projection),ms.toArray(this._blurPass.uniforms.viewInverseTranspose),this._blurPass.uniforms.blurSize=this.blurSize,this._blurPass.uniforms.depthRange=this.depthRange,this._blurPass.uniforms.direction=0,this._blurPass.uniforms.tDiffuse=a.texture,this._blurPass.render(e),e.renderPass.setRenderTarget(n?a:r),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.direction=1,this._blurPass.uniforms.tDiffuse=s.texture,this._blurPass.render(e),n&&(e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=a.texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=1,this._blendPass.uniforms.alphaWeight2=0,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1))),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,0)}}const fs=new a,ps=new a,ms=new a,gs={name:"ec_ssr",defines:{},uniforms:{colorTex:null,gBufferTexture1:null,gBufferTexture2:null,projection:new Float32Array(16),projectionInv:new Float32Array(16),viewInverseTranspose:new Float32Array(16),maxRayDistance:4,pixelStride:16,pixelStrideZCutoff:10,screenEdgeFadeStart:.9,eyeFadeStart:.4,eyeFadeEnd:.8,minGlossiness:.2,zThicknessThreshold:.1,jitterOffset:0,nearZ:0,viewportSize:[512,512],maxMipmapLevel:5},vertexShader:Ra,fragmentShader:"\n\t\t#define MAX_ITERATION 20;\n\t\t#define MAX_BINARY_SEARCH_ITERATION 5;\n\n\t\tvarying vec2 v_Uv;\n\n\t\tuniform sampler2D colorTex;\n\t\tuniform sampler2D gBufferTexture1;\n\t\tuniform sampler2D gBufferTexture2;\n\n\t\tuniform mat4 projection;\n\t\tuniform mat4 projectionInv;\n\t\tuniform mat4 viewInverseTranspose;\n\n\t\tuniform float maxRayDistance;\n\n\t\tuniform float pixelStride;\n\t\t// ray origin Z at this distance will have a pixel stride of 1.0\n\t\tuniform float pixelStrideZCutoff;\n\n\t\t// distance to screen edge that ray hits will start to fade (0.0 -> 1.0)\n\t\tuniform float screenEdgeFadeStart;\n\n\t\t// ray direction's Z that ray hits will start to fade (0.0 -> 1.0)\n\t\tuniform float eyeFadeStart;\n\t\t// ray direction's Z that ray hits will be cut (0.0 -> 1.0)\n\t\tuniform float eyeFadeEnd;\n\n\t\t// Object larger than minGlossiness will have ssr effect\n\t\tuniform float minGlossiness;\n\t\tuniform float zThicknessThreshold;\n\t\tuniform float jitterOffset;\n\n\t\tuniform float nearZ;\n\t\tuniform vec2 viewportSize;\n\n\t\tuniform float maxMipmapLevel;\n\n\t\tfloat fetchDepth(sampler2D depthTexture, vec2 uv) {\n\t\t\tvec4 depthTexel = texture2D(depthTexture, uv);\n\t\t\treturn depthTexel.r * 2.0 - 1.0;\n\t\t}\n\n\t\tfloat linearDepth(float depth) {\n\t\t\treturn projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n\t\t}\n\n\t\tbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel) {\n\t\t\t// Swap if bigger\n\t\t\tif (rayZFar > rayZNear) {\n\t\t\t\tfloat t = rayZFar; rayZFar = rayZNear; rayZNear = t;\n\t\t\t}\n\t\t\tfloat cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\n\t\t\t// float cameraBackZ = linearDepth(fetchDepth(backDepthTex, hitPixel));\n\t\t\t// Cross z\n\t\t\treturn rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\n\t\t}\n\n\t\t// Trace a ray in screenspace from rayOrigin (in camera space) pointing in rayDir (in camera space)\n\t\t//\n\t\t// With perspective correct interpolation\n\t\t//\n\t\t// Returns true if the ray hits a pixel in the depth buffer\n\t\t// and outputs the hitPixel (in UV space), the hitPoint (in camera space) and the number\n\t\t// of iterations it took to get there.\n\t\t//\n\t\t// Based on Morgan McGuire & Mike Mara's GLSL implementation:\n\t\t// http://casual-effects.blogspot.com/2014/08/screen-space-ray-tracing.html\n\t\tbool traceScreenSpaceRay(vec3 rayOrigin, vec3 rayDir, float jitter, out vec2 hitPixel, out vec3 hitPoint, out float iterationCount) {\n\t\t\t// Clip to the near plane\n\t\t\tfloat rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ) ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\n\n\t\t\tvec3 rayEnd = rayOrigin + rayDir * rayLength;\n\n\t\t\t// Project into homogeneous clip space\n\t\t\tvec4 H0 = projection * vec4(rayOrigin, 1.0);\n\t\t\tvec4 H1 = projection * vec4(rayEnd, 1.0);\n\n\t\t\tfloat k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\n\n\t\t\t// The interpolated homogeneous version of the camera space points\n\t\t\tvec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\n\n\t\t\t// Screen space endpoints\n\t\t\t// PENDING viewportSize ?\n\t\t\tvec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\n\t\t\tvec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\n\n\t\t\t// If the line is degenerate, make it cover at least one pixel to avoid handling\n\t\t\t// zero-pixel extent as a special case later\n\t\t\tP1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\n\t\t\tvec2 delta = P1 - P0;\n\n\t\t\t// Permute so that the primary iteration is in x to collapse\n\t\t\t// all quadrant-specific DDA case later\n\t\t\tbool permute = false;\n\t\t\tif (abs(delta.x) < abs(delta.y)) {\n\t\t\t\t// More vertical line\n\t\t\t\tpermute = true;\n\t\t\t\tdelta = delta.yx;\n\t\t\t\tP0 = P0.yx;\n\t\t\t\tP1 = P1.yx;\n\t\t\t}\n\t\t\tfloat stepDir = sign(delta.x);\n\t\t\tfloat invdx = stepDir / delta.x;\n\n\t\t\t// Track the derivatives of Q and K\n\t\t\tvec3 dQ = (Q1 - Q0) * invdx;\n\t\t\tfloat dk = (k1 - k0) * invdx;\n\n\t\t\tvec2 dP = vec2(stepDir, delta.y * invdx);\n\n\t\t\t// Calculate pixel stride based on distance of ray origin from camera.\n\t\t\t// Since perspective means distant objects will be smaller in screen space\n\t\t\t// we can use this to have higher quality reflections for far away objects\n\t\t\t// while still using a large pixel stride for near objects (and increase performance)\n\t\t\t// this also helps mitigate artifacts on distant reflections when we use a large\n\t\t\t// pixel stride.\n\t\t\tfloat strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\n\t\t\tfloat pixStride = 1.0 + strideScaler * pixelStride;\n\n\t\t\t// Scale derivatives by the desired pixel stride and the offset the starting values by the jitter fraction\n\t\t\tdP *= pixStride; dQ *= pixStride; dk *= pixStride;\n\n\t\t\t// Track ray step and derivatives in a vec4 to parallelize\n\t\t\tvec4 pqk = vec4(P0, Q0.z, k0);\n\t\t\tvec4 dPQK = vec4(dP, dQ.z, dk);\n\n\t\t\tpqk += dPQK * jitter;\n\t\t\tfloat rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n\t\t\tfloat rayZNear;\n\n\t\t\tbool intersect = false;\n\n\t\t\tvec2 texelSize = 1.0 / viewportSize;\n\n\t\t\titerationCount = 0.0;\n\n\t\t\tfor (int i = 0; i < 20; i++) {\n\t\t\t\tpqk += dPQK;\n\n\t\t\t\trayZNear = rayZFar;\n\t\t\t\trayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n\n\t\t\t\thitPixel = permute ? pqk.yx : pqk.xy;\n\t\t\t\thitPixel *= texelSize;\n\n\t\t\t\tintersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\n\n\t\t\t\titerationCount += 1.0;\n\n\t\t\t\t// PENDING Right on all platforms?\n\t\t\t\tif (intersect) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Binary search refinement\n\t\t\t// FIXME If intersect in first iteration binary search may easily lead to the pixel of reflect object it self\n\t\t\tif (pixStride > 1.0 && intersect && iterationCount > 1.0) {\n\t\t\t\t// Roll back\n\t\t\t\tpqk -= dPQK;\n\t\t\t\tdPQK /= pixStride;\n\n\t\t\t\tfloat originalStride = pixStride * 0.5;\n\t\t\t\tfloat stride = originalStride;\n\n\t\t\t\trayZNear = pqk.z / pqk.w;\n\t\t\t\trayZFar = rayZNear;\n\n\t\t\t\tfor (int j = 0; j < 5; j++) {\n\t\t\t\t\tpqk += dPQK * stride;\n\t\t\t\t\trayZNear = rayZFar;\n\t\t\t\t\trayZFar = (dPQK.z * -0.5 + pqk.z) / (dPQK.w * -0.5 + pqk.w);\n\t\t\t\t\thitPixel = permute ? pqk.yx : pqk.xy;\n\t\t\t\t\thitPixel *= texelSize;\n\n\t\t\t\t\toriginalStride *= 0.5;\n\t\t\t\t\tstride = rayIntersectDepth(rayZNear, rayZFar, hitPixel) ? -originalStride : originalStride;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tQ0.xy += dQ.xy * iterationCount;\n\t\t\tQ0.z = pqk.z;\n\t\t\thitPoint = Q0 / pqk.w;\n\n\t\t\treturn intersect;\n\t\t}\n\n\t\tfloat calculateAlpha(float iterationCount, float reflectivity, vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir) {\n\t\t\tfloat alpha = clamp(reflectivity, 0.0, 1.0);\n\t\t\t// Fade ray hits that approach the maximum iterations\n\t\t\talpha *= 1.0 - (iterationCount / float(20));\n\t\t\t// Fade ray hits that approach the screen edge\n\t\t\tvec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\n\t\t\tfloat maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\n\t\t\talpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\n\n\t\t\t// Fade ray hits base on how much they face the camera\n\t\t\tfloat _eyeFadeStart = eyeFadeStart;\n\t\t\tfloat _eyeFadeEnd = eyeFadeEnd;\n\t\t\tif (_eyeFadeStart > _eyeFadeEnd) {\n\t\t\t\tfloat tmp = _eyeFadeEnd;\n\t\t\t\t_eyeFadeEnd = _eyeFadeStart;\n\t\t\t\t_eyeFadeStart = tmp;\n\t\t\t}\n\n\t\t\tfloat eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\n\t\t\talpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\n\n\t\t\t// Fade ray hits based on distance from ray origin\n\t\t\talpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\n\n\t\t\treturn alpha;\n\t\t}\n\n\t\tvoid main() {\n\t\t\tvec4 normalAndGloss = texture2D(gBufferTexture1, v_Uv);\n\n\t\t\t// Is empty\n\t\t\tif (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat g = normalAndGloss.a;\n\t\t\tif (g <= minGlossiness) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\n\n\t\t\tvec3 N = normalAndGloss.rgb * 2.0 - 1.0;\n\t\t\tN = normalize((viewInverseTranspose * vec4(N, 0.0)).xyz);\n\n\t\t\t// Position in view\n\t\t\tvec4 projectedPos = vec4(v_Uv * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Uv), 1.0);\n\t\t\tvec4 pos = projectionInv * projectedPos;\n\t\t\tvec3 rayOrigin = pos.xyz / pos.w;\n\n\t\t\tvec3 rayDir = normalize(reflect(normalize(rayOrigin), N));\n\t\t\tvec2 hitPixel;\n\t\t\tvec3 hitPoint;\n\t\t\tfloat iterationCount;\n\n\t\t\t// Get jitter\n\t\t\tvec2 uv2 = v_Uv * viewportSize;\n\t\t\tfloat jitter = fract((uv2.x + uv2.y) * 0.25);\n\n\t\t\tbool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\n\n\t\t\tfloat dist = distance(rayOrigin, hitPoint);\n\n\t\t\tfloat alpha = calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir) * float(intersect);\n\n\t\t\tvec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\n\t\t\thitNormal = normalize((viewInverseTranspose * vec4(hitNormal, 0.0)).xyz);\n\n\t\t\t// Ignore the pixel not face the ray\n\t\t\t// TODO fadeout ?\n\t\t\t// PENDING Can be configured?\n\t\t\tif (dot(hitNormal, rayDir) >= 0.0) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\t// vec4 color = decodeHDR(texture2DLodEXT(colorTex, hitPixel, clamp(dist / maxRayDistance, 0.0, 1.0) * maxMipmapLevel));\n\n\t\t\tif (!intersect) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tvec4 color = texture2D(colorTex, hitPixel);\n\t\t\tgl_FragColor = vec4(color.rgb * alpha, color.a);\n\n\t\t\t// gl_FragColor = vec4(vec3(iterationCount / 2.0), 1.0);\n\n\t\t}\n    "};class _s extends Ia{constructor(){super(),this.color=new Pe(0,0,0),this.offset=1,this._vignettingPass=new wn(vs),this._vignettingPass.material.premultipliedAlpha=!0}render(e,t,n,r,i){const a=this._vignettingPass;a.uniforms.tDiffuse=n.texture,this.color.toArray(a.uniforms.vignettingColor),a.uniforms.vignettingOffset=this.offset,e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),i&&(a.material.transparent=t._tempClearColor[3]<1||!t.clearColor,a.renderStates.camera.rect.fromArray(t._tempViewport)),a.render(e),i&&(a.material.transparent=!1,a.renderStates.camera.rect.set(0,0,1,1))}}const vs={name:"ec_vignetting_blend",defines:{},uniforms:{tDiffuse:null,vignettingColor:[0,0,0],vignettingOffset:1},vertexShader:Ra,fragmentShader:"\n\t\tuniform vec3 vignettingColor;\n\t\tuniform float vignettingOffset;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            vec4 color = texture2D(tDiffuse, v_Uv);\n            vec2 uv = (v_Uv - vec2(0.5)) * vec2(vignettingOffset);\n\t\t\tcolor.rgb = mix(color.rgb, vignettingColor, clamp(dot(uv, uv), 0.0, 1.0));\n\t\t\tgl_FragColor = color;\n        }\n    "};class bs extends Ia{constructor(){super(),this.offset=1,this._hBlurPass=new wn(ja),this._vBlurPass=new wn(Va),this._blendPass=new wn(xs),this._blendPass.material.premultipliedAlpha=!0}resize(e,t){this._hBlurPass.uniforms.h=4/e,this._vBlurPass.uniforms.v=4/t}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(1),s=t._renderTargetCache.allocate(1),o=this._blendPass;e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._hBlurPass.uniforms.tDiffuse=n.texture,this._hBlurPass.render(e),e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._vBlurPass.uniforms.tDiffuse=a.texture,this._vBlurPass.render(e),o.uniforms.tDiffuse=n.texture,o.uniforms.blurOffset=this.offset,o.uniforms.blurTexture=s.texture,e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),i&&(o.material.transparent=t._tempClearColor[3]<1||!t.clearColor,o.renderStates.camera.rect.fromArray(t._tempViewport)),o.render(e),i&&(o.material.transparent=!1,o.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,1),t._renderTargetCache.release(s,1)}}const xs={name:"ec_blur_blend",defines:{},uniforms:{tDiffuse:null,blurOffset:1,blurTexture:null},vertexShader:Ra,fragmentShader:"\n\t\tuniform float blurOffset;\n\n        uniform sampler2D blurTexture;\n\n        uniform sampler2D tDiffuse;\n        varying vec2 v_Uv;\n\n        void main() {\n            vec4 color = texture2D(tDiffuse, v_Uv);\n            vec2 uv = (v_Uv - vec2(0.5)) * vec2(blurOffset);\n\n            vec3 color2 = texture2D(blurTexture, v_Uv).rgb;\n\n\t\t\tcolor.rgb = mix(color.rgb, color2, clamp(dot(uv, uv), 0.0, 1.0));\n\t\t\tgl_FragColor = color;\n        }\n    "};class ys extends Ia{constructor(){super(),this.bufferDependencies=[{key:"MarkBuffer"}],this.color=new Pe(1,1,1),this.strength=1.5,this.stride=5,this._channelPass=new wn($a),this._blurXPass=new wn(ws),this._blurYPass=new wn(As),this._blendPass=new wn(Es),this._blendPass.material.premultipliedAlpha=!0}resize(e,t){this._blurXPass.uniforms.texSize[0]=e,this._blurXPass.uniforms.texSize[1]=t,this._blurYPass.uniforms.texSize[0]=e,this._blurYPass.uniforms.texSize[1]=t}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(0),o=t._renderTargetCache.allocate(0),l=t.getBuffer("MarkBuffer"),u=l.attachManager.getAttachIndex(this.name),c=l.attachManager.getChannelIndex(this.name);e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._channelPass.uniforms.tDiffuse=l.output(u)._attachments[2e3];for(let e=0;e<4;e++)this._channelPass.uniforms.channelMask[e]=e===c?1:0;this._channelPass.render(e),e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurXPass.uniforms.tDiffuse=a.texture,this._blurXPass.uniforms.stride=this.stride,this._blurXPass.render(e),e.renderPass.setRenderTarget(o),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurYPass.uniforms.tDiffuse=a.texture,this._blurYPass.uniforms.blurX=s.texture,this._blurYPass.uniforms.stride=this.stride,this._blurYPass.uniforms.glowness=this.strength,this.color.toArray(this._blurYPass.uniforms.glowColor),this._blurYPass.render(e),e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=o.texture,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,0),t._renderTargetCache.release(o,0)}}const ws={name:"ec_innerglow_x",defines:{},uniforms:{tDiffuse:null,texSize:[1,1],stride:10},vertexShader:Ra,fragmentShader:"\n\t\t#define WT9_0 1.0\n\t\t#define WT9_1 0.8\n\t\t#define WT9_2 0.6\n\t\t#define WT9_3 0.4\n\t\t#define WT9_4 0.2\n\t\t#define WT9_NORMALIZE 5.2\n\n\t\tvarying vec2 v_Uv;\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 texSize;\n\t\tuniform float stride;\n\n\t\tvoid main() {\n\t\t\tfloat texelIncrement = 0.25 * stride / texSize.x;\n\n\t\t\tfloat colour = texture2D(tDiffuse,vec2(v_Uv.x + texelIncrement, v_Uv.y)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 4.0 * texelIncrement, v_Uv.y)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 1.0 * texelIncrement, v_Uv.y)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 4.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\ttexelIncrement = 0.5 * stride / texSize.x;\n\t\t\tcolour += texture2D(tDiffuse,vec2(v_Uv.x + texelIncrement, v_Uv.y)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 4.0 * texelIncrement, v_Uv.y)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 1.0 * texelIncrement, v_Uv.y)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 4.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\ttexelIncrement = 0.75 * stride / texSize.x;\n\t\t\tcolour += texture2D(tDiffuse,vec2(v_Uv.x + texelIncrement, v_Uv.y)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 4.0 * texelIncrement, v_Uv.y)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 1.0 * texelIncrement, v_Uv.y)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 4.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\ttexelIncrement = stride / texSize.x;\n\t\t\tcolour += texture2D(tDiffuse,vec2(v_Uv.x + texelIncrement, v_Uv.y)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x + 4.0 * texelIncrement, v_Uv.y)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 1.0 * texelIncrement, v_Uv.y)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 2.0 * texelIncrement, v_Uv.y)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 3.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(tDiffuse, vec2(v_Uv.x - 4.0 * texelIncrement, v_Uv.y)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\tfloat col = 1.0 - colour * 0.25;\n\n\t\t\tgl_FragColor = vec4(col,col,col,col);\n\t\t}\n    "},As={name:"ec_innerglow_y",defines:{},uniforms:{tDiffuse:null,blurX:null,texSize:[1,1],stride:10,glowness:2,glowColor:[1,0,0]},vertexShader:Ra,fragmentShader:"\n\t\t#define WT9_0 1.0\n\t\t#define WT9_1 0.8\n\t\t#define WT9_2 0.6\n\t\t#define WT9_3 0.4\n\t\t#define WT9_4 0.2\n\t\t#define WT9_NORMALIZE 5.2\n\n\t\tvarying vec2 v_Uv;\n\t\tuniform vec2 texSize;\n\t\tuniform float stride;\n\t\tuniform float glowness;\n\t\tuniform vec3 glowColor;\n\t\tuniform sampler2D blurX;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvoid main() {\n\t\t\tfloat texelIncrement = 0.25 * stride / texSize.y;\n\n\t\t\tfloat colour = texture2D(blurX, vec2(v_Uv.x , v_Uv.y + texelIncrement)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y + 2.0 * texelIncrement)).x* (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 3.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 4.0 * texelIncrement)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y - 1.0 * texelIncrement)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 2.0 * texelIncrement)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 3.0 * texelIncrement)).x* (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y- 4.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\ttexelIncrement = 0.5 * stride / texSize.y;\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + texelIncrement)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y + 2.0 * texelIncrement)).x* (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 3.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 4.0 * texelIncrement)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y - 1.0 * texelIncrement)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 2.0 * texelIncrement)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 3.0 * texelIncrement)).x* (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y- 4.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\ttexelIncrement = 0.75 * stride / texSize.y;\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + texelIncrement)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y + 2.0 * texelIncrement)).x* (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 3.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 4.0 * texelIncrement)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y - 1.0 * texelIncrement)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 2.0 * texelIncrement)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 3.0 * texelIncrement)).x* (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y- 4.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\ttexelIncrement = stride / texSize.y;\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + texelIncrement)).x * (0.8 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y + 2.0 * texelIncrement)).x* (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 3.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y + 4.0 * texelIncrement)).x * (WT9_4 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y)).x * (WT9_0 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y - 1.0 * texelIncrement)).x * (WT9_1 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 2.0 * texelIncrement)).x * (WT9_2 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x, v_Uv.y - 3.0 * texelIncrement)).x* (WT9_3 / WT9_NORMALIZE);\n\t\t\tcolour += texture2D(blurX, vec2(v_Uv.x , v_Uv.y- 4.0 * texelIncrement)).x * (WT9_3 / WT9_NORMALIZE);\n\n\t\t\tvec3 glo = (0.25 * glowness * colour) * glowColor;\n\t\t\tvec4 maskTexel = texture2D(tDiffuse, v_Uv);\n\t\t\t\n\t\t\tgl_FragColor = vec4(maskTexel.x * glo, 1.);\n\t\t}\n    "},Es={name:"ec_tint",defines:{},uniforms:{texture1:null,texture2:null},vertexShader:Ra,fragmentShader:"\n        uniform sampler2D texture1;\n        uniform sampler2D texture2;\n        varying vec2 v_Uv;\n        void main() {\n            vec4 texel1 = texture2D(texture1, v_Uv);\n            vec4 texel2 = texture2D(texture2, v_Uv);\n\n            float v = max(max(texel2.x, texel2.y), texel2.z);\n\n            vec4 color = mix(texel1, vec4(texel2.rgb, texel1.a), v);\n            gl_FragColor = color;\n        }\n    "};class Ss extends Ia{constructor(){super(),this.bufferDependencies=[{key:"SceneBuffer"},{key:"MarkBuffer",mask:1},{key:"ColorMarkBuffer",mask:2}],this.strength=1,this.radius=.4,this.threshold=.01,this.smoothWidth=.1,this._maskPass=new wn(za),this._highlightPass=new wn(Ba),this._blurPass=new wn(Ga),this._compositePass=new wn(Ms),this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0,this._compositePass.uniforms.bloomFactors=new Float32Array([1,.8,.6,.4,.2]),this._compositePass.uniforms.bloomTintColors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._tempRTList=[]}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(1),o=t.getBuffer("SceneBuffer"),l=t.getBuffer("MarkBuffer"),u=t.getBuffer("ColorMarkBuffer"),c=l.attachManager.has(this.name),h=u.attachManager.getAttachIndex(this.name),d=u.output(h)._attachments[2e3];if(c){const t=l.attachManager.getAttachIndex(this.name),n=l.attachManager.getChannelIndex(this.name);e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._maskPass.uniforms.colorTexture=o.output()._attachments[2e3],this._maskPass.uniforms.maskTexture=l.output(t)._attachments[2e3],this._maskPass.uniforms.additiveTexture=d;for(let e=0;e<4;e++)this._maskPass.uniforms.channel[e]=e===n?1:0;this._maskPass.render(e)}e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._highlightPass.uniforms.tDiffuse=c?s.texture:d,this._highlightPass.uniforms.threshold=this.threshold,this._highlightPass.uniforms.smoothWidth=this.smoothWidth,this._highlightPass.render(e);let f=a;for(let n=0;n<Ts.length;n++){const r=t._renderTargetCache.allocate(n+1);e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.tDiffuse=f.texture,this._blurPass.uniforms.texSize[0]=f.width,this._blurPass.uniforms.texSize[1]=f.height,this._blurPass.uniforms.direction[0]=1,this._blurPass.uniforms.direction[1]=0,this._blurPass.uniforms.kernelRadius=Ts[n],this._blurPass.render(e);const i=t._renderTargetCache.allocate(n+1);e.renderPass.setRenderTarget(i),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blurPass.uniforms.tDiffuse=r.texture,this._blurPass.uniforms.direction[0]=0,this._blurPass.uniforms.direction[1]=1,this._blurPass.render(e),t._renderTargetCache.release(r,n+1),f=i,this._tempRTList[n]=i}e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._compositePass.uniforms.blurTexture1=this._tempRTList[0].texture,this._compositePass.uniforms.blurTexture2=this._tempRTList[1].texture,this._compositePass.uniforms.blurTexture3=this._tempRTList[2].texture,this._compositePass.uniforms.blurTexture4=this._tempRTList[3].texture,this._compositePass.uniforms.blurTexture5=this._tempRTList[4].texture,this._compositePass.uniforms.bloomRadius=this.radius,this._compositePass.uniforms.bloomStrength=this.strength,this._compositePass.render(e),e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=s.texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=1,this._blendPass.uniforms.alphaWeight2=0,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,1),this._tempRTList.forEach(((e,n)=>t._renderTargetCache.release(e,n+1)))}}const Ts=[3,5,7,9,11],Ms={name:"ec_bloom_composite",defines:{NUM_MIPS:5},uniforms:{blurTexture1:null,blurTexture2:null,blurTexture3:null,blurTexture4:null,blurTexture5:null,bloomStrength:1,bloomRadius:0,bloomFactors:null,bloomTintColors:null},vertexShader:Ra,fragmentShader:"\n\t\tuniform sampler2D blurTexture1;\n\t\tuniform sampler2D blurTexture2;\n\t\tuniform sampler2D blurTexture3;\n\t\tuniform sampler2D blurTexture4;\n\t\tuniform sampler2D blurTexture5;\n\t\tuniform float bloomStrength;\n\t\tuniform float bloomRadius;\n\t\tuniform float bloomFactors[NUM_MIPS];\n\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n        varying vec2 v_Uv;\n\n        float lerpBloomFactor(const in float factor) {\n            float mirrorFactor = 1.2 - factor;\n            return mix(factor, mirrorFactor, bloomRadius);\n        }\n\n        void main() {\n            gl_FragColor = bloomStrength * (\n\t\t\t\tlerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, v_Uv) +\n\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, v_Uv) +\n\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, v_Uv) +\n\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, v_Uv) +\n\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, v_Uv)\n\t\t\t);\n        }\n    "};class Ps extends Ia{constructor(){super(),this.bufferDependencies=[{key:"SceneBuffer"},{key:"MarkBuffer",mask:1},{key:"ColorMarkBuffer",mask:2}],this.strength=.5,this.blendRate=.4,this.blurSize=1,this._maskPass=new wn(za),this._downSamplerPass=new wn(Cs),this._hBlurPass=new wn(ja),this._vBlurPass=new wn(Va),this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0,this._tempRTList=[],this._tempRTList2=[]}render(e,t,n,r,i){for(let e=0;e<6;e++)this._tempRTList[e]=t._renderTargetCache.allocate(e),this._tempRTList2[e]=t._renderTargetCache.allocate(e);const a=t.getBuffer("SceneBuffer"),s=t.getBuffer("MarkBuffer"),o=t.getBuffer("ColorMarkBuffer"),l=s.attachManager.has(this.name),u=o.attachManager.getAttachIndex(this.name),c=o.output(u)._attachments[2e3];if(l){const t=s.attachManager.getAttachIndex(this.name),n=s.attachManager.getChannelIndex(this.name);e.renderPass.setRenderTarget(this._tempRTList[0]),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._maskPass.uniforms.colorTexture=a.output()._attachments[2e3],this._maskPass.uniforms.maskTexture=s.output(t)._attachments[2e3],this._maskPass.uniforms.additiveTexture=c;for(let e=0;e<4;e++)this._maskPass.uniforms.channel[e]=e===n?1:0;this._maskPass.render(e)}e.renderPass.setRenderTarget(this._tempRTList[1]),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._downSamplerPass.uniforms.tDiffuse=l?this._tempRTList[0].texture:c,this._downSamplerPass.uniforms.texSize[0]=this._tempRTList[0].width,this._downSamplerPass.uniforms.texSize[1]=this._tempRTList[0].height,this._downSamplerPass.uniforms.bright=4,this._downSamplerPass.render(e);for(let t=2;t<6;t++)e.renderPass.setRenderTarget(this._tempRTList[t]),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._downSamplerPass.uniforms.tDiffuse=this._tempRTList[t-1].texture,this._downSamplerPass.uniforms.texSize[0]=this._tempRTList[t-1].width,this._downSamplerPass.uniforms.texSize[1]=this._tempRTList[t-1].height,this._downSamplerPass.uniforms.bright=1,this._downSamplerPass.render(e);for(let t=0;t<5;t++)e.renderPass.setRenderTarget(this._tempRTList[t]),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._hBlurPass.uniforms.tDiffuse=this._tempRTList[t+1].texture,this._hBlurPass.uniforms.h=2*this.blurSize/this._tempRTList[t].width,this._hBlurPass.render(e);for(let t=0;t<5;t++)e.renderPass.setRenderTarget(this._tempRTList2[t]),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._vBlurPass.uniforms.tDiffuse=this._tempRTList[t].texture,this._vBlurPass.uniforms.v=2*this.blurSize/this._tempRTList[t].height,this._vBlurPass.render(e);for(let t=3;t>=0;t--)e.renderPass.setRenderTarget(this._tempRTList[t]),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=this._tempRTList2[t].texture,this._blendPass.uniforms.texture2=t<3?this._tempRTList[t+1].texture:this._tempRTList2[t+1].texture,this._blendPass.uniforms.colorWeight1=(1-this.blendRate)*this.strength,this._blendPass.uniforms.alphaWeight1=(1-this.blendRate)*this.strength,this._blendPass.uniforms.colorWeight2=this.blendRate*this.strength,this._blendPass.uniforms.alphaWeight2=this.blendRate*this.strength,this._blendPass.render(e);e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=this._tempRTList[0].texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=1,this._blendPass.uniforms.alphaWeight2=0,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),this._tempRTList.forEach(((e,n)=>t._renderTargetCache.release(e,n))),this._tempRTList2.forEach(((e,n)=>t._renderTargetCache.release(e,n)))}}const Cs={name:"ec_sg_downsample",defines:{},uniforms:{tDiffuse:null,texSize:[512,512],bright:1},vertexShader:Ra,fragmentShader:"\n\t\tvarying vec2 v_Uv;\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 texSize;\n\t\n\t\tuniform float bright;\n\t\t\n\t\tvoid main() {\n    \t\tvec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / texSize.xyxy;\n\t\t\tgl_FragColor = (texture2D(tDiffuse, v_Uv + d.xy) +\n\t\t\t\ttexture2D(tDiffuse, v_Uv + d.zy) +\n\t\t\t\ttexture2D(tDiffuse, v_Uv + d.xw) +\n\t\t\t\ttexture2D(tDiffuse, v_Uv + d.zw)) * bright * 0.25;\n\t\t}\n\t"};class Fs extends Ia{constructor(){super(),this.bufferDependencies=[{key:"SceneBuffer"},{key:"MarkBuffer",mask:1},{key:"ColorMarkBuffer",mask:2}],this.center=new Se(.5,.5),this.direction=new Se(0,1),this.strength=1,this._maskPass=new wn(za),this._tailingPass=new wn(Ls),this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(0),o=t.getBuffer("SceneBuffer"),l=t.getBuffer("MarkBuffer"),u=t.getBuffer("ColorMarkBuffer"),c=l.attachManager.has(this.name),h=u.attachManager.getAttachIndex(this.name),d=u.output(h)._attachments[2e3];if(c){const t=l.attachManager.getAttachIndex(this.name),n=l.attachManager.getChannelIndex(this.name);e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._maskPass.uniforms.colorTexture=o.output()._attachments[2e3],this._maskPass.uniforms.maskTexture=l.output(t)._attachments[2e3],this._maskPass.uniforms.additiveTexture=d;for(let e=0;e<4;e++)this._maskPass.uniforms.channel[e]=e===n?1:0;this._maskPass.render(e)}e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._tailingPass.uniforms.blurMap=c?a.texture:d,this._tailingPass.uniforms.center[0]=this.center.x,this._tailingPass.uniforms.center[1]=this.center.y,this._tailingPass.uniforms.direction[0]=this.direction.x,this._tailingPass.uniforms.direction[1]=this.direction.y,this._tailingPass.uniforms.intensity=10*this.strength,this._tailingPass.render(e),e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=s.texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=1,this._blendPass.uniforms.alphaWeight2=0,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,0)}}const Ls={name:"ec_tailing",defines:{},uniforms:{blurMap:null,blurStart:1,blurWidth:-.1,direction:[0,1],intensity:10,glowGamma:.8,center:[.5,.5]},vertexShader:Ra,fragmentShader:"\n\t\tvarying vec2 v_Uv;\n\t\tuniform sampler2D blurMap;\n\t\tuniform float blurStart;\n\t\tuniform float blurWidth;\n\t\tuniform vec2 direction;\n\t\tuniform float intensity;\n\t\tuniform float glowGamma;\n\t\tuniform vec2 center;\n\n\t\tvoid main() {\n\t\t\tvec2 texCoord = v_Uv;\n\t\t\tvec4 blurred = texture2D(blurMap, texCoord);\n\t\t\tvec2 resCoord = vec2(0.0);\n\n\t\t\tfor(float i = 0.0; i < 31.0; i++) {\n\t\t\t\tfloat scale = blurStart + blurWidth * ((31.0 - i) / (31.0 - 1.0));\n\t\t\t\tvec2 tmp = texCoord * scale;\n\t\t\t\tresCoord = mix(texCoord, tmp, direction);\n\t\t\t\tvec4 tmpc = texture2D(blurMap, resCoord) * (i / 31.0) * (i / 31.0);\n\t\t\t\tblurred += tmpc / 31.0;\n\t\t\t}\n\n\t\t\tblurred.r = pow(blurred.r, glowGamma);\n\t\t\tblurred.g = pow(blurred.g, glowGamma);\n\t\t\tblurred.b = pow(blurred.b, glowGamma);\n\t\t\tblurred.rgb *= intensity;\n\t\t\tblurred.rgb = clamp(blurred.rgb, 0.0, 1.0);\n\n\t\t\tvec4 origTex = texture2D(blurMap, texCoord);\n\t\t\tvec4 blurResult = origTex + blurred;\n\t\t\t// blurResult *= 2;\n\n\t\t\tvec2 dir = texCoord - center;\n\t\t\tfloat dist = sqrt(dir.x * dir.x + dir.y * dir.y);\n\t\t\tfloat t = dist * 1.0;\n\t\t\tt = clamp(t, 0.0, 1.0); // We need 0 <= t <= 1\n\n\t\t\tgl_FragColor = blurResult * t;\n\t\t}\n    "};class Ns extends Ia{constructor(){super(),this.bufferDependencies=[{key:"SceneBuffer"},{key:"MarkBuffer",mask:1},{key:"ColorMarkBuffer",mask:2}],this.center=new Se(.5,.5),this.strength=1,this._maskPass=new wn(za),this._radialTailingPass=new wn(Is),this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(0),o=t.getBuffer("SceneBuffer"),l=t.getBuffer("MarkBuffer"),u=t.getBuffer("ColorMarkBuffer"),c=l.attachManager.has(this.name),h=u.attachManager.getAttachIndex(this.name),d=u.output(h)._attachments[2e3];if(c){const t=l.attachManager.getAttachIndex(this.name),n=l.attachManager.getChannelIndex(this.name);e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._maskPass.uniforms.colorTexture=o.output()._attachments[2e3],this._maskPass.uniforms.maskTexture=l.output(t)._attachments[2e3],this._maskPass.uniforms.additiveTexture=d;for(let e=0;e<4;e++)this._maskPass.uniforms.channel[e]=e===n?1:0;this._maskPass.render(e)}e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._radialTailingPass.uniforms.blurMap=c?a.texture:d,this._radialTailingPass.uniforms.center[0]=this.center.x,this._radialTailingPass.uniforms.center[1]=this.center.y,this._radialTailingPass.uniforms.intensity=10*this.strength,this._radialTailingPass.render(e),e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=s.texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=1,this._blendPass.uniforms.alphaWeight2=0,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,0)}}const Is={name:"ec_radial_tailing",defines:{},uniforms:{blurMap:null,blurStart:1,blurWidth:-.1,intensity:10,glowGamma:.8,center:[.5,.5]},vertexShader:Ra,fragmentShader:"\n\t\tvarying vec2 v_Uv;\n\t\tuniform sampler2D blurMap;\n\t\tuniform float blurStart;\n\t\tuniform float blurWidth;\n\t\tuniform float intensity;\n\t\tuniform float glowGamma;\n\t\tuniform vec2 center;\n\t\t\n\t\tvoid main() {\n\t\t\tvec2 texCoord = v_Uv;\n\t\t\tvec2 ctrPt = center;\n\t\t\tvec4 blurred = texture2D(blurMap, texCoord);\n\t\t\n\t\t\tfor(float i = 0.0; i < 31.0; i++) {\n\t\t\t\tfloat scale = blurStart + blurWidth * ((31.0 - i) / (31.0 - 1.0));\n\t\t\t\tvec2 tmp = (texCoord - ctrPt) * scale + ctrPt;\n\t\t\t\tvec4 tmpc = texture2D(blurMap, tmp) * (i / 31.0) * (i / 31.0);\n\t\t\n\t\t\t\tblurred += tmpc / 31.0;\n\t\t\t}\n\t\t\n\t\t\tblurred.r = pow(blurred.r, glowGamma);\n\t\t\tblurred.g = pow(blurred.g, glowGamma);\n\t\t\tblurred.b = pow(blurred.b, glowGamma);\n\t\t\tblurred.rgb *= intensity;\n\t\t\tblurred.rgb = clamp(blurred.rgb, 0.0, 1.0);\n\t\t\n\t\t\tvec4 origTex = texture2D(blurMap, texCoord);\n\t\t\tvec4 blurResult = origTex + blurred;\n\t\t\t// blurResult *= 2;\n\t\t\n\t\t\tvec2 dir = texCoord - ctrPt;\n\t\t\tfloat dist = sqrt(dir.x * dir.x + dir.y * dir.y);\n\t\t\tfloat t = dist * 1.0;\n\t\t\tt = clamp(t, 0.0, 1.0); // We need 0 <= t <= 1\n\t\t\n\t\t\tgl_FragColor = blurResult * t;\n\t\t}\n    "};class Rs extends Ia{constructor(){super(),this.bufferDependencies=[{key:"SceneBuffer"},{key:"MarkBuffer",mask:1},{key:"ColorMarkBuffer",mask:2}],this.center=new Se(.5,.5),this.strength=1,this._maskPass=new wn(za),this._ghostingPass=new wn(Ds),this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t._renderTargetCache.allocate(0),o=t.getBuffer("SceneBuffer"),l=t.getBuffer("MarkBuffer"),u=t.getBuffer("ColorMarkBuffer"),c=l.attachManager.has(this.name),h=u.attachManager.getAttachIndex(this.name),d=u.output(h)._attachments[2e3];if(c){const t=l.attachManager.getAttachIndex(this.name),n=l.attachManager.getChannelIndex(this.name);e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._maskPass.uniforms.colorTexture=o.output()._attachments[2e3],this._maskPass.uniforms.maskTexture=l.output(t)._attachments[2e3],this._maskPass.uniforms.additiveTexture=d;for(let e=0;e<4;e++)this._maskPass.uniforms.channel[e]=e===n?1:0;this._maskPass.render(e)}e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1),this._ghostingPass.uniforms.blurMap=c?a.texture:d,this._ghostingPass.uniforms.center[0]=this.center.x,this._ghostingPass.uniforms.center[1]=this.center.y,this._ghostingPass.uniforms.intensity=3*this.strength,this._ghostingPass.render(e),e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=s.texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=1,this._blendPass.uniforms.alphaWeight2=0,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,0),t._renderTargetCache.release(s,0)}}const Ds={name:"ec_ghosting",defines:{},uniforms:{blurMap:null,blurStart:1,blurWidth:-.1,intensity:3,glowGamma:.8,center:[.5,.5]},vertexShader:Ra,fragmentShader:"\n\t\tvarying vec2 v_Uv;\n\t\tuniform sampler2D blurMap;\n\t\tuniform float blurStart;\n\t\tuniform float blurWidth;\n\t\tuniform float intensity;\n\t\tuniform float glowGamma;\n\t\tuniform vec2 center;\n\t\t\n\t\tvoid main() {\n\t\t\tvec2 uv = v_Uv;\n\t\t\tvec2 ctrPt = center;\n\t\t\n\t\t\tfloat scale = blurStart + blurWidth * 1.0;\n\t\t\tvec2 tmp = (uv - ctrPt) * scale + ctrPt;\n\n\t\t\tvec4 blurred = texture2D(blurMap, tmp);\n\t\t\tblurred.rgb = pow(blurred.rgb, vec3(glowGamma));\n\t\t\tblurred.rgb *= intensity;\n\t\t\tblurred.rgb = clamp(blurred.rgb, 0.0, 1.0);\n\t\t\t\n\t\t\tvec2 dir = uv - ctrPt;\n\t\t\tfloat dist = sqrt(dir.x * dir.x + dir.y * dir.y);\n\t\t\n\t\t\tgl_FragColor = blurred * clamp(dist, 0.0, 1.0);\n\t\t}\n    "};class Us extends Na{constructor(e,t,n){super(e,t,n),this._rt=new _i(e,t),this._rt.texture.minFilter=z,this._rt.texture.magFilter=z,this._rt.texture.generateMipmaps=!1,n.floatColorBuffer?this._rt.texture.type=k:this._rt.texture.type=$;const r=new Rn;r.image={data:null,width:e,height:t},r.type=O,r.format=M,r.magFilter=z,r.minFilter=z,r.generateMipmaps=!1,r.flipY=!1,this._rt.attach(r,ie),this._renderOptions={getMaterial:Os(),ifRender:function(e){return!!e.geometry.getAttribute("a_Normal")}},this._renderStates=null,this.layers=[0]}setGeometryReplaceFunction(e){e?this._renderOptions.getGeometry=e:delete this._renderOptions.getGeometry}setMaterialReplaceFunction(e){this._renderOptions.getMaterial=e?Os(e):Os()}render(e,t,n,r){if(!this.needRender())return;e.renderPass.setRenderTarget(this._rt),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1);const i=this._renderOptions,a=n.getRenderStates(r),s=n.getRenderQueue(r);this._renderStates=a;const o=this.layers;for(let t=0,n=o.length;t<n;t++){const n=s.getLayer(o[t]);e.renderRenderableList(n.opaque,a,i),e.renderRenderableList(n.transparent,a,i)}}output(){return this._rt}getCurrentRenderStates(){return this._renderStates}resize(e,t){super.resize(e,t),this._rt.resize(e,t)}dispose(){super.dispose(),this._rt.dispose()}}function Os(e=zs){return function(t){const n=e(t);return n.diffuseMap=t.material.diffuseMap,n.uniforms.roughness=void 0!==t.material.roughness?t.material.roughness:.5,n.roughnessMap=t.material.roughnessMap,n.side=t.material.side,n}}const ks=new Map,$s=new WeakMap;function zs(e){let t=$s.get(e.material);if(!t){const n=!e.geometry.attributes.a_Normal||e.material.shading===S,r=!!e.material.diffuseMap,i=!!e.material.roughnessMap,a=e.object.isSkinnedMesh&&e.object.skeleton,s=!!e.object.morphTargetInfluences,o=!!e.object.morphTargetInfluences&&e.object.geometry.morphAttributes.normal,l=e.material.side;let u=0;a&&(u=e.object.skeleton.boneTexture?1024:e.object.skeleton.bones.length);const c=n+"_"+r+"_"+i+"_"+a+"_"+u+"_"+s+"_"+o+"_"+l;if(t=ks.get(c),!t){const d=new yn(Bs);d.shading=n?S:E,d.alphaTest=r?.999:0,d.side=l,t={refCount:0,material:d},ks.set(c,t)}function h(){e.material.removeEventListener("dispose",h),$s.delete(e.material),t.refCount--,t.refCount<=0&&ks.delete(c)}$s.set(e.material,t),t.refCount++,e.material.addEventListener("dispose",h)}return t.material}const Bs={name:"ec_gbuffer_ng",defines:{G_USE_ROUGHNESSMAP:!1},uniforms:{roughness:.5,roughnessMap:null},vertexShader:"\n        #include <common_vert>\n        #include <morphtarget_pars_vert>\n        #include <skinning_pars_vert>\n        #include <normal_pars_vert>\n        #include <uv_pars_vert>\n\t\t#include <logdepthbuf_pars_vert>\n        void main() {\n        \t#include <uv_vert>\n        \t#include <begin_vert>\n        \t#include <morphtarget_vert>\n        \t#include <morphnormal_vert>\n        \t#include <skinning_vert>\n        \t#include <skinnormal_vert>\n        \t#include <normal_vert>\n        \t#include <pvm_vert>\n\t\t\t#include <logdepthbuf_vert>\n        }\n    ",fragmentShader:"\n        #include <common_frag>\n        #include <diffuseMap_pars_frag>\n\n        #include <uv_pars_frag>\n\n        #include <packing>\n        #include <normal_pars_frag>\n\n        uniform float roughness;\n\n        #ifdef USE_ROUGHNESSMAP\n            uniform sampler2D roughnessMap;\n        #endif\n\n\t\t#include <logdepthbuf_pars_frag>\n\n        void main() {\n            #if defined(USE_DIFFUSE_MAP) && defined(ALPHATEST)\n                vec4 texelColor = texture2D(diffuseMap, v_Uv);\n                float alpha = texelColor.a * u_Opacity;\n                if(alpha < ALPHATEST) discard;\n            #endif\n\n\t\t\t#include <logdepthbuf_frag>\n\n            vec3 normal = normalize(v_Normal);\n\n\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\tnormal = normal * (float(gl_FrontFacing) * 2.0 - 1.0);\n\t\t\t#endif \n\n            float roughnessFactor = roughness;\n            #ifdef USE_ROUGHNESSMAP\n                roughnessFactor *= texture2D(roughnessMap, v_Uv).g;\n            #endif\n\n            vec4 packedNormalGlossiness;\n            packedNormalGlossiness.xyz = normal * 0.5 + 0.5;\n            packedNormalGlossiness.w = clamp(1. - roughnessFactor, 0., 1.);\n            \n            gl_FragColor = packedNormalGlossiness;\n        }\n    "};class Gs{constructor(e){this.keys=new Array,this.masks=new Array,this.attachChannelSize=e}allocate(e,t=15){return this.keys.push(e),this.masks.push(t),this.keys.length-1}getAttachIndex(e){const t=this.keys.indexOf(e);return Math.max(0,Math.floor(t/this.attachChannelSize))}getChannelIndex(e){const t=this.keys.indexOf(e);return Math.max(0,t%this.attachChannelSize)}has(e){return this.keys.indexOf(e)>-1}count(){return this.keys.length}attachCount(){return Math.ceil(this.keys.length/this.attachChannelSize)}getKey(e,t){return this.keys[e*this.attachChannelSize+t]}getMask(e,t){return this.masks[e*this.attachChannelSize+t]}getAttachInfo(e,t={count:0,keys:[],masks:[]}){t.count=0;for(let n=0;n<this.attachChannelSize;n++){const r=this.getKey(e,n),i=this.getMask(e,n);void 0!==r&&void 0!==i&&(t.keys[t.count]=r,t.masks[t.count]=i,t.count++)}return t}reset(){this.keys.length=0,this.masks.length=0}}class js extends Na{constructor(e,t,n){super(e,t,n),this._rts=[];for(let r=0;r<n.maxMarkAttachment;r++){const n=new _i(e,t);n.detach(ie),this._rts.push(n)}this._mrts=[];for(let r=0;r<n.maxMarkAttachment;r++){const r=new _i(e,t);r.attach(new gi(e,t,L,n.samplerNumber),ne),r.detach(ie),this._mrts.push(r)}this._state={attachIndex:0,attachInfo:{count:0,keys:[],masks:[]}};const r=new Gs(4);this._opacityRenderOptions={getMaterial:Vs(void 0,this._state,r,1),ifRender:Hs(this._state,1)},this._transparentRenderOptions={getMaterial:Vs(void 0,this._state,r,2),ifRender:Hs(this._state,2)},this.attachManager=r,this.layers=[0]}setGeometryReplaceFunction(e){e?(this._opacityRenderOptions.getGeometry=e,this._transparentRenderOptions.getGeometry=e):(delete this._opacityRenderOptions.getGeometry,delete this._transparentRenderOptions.getGeometry)}setMaterialReplaceFunction(e){e?(this._opacityRenderOptions.getMaterial=Vs(e,this._state,this.attachManager,1),this._transparentRenderOptions.getMaterial=Vs(e,this._state,this.attachManager,2)):(this._opacityRenderOptions.getMaterial=Vs(void 0,this._state,this.attachManager,1),this._transparentRenderOptions.getMaterial=Vs(void 0,this._state,this.attachManager,2))}render(e,t,n,r){if(!this.needRender())return;const i=this.attachManager.attachCount();i>this._rts.length&&console.error("XXMarkBuffer: attachCount<"+i+"> bigger then options.maxMarkAttachment<"+this._rts.length+">.");for(let a=0;a<i;a++){const i=this._rts[a],s=this._mrts[a];t.$useMSAA?(e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!1,!1)):(e.renderPass.setRenderTarget(i),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!1,!1));const o=n.getRenderStates(r),l=n.getRenderQueue(r);this._state.attachIndex=a,this.attachManager.getAttachInfo(a,this._state.attachInfo);let u=0,c=this._state.attachInfo.masks,h=this._state.attachInfo.count;for(let e=0;e<h;e++)u|=c[e];const d=this.layers;for(let t=0,n=d.length;t<n;t++){const n=l.getLayer(d[t]);1&u&&e.renderRenderableList(n.opaque,o,this._opacityRenderOptions),2&u&&e.renderRenderableList(n.transparent,o,this._transparentRenderOptions)}t.$useMSAA&&(e.renderPass.setRenderTarget(i),e.renderPass.blitRenderTarget(s,i,!0,!1,!1)),e.renderPass.updateRenderTargetMipmap(i)}}output(e=0){return this._rts[e]}resize(e,t){super.resize(e,t),this._rts.forEach((n=>n.resize(e,t))),this._mrts.forEach((n=>n.resize(e,t)))}dispose(){super.dispose(),this._rts.forEach((e=>e.dispose())),this._mrts.forEach((e=>e.dispose()))}}function Vs(e=Ws,t,n,r){return function(i){const a=e(i);a.side=A;for(let e=0;e<4;e++){const s=n.getKey(t.attachIndex,e),o=n.getMask(t.attachIndex,e);a.uniforms.mColor[e]=o&r&&i.object.effects[s]||0}return a}}function Hs(e,t){return function(n){if(!n.object.effects)return!1;let r=0;for(let t=0;t<e.attachInfo.count;t++){const i=e.attachInfo.keys[t];n.object.effects[i]&&(r|=e.attachInfo.masks[t])}return r&t}}const Xs=new Map;function Ws(e){const t=e.object.isSkinnedMesh&&e.object.skeleton,n=!!e.object.morphTargetInfluences,r=e.material.drawMode,i=t+"_"+n+"_"+r;let a;return Xs.has(i)?a=Xs.get(i):(a=new yn(qs),a.premultipliedAlpha=!0,a.transparent=!0,a.blending=_,a.drawMode=r,Xs.set(i,a)),a}const qs={name:"ec_mark",defines:{},uniforms:{mColor:[1,1,1,1]},vertexShader:"\n        #include <common_vert>\n        #include <morphtarget_pars_vert>\n        #include <skinning_pars_vert>\n        #include <uv_pars_vert>\n\t\t#include <logdepthbuf_pars_vert>\n        void main() {\n        \t#include <uv_vert>\n        \t#include <begin_vert>\n        \t#include <morphtarget_vert>\n        \t#include <skinning_vert>\n        \t#include <pvm_vert>\n\t\t\t#include <logdepthbuf_vert>\n        }\n    ",fragmentShader:"\n        #include <common_frag>\n        #include <diffuseMap_pars_frag>\n\n        #include <uv_pars_frag>\n\n\t\t#include <logdepthbuf_pars_frag>\n\n\t\tuniform vec4 mColor;\n\n        void main() {\n\t\t\t#include <logdepthbuf_frag>\n\t\t\t\n            #if defined(USE_DIFFUSE_MAP) && defined(ALPHATEST)\n                vec4 texelColor = texture2D(diffuseMap, v_Uv);\n                float alpha = texelColor.a * u_Opacity;\n                if(alpha < ALPHATEST) discard;\n            #endif\n\n            gl_FragColor = mColor;\n        }\n    "};class Ys extends js{constructor(e,t,n){super(e,t,n)}syncDepthAttachments(e,t){this._rts.forEach((e=>e.dispose())),this._mrts.forEach((e=>e.dispose())),Ha(e)?this._rts.forEach((t=>{t.attach(e,ie),t.detach(re)})):this._rts.forEach((t=>{t.attach(e,re),t.detach(ie)})),Ha(t)?this._mrts.forEach((e=>{e.attach(t,ie),e.detach(re)})):this._mrts.forEach((e=>{e.attach(t,re),e.detach(ie)})),this.needsUpdate=!0}}class Qs extends Na{constructor(e,t,n){super(e,t,n),this._rts=[];for(let r=0;r<n.maxColorAttachment;r++){const n=new _i(e,t);n.detach(ie),this._rts.push(n)}this._mrts=[];for(let r=0;r<n.maxColorAttachment;r++){const r=new _i(e,t);r.attach(new gi(e,t,L,n.samplerNumber),ne),r.detach(ie),this._mrts.push(r)}const r={key:null};this._state=r;const i=new Gs(1);this._renderOptions={getMaterial:Zs(void 0,r),ifRender:function(e){return!!e.object.effects&&!!e.object.effects[r.key]}},this.attachManager=i,this.layers=[0]}setGeometryReplaceFunction(e){e?this._renderOptions.getGeometry=e:delete this._renderOptions.getGeometry}setMaterialReplaceFunction(e){this._renderOptions.getMaterial=Zs(e||void 0,this._state)}syncDepthAttachments(e,t){this._rts.forEach((e=>e.dispose())),this._mrts.forEach((e=>e.dispose())),Ha(e)?this._rts.forEach((t=>{t.attach(e,ie),t.detach(re)})):this._rts.forEach((t=>{t.attach(e,re),t.detach(ie)})),Ha(t)?this._mrts.forEach((e=>{e.attach(t,ie),e.detach(re)})):this._mrts.forEach((e=>{e.attach(t,re),e.detach(ie)})),this.needsUpdate=!0}render(e,t,n,r){if(!this.needRender())return;const i=this.attachManager.attachCount();i>this._rts.length&&console.error("ColorMarkBuffer: attachCount<"+i+"> bigger then options.maxColorAttachment<"+this._rts.length+">.");for(let a=0;a<i;a++){const i=this._rts[a],s=this._mrts[a];t.$useMSAA?(e.renderPass.setRenderTarget(s),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!1,!1)):(e.renderPass.setRenderTarget(i),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!1,!1));const o=this._renderOptions,l=this.attachManager,u=n.getRenderStates(r),c=n.getRenderQueue(r);this._state.key=l.getKey(a,0);const h=l.getMask(a,0),d=this.layers;for(let t=0,n=d.length;t<n;t++){const n=c.getLayer(d[t]);1&h&&e.renderRenderableList(n.opaque,u,o),2&h&&e.renderRenderableList(n.transparent,u,o)}t.$useMSAA&&(e.renderPass.setRenderTarget(i),e.renderPass.blitRenderTarget(s,i,!0,!1,!1)),e.renderPass.updateRenderTargetMipmap(i)}}output(e=0){return this._rts[e]}resize(e,t){super.resize(e,t),this._rts.forEach((n=>n.resize(e,t))),this._mrts.forEach((n=>n.resize(e,t)))}dispose(){super.dispose(),this._rts.forEach((e=>e.dispose())),this._mrts.forEach((e=>e.dispose()))}}function Zs(e=Js,t){return function(n){const r=e(n);return r.side=A,r.uniforms.strength=n.object.effects[t.key]||0,r}}const Ks=new Map;function Js(e){const t=e.object.isSkinnedMesh&&e.object.skeleton,n=!!e.object.morphTargetInfluences,r=e.material.drawMode,i=t+"_"+n+"_"+r+!!e.material.diffuseMap;let a;return Ks.has(i)?a=Ks.get(i):(a=new yn(eo),a.premultipliedAlpha=!1,a.drawMode=r,Ks.set(i,a)),a.transparent=e.material.transparent,a.blending=e.material.blending,a.opacity=e.material.opacity,a.diffuse.copy(e.material.diffuse),a.diffuseMap=e.material.diffuseMap,a}const eo={name:"ec_color",defines:{},uniforms:{strength:1},vertexShader:"\n        #include <common_vert>\n        #include <morphtarget_pars_vert>\n        #include <skinning_pars_vert>\n        #include <uv_pars_vert>\n\t\t#include <logdepthbuf_pars_vert>\n        void main() {\n        \t#include <uv_vert>\n        \t#include <begin_vert>\n        \t#include <morphtarget_vert>\n        \t#include <skinning_vert>\n        \t#include <pvm_vert>\n\t\t\t#include <logdepthbuf_vert>\n        }\n    ",fragmentShader:"\n        #include <common_frag>\n        #include <diffuseMap_pars_frag>\n\n        #include <uv_pars_frag>\n\n\t\t#include <logdepthbuf_pars_frag>\n\n\t\tuniform float strength;\n\n        void main() {\n\t\t\t#include <logdepthbuf_frag>\n\n\t\t\tvec4 outColor = vec4(u_Color, u_Opacity);\n\n\t\t\t#ifdef USE_DIFFUSE_MAP\n\t\t\t\toutColor *= texture2D(diffuseMap, v_Uv);\n\t\t\t#endif\n\n\t\t\t#ifdef ALPHATEST\n\t\t\t\tif(outColor.a < ALPHATEST) discard;\n\t\t\t#endif\n\n\t\t\toutColor.a *= strength;\n\n            gl_FragColor = outColor;\n        }\n    "};class to extends Na{constructor(e,t,n){super(e,t,n),this._rt=new _i(e,t),this._rt.detach(ie),this._mrt=new _i(e,t),this._mrt.detach(ie),this.clearColor=!0,this.clearDepth=!0,this.clearStencil=!0,this.renderLayers=[{id:0,mask:15}],this._sceneRenderOptions={}}syncAttachments(e,t,n,r){this._rt.dispose(),this._mrt.dispose(),this._rt.attach(e,ne),Ha(t)?(this._rt.attach(t,ie),this._rt.detach(re)):(this._rt.attach(t,re),this._rt.detach(ie)),this._mrt.attach(n,ne),Ha(r)?(this._mrt.attach(r,ie),this._mrt.detach(re)):(this._mrt.attach(r,re),this._mrt.detach(ie)),this.needsUpdate=!0}setGeometryReplaceFunction(e){e?this._sceneRenderOptions.getGeometry=e:delete this._sceneRenderOptions.getGeometry}setOutputEncoding(e){this._rt.texture.encoding=e}getOutputEncoding(){return this._rt.texture.encoding}render(e,t,n,r){if(!this.needRender())return;const i=t.$useMSAA,a=i?this._mrt:this._rt,s=!!a._attachments[2030];e.renderPass.setRenderTarget(a),t.clearColor?e.renderPass.setClearColor(...t._tempClearColor):e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(this.clearColor,this.clearDepth,this.clearStencil&&s);const o=n.getRenderStates(r),l=n.getRenderQueue(r);this.$renderScene(e,l,o),i&&(e.renderPass.setRenderTarget(this._rt),e.renderPass.blitRenderTarget(this._mrt,this._rt,!0,!0,s)),e.renderPass.updateRenderTargetMipmap(this._rt)}output(){return this._rt}resize(e,t){super.resize(e,t),this._rt.resize(e,t),this._mrt.resize(e,t)}dispose(){super.dispose(),this._rt.dispose(),this._mrt.dispose()}$renderScene(e,t,n){const r=this._sceneRenderOptions,i=this.renderLayers;for(let a=0,s=i.length;a<s;a++){const{id:s,mask:o,options:l=r}=i[a],u=t.getLayer(s);u&&(u.opaqueCount>0&&1&o&&e.renderRenderableList(u.opaque,n,l),u.transparentCount>0&&2&o&&e.renderRenderableList(u.transparent,n,l))}const a=t.getLayer(1);a&&a.opaqueCount+a.transparentCount>0&&(e.renderPass.clear(!1,!0,!1),e.renderRenderableList(a.opaque,n,r),e.renderRenderableList(a.transparent,n,r))}}class no{constructor(e,t){this._width=e,this._height=t,this._map=new Map}allocate(e=0){let t=this._map.get(e);if(t||(t=[],this._map.set(e,t)),t.length>0)return t.shift();{const t=Math.pow(2,e),n=Math.ceil(this._width/t),r=Math.ceil(this._height/t),i=new _i(n,r),a=i._attachments[2e3];return a.minFilter=B,a.magFilter=B,a.format=P,a.generateMipmaps=!1,i.detach(ie),i}}release(e,t=0){this._map.get(t).push(e)}resize(e,t){this._width=e,this._height=t,this._map.forEach(((e,t)=>{const n=Math.pow(2,t),r=Math.ceil(this._width/n),i=Math.ceil(this._height/n);e.forEach((e=>{e.resize(r,i)}))}))}updateStats(e){let t=0;this._map.forEach(((e,n)=>{const r=Math.pow(2,n);t+=e.length/(r*r)})),e.fboCache=t}dispose(){this._map.forEach((e=>{e.forEach((e=>{e.dispose()}))})),this._map.clear()}}class ro{constructor(e,t,n={}){this._size=new Se(e,t),n.webgl2=n.webgl2||!1,n.floatColorBuffer=n.floatColorBuffer||!1,n.samplerNumber=n.samplerNumber||8,n.maxMarkAttachment=n.maxMarkAttachment||5,n.maxColorAttachment=n.maxColorAttachment||5;const r=new to(e,t,n),i=new Us(e,t,n),a=new js(e,t,n),s=new Ys(e,t,n),o=new Qs(e,t,n);this._bufferMap=new Map([["SceneBuffer",r],["GBuffer",i],["NonDepthMarkBuffer",a],["MarkBuffer",s],["ColorMarkBuffer",o]]),this._defaultColorTexture=new Rn,this._defaultMSColorRenderBuffer=new gi(e,t,L,n.samplerNumber),this._defaultDepthRenderBuffer=new gi(e,t,N),this._defaultMSDepthRenderBuffer=new gi(e,t,N,n.samplerNumber),this._defaultDepthStencilRenderBuffer=new gi(e,t,M),this._defaultMSDepthStencilRenderBuffer=new gi(e,t,I,n.samplerNumber),this._externalColorAttachment=null,this._externalDepthAttachment=null,this._samplerNumber=n.samplerNumber,this._externalMSAA=null,this._stencilBuffer=!1,this._syncAttachments(),this._renderTargetCache=new no(e,t),this._effectList=[],this._tempClearColor=[0,0,0,1],this._tempViewport=[0,0,1,1],this._tempBufferNames=new Set,this._stats={fboCache:0,markBuffers:0,colorMarkBuffers:0,currentBufferUsage:{}},this.sceneMSAA=!1,this.clearColor=!0,this.clearDepth=!0,this.clearStencil=!1,this.debugger=null}getSize(){return this._size}_syncAttachments(){const e=this._externalColorAttachment,t=this._externalDepthAttachment,n=!!e&&!!t,r=this._externalMSAA;let i=this._stencilBuffer;n&&(i=Ha(t));const a=i?this._defaultDepthStencilRenderBuffer:this._defaultDepthRenderBuffer,s=i?this._defaultMSDepthStencilRenderBuffer:this._defaultMSDepthRenderBuffer;let o,l,u,c,h,d;n?r?(o=this._defaultColorTexture,l=a,u=e,c=t,h=a,d=t):(o=e,l=t,u=this._defaultMSColorRenderBuffer,c=s,h=t,d=s):(o=this._defaultColorTexture,l=a,u=this._defaultMSColorRenderBuffer,c=s,h=a,d=s),this._bufferMap.forEach((e=>{e.syncAttachments?e.syncAttachments(o,l,u,c):e.syncDepthAttachments&&e.syncDepthAttachments(h,d)}))}set stencilBuffer(e){this._stencilBuffer=e,this._syncAttachments()}get stencilBuffer(){return this._stencilBuffer}setExternalAttachment(e,t){const n=so(e);n===so(t)?(this._externalColorAttachment=e,this._externalDepthAttachment=t,this._externalMSAA=n>0,this._syncAttachments()):console.warn("EffectComposer.setExternalAttachment: color and depth attachment MultipleSampling not match.")}clearExternalAttachment(){this._externalColorAttachment=null,this._externalDepthAttachment=null,this._externalMSAA=null,this._syncAttachments()}addBuffer(e,t){this._bufferMap.set(e,t)}removeBuffer(e){this._bufferMap.delete(e)}getBuffer(e){return this._bufferMap.get(e)}addEffect(e,t,n=0){this.getEffect(e)?console.warn(""):(t.name=e,this._effectList.push({name:e,effect:t,order:n}),t.resize(this._size.x,this._size.y))}removeEffect(e){const t=this._effectList.findIndex((t=>t.name===e));t>-1&&this._effectList.splice(t,1)}getEffect(e){const t=this._effectList.find((t=>t.name===e));return t?t.effect:null}render(e,t,n,r){const i=t.getRenderStates(n);if(e.renderPass.getClearColor().toArray(this._tempClearColor),n.rect.toArray(this._tempViewport),n.rect.set(0,0,1,1),i.camera.rect.set(0,0,1,1),this._bufferMap.forEach((e=>{e.attachManager&&e.attachManager.reset()})),this.debugger)return this.debugger.bufferDependencies.forEach((r=>{const i=this._bufferMap.get(r);this.debugger.channel&&i.attachManager&&i.attachManager.allocate(this.debugger.channel,this.debugger.mask),i.render(e,this,t,n)})),this.debugger.render(e,this,r),void e.renderPass.setClearColor(...this._tempClearColor);this._effectList.sort(ao);let a=this._effectList.findIndex((e=>e.effect.active));const s=a>-1;if(this._tempBufferNames.clear(),s){this._tempBufferNames.add("SceneBuffer"),this._effectList.forEach((e=>{e.effect.active&&e.effect.bufferDependencies.forEach((({key:t,mask:n})=>{this._tempBufferNames.add(t),this._bufferMap.get(t).attachManager&&this._bufferMap.get(t).attachManager.allocate(e.name,n)}))})),this._tempBufferNames.forEach((r=>{this._bufferMap.get(r).render(e,this,t,n)}));let i,s=this._renderTargetCache.allocate(),o=this._renderTargetCache.allocate();this._effectList.sort(io);const l=this._effectList.length,u=this._effectList.findIndex((e=>e.effect.active));a=l-1-a,this._effectList.forEach(((t,n)=>{if(!t.effect.active)return;const l=n<a;t.effect.render(e,this,n===u?this._bufferMap.get("SceneBuffer").output():s,l?o:r,!l),i=s,s=o,o=i})),this._renderTargetCache.release(s),this._renderTargetCache.release(o)}else{e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(...this._tempClearColor),e.renderPass.clear(this.clearColor,this.clearDepth,this.clearStencil),i.camera.rect.fromArray(this._tempViewport);const a=t.getRenderQueue(n);this._bufferMap.get("SceneBuffer").$renderScene(e,a,i)}e.renderPass.setClearColor(...this._tempClearColor),n.rect.fromArray(this._tempViewport),i.camera.rect.fromArray(this._tempViewport)}getStats(){this._renderTargetCache.updateStats(this._stats);const e=this.getBuffer("MarkBuffer").attachManager.attachCount(),t=this.getBuffer("NonDepthMarkBuffer").attachManager.attachCount(),n=this.getBuffer("ColorMarkBuffer").attachManager.attachCount();this._stats.markBuffers=e+t,this._stats.colorMarkBuffers=n;for(const[e,t]of this._bufferMap)t.attachManager||(this._stats.currentBufferUsage[e]=this._tempBufferNames.has(e)?1:0);return this._stats}resize(e,t){this._size.set(e,t),this._bufferMap.forEach((n=>n.resize(e,t))),this._renderTargetCache.resize(e,t),this._effectList.forEach((n=>n.effect.resize(e,t)))}dispose(){this._bufferMap.forEach((e=>e.dispose())),this._renderTargetCache.dispose(),this._effectList.forEach((e=>e.effect.dispose()))}get $useMSAA(){return(null!==this._externalMSAA?this._externalMSAA:this.sceneMSAA)&&this._samplerNumber>1}}function io(e,t){return e.order-t.order}function ao(e,t){return t.order-e.order}function so(e){return e.isTexture?0:e.multipleSampling}class oo extends ro{constructor(e,t,n){super(e,t,n),this.addEffect("SSAO",new rs,0),this.addEffect("SSR",new ds,1),this.addEffect("ColorCorrection",new Ya,2),this.addEffect("DOF",new Za,3),this.addEffect("Bloom",new Xa,4),this.addEffect("InnerGlow",new ys,10),this.addEffect("Glow",new Ss,11),this.addEffect("SoftGlow",new Ps,12),this.addEffect("Tailing",new Fs,13),this.addEffect("RadialTailing",new Ns,14),this.addEffect("Ghosting",new Rs,15),this.addEffect("FXAA",new ts,101),this.addEffect("ChromaticAberration",new Wa,102),this.addEffect("Vignetting",new _s,103),this.addEffect("BlurEdge",new bs,104),this.addEffect("Film",new Ja,105),this._effectList.forEach((e=>e.effect.active=!1))}}class lo{constructor(){this.bufferDependencies=[]}render(e,t,n){console.error("Debugger: .render() must be implemented in subclass.")}resize(e,t){}dispose(){}}class uo extends lo{constructor(){super(),this.bufferDependencies=["GBuffer"],this._mainPass=new wn(ho),this.debugType=co.Normal}render(e,t,n){e.renderPass.setRenderTarget(n),e.renderPass.setClearColor(0,0,0,1),e.renderPass.clear(!0,!0,!1);const r=t.getBuffer("GBuffer"),i=r.getCurrentRenderStates();this._mainPass.uniforms.normalGlossinessTexture=r.output()._attachments[2e3],this._mainPass.uniforms.depthTexture=r.output()._attachments[2030],this._mainPass.uniforms.debug=this.debugType||0,i.camera.projectionViewMatrix.toArray(this._mainPass.uniforms.projectionView),this._mainPass.render(e)}}const co={Normal:0,Depth:1,Position:2,Glossiness:3};uo.DebugTypes=co;const ho={name:"ec_debug_gbuffer",defines:{},uniforms:{normalGlossinessTexture:null,depthTexture:null,projectionView:new Float32Array(16),debug:0},vertexShader:Ra,fragmentShader:"\n\t\tuniform sampler2D normalGlossinessTexture;\n\t\tuniform sampler2D depthTexture;\n\t\tuniform int debug;\n\n\t\tuniform mat4 projectionView;\n\n\t\tvarying vec2 v_Uv;\n\n\t\tvoid main() {\n\t\t\tvec2 texCoord = v_Uv;\n\t\t\tvec4 texel = texture2D(normalGlossinessTexture, texCoord);\n\n\t\t\tif (dot(texel.rgb, vec3(1.0)) == 0.0) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat depth = texture2D(depthTexture, texCoord).r;\n\n\t\t\tvec2 xy = texCoord * 2.0 - 1.0;\n\t\t\tfloat z = depth * 2.0 - 1.0;\n\n\t\t\tvec4 projectedPos = vec4(xy, z, 1.0);\n\t\t\tvec4 p4 = inverse(projectionView) * projectedPos;\n\n\t\t\tvec3 position = p4.xyz / p4.w;\n\n\t\t\tif (debug == 0) {\n\t\t\t\tgl_FragColor = vec4(texel.rgb, 1.0);\n\t\t\t} else if (debug == 1) {\n\t\t\t\tgl_FragColor = vec4(vec3(depth), 1.0);\n\t\t\t} else if (debug == 2) {\n\t\t\t\tgl_FragColor = vec4(position, 1.0);\n\t\t\t} else {\n\t\t\t\tgl_FragColor = vec4(vec3(texel.a), 1.0);\n\t\t\t}\n\t\t}\n\t"};class fo extends lo{constructor(){super(),this.bufferDependencies=["GBuffer"],this.defaultEffect=new rs}render(e,t,n){(t.getEffect("SSAO")||this.defaultEffect).render(e,t,null,n)}resize(e,t){this.defaultEffect.resize(e,t)}dispose(){this.defaultEffect.dispose()}}class po extends lo{constructor(){super(),this.bufferDependencies=["SceneBuffer","GBuffer"],this.defaultEffect=new ds}render(e,t,n){(t.getEffect("SSR")||this.defaultEffect).render(e,t,null,n)}resize(e,t){this.defaultEffect.resize(e,t)}dispose(){this.defaultEffect.dispose()}}ro.prototype.setGeometryReplaceFunction=function(e){console.warn("EffectComposer.setGeometryReplaceFunction has been removed, use SceneBuffer.setGeometryReplaceFunction instead."),this._bufferMap.get("SceneBuffer").setGeometryReplaceFunction(e)},Object.defineProperties(ro.prototype,{customRenderLayers:{set:function(e){console.error("EffectComposer.customRenderLayers has been removed, use SceneBuffer.renderLayers instead.")},get:function(){console.error("EffectComposer.customRenderLayers has been removed, use SceneBuffer.renderLayers instead.")}}});class mo extends Na{constructor(e,t,n){super(e,t,n),this._rt=new _i(e,t),this._rt.texture.minFilter=z,this._rt.texture.magFilter=z,this._rt.texture.generateMipmaps=!1,this._uvMaterialCache=new go,this._uvCheckTexture=n.uvCheckTexture,this._renderOptions={getMaterial:e=>{const t=this._uvMaterialCache.getUvMaterial(e);return t.uniforms.checkMap=this._uvCheckTexture,t.side=e.material.side,t},ifRender:e=>!!e.geometry.getAttribute("a_Uv")},this.layers=[0]}render(e,t,n,r){if(!this.needRender())return;e.renderPass.setRenderTarget(this._rt),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!1);const i=n.getRenderStates(r),a=n.getRenderQueue(r),s=this.layers;for(let t=0,n=s.length;t<n;t++){const n=a.getLayer(s[t]);e.renderRenderableList(n.opaque,i,this._renderOptions),e.renderRenderableList(n.transparent,i,this._renderOptions)}}output(){return this._rt}resize(e,t){super.resize(e,t),this._rt.resize(e,t)}dispose(){super.dispose(),this._rt.dispose()}}class go{constructor(){this._map=new Map,this._weakMap=new WeakMap}getUvMaterial(e){let t=this._weakMap.get(e.material);if(!t){const n=e.object.isSkinnedMesh&&e.object.skeleton,r=!!e.object.morphTargetInfluences;let i=0;n&&(i=e.object.skeleton.boneTexture?1024:e.object.skeleton.bones.length);const a=n+"_"+i+"_"+r;if(t=this._map.get(a),!t){const o=new yn(_o);t={refCount:0,material:o},this._map.set(a,t)}function s(){e.material.removeEventListener("dispose",s),this._weakMap.delete(e.material),t.refCount--,t.refCount<=0&&this._map.delete(a)}this._weakMap.set(e.material,t),t.refCount++,e.material.addEventListener("dispose",s)}return t.material}}const _o={name:"uv_shader",defines:{},uniforms:{checkMap:null},vertexShader:"\n        #include <common_vert>\n        #include <morphtarget_pars_vert>\n        #include <skinning_pars_vert>\n        \n        uniform mat3 uvTransform;\n        attribute vec2 a_Uv;\n        varying vec2 v_Uv;\n\n\t\t#include <logdepthbuf_pars_vert>\n        void main() {\n        \tv_Uv = (uvTransform * vec3(a_Uv, 1.)).xy;\n        \t#include <begin_vert>\n        \t#include <morphtarget_vert>\n        \t#include <skinning_vert>\n        \t#include <pvm_vert>\n\t\t\t#include <logdepthbuf_vert>\n        }\n    ",fragmentShader:"\n        #include <common_frag>\n\n        varying vec2 v_Uv;\n\n\t\t#include <logdepthbuf_pars_frag>\n\n\t\tuniform sampler2D checkMap;\n\n        void main() {\n\t\t\t#include <logdepthbuf_frag>\n\n            vec4 color = texture2D(checkMap, v_Uv);\n\n            gl_FragColor = vec4(color.rgb, 1.);\n        }\n    "};class vo extends lo{constructor(){super(),this.bufferDependencies=["UVBuffer"],this._mainPass=new wn(ka)}render(e,t,n){e.renderPass.setRenderTarget(n),e.renderPass.setClearColor(0,0,0,1),e.renderPass.clear(!0,!0,!1);const r=t.getBuffer("UVBuffer");this._mainPass.uniforms.tDiffuse=r.output()._attachments[2e3],this._mainPass.render(e)}}class bo extends lo{constructor(){super(),this.bufferDependencies=["SceneBuffer","LensflareBuffer"],this._mainPass=new wn(ka)}render(e,t,n){e.renderPass.setRenderTarget(n),e.renderPass.setClearColor(0,0,0,1),e.renderPass.clear(!0,!0,!1);const r=t.getBuffer("LensflareBuffer");this._mainPass.uniforms.tDiffuse=r.output()._attachments[2e3],this._mainPass.render(e)}}class xo extends Na{constructor(e,t){super(e,t),this._occlusionRenderTarget=new _i(e,t),this._occlusionRenderTarget.texture.minFilter=z,this._occlusionRenderTarget.texture.magFilter=z,this._occlusionRenderTarget.texture.generateMipmaps=!1,this.lensflareInfos=[]}syncDepthAttachments(e,t){const n=this._occlusionRenderTarget;n.dispose(),Ha(e)?(n.attach(e,ie),n.detach(re)):(n.attach(e,re),n.detach(ie)),this.needsUpdate=!0}render(e,t,n,r){if(!this.needRender())return;const i=n.getRenderStates(r),a=n.getRenderQueue(r).getLayer(5);if(!a)return;e.renderPass.setRenderTarget(this._occlusionRenderTarget),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!1,!1);const s=this._occlusionRenderTarget.height/this._occlusionRenderTarget.width;this.lensflareInfos.length=0,e.renderRenderableList(a.opaque,i,{beforeRender:e=>{const{object:t,material:n}=e;yo.setFromMatrixPosition(t.worldMatrix).applyMatrix4(r.viewMatrix).applyMatrix4(r.projectionMatrix),yo.toArray(n.uniforms.screenPosition),n.uniforms.scale[0]=n.uniforms.scale[1]*s,this.lensflareInfos.push({screenX:yo.x,screenY:yo.y,scaleX:n.uniforms.scale[0],scaleY:n.uniforms.scale[1],elements:t.lensflareElements})}})}output(){return this._occlusionRenderTarget}resize(e,t){super.resize(e,t),this._occlusionRenderTarget.resize(e,t)}dispose(){super.dispose(),this._occlusionRenderTarget.dispose()}}const yo=new r;class wo extends Ia{constructor(){super(),this.bufferDependencies=[{key:"SceneBuffer"},{key:"LensflareBuffer"}],this._clipPass=new wn(Ao),this._lensflarePass=new wn(Eo),this._lensflarePass.material.transparent=!0,this._lensflarePass.material.blending=_,this._lensflarePass.material.depthWrite=!1,this._blendPass=new wn(Ua),this._blendPass.material.premultipliedAlpha=!0,this._clippedRT=new _i(64,64),this._clippedRT.texture.minFilter=z,this._clippedRT.texture.magFilter=z,this._clippedRT.texture.generateMipmaps=!1}render(e,t,n,r,i){const a=t._renderTargetCache.allocate(0),s=t.getBuffer("LensflareBuffer"),o=s.lensflareInfos;e.renderPass.setRenderTarget(a),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!0),o.forEach((({screenX:t,screenY:n,scaleX:r,scaleY:i,elements:o})=>{e.renderPass.setRenderTarget(this._clippedRT),e.renderPass.setClearColor(0,0,0,0),e.renderPass.clear(!0,!0,!0),this._clipPass.uniforms.tDiffuse=s.output().texture,this._clipPass.uniforms.clipRect[0]=.5*(t-r)+.5,this._clipPass.uniforms.clipRect[1]=.5*(n-i)+.5,this._clipPass.uniforms.clipRect[2]=r,this._clipPass.uniforms.clipRect[3]=i,this._clipPass.render(e),e.renderPass.setRenderTarget(a),o.forEach((({texture:r,color:i,scale:s,offset:o})=>{const l=2*-t,u=2*-n,c=this._lensflarePass.material;c.uniforms.map=r,c.uniforms.occlusionMap=this._clippedRT.texture,c.uniforms.screenPosition[0]=t+l*o,c.uniforms.screenPosition[1]=n+u*o,c.uniforms.scale[0]=s*a.height/a.width,c.uniforms.scale[1]=s,i.toArray(c.uniforms.color),e.renderPass.render(this._lensflarePass.renderQueueLayer.opaque[0],this._lensflarePass.renderStates,this._lensflarePass.renderConfig)}))})),e.renderPass.setRenderTarget(r),e.renderPass.setClearColor(0,0,0,0),i?e.renderPass.clear(t.clearColor,t.clearDepth,t.clearStencil):e.renderPass.clear(!0,!0,!1),this._blendPass.uniforms.texture1=n.texture,this._blendPass.uniforms.texture2=a.texture,this._blendPass.uniforms.colorWeight1=1,this._blendPass.uniforms.alphaWeight1=1,this._blendPass.uniforms.colorWeight2=1,this._blendPass.uniforms.alphaWeight2=1,i&&(this._blendPass.material.transparent=t._tempClearColor[3]<1||!t.clearColor,this._blendPass.renderStates.camera.rect.fromArray(t._tempViewport)),this._blendPass.render(e),i&&(this._blendPass.material.transparent=!1,this._blendPass.renderStates.camera.rect.set(0,0,1,1)),t._renderTargetCache.release(a,0)}resize(e,t){}dispose(){this._clippedRT.dispose()}}const Ao={name:"lensflare_clip",defines:{},uniforms:{tDiffuse:null,clipRect:[0,0,1,1]},vertexShader:"\n\t\tattribute vec3 a_Position;\n\t\tattribute vec2 a_Uv;\n\n\t\tuniform mat4 u_ProjectionView;\n\t\tuniform mat4 u_Model;\n\n\t\tuniform vec4 clipRect;\n\n\t\tvarying vec2 v_Uv;\n\n\t\tvoid main() {\n\t\t\tv_Uv = a_Uv * clipRect.zw + clipRect.xy;\n\t\t\tgl_Position = u_ProjectionView * u_Model * vec4(a_Position, 1.0);\n\t\t}\n\t",fragmentShader:"\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 v_Uv;\n\n\t\tvoid main() {\n\t\t\tvec4 texel = texture2D(tDiffuse, v_Uv);\n\t\t\tgl_FragColor = texel;\n\t\t}\n\t"},Eo={name:"lensflare",defines:{},uniforms:{map:null,occlusionMap:null,color:[1,1,1],scale:[1,1],screenPosition:[0,0,0]},vertexShader:"\n\t\tuniform vec3 screenPosition;\n\t\tuniform vec2 scale;\n\n\t\tuniform sampler2D occlusionMap;\n\n\t\tattribute vec3 a_Position;\n\t\tattribute vec2 a_Uv;\n\n\t\tvarying vec2 v_Uv;\n\t\tvarying float v_Visibility;\n\n\t\tvoid main() {\n\t\t\tv_Uv = a_Uv;\n\n\t\t\tvec2 pos = a_Position.xz;\n\t\t\tpos.y = -pos.y;\n\n\t\t\tvec4 visibility = texture2D(occlusionMap, vec2(0.5, 0.5)) * 0.2;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.34, 0.34)) * 0.1;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.34, 0.66)) * 0.1;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.66, 0.34)) * 0.1;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.66, 0.66)) * 0.1;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.18, 0.5)) * 0.1;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.82, 0.5)) * 0.1;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.5, 0.18)) * 0.1;\n\t\t\tvisibility += texture2D(occlusionMap, vec2(0.5, 0.82)) * 0.1;\n\n\t\t\tv_Visibility = visibility.r;\n\n\t\t\tgl_Position = vec4(pos * scale + screenPosition.xy, screenPosition.z, 1.0);\n\t\t}\n\t",fragmentShader:"\n\t\tuniform sampler2D map;\n\t\tuniform vec3 color;\n\n\t\tvarying vec2 v_Uv;\n\t\tvarying float v_Visibility;\n\n\t\tvoid main() {\n\t\t\tvec4 texture = texture2D(map, v_Uv);\n\t\t\ttexture.a *= v_Visibility;\n\t\t\tgl_FragColor = texture;\n\t\t\tgl_FragColor.rgb *= color;\n\t\t}\n\t"};class So extends oo{constructor(e,t,n){super(e,t,{samplerNumber:Math.min(n.renderPass.capabilities.maxSamples,5),webgl2:!0,floatColorBuffer:!!n.renderPass.capabilities.getExtension("EXT_color_buffer_float")}),this.sceneMSAA=!0;const r=(new ca).load("./textures/uv_checker.jpg");r.anisotropy=8,this.getBuffer("SceneBuffer").setOutputEncoding(te),this.getBuffer("ColorMarkBuffer").setMaterialReplaceFunction(Mo),this.addBuffer("UVBuffer",new mo(e,t,{uvCheckTexture:r})),this.addBuffer("LensflareBuffer",new xo(e,t)),this._syncAttachments(),this.getBuffer("ColorMarkBuffer").setGeometryReplaceFunction(Co),this.getBuffer("GBuffer").setGeometryReplaceFunction(Co),this.getBuffer("MarkBuffer").setGeometryReplaceFunction(Co),this.getBuffer("NonDepthMarkBuffer").setGeometryReplaceFunction(Co),this.getBuffer("SceneBuffer").setGeometryReplaceFunction(Co),this.getBuffer("SceneBuffer").renderLayers=[{id:2,mask:15},{id:0,mask:15}],this.getEffect("Glow").bufferDependencies=[{key:"SceneBuffer"},{key:"ColorMarkBuffer",mask:15}],this.addEffect("Lensflare",new wo,101.5),this.getEffect("Lensflare").active=!0,this._gBufferDebugger=new uo,this._ssaoDebugger=new fo,this._ssrDebugger=new po,this._uvDebugger=new vo,this._lensflareDebugger=new bo}setOptions(e){this.sceneMSAA=e.MSAA;const t=this.getEffect("ColorCorrection");for(const n in e.colorCorrection)t[n]=e.colorCorrection[n];const n=this.getEffect("Bloom");for(const t in e.bloom)n[t]=e.bloom[t];const r=this.getEffect("Glow");for(const t in e.glow)r[t]=e.glow[t];const i=this.getEffect("SSAO");for(const t in e.ssao)"options"!==t&&(i[t]=e.ssao[t]);const a=this.getEffect("SSR");for(const t in e.ssr)"options"!==t&&(a[t]=e.ssr[t]);const s=this.getEffect("DOF");for(const t in e.dof)"options"!==t&&(s[t]=e.dof[t]);this.getEffect("FXAA").active=e.fxaa.active;const o=this.getEffect("ChromaticAberration");for(const t in e.chromaticaberration)"options"!==t&&(o[t]=e.chromaticaberration[t]);const l=this.getEffect("Vignetting");l.active=e.vignetting.active,l.offset=e.vignetting.offset,l.color=new Pe(parseInt(e.vignetting.color.charAt(1)+e.vignetting.color.charAt(2),16)/255,parseInt(e.vignetting.color.charAt(3)+e.vignetting.color.charAt(4),16)/255,parseInt(e.vignetting.color.charAt(5)+e.vignetting.color.charAt(6),16)/255);const u=this.getEffect("BlurEdge");for(const t in e.bluredge)"options"!==t&&(u[t]=e.bluredge[t]);const c=this.getEffect("Film");for(const t in e.film)"options"!==t&&(c[t]=e.film[t]);this.getEffect("Lensflare").active=e.lensflare.active}setDebugger(e){"Normal"===e.type?(this._gBufferDebugger.debugType=uo.DebugTypes.Normal,this.debugger=this._gBufferDebugger):"Depth"===e.type?(this._gBufferDebugger.debugType=uo.DebugTypes.Depth,this.debugger=this._gBufferDebugger):"Position"===e.type?(this._gBufferDebugger.debugType=uo.DebugTypes.Position,this.debugger=this._gBufferDebugger):"SSAO"===e.type?this.debugger=this._ssaoDebugger:"SSR"===e.type?this.debugger=this._ssrDebugger:"UV"===e.type?this.debugger=this._uvDebugger:"Lensflare"===e.type?this.debugger=this._lensflareDebugger:this.debugger=null}}const To=new Map;function Mo(e){const t=e.object.isSkinnedMesh&&e.object.skeleton,n=!!e.object.morphTargetInfluences,r=e.material.drawMode,i=t+"_"+n+"_"+r+!!e.material.diffuseMap;let a;return To.has(i)?a=To.get(i):(a=new yn(Po),a.premultipliedAlpha=!1,a.drawMode=r,To.set(i,a)),a.transparent=e.material.transparent,a.blending=e.material.blending,a.opacity=e.material.opacity,a.diffuse.copy(e.material.diffuse),a.diffuseMap=e.material.diffuseMap,a.emissive.copy(e.material.emissive),a}const Po={name:"ec_color",defines:{},uniforms:{strength:1},vertexShader:"\n        #include <common_vert>\n        #include <morphtarget_pars_vert>\n        #include <skinning_pars_vert>\n        #include <uv_pars_vert>\n\t\t#include <logdepthbuf_pars_vert>\n        void main() {\n        \t#include <uv_vert>\n        \t#include <begin_vert>\n        \t#include <morphtarget_vert>\n        \t#include <skinning_vert>\n        \t#include <pvm_vert>\n\t\t\t#include <logdepthbuf_vert>\n        }\n    ",fragmentShader:"\n        #include <common_frag>\n        #include <diffuseMap_pars_frag>\n\n        #include <uv_pars_frag>\n\n\t\t#include <logdepthbuf_pars_frag>\n\n\t\tuniform float strength;\n\n\t\tuniform vec3 emissive;\n\n        void main() {\n\t\t\t#include <logdepthbuf_frag>\n\n\t\t\tvec4 outColor = vec4(u_Color, u_Opacity);\n\n\t\t\t#ifdef USE_DIFFUSE_MAP\n\t\t\t\toutColor *= texture2D(diffuseMap, v_Uv);\n\t\t\t#endif\n\n\t\t\t#ifdef ALPHATEST\n\t\t\t\tif(outColor.a < ALPHATEST) discard;\n\t\t\t#endif\n\n\t\t\toutColor.a *= strength;\n\t\t\toutColor.rgb *= outColor.a;\n\n\t\t\toutColor.rgb += emissive;\n\n            gl_FragColor = outColor;\n        }\n    "};function Co(e){return e.material.wireframe?function(e){if(Fo.has(e))return Fo.get(e);{const t=new _n;return t.attributes=e.attributes,t.morphAttributes=e.morphAttributes,t.index=La.getWireframeAttribute(e),t.boundingBox=e.boundingBox,t.boundingSphere=e.boundingSphere,t.instanceCount=e.instanceCount,Fo.set(e,t),e.addEventListener("dispose",Lo),t}}(e.geometry):e.geometry}const Fo=new WeakMap;function Lo(e){const t=e.target;t.removeEventListener("dispose",Lo),Fo.has(t)&&(Fo.get(t).dispose(),Fo.delete(t))}class No extends an{constructor(){const e=new yn(Uo);e.depthWrite=!1,super(Io,e),this.renderLayer=5,this.frustumCulled=!1,this.lensflareElements=[]}set occlusionScale(e){this.material.uniforms.scale[1]=e}get occlusionScale(){return this.material.uniforms.scale[1]}}const Io=new _n,Ro=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),Do=new cn(Ro,5);Io.setIndex(new un(new cn(new Uint16Array([0,1,2,0,2,3]),1))),Io.addAttribute("a_Position",new un(Do,3,0)),Io.addAttribute("a_Uv",new un(Do,2,3));const Uo={name:"lensflare_marker",defines:{},uniforms:{scale:[.1,.1],screenPosition:[0,0,0]},vertexShader:"\n        uniform vec3 screenPosition;\n        uniform vec2 scale;\n\n        attribute vec3 a_Position;\n        attribute vec2 a_Uv;\n\n        varying vec2 v_Uv;\n\n        void main() {\n            v_Uv = a_Uv;\n            vec2 pos = a_Position.xy;\n            gl_Position = vec4(pos * scale + screenPosition.xy, screenPosition.z, 1.0);\n        }\n    ",fragmentShader:"\n        uniform sampler2D map;\n        uniform vec3 color;\n\n        varying vec2 v_Uv;\n\n        void main() {\n            float dist = length(v_Uv - vec2(0.5));\n            float mask = 1.0 - smoothstep(0.49, 0.5, dist);\n            gl_FragColor = vec4(mask, mask, mask, 1.);\n        }\n    "},Oo={uniforms:{size:30,color:[1,1,1,1],gridSize:5,gridSize2:1,gridColor:[0,0,0,1],gridColor2:[.5,.5,.5,1],showGrid:!1},vertexShader:"\n    #include <common_vert>\n    #include <normal_pars_vert>\n    #include <color_pars_vert>\n    #include <modelPos_pars_vert>\n    #include <shadowMap_pars_vert>\n\n        varying vec3 v_WorldPosition;\n\n        void main() {\n            #include <begin_vert>\n            #include <pvm_vert>\n            #include <normal_vert>\n            #include <color_vert>\n            #include <modelPos_vert>\n            v_WorldPosition = (u_Model * vec4( a_Position, 1.0 )).xyz;\n            #include <shadowMap_vert>\n        }\n    ",fragmentShader:"\n        uniform float size;\n        uniform vec4 color;\n        uniform float gridSize;\n        uniform float gridSize2;\n        uniform vec4 gridColor;\n        uniform vec4 gridColor2;\n        uniform bool showGrid;\n\t\tvarying vec3 v_WorldPosition;\n\n        #include <common_frag>\n\n        #include <color_pars_frag>\n        #include <light_pars_frag>\n        #include <normal_pars_frag>\n        #include <modelPos_pars_frag>\n        #include <bsdfs>\n        #include <shadowMap_pars_frag>\n\n\t\tvoid main() {\n            vec4 groundColor = color;\n\n            if (showGrid) {\n                float wx = v_WorldPosition.x;\n                float wz = v_WorldPosition.z;\n                float x0 = abs(fract(wx / gridSize - 0.5) - 0.5) / fwidth(wx) * gridSize / 2.0;\n                float z0 = abs(fract(wz / gridSize - 0.5) - 0.5) / fwidth(wz) * gridSize / 2.0;\n        \n                float x1 = abs(fract(wx / gridSize2 - 0.5) - 0.5) / fwidth(wx) * gridSize2;\n                float z1 = abs(fract(wz / gridSize2 - 0.5) - 0.5) / fwidth(wz) * gridSize2;\n        \n                float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\n                float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\n                if (v0 > 0.1) {\n                    groundColor = mix(groundColor, gridColor, v0);\n                } else {\n                    groundColor = mix(groundColor, gridColor2, v1);\n                }\n            }\n\n            groundColor.a *= 1.0 - clamp(length(v_WorldPosition.xz) / size, 0.0, 1.0);\n\n            vec4 outColor = groundColor;\n\n            #include <color_frag>\n            #include <normal_frag>\n\n            ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n            #include <light_frag>\n            outColor.xyz = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\n            #include <shadowMap_frag>\n\n            gl_FragColor = outColor;\n\n\t\t}\n\n\t"};var ko=n(893);ua.setDecoderPath("libs/draco/");class $o{constructor(e){this.el=e,this.nanobar=new ko;const t=document.createElement("canvas");t.width=e.clientWidth*window.devicePixelRatio,t.height=e.clientHeight*window.devicePixelRatio,t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",this.el.appendChild(t);const n=t.clientWidth||2,i=t.clientHeight||2,a=t.getContext("webgl2",{antialias:!0,alpha:!1,stencil:!0}),s=new si(a);s.renderPass.setClearColor(.2,.2,.2,1),this.clock=new Sa;const o=new vi(t);o.resize(n,i);const l=new Sn;l.getGeometry=Co;const u=new So(n,i,s),c=new Nt,h=new It;h.position.set(8,3,8),h.lookAt(new r(0,0,0),new r(0,1,0)),h.setPerspective(.25*Math.PI,n/i,1,1e3),c.add(h);const d=new Ta;d.gamma=!0,d.level=8,d.renderLayer=2,h.add(d);const f=new yn(Oo);f.acceptLight=!0,f.uniforms.showGrid=!0;const p=new an(new vn(1,1),f);p.receiveShadow=!0,f.metalness=0,f.roughness=1,f.transparent=!0,f.polygonOffset=!0,f.polygonOffsetFactor=1,f.polygonOffsetUnits=1,c.add(p);const m=new Ui(h,t),g=new Ei(16777215,.3);c.add(g);const _=new Mi(16777215,.7);_.castShadow=!0,_.shadow.cameraNear=1,_.shadow.cameraFar=20,_.shadow.mapSize.set(2048,2048),_.shadow.bias=-.004,_.shadow.windowSize=30,_.lookAt(new r,new r(0,1,0)),c.add(_);const v=new Mi(16777215,.2);v.position.set(8,3,8),v.lookAt(new r,new r(0,1,0)),c.add(v);const b=new Mi(16777215,0);b.shadow.cameraNear=1,b.shadow.cameraFar=20,b.shadow.mapSize.set(2048,2048),b.shadow.bias=-.004,b.shadow.windowSize=30,b.position.set(8,3,8),b.lookAt(new r,new r(0,1,0)),c.add(b);const x=new ca,y=new No;y.occlusionScale=.1;const w=x.load("./textures/lensflare/lensflare0.png"),A=x.load("./textures/lensflare/lensflare3.png");y.lensflareElements=[{texture:w,color:new Pe(.2,.2,.2),scale:.6,offset:0},{texture:A,color:new Pe(1,1,1),scale:.05,offset:.6},{texture:A,color:new Pe(1,1,1),scale:.06,offset:.7},{texture:A,color:new Pe(1,1,1),scale:.1,offset:.9},{texture:A,color:new Pe(1,1,1),scale:.06,offset:1}],y.visible=!1,_.add(y);const E=new No;E.occlusionScale=.1,E.lensflareElements=[{texture:w,color:new Pe(.2,.2,.2),scale:.6,offset:0},{texture:A,color:new Pe(1,1,1),scale:.05,offset:.6},{texture:A,color:new Pe(1,1,1),scale:.06,offset:.7},{texture:A,color:new Pe(1,1,1),scale:.1,offset:.9},{texture:A,color:new Pe(1,1,1),scale:.06,offset:1}],E.visible=!1,b.add(E),h.gammaFactor=2,h.outputEncoding=te,this._textureLoader=x,this._rgbeLoader=new ha,this.setEnvironmentTexture("Ice_Lake"),this._canvas=t,this._gl=a,this._renderer=s,this._backRenderTarget=o,this._shadowMapPass=l,this._effectComposer=u,this._scene=c,this._camera=h,this._cameraDefault="perspective",this._fov=45,this._skyBox=d,this._ground=p,this._cameraControl=m,this._ambientLight=g,this._directionalLight=_,this._directionalLightCamera=v,this._directionalLight2=b,this._root=null,this._diagonal=new r,this._diameter=null,this._wireframe=null,this.animations=null,this.actions=null,this.actionStates=null,this.timeScale=1,this._cameraClip={near:1,far:1e3},this._boundingBox=new Me,this._boundingSphere=new We,this._lightCoord=new Se(30,40),Bo(this._directionalLight,this._lightCoord,10),Bo(this._directionalLight2,this._lightCoord,10),this._animationFrame=null,this._running=!1,window.addEventListener("resize",(()=>{this.resize()}),!0)}startRender(){const e=t=>{this._running&&(this._animationFrame=requestAnimationFrame(e),this.tick(t))};this._running=!0,this._animationFrame=requestAnimationFrame(e)}stopRender(){this._running=!1,null!==this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null)}tick(e){this._cameraControl.update(),this._scene.updateMatrix(),this._scene.updateRenderStates(this._camera),this._scene.updateRenderQueue(this._camera),this._shadowMapPass.render(this._renderer,this._scene),this.animations&&this.animations.update(this.clock.getDelta()*this.timeScale),this._directionalLightCamera.position.set(this._camera.position.x,this._camera.position.y,this._camera.position.z),this._directionalLightCamera.lookAt(new r(0,0,0),new r(0,1,0)),this._effectComposer.render(this._renderer,this._scene,this._camera,this._backRenderTarget)}resize(){const{clientHeight:e,clientWidth:t}=this.el;this._canvas.style.width=t+"px",this._canvas.style.height=e+"px";const n=this._canvas.clientWidth||2,r=this._canvas.clientHeight||2;"perspective"===this._cameraDefault?this._camera.setPerspective(this._fov/180*Math.PI,n/r,this._cameraClip.near,this._cameraClip.far):this._camera.setOrtho(2*-this._diameter,2*this._diameter,2*-this._diameter*aspect,2*this._diameter*aspect,-this._cameraClip.far,this._cameraClip.far),this._backRenderTarget.resize(n,r),this._effectComposer.resize(n,r)}load(e,t,n){this._ground.visible=!1;const i=this.extractUrlBase(e);return new Promise(((a,s)=>{const o=this.nanobar,l=new be((function(){o.go(100)}),(function(e,t,n){t<n&&o.go(t/n*100)}));l.setURLModifier(((e,r)=>{const a=t+decodeURI(e).replace(i,"").replace(/^(\.?\/)/,"");if(n&&n.has(a)){const e=n.get(a),t=URL.createObjectURL(e);return c.push(t),t}return(r||"")+e}));const u=new la(l);u.replaceParser(Go,0),u.setDRACOLoader(new ua);const c=[];u.load(e).then((e=>{this._ground.visible=!0,this.clear(),this._boundingBox=new Me,c.forEach(URL.revokeObjectURL);const t=e.root;t.traverse((e=>{if(e.castShadow=!0,e.receiveShadow=!0,e.material){e.material.drawMode=this._wireframe?1:4,e.material.wireframe=this._wireframe||!1;const t=e.material.emissive;t.r+t.g+t.b>0&&(e.effects={Glow:1})}})),e.animations&&this.setClips(e.animations),function(e,t){const n=new Me;e.updateMatrix(),e.traverse((e=>{e.geometry&&(e.geometry.computeBoundingBox(),n.copy(e.geometry.boundingBox).applyMatrix4(e.worldMatrix),t.expandByBox3(n))}))}(t,this._boundingBox),function(e,t){e.getCenter(t.center);const n=(new r).subVectors(e.max,e.min);t.radius=n.getLength()/2}(this._boundingBox,this._boundingSphere);const n=this._boundingSphere.center;this._diagonal.subVectors(this._boundingBox.max,this._boundingBox.min);const i=this._diagonal.getLength();this._diameter=i,t.position.x+=t.position.x-n.x,t.position.y+=t.position.y-n.y,t.position.z+=t.position.z-n.z,this._cameraControl.reset(),this._cameraControl.maxDistance=10*i;const{clientWidth:s,clientHeight:o}=this._canvas,l=i/100,u=100*i,h=o/s;"perspective"===this._cameraDefault?(this._camera.setPerspective(this._fov/180*Math.PI,s/o,l,u),this._camera.add(this._skyBox)):(this._camera.setOrtho(2*-this._diameter,2*this._diameter,2*-this._diameter*h,2*this._diameter*h,-u,u),this._camera.remove(this._skyBox)),this._camera.position.copy(n),this._camera.position.x+=i/1.5,this._camera.position.y+=i/5,this._camera.position.z+=i/1.5,this._cameraClip.near=l,this._cameraClip.far=u,this._cameraControl.saveState(),this._ground.position.y=-Math.abs(this._diagonal.y/2);const d=Math.max(30,Math.abs(2*Math.max(this._diagonal.x,this._diagonal.z)));this._ground.scale.set(d,1,d);let f=Math.abs(2*Math.max(this._diagonal.x,this._diagonal.z));f=Math.max(30,f),this._ground.material.uniforms.size=f/2,this._ground.material.uniforms.gridSize=f/10,this._ground.material.uniforms.gridSize2=f/50,Bo(this._directionalLight,this._lightCoord,this._boundingSphere.radius),Bo(this._directionalLight2,this._lightCoord,this._boundingSphere.radius),this._root=t,this._scene.add(t),a(e)}))}))}setClips(e){e.length&&(this.animations=new _e,e.forEach((e=>{const t=this.actions=new se(e);this.animations.addAction(t)})),this.actions=this.animations.getActions(),this.actions[0].time=0,this.actions[0].weight=1)}playAllClips(){this.actions.forEach((e=>{this.actionStates[e.clip.name]||(e.time=0,e.weight=1,this.actionStates[e.clip.name]=!0)}))}stopAllClips(){this.actions.forEach((e=>{this.actionStates[e.clip.name]&&(e.time=0,e.weight=0,this.actionStates[e.clip.name]=!1)}))}setGlobal(e){this._root&&(this._wireframe=e.wireframe,this._root.traverse((e=>{e.material&&(e.material.drawMode=this._wireframe?1:4,e.material.wireframe=this._wireframe)})))}setGround(e){this._ground.visible=e.show,this._ground.material.uniforms.color=[parseInt(e.color.charAt(1)+e.color.charAt(2),16)/255,parseInt(e.color.charAt(3)+e.color.charAt(4),16)/255,parseInt(e.color.charAt(5)+e.color.charAt(6),16)/255,1],this._ground.material.uniforms.showGrid=e.grid;let t=Math.abs(2*Math.max(this._diagonal.x,this._diagonal.z));t=Math.max(30,t),this._ground.material.uniforms.size=t/2,this._ground.material.uniforms.gridSize=t/10,this._ground.material.uniforms.gridSize2=t/50}setEnvironmentTexture(e){const{name:t,ext:n,tex:r}=Ma[e];r?(this._scene.environment=r,this._skyBox.texture=r):this._rgbeLoader.loadAsync(`./textures/${t}.${n}`).then((e=>{let t=new Rn;return t.image={data:e.data,width:e.width,height:e.height},t.type=e.type,void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),t})).then((e=>Aa.prefilterEnvironmentMap(this._renderer,e,{sampleSize:1024}))).then((t=>{Ma[e].tex=t,this._scene.environment=t,this._skyBox.texture=t}))}setEnvironmentParams(e){this._scene.environmentLightIntensity=e.diffuseIntensity,this._skyBox.level=e.skyRoughness}setAmbientLight(e){this._ambientLight.intensity=e.intensity,zo(this._ambientLight.color,e.color)}setDirectionalLight(e,t){0==t&&(this._directionalLightCamera.intensity=e.intensity,zo(this._directionalLightCamera.color,e.color)),1==t&&(this._directionalLight.intensity=e.intensity,zo(this._directionalLight.color,e.color),this._lightCoord=e.direction,Bo(this._directionalLight,this._lightCoord,this._boundingSphere.radius),this._directionalLight.children[0].visible=e.lensflare),2==t&&(this._directionalLight2.intensity=e.intensity,zo(this._directionalLight2.color,e.color),this._lightCoord=e.direction,Bo(this._directionalLight2,this._lightCoord,this._boundingSphere.radius),this._directionalLight2.children[0].visible=e.lensflare)}setPostEffect(e){this._effectComposer.setOptions(e)}setDebugger(e){this._effectComposer.setDebugger(e)}setCamera(e){this._fov=e.fov;const t=this._canvas.clientWidth||2,n=this._canvas.clientHeight||2,r=n/t;"perspective"===e.type?(this._camera.setPerspective(this._fov/180*Math.PI,t/n,this._cameraClip.near,this._cameraClip.far),this._camera.add(this._skyBox),this._cameraDefault="perspective"):(this._camera.setOrtho(2*-this._diameter,2*this._diameter,2*-this._diameter*r,2*this._diameter*r,-this._cameraClip.far,this._cameraClip.far),this._camera.remove(this._skyBox),this._cameraDefault="othographic"),"Gamma"===e.outputEncoding?this._camera.outputEncoding=te:this._camera.outputEncoding=J}setShadow(e,t){if(1==t){this._directionalLight.castShadow=e.shadowenable,this._directionalLight.shadow.bias=e.shadowbias;const t={Ultra:4096,High:2048,Medium:1024,Low:512}[e.shadowquality];this._directionalLight.shadow.mapSize.set(t,t)}if(2==t){this._directionalLight2.castShadow=e.shadowenable,this._directionalLight2.shadow.bias=e.shadowbias;const t={Ultra:4096,High:2048,Medium:1024,Low:512}[e.shadowquality];this._directionalLight2.shadow.mapSize.set(t,t)}}clear(){this._root&&(this._scene.remove(this._root),this._root.traverse((e=>{e.geometry&&e.geometry.dispose()})),this._renderer.renderPass.clear(!0,!0,!1))}extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}function zo(e,t){e.r=parseInt(t.charAt(1)+t.charAt(2),16)/255,e.g=parseInt(t.charAt(3)+t.charAt(4),16)/255,e.b=parseInt(t.charAt(5)+t.charAt(6),16)/255}function Bo(e,t,n){const i=Math.PI/2-t.y*Math.PI/180,a=t.x*Math.PI/180,s=new qe(n,i,a),o=(new r).setFromSpherical(s);e.position.set(o.x,o.y,o.z),e.lookAt(new r,new r(0,1,0)),e.shadow.windowSize=10*n,e.shadow.cameraNear=n/50,e.shadow.cameraFar=5*n}class Go{static parse(e,t){const{url:n}=e;return t.loadFile(n,"arraybuffer").then((t=>{if(e.data=t,"glTF"===$i.decodeText(new Uint8Array(t,0,4))){const n=$i.parseGLB(t);e.gltf=n.gltf,e.buffers=n.buffers}else{const n=$i.decodeText(new Uint8Array(t));e.gltf=JSON.parse(n)}}))}}class jo{constructor(e){this.version="0.0.1",this.global={wireframe:!1},this.ground={show:!0,color:"#ffffff",grid:!0},this.environment={texture:"Ice_Lake",diffuseIntensity:1,skyRoughness:8},this.camera={fov:45,type:"perspective",outputEncoding:"Gamma"},this.light={ambient:{intensity:.3,color:"#ffffff"},directional:{directional1:{intensity:.7,color:"#ffffff",direction:{x:30,y:40},lensflare:!1,shadowenable:!0,shadowbias:-.004,shadowquality:"High"},directional2:{intensity:0,color:"#ffffff",direction:{x:30,y:40},lensflare:!1,shadowenable:!1,shadowbias:-.004,shadowquality:"High"},cameraDirectional:{intensity:.2,color:"#ffffff"}}},this.postEffect={MSAA:!0,colorCorrection:{active:!1,brightness:0,contrast:1.02,exposure:0,gamma:1,saturation:1.02},bloom:{active:!1,strength:1,threshold:.7,blurSize:2,smoothWidth:.01},glow:{active:!1,strength:1,radius:.4,threshold:.01,smoothWidth:.1},ssao:{active:!1,radius:.5,power:1,bias:.1,intensity:1,quality:"Medium"},ssr:{active:!1,maxRayDistance:4,pixelStride:16,pixelStrideZCutoff:10,screenEdgeFadeStart:.9,eyeFadeStart:.4,eyeFadeEnd:.8,minGlossiness:.2},dof:{active:!1,focalDepth:1,focalLength:24,fstop:.9,maxblur:1,threshold:.9,gain:1,bias:.5,dithering:1e-4},fxaa:{active:!1},chromaticaberration:{active:!1,chromaFactor:.025},vignetting:{active:!1,color:"#ffffff",offset:1},bluredge:{active:!1,offset:1},film:{active:!1,noiseIntensity:.35,scanlinesIntensity:.5,scanlinesCount:2048,grayscale:!0},lensflare:{active:!0}},this.debuggers={type:"None"},this.animation={playAll:function(){e.playAllClips()},stopAll:function(){e.stopAllClips()},timeScale:1}}}class Vo{constructor(e,t,n,r,i="div"){this.parent=e,this.object=t,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),Vo.nextNameID=Vo.nextNameID||0,this.$name.id="lil-gui-name-"+ ++Vo.nextNameID,this.$widget=document.createElement(i),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Ho extends Vo{constructor(e,t,n){super(e,t,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",(()=>{this.setValue(this.$input.checked),this._callOnFinishChange()})),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Xo(e){let t,n;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!n&&"#"+n}const Wo={isPrimitive:!0,match:e=>"string"==typeof e,fromHexString:Xo,toHexString:Xo},qo={isPrimitive:!0,match:e=>"number"==typeof e,fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},Yo={isPrimitive:!1,match:Array.isArray,fromHexString(e,t,n=1){const r=qo.fromHexString(e);t[0]=(r>>16&255)/255*n,t[1]=(r>>8&255)/255*n,t[2]=(255&r)/255*n},toHexString:([e,t,n],r=1)=>qo.toHexString(e*(r=255/r)<<16^t*r<<8^n*r<<0)},Qo={isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t,n=1){const r=qo.fromHexString(e);t.r=(r>>16&255)/255*n,t.g=(r>>8&255)/255*n,t.b=(255&r)/255*n},toHexString:({r:e,g:t,b:n},r=1)=>qo.toHexString(e*(r=255/r)<<16^t*r<<8^n*r<<0)},Zo=[Wo,qo,Yo,Qo];class Ko extends Vo{constructor(e,t,n,r){var i;super(e,t,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(i=this.initialValue,Zo.find((e=>e.match(i)))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",(()=>{this._setValueFromHexString(this.$input.value)})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$text.addEventListener("input",(()=>{const e=Xo(this.$text.value);e&&this._setValueFromHexString(e)})),this.$text.addEventListener("focus",(()=>{this._textFocused=!0,this.$text.select()})),this.$text.addEventListener("blur",(()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()})),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class Jo extends Vo{constructor(e,t,n){super(e,t,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",(e=>{e.preventDefault(),this.getValue().call(this.object)})),this.$button.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$disable=this.$button}}class el extends Vo{constructor(e,t,n,r,i,a){super(e,t,n,"number"),this._initInput(),this.min(r),this.max(i);const s=void 0!==a;this.step(s?a:this._getImplicitStep(),s),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=e=>{const t=parseFloat(this.$input.value);isNaN(t)||(this._snapClampSetValue(t+e),this.$input.value=this.getValue())};let t,n,r,i,a,s=!1;const o=e=>{if(s){const r=e.clientX-t,i=e.clientY-n;Math.abs(i)>5?(e.preventDefault(),this.$input.blur(),s=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(r)>5&&l()}if(!s){const t=e.clientY-r;a-=t*this._step*this._arrowKeyMultiplier(e),i+a>this._max?a=this._max-i:i+a<this._min&&(a=this._min-i),this._snapClampSetValue(i+a)}r=e.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",(()=>{let e=parseFloat(this.$input.value);isNaN(e)||(this._stepExplicit&&(e=this._snap(e)),this.setValue(this._clamp(e)))})),this.$input.addEventListener("keydown",(t=>{"Enter"===t.code&&this.$input.blur(),"ArrowUp"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t))),"ArrowDown"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t)*-1))})),this.$input.addEventListener("wheel",(t=>{this._inputFocused&&(t.preventDefault(),e(this._step*this._normalizeMouseWheel(t)))}),{passive:!1}),this.$input.addEventListener("mousedown",(e=>{t=e.clientX,n=r=e.clientY,s=!0,i=this.getValue(),a=0,window.addEventListener("mousemove",o),window.addEventListener("mouseup",l)})),this.$input.addEventListener("focus",(()=>{this._inputFocused=!0})),this.$input.addEventListener("blur",(()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()}))}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=e=>{const t=this.$slider.getBoundingClientRect();let n=((e,t,n,r,i)=>(e-t)/(n-t)*(this._max-r)+r)(e,t.left,t.right,this._min);this._snapClampSetValue(n)},t=t=>{e(t.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};let r,i,a=!1;const s=t=>{t.preventDefault(),this._setDraggingStyle(!0),e(t.touches[0].clientX),a=!1},o=t=>{if(a){const e=t.touches[0].clientX-r,n=t.touches[0].clientY-i;Math.abs(e)>Math.abs(n)?s(t):(window.removeEventListener("touchmove",o),window.removeEventListener("touchend",l))}else t.preventDefault(),e(t.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",l)},u=this._callOnFinishChange.bind(this);let c;this.$slider.addEventListener("mousedown",(r=>{this._setDraggingStyle(!0),e(r.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)})),this.$slider.addEventListener("touchstart",(e=>{e.touches.length>1||(this._hasScrollBar?(r=e.touches[0].clientX,i=e.touches[0].clientY,a=!0):s(e),window.addEventListener("touchmove",o,{passive:!1}),window.addEventListener("touchend",l))}),{passive:!1}),this.$slider.addEventListener("wheel",(e=>{if(Math.abs(e.deltaX)<Math.abs(e.deltaY)&&this._hasScrollBar)return;e.preventDefault();const t=this._normalizeMouseWheel(e)*this._step;this._snapClampSetValue(this.getValue()+t),this.$input.value=this.getValue(),clearTimeout(c),c=setTimeout(u,400)}),{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),t+-n}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class tl extends Vo{constructor(e,t,n,r){super(e,t,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach((e=>{const t=document.createElement("option");t.innerHTML=e,this.$select.appendChild(t)})),this.$select.addEventListener("change",(()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()})),this.$select.addEventListener("focus",(()=>{this.$display.classList.add("focus")})),this.$select.addEventListener("blur",(()=>{this.$display.classList.remove("focus")})),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class nl extends Vo{constructor(e,t,n){super(e,t,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",(()=>{this.setValue(this.$input.value)})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.code&&this.$input.blur()})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let rl=!1;class il{constructor({parent:e,autoPlace:t=void 0===e,container:n,width:r,title:i="Controls",injectStyles:a=!0,touchStyles:s=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",(()=>this.openAnimated(this._closed))),this.$title.addEventListener("keydown",(e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),this.$title.click())})),this.$title.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(i),s&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!rl&&a&&(function(e){const t=document.createElement("style");t.innerHTML='.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "↕";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "▾";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "▸";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "✓";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}';const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(t,n):document.head.appendChild(t)}(),rl=!0),n?n.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",(e=>e.stopPropagation())),this.domElement.addEventListener("keyup",(e=>e.stopPropagation()))}add(e,t,n,r,i){if(Object(n)===n)return new tl(this,e,t,n);const a=e[t];switch(typeof a){case"number":return new el(this,e,t,n,r,i);case"boolean":return new Ho(this,e,t);case"string":return new nl(this,e,t);case"function":return new Jo(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",a)}addColor(e,t,n=1){return new Ko(this,e,t,n)}addFolder(e){return new il({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach((t=>{t instanceof Jo||t._name in e.controllers&&t.load(e.controllers[t._name])})),t&&e.folders&&this.folders.forEach((t=>{t._title in e.folders&&t.load(e.folders[t._title])})),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach((e=>{if(!(e instanceof Jo)){if(e._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${e._name}"`);t.controllers[e._name]=e.save()}})),e&&this.folders.forEach((e=>{if(e._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${e._title}"`);t.folders[e._title]=e.save()})),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame((()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const n=e=>{e.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame((()=>{this.$children.style.height=r+"px"}))})),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach((e=>e.reset())),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach((e=>e.destroy()))}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach((t=>{e=e.concat(t.controllersRecursive())})),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach((t=>{e=e.concat(t.foldersRecursive())})),e}}class al{constructor(e,t,n){this.gui=new il;const r=this.gui.addFolder("Global");r.add(t.global,"wireframe").onChange((()=>{e.setGlobal(t.global)})),r.close();const i=this.gui.addFolder("Ground");i.add(t.ground,"show").onChange((()=>{e.setGround(t.ground)})),i.addColor(t.ground,"color").onChange((()=>{e.setGround(t.ground)})),i.add(t.ground,"grid").onChange((()=>{e.setGround(t.ground)})),i.close();const a=this.gui.addFolder("Environment");a.add(t.environment,"texture",["Pisa","Factory_Catwalk","Barce_Rooftop_C","Grand_Canyon_C","Hall","Ice_Lake","Old_Industrial_Hall"]).onChange((()=>{e.setEnvironmentTexture(t.environment.texture)})),a.add(t.environment,"diffuseIntensity",0,1,.001).onChange((()=>{e.setEnvironmentParams(t.environment)})),a.add(t.environment,"skyRoughness",0,8,.1).onChange((()=>{e.setEnvironmentParams(t.environment)})),a.close();const s=this.gui.addFolder("Camera");s.add(t.camera,"fov",10,180,1).onChange((()=>e.setCamera(t.camera))),s.add(t.camera,"type",["perspective","othographic"]).onChange((()=>e.setCamera(t.camera))),s.add(t.camera,"outputEncoding",["Linear","Gamma"]).onChange((()=>e.setCamera(t.camera))),s.close();const o=this.gui.addFolder("Lights"),l=o.addFolder("Ambient Light");l.add(t.light.ambient,"intensity",0,1,.001).onChange((()=>{e.setAmbientLight(t.light.ambient)})),l.addColor(t.light.ambient,"color").onChange((()=>{e.setAmbientLight(t.light.ambient)})),l.close();const u=o.addFolder("Directional Light 1");u.add(t.light.directional.directional1,"intensity",0,1,.001).onChange((()=>{e.setDirectionalLight(t.light.directional.directional1,1)})),u.addColor(t.light.directional.directional1,"color").onChange((()=>{e.setDirectionalLight(t.light.directional.directional1,1)}));const c=u.addFolder("direction");c.add(t.light.directional.directional1.direction,"x",0,360,.01).name("horizontal").onChange((()=>{e.setDirectionalLight(t.light.directional.directional1,1)})),c.add(t.light.directional.directional1.direction,"y",0,90,.01).name("verticle").onChange((()=>{e.setDirectionalLight(t.light.directional.directional1,1)})),c.close(),u.add(t.light.directional.directional1,"lensflare").onChange((()=>{e.setDirectionalLight(t.light.directional.directional1,1)})),u.add(t.light.directional.directional1,"shadowenable").onChange((()=>{e.setShadow(t.light.directional.directional1,1)})),u.add(t.light.directional.directional1,"shadowbias",-.1,.1,1e-4).onChange((()=>{e.setShadow(t.light.directional.directional1,1)})),u.add(t.light.directional.directional1,"shadowquality",["Low","Medium","High","Ultra"]).onChange((()=>{e.setShadow(t.light.directional.directional1,1)})),u.close();const h=o.addFolder("Directional Light 2");h.add(t.light.directional.directional2,"intensity",0,1,.001).onChange((()=>{e.setDirectionalLight(t.light.directional.directional2,2)})),h.addColor(t.light.directional.directional2,"color").onChange((()=>{e.setDirectionalLight(t.light.directional.directional2,2)}));const d=h.addFolder("direction");d.add(t.light.directional.directional2.direction,"x",0,360,.01).name("horizontal").onChange((()=>{e.setDirectionalLight(t.light.directional.directional2,2)})),d.add(t.light.directional.directional2.direction,"y",0,90,.01).name("verticle").onChange((()=>{e.setDirectionalLight(t.light.directional.directional2,2)})),d.close(),h.add(t.light.directional.directional2,"lensflare").onChange((()=>{e.setDirectionalLight(t.light.directional.directional2,2)})),h.add(t.light.directional.directional2,"shadowenable").onChange((()=>{e.setShadow(t.light.directional.directional2,2)})),h.add(t.light.directional.directional2,"shadowbias",-.1,.1,1e-4).onChange((()=>{e.setShadow(t.light.directional.directional2,2)})),h.add(t.light.directional.directional2,"shadowquality",["Low","Medium","High","Ultra"]).onChange((()=>{e.setShadow(t.light.directional.directional2,2)})),h.close();const f=o.addFolder("Camera Directional Light");f.add(t.light.directional.cameraDirectional,"intensity",0,1,.001).onChange((()=>{e.setDirectionalLight(t.light.directional.cameraDirectional,0)})),f.addColor(t.light.directional.cameraDirectional,"color").onChange((()=>{e.setDirectionalLight(t.light.directional.cameraDirectional,0)})),f.close(),o.close();const p=this.gui.addFolder("Post Effect");p.add(t.postEffect,"MSAA").onChange((()=>{e.setPostEffect(t.postEffect)}));const m=p.addFolder("Color Correction");m.add(t.postEffect.colorCorrection,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),m.add(t.postEffect.colorCorrection,"brightness",0,.5,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),m.add(t.postEffect.colorCorrection,"contrast",1,1.5,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),m.add(t.postEffect.colorCorrection,"exposure",0,1,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),m.add(t.postEffect.colorCorrection,"gamma",0,2,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),m.add(t.postEffect.colorCorrection,"saturation",-1,5,.001).onChange((()=>{e.setPostEffect(t.postEffect)})),m.close();const g=p.addFolder("Bloom");g.add(t.postEffect.bloom,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),g.add(t.postEffect.bloom,"strength",0,2,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),g.add(t.postEffect.bloom,"threshold",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),g.add(t.postEffect.bloom,"blurSize",0,5,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),g.add(t.postEffect.bloom,"smoothWidth",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),g.close();const _=p.addFolder("SSAO");_.add(t.postEffect.ssao,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),_.add(t.postEffect.ssao,"radius",0,5,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),_.add(t.postEffect.ssao,"power",0,5,1).onChange((()=>{e.setPostEffect(t.postEffect)})),_.add(t.postEffect.ssao,"bias",0,1,1e-4).onChange((()=>{e.setPostEffect(t.postEffect)})),_.add(t.postEffect.ssao,"intensity",0,2,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),_.add(t.postEffect.ssao,"quality",["Low","Medium","High","Ultra"]).onChange((()=>{e.setPostEffect(t.postEffect)})),_.close();const v=p.addFolder("SSR");v.add(t.postEffect.ssr,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),v.add(t.postEffect.ssr,"maxRayDistance",1,1e3,1).onChange((()=>{e.setPostEffect(t.postEffect)})),v.add(t.postEffect.ssr,"pixelStride",1,100,1).onChange((()=>{e.setPostEffect(t.postEffect)})),v.add(t.postEffect.ssr,"pixelStrideZCutoff",1,300,1).onChange((()=>{e.setPostEffect(t.postEffect)})),v.add(t.postEffect.ssr,"screenEdgeFadeStart",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),v.add(t.postEffect.ssr,"eyeFadeStart",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),v.add(t.postEffect.ssr,"eyeFadeEnd",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),v.add(t.postEffect.ssr,"minGlossiness",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),v.close();const b=p.addFolder("DOF");b.add(t.postEffect.dof,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"focalDepth",0,100,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"focalLength",0,100,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"fstop",0,1,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"maxblur",0,1,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"threshold",0,1,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"gain",0,2,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"bias",0,1,.001).onChange((()=>{e.setPostEffect(t.postEffect)})),b.add(t.postEffect.dof,"dithering",0,.001,1e-5).onChange((()=>{e.setPostEffect(t.postEffect)})),b.close();const x=p.addFolder("FXAA");x.add(t.postEffect.fxaa,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),x.close();const y=p.addFolder("ChromaticAberration");y.add(t.postEffect.chromaticaberration,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),y.add(t.postEffect.chromaticaberration,"chromaFactor",0,1,1e-4).onChange((()=>{e.setPostEffect(t.postEffect)})),y.close();const w=p.addFolder("Vignetting");w.add(t.postEffect.vignetting,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),w.addColor(t.postEffect.vignetting,"color").onChange((()=>{e.setPostEffect(t.postEffect)})),w.add(t.postEffect.vignetting,"offset",0,5,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),w.close();const A=p.addFolder("BlurEdge");A.add(t.postEffect.bluredge,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),A.add(t.postEffect.bluredge,"offset",0,5,.1).onChange((()=>{e.setPostEffect(t.postEffect)})),A.close();const E=p.addFolder("Film");E.add(t.postEffect.film,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),E.add(t.postEffect.film,"noiseIntensity",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),E.add(t.postEffect.film,"scanlinesIntensity",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),E.add(t.postEffect.film,"scanlinesCount",0,3e3,100).onChange((()=>{e.setPostEffect(t.postEffect)})),E.add(t.postEffect.film,"grayscale").onChange((()=>{e.setPostEffect(t.postEffect)})),E.close();const S=p.addFolder("Glow");S.add(t.postEffect.glow,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),S.add(t.postEffect.glow,"strength",0,2,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),S.add(t.postEffect.glow,"radius",0,5,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),S.add(t.postEffect.glow,"threshold",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),S.add(t.postEffect.glow,"smoothWidth",0,1,.01).onChange((()=>{e.setPostEffect(t.postEffect)})),S.close();const T=p.addFolder("Lensflare");T.add(t.postEffect.lensflare,"active").onChange((()=>{e.setPostEffect(t.postEffect)})),T.close(),p.close();const M=this.gui.addFolder("Debugger");M.add(t.debuggers,"type",["None","Normal","Depth","Position","SSAO","SSR","UV","Lensflare"]).onChange((()=>e.setDebugger(t.debuggers))),M.close(),this.animationFolder=this.gui.addFolder("Animation"),this.animationFolder.add(t.animation,"playAll"),this.animationFolder.add(t.animation,"stopAll"),this.animationFolder.add(t.animation,"timeScale",-2,2,.1).onChange((t=>e.timeScale=t)),this.animationFolder.close(),this.animationFolder.domElement.style.display="none",this.animCtrls=[],this.setAnimationFolder=function(t){if(this.animCtrls.forEach((e=>e.destroy())),this.animCtrls.length=0,t.length){this.animationFolder.domElement.style.display="";const n=e.actionStates={};t.forEach(((t,r)=>{n[t.name]=0===r;const i=this.animationFolder.add(n,t.name).listen();i.onChange((t=>{e.actions[r].weight=t?1:0})),this.animCtrls.push(i)}))}};const P={import:function(){n.importFileJSON()},export:function(){n.exportFileJSON(t)}},C=this.gui.addFolder("File");C.add(P,"import"),C.add(P,"export"),C.close()}}var sl=n(883),ol=n(700),ll=n.n(ol);const ul=JSON.parse('{"K":[{"generator":"babylon.js glTF exporter for 3ds max 2017 *","name":"3DS Max exporter","author":"The BabylonJS authors","type":"EXPORTER","docsURL":"https://github.com/BabylonJS/Exporters","bugsURL":"https://github.com/BabylonJS/Exporters/issues"},{"generator":"Khronos Blender glTF 2.0 exporter","name":"Blender exporter","author":"Khronos Group","type":"EXPORTER","docsURL":"https://github.com/KhronosGroup/glTF-Blender-Exporter","bugsURL":"https://github.com/KhronosGroup/glTF-Blender-Exporter/issues"},{"generator":"blendergltf *","name":"Blender exporter","author":"Kupoman","type":"EXPORTER","docsURL":"https://github.com/Kupoman/blendergltf","bugsURL":"https://github.com/Kupoman/blendergltf/issues"},{"generator":"COLLADA2GLTF","name":"COLLADA converter","author":"Khronos Group","type":"CONVERTER","docsURL":"https://github.com/KhronosGroup/COLLADA2GLTF","bugsURL":"https://github.com/KhronosGroup/COLLADA2GLTF/issues"},{"generator":"FBX2glTF *","name":"FBX converter","author":"Facebook","type":"CONVERTER","docsURL":"https://github.com/facebookincubator/FBX2glTF","bugsURL":"https://github.com/facebookincubator/FBX2glTF/issues"},{"generator":"Maya2glTF *","name":"Maya exporter","author":"Wonder Media Group","type":"EXPORTER","docsURL":"https://github.com/WonderMediaProductions/Maya2glTF","bugsURL":"https://github.com/WonderMediaProductions/Maya2glTF/issues"},{"generator":"babylon.js glTF exporter for maya 2018 *","name":"Maya exporter","author":"The BabylonJS authors","type":"EXPORTER","docsURL":"https://github.com/BabylonJS/Exporters","bugsURL":"https://github.com/BabylonJS/Exporters/issues"},{"generator":"Microsoft GLTF Exporter *","name":"Microsoft exporter","author":"Microsoft","type":"EXPORTER","bugsText":"From the Feedback Hub on Windows, use the *Apps > Paint 3D* categorise."},{"generator":"obj2gltf","name":"OBJ converter","author":"Analytical Graphics","type":"CONVERTER","docsURL":"https://github.com/AnalyticalGraphicsInc/OBJ2GLTF","bugsURL":"https://github.com/AnalyticalGraphicsInc/OBJ2GLTF/issues"},{"generator":"Sketchfab (OSG glTF plugin)","name":"Sketchfab","author":"Sketchfab","type":"OTHER","docsURL":"https://sketchfab.com","bugsURL":"https://help.sketchfab.com/hc/en-us/articles/360000048623-Reporting-a-bug"},{"generator":"Sketchup glTF Exporter by Centaur","name":"Sketchup exporter","author":"Centaur","type":"EXPORTER","docsURL":"https://extensions.sketchup.com/content/gltf-exporter"},{"generator":"glTF Tools for Unity","name":"Unity exporter","author":"Khronos Group","type":"EXPORTER","docsURL":"https://github.com/KhronosGroup/UnityGLTF","bugsURL":"https://github.com/KhronosGroup/UnityGLTF/issues"},{"generator":"THREE.GLTFExporter","name":"three.js exporter","author":"The three.js authors","type":"EXPORTER","docsURL":"https://threejs.org/docs/#examples/exporters/GLTFExporter","bugsURL":"https://github.com/mrdoob/three.js/issues"},{"generator":"Adobe Dimension","name":"Adobe Dimension glTF Exporter","author":"Adobe Dimension","type":"EXPORTER","docsURL":"","bugsURL":"https://feedback.adobedimension.com/forums/552760-adobe-dimension-bugs"}]}'),cl=["Errors","Warnings","Infos","Hints"];class hl{constructor(e){this.el=e,this.report=null,this.toggleTpl=n(263),this.toggleEl=document.createElement("div"),this.toggleEl.classList.add("report-toggle-wrap","hidden"),this.el.appendChild(this.toggleEl),this.reportTpl=n(880)}validate(e,t,n,r,i,a){((e,t)=>sl.validateBytes(e,t))(new Uint8Array(e),{externalResourceFunction:e=>this.resolveExternalResource(e,t,n,r,i)}).then((e=>this.setReport(e,a))).catch((e=>this.setReportException(e)))}resolveExternalResource(e,t,n,r,i){const a=i.extractUrlBase(t),s=n+decodeURI(e).replace(a,"").replace(/^(\.?\/)/,"");let o;if(r&&r.has(s)){const e=r.get(s);o=URL.createObjectURL(e)}return fetch(o||a+e).then((e=>e.arrayBuffer())).then((e=>(o&&URL.revokeObjectURL(o),new Uint8Array(e))))}setReport(e,t){const n=e&&e.info&&e.info.generator||"",r=ul.K.find((e=>-1===e.generator.indexOf("*")?e.generator===n:ll()(e.generator).test(n)));r&&r.name!==r.author&&(r.name=`${r.name} by ${r.author}`),e.generator=r,e.issues.maxSeverity=-1,cl.forEach(((t,n)=>{e.issues[`num${t}`]>0&&-1===e.issues.maxSeverity&&(e.issues.maxSeverity=n)})),e.errors=e.issues.messages.filter((e=>0===e.severity)),e.warnings=e.issues.messages.filter((e=>1===e.severity)),e.infos=e.issues.messages.filter((e=>2===e.severity)),e.hints=e.issues.messages.filter((e=>3===e.severity)),function(e){const t={ACCESSOR_NON_UNIT:{message:"{count} accessor elements not of unit length: 0. [AGGREGATED]",pointerCounts:{}},ACCESSOR_ANIMATION_INPUT_NON_INCREASING:{message:"{count} animation input accessor elements not in ascending order. [AGGREGATED]",pointerCounts:{}}};e.errors.forEach((e=>{t[e.code]&&(t[e.code].pointerCounts[e.pointer]||(t[e.code].pointerCounts[e.pointer]=0),t[e.code].pointerCounts[e.pointer]++)})),e.errors=e.errors.filter((e=>!t[e.code]||!t[e.code].pointerCounts[e.pointer]||t[e.code].pointerCounts[e.pointer]<2)),Object.keys(t).forEach((n=>{Object.keys(t[n].pointerCounts).forEach((r=>{e.errors.push({code:n,pointer:r,message:t[n].message.replace("{count}",t[n].pointerCounts[r])})}))}))}(e),this.report=e,this.setResponse(t),this.toggleEl.innerHTML=this.toggleTpl(e),this.showToggle(),this.bindListeners()}setResponse(e){const t=e&&e.gltf;if(t&&t.asset&&t.asset.extras){const e=t.asset.extras;this.report.info.extras={},e.author&&(this.report.info.extras.author=fl(dl(e.author))),e.license&&(this.report.info.extras.license=fl(dl(e.license))),e.source&&(this.report.info.extras.source=fl(dl(e.source))),e.title&&(this.report.info.extras.title=e.title)}}setReportException(e){this.report=null,this.toggleEl.innerHTML=this.toggleTpl({reportError:e,level:0}),this.showToggle(),this.bindListeners()}bindListeners(){this.toggleEl.querySelector(".report-toggle").addEventListener("click",(()=>this.showLightbox())),this.toggleEl.querySelector(".report-toggle-close").addEventListener("click",(e=>{this.hideToggle(),e.stopPropagation()}))}showToggle(){this.toggleEl.classList.remove("hidden")}hideToggle(){this.toggleEl.classList.add("hidden")}showLightbox(){this.report&&(window.open("","_blank").document.body.innerHTML=this.reportTpl(Object.assign({},this.report,{location})))}}function dl(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function fl(e){return e.replace(/\b(?:https?):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a target="_blank" href="$&">$&</a>').replace(/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim,'<a target="_blank" href="mailto:$1">$1</a>')}var pl=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function ml(){var e=this;function t(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.build_tree=function(n){var r,i,a,s=e.dyn_tree,o=e.stat_desc.static_tree,l=e.stat_desc.elems,u=-1;for(n.heap_len=0,n.heap_max=573,r=0;r<l;r++)0!==s[2*r]?(n.heap[++n.heap_len]=u=r,n.depth[r]=0):s[2*r+1]=0;for(;n.heap_len<2;)s[2*(a=n.heap[++n.heap_len]=u<2?++u:0)]=1,n.depth[a]=0,n.opt_len--,o&&(n.static_len-=o[2*a+1]);for(e.max_code=u,r=Math.floor(n.heap_len/2);r>=1;r--)n.pqdownheap(s,r);a=l;do{r=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(s,1),i=n.heap[1],n.heap[--n.heap_max]=r,n.heap[--n.heap_max]=i,s[2*a]=s[2*r]+s[2*i],n.depth[a]=Math.max(n.depth[r],n.depth[i])+1,s[2*r+1]=s[2*i+1]=a,n.heap[1]=a++,n.pqdownheap(s,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(t){var n,r,i,a,s,o,l=e.dyn_tree,u=e.stat_desc.static_tree,c=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,d=e.stat_desc.max_length,f=0;for(a=0;a<=15;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(a=l[2*l[2*(r=t.heap[n])+1]+1]+1)>d&&(a=d,f++),l[2*r+1]=a,r>e.max_code||(t.bl_count[a]++,s=0,r>=h&&(s=c[r-h]),t.opt_len+=(o=l[2*r])*(a+s),u&&(t.static_len+=o*(u[2*r+1]+s)));if(0!==f){do{for(a=d-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[d]--,f-=2}while(f>0);for(a=d;0!==a;a--)for(r=t.bl_count[a];0!==r;)(i=t.heap[--n])>e.max_code||(l[2*i+1]!=a&&(t.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(n),function(e,n,r){var i,a,s,o=[],l=0;for(i=1;i<=15;i++)o[i]=l=l+r[i-1]<<1;for(a=0;a<=n;a++)0!==(s=e[2*a+1])&&(e[2*a]=t(o[s]++,s))}(s,e.max_code,n.bl_count)}}function gl(e,t,n,r,i){var a=this;a.static_tree=e,a.extra_bits=t,a.extra_base=n,a.elems=r,a.max_length=i}function _l(e,t,n,r,i){var a=this;a.good_length=e,a.max_lazy=t,a.nice_length=n,a.max_chain=r,a.func=i}ml._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],ml.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],ml.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],ml.d_code=function(e){return e<256?pl[e]:pl[256+(e>>>7)]},ml.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ml.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ml.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ml.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],gl.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],gl.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],gl.static_l_desc=new gl(gl.static_ltree,ml.extra_lbits,257,286,15),gl.static_d_desc=new gl(gl.static_dtree,ml.extra_dbits,0,30,15),gl.static_bl_desc=new gl(null,ml.extra_blbits,0,19,7);var vl=[new _l(0,0,0,0,0),new _l(4,4,8,4,1),new _l(4,5,16,8,1),new _l(4,6,32,32,1),new _l(4,4,16,16,2),new _l(8,16,32,32,2),new _l(8,16,128,128,2),new _l(8,32,128,256,2),new _l(32,128,258,1024,2),new _l(32,258,258,4096,2)],bl=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function xl(e,t,n,r){var i=e[2*t],a=e[2*n];return i<a||i==a&&r[t]<=r[n]}function yl(){var e,t,n,r,i,a,s,o,l,u,c,h,d,f,p,m,g,_,v,b,x,y,w,A,E,S,T,M,P,C,F,L,N,I,R,D,U,O,k,$,z,B=this,G=new ml,j=new ml,V=new ml;function H(){var e;for(e=0;e<286;e++)F[2*e]=0;for(e=0;e<30;e++)L[2*e]=0;for(e=0;e<19;e++)N[2*e]=0;F[512]=1,B.opt_len=B.static_len=0,D=O=0}function X(e,t){var n,r,i=-1,a=e[1],s=0,o=7,l=4;for(0===a&&(o=138,l=3),e[2*(t+1)+1]=65535,n=0;n<=t;n++)r=a,a=e[2*(n+1)+1],++s<o&&r==a||(s<l?N[2*r]+=s:0!==r?(r!=i&&N[2*r]++,N[32]++):s<=10?N[34]++:N[36]++,s=0,i=r,0===a?(o=138,l=3):r==a?(o=6,l=3):(o=7,l=4))}function W(e){B.pending_buf[B.pending++]=e}function q(e){W(255&e),W(e>>>8&255)}function Y(e,t){var n,r=t;z>16-r?(q($|=(n=e)<<z&65535),$=n>>>16-z,z+=r-16):($|=e<<z&65535,z+=r)}function Q(e,t){var n=2*e;Y(65535&t[n],65535&t[n+1])}function Z(e,t){var n,r,i=-1,a=e[1],s=0,o=7,l=4;for(0===a&&(o=138,l=3),n=0;n<=t;n++)if(r=a,a=e[2*(n+1)+1],!(++s<o&&r==a)){if(s<l)do{Q(r,N)}while(0!=--s);else 0!==r?(r!=i&&(Q(r,N),s--),Q(16,N),Y(s-3,2)):s<=10?(Q(17,N),Y(s-3,3)):(Q(18,N),Y(s-11,7));s=0,i=r,0===a?(o=138,l=3):r==a?(o=6,l=3):(o=7,l=4)}}function K(){16==z?(q($),$=0,z=0):z>=8&&(W(255&$),$>>>=8,z-=8)}function J(e,t){var n,r,i;if(B.pending_buf[U+2*D]=e>>>8&255,B.pending_buf[U+2*D+1]=255&e,B.pending_buf[I+D]=255&t,D++,0===e?F[2*t]++:(O++,e--,F[2*(ml._length_code[t]+256+1)]++,L[2*ml.d_code(e)]++),0==(8191&D)&&T>2){for(n=8*D,r=x-g,i=0;i<30;i++)n+=L[2*i]*(5+ml.extra_dbits[i]);if(n>>>=3,O<Math.floor(D/2)&&n<Math.floor(r/2))return!0}return D==R-1}function ee(e,t){var n,r,i,a,s=0;if(0!==D)do{n=B.pending_buf[U+2*s]<<8&65280|255&B.pending_buf[U+2*s+1],r=255&B.pending_buf[I+s],s++,0===n?Q(r,e):(Q((i=ml._length_code[r])+256+1,e),0!==(a=ml.extra_lbits[i])&&Y(r-=ml.base_length[i],a),n--,Q(i=ml.d_code(n),t),0!==(a=ml.extra_dbits[i])&&Y(n-=ml.base_dist[i],a))}while(s<D);Q(256,e),k=e[513]}function te(){z>8?q($):z>0&&W(255&$),$=0,z=0}function ne(e,t,n){Y(0+(n?1:0),3),function(e,t,n){te(),k=8,q(t),q(~t),B.pending_buf.set(o.subarray(e,e+t),B.pending),B.pending+=t}(e,t)}function re(t){(function(e,t,n){var r,i,a=0;T>0?(G.build_tree(B),j.build_tree(B),a=function(){var e;for(X(F,G.max_code),X(L,j.max_code),V.build_tree(B),e=18;e>=3&&0===N[2*ml.bl_order[e]+1];e--);return B.opt_len+=3*(e+1)+5+5+4,e}(),(i=B.static_len+3+7>>>3)<=(r=B.opt_len+3+7>>>3)&&(r=i)):r=i=t+5,t+4<=r&&-1!=e?ne(e,t,n):i==r?(Y(2+(n?1:0),3),ee(gl.static_ltree,gl.static_dtree)):(Y(4+(n?1:0),3),function(e,t,n){var r;for(Y(e-257,5),Y(t-1,5),Y(n-4,4),r=0;r<n;r++)Y(N[2*ml.bl_order[r]+1],3);Z(F,e-1),Z(L,t-1)}(G.max_code+1,j.max_code+1,a+1),ee(F,L)),H(),n&&te()})(g>=0?g:-1,x-g,t),g=x,e.flush_pending()}function ie(){var t,n,r,a;do{if(0==(a=l-w-x)&&0===x&&0===w)a=i;else if(-1==a)a--;else if(x>=i+i-262){o.set(o.subarray(i,i+i),0),y-=i,x-=i,g-=i,r=t=d;do{n=65535&c[--r],c[r]=n>=i?n-i:0}while(0!=--t);r=t=i;do{n=65535&u[--r],u[r]=n>=i?n-i:0}while(0!=--t);a+=i}if(0===e.avail_in)return;t=e.read_buf(o,x+w,a),(w+=t)>=3&&(h=((h=255&o[x])<<m^255&o[x+1])&p)}while(w<262&&0!==e.avail_in)}function ae(e){var t,n,r=E,a=x,l=A,c=x>i-262?x-(i-262):0,h=C,d=s,f=x+258,p=o[a+l-1],m=o[a+l];A>=P&&(r>>=2),h>w&&(h=w);do{if(o[(t=e)+l]==m&&o[t+l-1]==p&&o[t]==o[a]&&o[++t]==o[a+1]){a+=2,t++;do{}while(o[++a]==o[++t]&&o[++a]==o[++t]&&o[++a]==o[++t]&&o[++a]==o[++t]&&o[++a]==o[++t]&&o[++a]==o[++t]&&o[++a]==o[++t]&&o[++a]==o[++t]&&a<f);if(n=258-(f-a),a=f-258,n>l){if(y=e,l=n,n>=h)break;p=o[a+l-1],m=o[a+l]}}}while((e=65535&u[e&d])>c&&0!=--r);return l<=w?l:w}B.depth=[],B.bl_count=[],B.heap=[],F=[],L=[],N=[],B.pqdownheap=function(e,t){for(var n=B.heap,r=n[t],i=t<<1;i<=B.heap_len&&(i<B.heap_len&&xl(e,n[i+1],n[i],B.depth)&&i++,!xl(e,r,n[i],B.depth));)n[t]=n[i],t=i,i<<=1;n[t]=r},B.deflateInit=function(e,v,y,D,O,X){return D||(D=8),O||(O=8),X||(X=0),e.msg=null,-1==v&&(v=6),O<1||O>9||8!=D||y<9||y>15||v<0||v>9||X<0||X>2?-2:(e.dstate=B,s=(i=1<<(a=y))-1,p=(d=1<<(f=O+7))-1,m=Math.floor((f+3-1)/3),o=new Uint8Array(2*i),u=[],c=[],R=1<<O+6,B.pending_buf=new Uint8Array(4*R),n=4*R,U=Math.floor(R/2),I=3*R,T=v,M=X,function(e){return e.total_in=e.total_out=0,e.msg=null,B.pending=0,B.pending_out=0,t=113,r=0,G.dyn_tree=F,G.stat_desc=gl.static_l_desc,j.dyn_tree=L,j.stat_desc=gl.static_d_desc,V.dyn_tree=N,V.stat_desc=gl.static_bl_desc,$=0,z=0,k=8,H(),function(){var e;for(l=2*i,c[d-1]=0,e=0;e<d-1;e++)c[e]=0;S=vl[T].max_lazy,P=vl[T].good_length,C=vl[T].nice_length,E=vl[T].max_chain,x=0,g=0,w=0,_=A=2,b=0,h=0}(),0}(e))},B.deflateEnd=function(){return 42!=t&&113!=t&&666!=t?-2:(B.pending_buf=null,c=null,u=null,o=null,B.dstate=null,113==t?-3:0)},B.deflateParams=function(e,t,n){var r=0;return-1==t&&(t=6),t<0||t>9||n<0||n>2?-2:(vl[T].func!=vl[t].func&&0!==e.total_in&&(r=e.deflate(1)),T!=t&&(S=vl[T=t].max_lazy,P=vl[T].good_length,C=vl[T].nice_length,E=vl[T].max_chain),M=n,r)},B.deflateSetDictionary=function(e,n,r){var a,l=r,d=0;if(!n||42!=t)return-2;if(l<3)return 0;for(l>i-262&&(d=r-(l=i-262)),o.set(n.subarray(d,d+l),0),x=l,g=l,h=((h=255&o[0])<<m^255&o[1])&p,a=0;a<=l-3;a++)u[a&s]=c[h=(h<<m^255&o[a+2])&p],c[h]=a;return 0},B.deflate=function(l,f){var E,P,C,F,L,N;if(f>4||f<0)return-2;if(!l.next_out||!l.next_in&&0!==l.avail_in||666==t&&4!=f)return l.msg=bl[4],-2;if(0===l.avail_out)return l.msg=bl[7],-5;if(e=l,F=r,r=f,42==t&&(P=8+(a-8<<4)<<8,(C=(T-1&255)>>1)>3&&(C=3),P|=C<<6,0!==x&&(P|=32),t=113,W((N=P+=31-P%31)>>8&255),W(255&N)),0!==B.pending){if(e.flush_pending(),0===e.avail_out)return r=-1,0}else if(0===e.avail_in&&f<=F&&4!=f)return e.msg=bl[7],-5;if(666==t&&0!==e.avail_in)return l.msg=bl[7],-5;if(0!==e.avail_in||0!==w||0!=f&&666!=t){switch(L=-1,vl[T].func){case 0:L=function(t){var r,a=65535;for(a>n-5&&(a=n-5);;){if(w<=1){if(ie(),0===w&&0==t)return 0;if(0===w)break}if(x+=w,w=0,r=g+a,(0===x||x>=r)&&(w=x-r,x=r,re(!1),0===e.avail_out))return 0;if(x-g>=i-262&&(re(!1),0===e.avail_out))return 0}return re(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f);break;case 1:L=function(t){for(var n,r=0;;){if(w<262){if(ie(),w<262&&0==t)return 0;if(0===w)break}if(w>=3&&(r=65535&c[h=(h<<m^255&o[x+2])&p],u[x&s]=c[h],c[h]=x),0!==r&&(x-r&65535)<=i-262&&2!=M&&(_=ae(r)),_>=3)if(n=J(x-y,_-3),w-=_,_<=S&&w>=3){_--;do{x++,r=65535&c[h=(h<<m^255&o[x+2])&p],u[x&s]=c[h],c[h]=x}while(0!=--_);x++}else x+=_,_=0,h=((h=255&o[x])<<m^255&o[x+1])&p;else n=J(0,255&o[x]),w--,x++;if(n&&(re(!1),0===e.avail_out))return 0}return re(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f);break;case 2:L=function(t){for(var n,r,a=0;;){if(w<262){if(ie(),w<262&&0==t)return 0;if(0===w)break}if(w>=3&&(a=65535&c[h=(h<<m^255&o[x+2])&p],u[x&s]=c[h],c[h]=x),A=_,v=y,_=2,0!==a&&A<S&&(x-a&65535)<=i-262&&(2!=M&&(_=ae(a)),_<=5&&(1==M||3==_&&x-y>4096)&&(_=2)),A>=3&&_<=A){r=x+w-3,n=J(x-1-v,A-3),w-=A-1,A-=2;do{++x<=r&&(a=65535&c[h=(h<<m^255&o[x+2])&p],u[x&s]=c[h],c[h]=x)}while(0!=--A);if(b=0,_=2,x++,n&&(re(!1),0===e.avail_out))return 0}else if(0!==b){if((n=J(0,255&o[x-1]))&&re(!1),x++,w--,0===e.avail_out)return 0}else b=1,x++,w--}return 0!==b&&(n=J(0,255&o[x-1]),b=0),re(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f)}if(2!=L&&3!=L||(t=666),0==L||2==L)return 0===e.avail_out&&(r=-1),0;if(1==L){if(1==f)Y(2,3),Q(256,gl.static_ltree),K(),1+k+10-z<9&&(Y(2,3),Q(256,gl.static_ltree),K()),k=7;else if(ne(0,0,!1),3==f)for(E=0;E<d;E++)c[E]=0;if(e.flush_pending(),0===e.avail_out)return r=-1,0}}return 4!=f?0:1}}function wl(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}function Al(e){var t=new wl,n=512,r=new Uint8Array(n),i=e?e.level:-1;void 0===i&&(i=-1),t.deflateInit(i),t.next_out=r,this.append=function(e,i){var a,s=[],o=0,l=0,u=0;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=n,0!=t.deflate(0))throw new Error("deflating: "+t.msg);t.next_out_index&&s.push(t.next_out_index==n?new Uint8Array(r):new Uint8Array(r.subarray(0,t.next_out_index))),u+=t.next_out_index,i&&t.next_in_index>0&&t.next_in_index!=o&&(i(t.next_in_index),o=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return a=new Uint8Array(u),s.forEach((function(e){a.set(e,l),l+=e.length})),a}},this.flush=function(){var e,i,a=[],s=0,o=0;do{if(t.next_out_index=0,t.avail_out=n,1!=(e=t.deflate(4))&&0!=e)throw new Error("deflating: "+t.msg);n-t.avail_out>0&&a.push(new Uint8Array(r.subarray(0,t.next_out_index))),o+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),i=new Uint8Array(o),a.forEach((function(e){i.set(e,s),s+=e.length})),i}}wl.prototype={deflateInit:function(e,t){var n=this;return n.dstate=new yl,t||(t=15),n.dstate.deflateInit(n,e,t)},deflate:function(e){var t=this;return t.dstate?t.dstate.deflate(t,e):-2},deflateEnd:function(){var e=this;if(!e.dstate)return-2;var t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){var n=this;return n.dstate?n.dstate.deflateParams(n,e,t):-2},deflateSetDictionary:function(e,t){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,e,t):-2},read_buf:function(e,t,n){var r=this,i=r.avail_in;return i>n&&(i=n),0===i?0:(r.avail_in-=i,e.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),t),r.next_in_index+=i,r.total_in+=i,i)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}},self._zipjs_Deflater=Al;var El=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Sl=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],Tl=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],Ml=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Pl=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Cl=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Fl=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function Ll(){var e,t,n,r,i,a;function s(e,t,s,o,l,u,c,h,d,f,p){var m,g,_,v,b,x,y,w,A,E,S,T,M,P,C;E=0,b=s;do{n[e[t+E]]++,E++,b--}while(0!==b);if(n[0]==s)return c[0]=-1,h[0]=0,0;for(w=h[0],x=1;x<=15&&0===n[x];x++);for(y=x,w<x&&(w=x),b=15;0!==b&&0===n[b];b--);for(_=b,w>b&&(w=b),h[0]=w,P=1<<x;x<b;x++,P<<=1)if((P-=n[x])<0)return-3;if((P-=n[b])<0)return-3;for(n[b]+=P,a[1]=x=0,E=1,M=2;0!=--b;)a[M]=x+=n[E],M++,E++;b=0,E=0;do{0!==(x=e[t+E])&&(p[a[x]++]=b),E++}while(++b<s);for(s=a[_],a[0]=b=0,E=0,v=-1,T=-w,i[0]=0,S=0,C=0;y<=_;y++)for(m=n[y];0!=m--;){for(;y>T+w;){if(v++,C=(C=_-(T+=w))>w?w:C,(g=1<<(x=y-T))>m+1&&(g-=m+1,M=y,x<C))for(;++x<C&&!((g<<=1)<=n[++M]);)g-=n[M];if(f[0]+(C=1<<x)>1440)return-3;i[v]=S=f[0],f[0]+=C,0!==v?(a[v]=b,r[0]=x,r[1]=w,r[2]=S-i[v-1]-(x=b>>>T-w),d.set(r,3*(i[v-1]+x))):c[0]=S}for(r[1]=y-T,E>=s?r[0]=192:p[E]<o?(r[0]=p[E]<256?0:96,r[2]=p[E++]):(r[0]=u[p[E]-o]+16+64,r[2]=l[p[E++]-o]),g=1<<y-T,x=b>>>T;x<C;x+=g)d.set(r,3*(S+x));for(x=1<<y-1;0!=(b&x);x>>>=1)b^=x;for(b^=x,A=(1<<T)-1;(b&A)!=a[v];)v--,A=(1<<(T-=w))-1}return 0!==P&&1!=_?-5:0}function o(s){var o;for(e||(e=[],t=[],n=new Int32Array(16),r=[],i=new Int32Array(15),a=new Int32Array(16)),t.length<s&&(t=[]),o=0;o<s;o++)t[o]=0;for(o=0;o<16;o++)n[o]=0;for(o=0;o<3;o++)r[o]=0;i.set(n.subarray(0,15),0),a.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(n,r,i,a,l){var u;return o(19),e[0]=0,-3==(u=s(n,0,19,19,null,null,i,r,a,e,t))?l.msg="oversubscribed dynamic bit lengths tree":-5!=u&&0!==r[0]||(l.msg="incomplete dynamic bit lengths tree",u=-3),u},this.inflate_trees_dynamic=function(n,r,i,a,l,u,c,h,d){var f;return o(288),e[0]=0,0!=(f=s(i,0,n,257,Ml,Pl,u,a,h,e,t))||0===a[0]?(-3==f?d.msg="oversubscribed literal/length tree":-4!=f&&(d.msg="incomplete literal/length tree",f=-3),f):(o(288),0!=(f=s(i,n,r,0,Cl,Fl,c,l,h,e,t))||0===l[0]&&n>257?(-3==f?d.msg="oversubscribed distance tree":-5==f?(d.msg="incomplete distance tree",f=-3):-4!=f&&(d.msg="empty distance tree with lengths",f=-3),f):0)}}function Nl(){var e,t,n,r,i=this,a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0;function m(e,t,n,r,i,a,s,o){var l,u,c,h,d,f,p,m,g,_,v,b,x,y,w,A;p=o.next_in_index,m=o.avail_in,d=s.bitb,f=s.bitk,_=(g=s.write)<s.read?s.read-g-1:s.end-g,v=El[e],b=El[t];do{for(;f<20;)m--,d|=(255&o.read_byte(p++))<<f,f+=8;if(0!==(h=(u=n)[A=3*((c=r)+(l=d&v))]))for(;;){if(d>>=u[A+1],f-=u[A+1],0!=(16&h)){for(x=u[A+2]+(d&El[h&=15]),d>>=h,f-=h;f<15;)m--,d|=(255&o.read_byte(p++))<<f,f+=8;for(h=(u=i)[A=3*((c=a)+(l=d&b))];;){if(d>>=u[A+1],f-=u[A+1],0!=(16&h)){for(h&=15;f<h;)m--,d|=(255&o.read_byte(p++))<<f,f+=8;if(y=u[A+2]+(d&El[h]),d>>=h,f-=h,_-=x,g>=y)g-(w=g-y)>0&&2>g-w?(s.window[g++]=s.window[w++],s.window[g++]=s.window[w++],x-=2):(s.window.set(s.window.subarray(w,w+2),g),g+=2,w+=2,x-=2);else{w=g-y;do{w+=s.end}while(w<0);if(x>(h=s.end-w)){if(x-=h,g-w>0&&h>g-w)do{s.window[g++]=s.window[w++]}while(0!=--h);else s.window.set(s.window.subarray(w,w+h),g),g+=h,w+=h,h=0;w=0}}if(g-w>0&&x>g-w)do{s.window[g++]=s.window[w++]}while(0!=--x);else s.window.set(s.window.subarray(w,w+x),g),g+=x,w+=x,x=0;break}if(0!=(64&h))return o.msg="invalid distance code",m+=x=f>>3<(x=o.avail_in-m)?f>>3:x,p-=x,f-=x<<3,s.bitb=d,s.bitk=f,o.avail_in=m,o.total_in+=p-o.next_in_index,o.next_in_index=p,s.write=g,-3;l+=u[A+2],h=u[A=3*(c+(l+=d&El[h]))]}break}if(0!=(64&h))return 0!=(32&h)?(m+=x=f>>3<(x=o.avail_in-m)?f>>3:x,p-=x,f-=x<<3,s.bitb=d,s.bitk=f,o.avail_in=m,o.total_in+=p-o.next_in_index,o.next_in_index=p,s.write=g,1):(o.msg="invalid literal/length code",m+=x=f>>3<(x=o.avail_in-m)?f>>3:x,p-=x,f-=x<<3,s.bitb=d,s.bitk=f,o.avail_in=m,o.total_in+=p-o.next_in_index,o.next_in_index=p,s.write=g,-3);if(l+=u[A+2],0===(h=u[A=3*(c+(l+=d&El[h]))])){d>>=u[A+1],f-=u[A+1],s.window[g++]=u[A+2],_--;break}}else d>>=u[A+1],f-=u[A+1],s.window[g++]=u[A+2],_--}while(_>=258&&m>=10);return m+=x=f>>3<(x=o.avail_in-m)?f>>3:x,p-=x,f-=x<<3,s.bitb=d,s.bitk=f,o.avail_in=m,o.total_in+=p-o.next_in_index,o.next_in_index=p,s.write=g,0}i.init=function(i,a,s,o,l,u){e=0,h=i,d=a,n=s,f=o,r=l,p=u,t=null},i.proc=function(i,g,_){var v,b,x,y,w,A,E,S=0,T=0,M=0;for(M=g.next_in_index,y=g.avail_in,S=i.bitb,T=i.bitk,A=(w=i.write)<i.read?i.read-w-1:i.end-w;;)switch(e){case 0:if(A>=258&&y>=10&&(i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,_=m(h,d,n,f,r,p,i,g),M=g.next_in_index,y=g.avail_in,S=i.bitb,T=i.bitk,A=(w=i.write)<i.read?i.read-w-1:i.end-w,0!=_)){e=1==_?7:9;break}o=h,t=n,s=f,e=1;case 1:for(v=o;T<v;){if(0===y)return i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);_=0,y--,S|=(255&g.read_byte(M++))<<T,T+=8}if(S>>>=t[1+(b=3*(s+(S&El[v])))],T-=t[b+1],0===(x=t[b])){l=t[b+2],e=6;break}if(0!=(16&x)){u=15&x,a=t[b+2],e=2;break}if(0==(64&x)){o=x,s=b/3+t[b+2];break}if(0!=(32&x)){e=7;break}return e=9,g.msg="invalid literal/length code",_=-3,i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);case 2:for(v=u;T<v;){if(0===y)return i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);_=0,y--,S|=(255&g.read_byte(M++))<<T,T+=8}a+=S&El[v],S>>=v,T-=v,o=d,t=r,s=p,e=3;case 3:for(v=o;T<v;){if(0===y)return i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);_=0,y--,S|=(255&g.read_byte(M++))<<T,T+=8}if(S>>=t[1+(b=3*(s+(S&El[v])))],T-=t[b+1],0!=(16&(x=t[b]))){u=15&x,c=t[b+2],e=4;break}if(0==(64&x)){o=x,s=b/3+t[b+2];break}return e=9,g.msg="invalid distance code",_=-3,i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);case 4:for(v=u;T<v;){if(0===y)return i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);_=0,y--,S|=(255&g.read_byte(M++))<<T,T+=8}c+=S&El[v],S>>=v,T-=v,e=5;case 5:for(E=w-c;E<0;)E+=i.end;for(;0!==a;){if(0===A&&(w==i.end&&0!==i.read&&(A=(w=0)<i.read?i.read-w-1:i.end-w),0===A&&(i.write=w,_=i.inflate_flush(g,_),A=(w=i.write)<i.read?i.read-w-1:i.end-w,w==i.end&&0!==i.read&&(A=(w=0)<i.read?i.read-w-1:i.end-w),0===A)))return i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);i.window[w++]=i.window[E++],A--,E==i.end&&(E=0),a--}e=0;break;case 6:if(0===A&&(w==i.end&&0!==i.read&&(A=(w=0)<i.read?i.read-w-1:i.end-w),0===A&&(i.write=w,_=i.inflate_flush(g,_),A=(w=i.write)<i.read?i.read-w-1:i.end-w,w==i.end&&0!==i.read&&(A=(w=0)<i.read?i.read-w-1:i.end-w),0===A)))return i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);_=0,i.window[w++]=l,A--,e=0;break;case 7:if(T>7&&(T-=8,y++,M--),i.write=w,_=i.inflate_flush(g,_),A=(w=i.write)<i.read?i.read-w-1:i.end-w,i.read!=i.write)return i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);e=8;case 8:return _=1,i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);case 9:return _=-3,i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_);default:return _=-2,i.bitb=S,i.bitk=T,g.avail_in=y,g.total_in+=M-g.next_in_index,g.next_in_index=M,i.write=w,i.inflate_flush(g,_)}},i.free=function(){}}Ll.inflate_trees_fixed=function(e,t,n,r){return e[0]=9,t[0]=5,n[0]=Sl,r[0]=Tl,0};var Il=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function Rl(e,t){var n,r=this,i=0,a=0,s=0,o=0,l=[0],u=[0],c=new Nl,h=0,d=new Int32Array(4320),f=new Ll;r.bitk=0,r.bitb=0,r.window=new Uint8Array(t),r.end=t,r.read=0,r.write=0,r.reset=function(e,t){t&&(t[0]=0),6==i&&c.free(e),i=0,r.bitk=0,r.bitb=0,r.read=r.write=0},r.reset(e,null),r.inflate_flush=function(e,t){var n,i,a;return i=e.next_out_index,(n=((a=r.read)<=r.write?r.write:r.end)-a)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.window.subarray(a,a+n),i),i+=n,(a+=n)==r.end&&(a=0,r.write==r.end&&(r.write=0),(n=r.write-a)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.window.subarray(a,a+n),i),i+=n,a+=n),e.next_out_index=i,r.read=a,t},r.proc=function(e,t){var p,m,g,_,v,b,x,y;for(_=e.next_in_index,v=e.avail_in,m=r.bitb,g=r.bitk,x=(b=r.write)<r.read?r.read-b-1:r.end-b;;)switch(i){case 0:for(;g<3;){if(0===v)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);t=0,v--,m|=(255&e.read_byte(_++))<<g,g+=8}switch(h=1&(p=7&m),p>>>1){case 0:m>>>=3,m>>>=p=7&(g-=3),g-=p,i=1;break;case 1:var w=[],A=[],E=[[]],S=[[]];Ll.inflate_trees_fixed(w,A,E,S),c.init(w[0],A[0],E[0],0,S[0],0),m>>>=3,g-=3,i=6;break;case 2:m>>>=3,g-=3,i=3;break;case 3:return m>>>=3,g-=3,i=9,e.msg="invalid block type",t=-3,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t)}break;case 1:for(;g<32;){if(0===v)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);t=0,v--,m|=(255&e.read_byte(_++))<<g,g+=8}if((~m>>>16&65535)!=(65535&m))return i=9,e.msg="invalid stored block lengths",t=-3,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);a=65535&m,m=g=0,i=0!==a?2:0!==h?7:0;break;case 2:if(0===v)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);if(0===x&&(b==r.end&&0!==r.read&&(x=(b=0)<r.read?r.read-b-1:r.end-b),0===x&&(r.write=b,t=r.inflate_flush(e,t),x=(b=r.write)<r.read?r.read-b-1:r.end-b,b==r.end&&0!==r.read&&(x=(b=0)<r.read?r.read-b-1:r.end-b),0===x)))return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);if(t=0,(p=a)>v&&(p=v),p>x&&(p=x),r.window.set(e.read_buf(_,p),b),_+=p,v-=p,b+=p,x-=p,0!=(a-=p))break;i=0!==h?7:0;break;case 3:for(;g<14;){if(0===v)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);t=0,v--,m|=(255&e.read_byte(_++))<<g,g+=8}if(s=p=16383&m,(31&p)>29||(p>>5&31)>29)return i=9,e.msg="too many length or distance symbols",t=-3,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);if(p=258+(31&p)+(p>>5&31),!n||n.length<p)n=[];else for(y=0;y<p;y++)n[y]=0;m>>>=14,g-=14,o=0,i=4;case 4:for(;o<4+(s>>>10);){for(;g<3;){if(0===v)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);t=0,v--,m|=(255&e.read_byte(_++))<<g,g+=8}n[Il[o++]]=7&m,m>>>=3,g-=3}for(;o<19;)n[Il[o++]]=0;if(l[0]=7,0!=(p=f.inflate_trees_bits(n,l,u,d,e)))return-3==(t=p)&&(n=null,i=9),r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);o=0,i=5;case 5:for(;!(o>=258+(31&(p=s))+(p>>5&31));){var T,M;for(p=l[0];g<p;){if(0===v)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);t=0,v--,m|=(255&e.read_byte(_++))<<g,g+=8}if((M=d[3*(u[0]+(m&El[p=d[3*(u[0]+(m&El[p]))+1]]))+2])<16)m>>>=p,g-=p,n[o++]=M;else{for(y=18==M?7:M-14,T=18==M?11:3;g<p+y;){if(0===v)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);t=0,v--,m|=(255&e.read_byte(_++))<<g,g+=8}if(g-=p,T+=(m>>>=p)&El[y],m>>>=y,g-=y,(y=o)+T>258+(31&(p=s))+(p>>5&31)||16==M&&y<1)return n=null,i=9,e.msg="invalid bit length repeat",t=-3,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);M=16==M?n[y-1]:0;do{n[y++]=M}while(0!=--T);o=y}}u[0]=-1;var P=[],C=[],F=[],L=[];if(P[0]=9,C[0]=6,0!=(p=f.inflate_trees_dynamic(257+(31&(p=s)),1+(p>>5&31),n,P,C,F,L,d,e)))return-3==p&&(n=null,i=9),t=p,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);c.init(P[0],C[0],d,F[0],d,L[0]),i=6;case 6:if(r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,1!=(t=c.proc(r,e,t)))return r.inflate_flush(e,t);if(t=0,c.free(e),_=e.next_in_index,v=e.avail_in,m=r.bitb,g=r.bitk,x=(b=r.write)<r.read?r.read-b-1:r.end-b,0===h){i=0;break}i=7;case 7:if(r.write=b,t=r.inflate_flush(e,t),x=(b=r.write)<r.read?r.read-b-1:r.end-b,r.read!=r.write)return r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);i=8;case 8:return t=1,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);case 9:return t=-3,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t);default:return t=-2,r.bitb=m,r.bitk=g,e.avail_in=v,e.total_in+=_-e.next_in_index,e.next_in_index=_,r.write=b,r.inflate_flush(e,t)}},r.free=function(e){r.reset(e,null),r.window=null,d=null},r.set_dictionary=function(e,t,n){r.window.set(e.subarray(t,t+n),0),r.read=r.write=n},r.sync_point=function(){return 1==i?1:0}}var Dl=[0,0,255,255];function Ul(){var e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):-2}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,0},e.inflateInit=function(n,r){return n.msg=null,e.blocks=null,r<8||r>15?(e.inflateEnd(n),-2):(e.wbits=r,n.istate.blocks=new Rl(n,1<<r),t(n),0)},e.inflate=function(e,t){var n,r;if(!e||!e.istate||!e.next_in)return-2;for(t=4==t?-5:0,n=-5;;)switch(e.istate.mode){case 0:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.read_byte(e.next_in_index++)))){e.istate.mode=13,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=13,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,r=255&e.read_byte(e.next_in_index++),((e.istate.method<<8)+r)%31!=0){e.istate.mode=13,e.msg="incorrect header check",e.istate.marker=5;break}if(0==(32&r)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,e.istate.mode=3;case 3:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,e.istate.mode=4;case 4:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,e.istate.mode=5;case 5:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.read_byte(e.next_in_index++),e.istate.mode=6,2);case 6:return e.istate.mode=13,e.msg="need dictionary",e.istate.marker=0,-2;case 7:if(-3==(n=e.istate.blocks.proc(e,n))){e.istate.mode=13,e.istate.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,e.istate.blocks.reset(e,e.istate.was),e.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}},e.inflateSetDictionary=function(e,t,n){var r=0,i=n;return e&&e.istate&&6==e.istate.mode?(i>=1<<e.istate.wbits&&(r=n-(i=(1<<e.istate.wbits)-1)),e.istate.blocks.set_dictionary(t,r,i),e.istate.mode=7,0):-2},e.inflateSync=function(e){var n,r,i,a,s;if(!e||!e.istate)return-2;if(13!=e.istate.mode&&(e.istate.mode=13,e.istate.marker=0),0===(n=e.avail_in))return-5;for(r=e.next_in_index,i=e.istate.marker;0!==n&&i<4;)e.read_byte(r)==Dl[i]?i++:i=0!==e.read_byte(r)?0:4-i,r++,n--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=n,e.istate.marker=i,4!=i?-3:(a=e.total_in,s=e.total_out,t(e),e.total_in=a,e.total_out=s,e.istate.mode=7,0)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():-2}}function Ol(){}function kl(){var e=new Ol,t=new Uint8Array(512),n=!1;e.inflateInit(),e.next_out=t,this.append=function(r,i){var a,s,o=[],l=0,u=0,c=0;if(0!==r.length){e.next_in_index=0,e.next_in=r,e.avail_in=r.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.avail_in||n||(e.next_in_index=0,n=!0),a=e.inflate(0),n&&-5===a){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==a&&1!==a)throw new Error("inflating: "+e.msg);if((n||1===a)&&e.avail_in===r.length)throw new Error("inflating: bad input");e.next_out_index&&o.push(512===e.next_out_index?new Uint8Array(t):new Uint8Array(t.subarray(0,e.next_out_index))),c+=e.next_out_index,i&&e.next_in_index>0&&e.next_in_index!=l&&(i(e.next_in_index),l=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return s=new Uint8Array(c),o.forEach((function(e){s.set(e,u),u+=e.length})),s}},this.flush=function(){e.inflateEnd()}}Ol.prototype={inflateInit:function(e){var t=this;return t.istate=new Ul,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){var t=this;return t.istate?t.istate.inflate(t,e):-2},inflateEnd:function(){var e=this;if(!e.istate)return-2;var t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){var e=this;return e.istate?e.istate.inflateSync(e):-2},inflateSetDictionary:function(e,t){var n=this;return n.istate?n.istate.inflateSetDictionary(n,e,t):-2},read_byte:function(e){return this.next_in.subarray(e,e+1)[0]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}},self._zipjs_Inflater=kl;var $l,zl="File format is not recognized.",Bl="Error while reading zip file.";try{$l=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(pl){}function Gl(){this.crc=-1}function jl(){}function Vl(e,t){var n,r;return n=new ArrayBuffer(e),r=new Uint8Array(n),t&&r.set(t,0),{buffer:n,array:r,view:new DataView(n)}}function Hl(){}function Xl(e){var t,n=this;n.size=0,n.init=function(r,i){var a=new Blob([e],{type:"text/plain"});(t=new ql(a)).init((function(){n.size=t.size,r()}),i)},n.readUint8Array=function(e,n,r,i){t.readUint8Array(e,n,r,i)}}function Wl(e){var t,n=this;n.size=0,n.init=function(r){for(var i=e.length;"="==e.charAt(i-1);)i--;t=e.indexOf(",")+1,n.size=Math.floor(.75*(i-t)),r()},n.readUint8Array=function(n,r,i){var a,s=Vl(r),o=4*Math.floor(n/3),l=4*Math.ceil((n+r)/3),u=self.atob(e.substring(o+t,l+t)),c=n-3*Math.floor(o/4);for(a=c;a<c+r;a++)s.array[a-c]=u.charCodeAt(a);i(s.array)}}function ql(e){var t=this;t.size=0,t.init=function(n){t.size=e.size,n()},t.readUint8Array=function(t,n,r,i){var a=new FileReader;a.onload=function(e){r(new Uint8Array(e.target.result))},a.onerror=i;try{a.readAsArrayBuffer(function(e,t,n){if(t<0||n<0||t+n>e.size)throw new RangeError("offset:"+t+", length:"+n+", size:"+e.size);return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):e.mozSlice?e.mozSlice(t,t+n):e.msSlice?e.msSlice(t,t+n):void 0}(e,t,n))}catch(e){i(e)}}}function Yl(){}function Ql(e){var t,n=this;n.init=function(e){t=new Blob([],{type:"text/plain"}),e()},n.writeUint8Array=function(e,n){t=new Blob([t,$l?e:e.buffer],{type:"text/plain"}),n()},n.getData=function(n,r){var i=new FileReader;i.onload=function(e){n(e.target.result)},i.onerror=r,i.readAsText(t,e)}}function Zl(e){var t=this,n="",r="";t.init=function(t){n+="data:"+(e||"")+";base64,",t()},t.writeUint8Array=function(e,t){var i,a=r.length,s=r;for(r="",i=0;i<3*Math.floor((a+e.length)/3)-a;i++)s+=String.fromCharCode(e[i]);for(;i<e.length;i++)r+=String.fromCharCode(e[i]);s.length>2?n+=self.btoa(s):r=s,t()},t.getData=function(e){e(n+self.btoa(r))}}function Kl(e){var t,n=this;n.init=function(n){t=new Blob([],{type:e}),n()},n.writeUint8Array=function(n,r){t=new Blob([t,$l?n:n.buffer],{type:e}),r()},n.getData=function(e){e(t)}}function Jl(e,t,n,r,i,a,s,o,l,u){var c,h,d,f=0,p=t.sn;function m(){e.removeEventListener("message",g,!1),o(h,d)}function g(t){var n=t.data,i=n.data,o=n.error;if(o)return o.toString=function(){return"Error: "+this.message},void l(o);if(n.sn===p)switch("number"==typeof n.codecTime&&(e.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(e.crcTime+=n.crcTime),n.type){case"append":i?(h+=i.length,r.writeUint8Array(i,(function(){_()}),u)):_();break;case"flush":d=n.crc,i?(h+=i.length,r.writeUint8Array(i,(function(){m()}),u)):m();break;case"progress":s&&s(c+n.loaded,a);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function _(){(c=524288*f)<=a?n.readUint8Array(i+c,Math.min(524288,a-c),(function(n){s&&s(c,a);var r=0===c?t:{sn:p};r.type="append",r.data=n;try{e.postMessage(r,[n.buffer])}catch(t){e.postMessage(r)}f++}),l):e.postMessage({sn:p,type:"flush"})}h=0,e.addEventListener("message",g,!1),_()}function eu(e,t,n,r,i,a,s,o,l,u){var c,h=0,d=0,f="input"===a,p="output"===a,m=new Gl;!function a(){var g;if((c=524288*h)<i)t.readUint8Array(r+c,Math.min(524288,i-c),(function(t){var r;try{r=e.append(t,(function(e){s&&s(c+e,i)}))}catch(e){return void l(e)}r?(d+=r.length,n.writeUint8Array(r,(function(){h++,setTimeout(a,1)}),u),p&&m.append(r)):(h++,setTimeout(a,1)),f&&m.append(t),s&&s(c,i)}),l);else{try{g=e.flush()}catch(e){return void l(e)}g?(p&&m.append(g),d+=g.length,n.writeUint8Array(g,(function(){o(d,m.get())}),u)):o(d,m.get())}}()}function tu(e,t,n,r,i,a,s,o,l,u,c){var h="input";hu.useWebWorkers&&s?Jl(e,{sn:t,codecClass:"_zipjs_NOOP",crcType:h},n,r,i,a,l,o,u,c):eu(new jl,n,r,i,a,h,l,o,u,c)}function nu(e){var t,n,r="",i=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(t=0;t<e.length;t++)r+=(n=255&e.charCodeAt(t))>127?i[n-128]:String.fromCharCode(n);return r}function ru(e){return decodeURIComponent(escape(e))}function iu(e){var t,n="";for(t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n}function au(e,t,n,r,i){e.version=t.view.getUint16(n,!0),e.bitFlag=t.view.getUint16(n+2,!0),e.compressionMethod=t.view.getUint16(n+4,!0),e.lastModDateRaw=t.view.getUint32(n+6,!0),e.lastModDate=function(e){var t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}(e.lastModDateRaw),1!=(1&e.bitFlag)?((r||8!=(8&e.bitFlag))&&(e.crc32=t.view.getUint32(n+10,!0),e.compressedSize=t.view.getUint32(n+14,!0),e.uncompressedSize=t.view.getUint32(n+18,!0)),4294967295!==e.compressedSize&&4294967295!==e.uncompressedSize?(e.filenameLength=t.view.getUint16(n+22,!0),e.extraFieldLength=t.view.getUint16(n+24,!0)):i("File is using Zip64 (4gb+ file size).")):i("File contains encrypted entry.")}function su(e){return unescape(encodeURIComponent(e))}function ou(e){var t,n=[];for(t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}Gl.prototype.append=function(e){for(var t=0|this.crc,n=this.table,r=0,i=0|e.length;r<i;r++)t=t>>>8^n[255&(t^e[r])];this.crc=t},Gl.prototype.get=function(){return~this.crc},Gl.prototype.table=function(){var e,t,n,r=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;r[e]=n}return r}(),jl.prototype.append=function(e,t){return e},jl.prototype.flush=function(){},(Xl.prototype=new Hl).constructor=Xl,(Wl.prototype=new Hl).constructor=Wl,(ql.prototype=new Hl).constructor=ql,Yl.prototype.getData=function(e){e(this.data)},(Ql.prototype=new Yl).constructor=Ql,(Zl.prototype=new Yl).constructor=Zl,(Kl.prototype=new Yl).constructor=Kl;var lu={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function uu(e,t,n){if(null===hu.workerScripts||null===hu.workerScriptsPath){var r,i,a;if(hu.workerScripts){if(r=hu.workerScripts[e],!Array.isArray(r))return void n(new Error("zip.workerScripts."+e+" is not an array!"));i=r,a=document.createElement("a"),r=i.map((function(e){return a.href=e,a.href}))}else(r=lu[e].slice(0))[0]=(hu.workerScriptsPath||"")+r[0];var s=new Worker(r[0]);s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:r.slice(1)}),s.addEventListener("message",(function e(r){var i=r.data;if(i.error)return s.terminate(),void n(i.error);"importScripts"===i.type&&(s.removeEventListener("message",e),s.removeEventListener("error",o),t(s))})),s.addEventListener("error",o)}else n(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function o(e){s.terminate(),n(e)}}function cu(e){console.error(e)}const hu={Reader:Hl,Writer:Yl,BlobReader:ql,Data64URIReader:Wl,TextReader:Xl,BlobWriter:Kl,Data64URIWriter:Zl,TextWriter:Ql,createReader:function(e,t,n){e.init((function(){!function(e,t,n){var r=0;function i(){}i.prototype.getData=function(t,i,a,s){var o=this;function l(e,r){s&&!function(e){var t=Vl(4);return t.view.setUint32(0,e),o.crc32==t.view.getUint32(0)}(r)?n("CRC failed."):t.getData((function(e){i(e)}))}function u(e){n(e||"Error while reading file data.")}function c(e){n(e||"Error while writing file data.")}e.readUint8Array(o.offset,30,(function(i){var h,d=Vl(i.length,i);1347093252==d.view.getUint32(0)?(au(o,d,4,!1,n),h=o.offset+30+o.filenameLength+o.extraFieldLength,t.init((function(){0===o.compressionMethod?tu(o._worker,r++,e,t,h,o.compressedSize,s,l,a,u,c):function(e,t,n,r,i,a,s,o,l,u,c){var h=s?"output":"none";hu.useWebWorkers?Jl(e,{sn:t,codecClass:"_zipjs_Inflater",crcType:h},n,r,i,a,l,o,u,c):eu(new kl,n,r,i,a,h,l,o,u,c)}(o._worker,r++,e,t,h,o.compressedSize,s,l,a,u,c)}),c)):n(zl)}),u)};var a={getEntries:function(t){var r=this._worker;!function(t){function r(r,i){e.readUint8Array(e.size-r,r,(function(e){for(var n=e.length-22;n>=0;n--)if(80===e[n]&&75===e[n+1]&&5===e[n+2]&&6===e[n+3])return void t(new DataView(e.buffer,n,22));i()}),(function(){n(Bl)}))}e.size<22?n(zl):r(22,(function(){r(Math.min(65558,e.size),(function(){n(zl)}))}))}((function(a){var s,o;s=a.getUint32(16,!0),o=a.getUint16(8,!0),s<0||s>=e.size?n(zl):e.readUint8Array(s,e.size-s,(function(e){var a,s,l,u,c=0,h=[],d=Vl(e.length,e);for(a=0;a<o;a++){if((s=new i)._worker=r,1347092738!=d.view.getUint32(c))return void n(zl);au(s,d,c+6,!0,n),s.commentLength=d.view.getUint16(c+32,!0),s.directory=16==(16&d.view.getUint8(c+38)),s.offset=d.view.getUint32(c+42,!0),l=iu(d.array.subarray(c+46,c+46+s.filenameLength)),s.filename=2048==(2048&s.bitFlag)?ru(l):nu(l),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),u=iu(d.array.subarray(c+46+s.filenameLength+s.extraFieldLength,c+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048==(2048&s.bitFlag)?ru(u):nu(u),h.push(s),c+=46+s.filenameLength+s.extraFieldLength+s.commentLength}t(h)}),(function(){n(Bl)}))}))},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};hu.useWebWorkers?uu("inflater",(function(e){a._worker=e,t(a)}),(function(e){n(e)})):t(a)}(e,t,n)}),n=n||cu)},createWriter:function(e,t,n,r){r=!!r,e.init((function(){!function(e,t,n,r){var i={},a=[],s=0,o=0;function l(e){n(e||"Error while writing zip file.")}function u(e){n(e||"Error while reading file data.")}var c={add:function(t,c,h,d,f){var p,m,g,_=this._worker;function v(t,n){var r=Vl(16);s+=t||0,r.view.setUint32(0,1347094280),void 0!==n&&(p.view.setUint32(10,n,!0),r.view.setUint32(4,n,!0)),c&&(r.view.setUint32(8,t,!0),p.view.setUint32(14,t,!0),r.view.setUint32(12,c.size,!0),p.view.setUint32(18,c.size,!0)),e.writeUint8Array(r.array,(function(){s+=16,h()}),l)}function b(){var h;f=f||{},t=t.trim(),f.directory&&"/"!=t.charAt(t.length-1)&&(t+="/"),i.hasOwnProperty(t)?n("File already exists."):(m=ou(su(t)),a.push(t),g=f.lastModDate||new Date,p=Vl(26),i[t]={headerArray:p.array,directory:f.directory,filename:m,offset:s,comment:ou(su(f.comment||""))},p.view.setUint32(0,335546376),f.version&&p.view.setUint8(0,f.version),r||0===f.level||f.directory||p.view.setUint16(4,2048),p.view.setUint16(6,(g.getHours()<<6|g.getMinutes())<<5|g.getSeconds()/2,!0),p.view.setUint16(8,(g.getFullYear()-1980<<4|g.getMonth()+1)<<5|g.getDate(),!0),p.view.setUint16(22,m.length,!0),(h=Vl(30+m.length)).view.setUint32(0,1347093252),h.array.set(p.array,4),h.array.set(m,30),s+=h.array.length,e.writeUint8Array(h.array,(function(){c?r||0===f.level?tu(_,o++,c,e,0,c.size,!0,v,d,u,l):function(e,t,n,r,i,a,s,o,l){var u="input";hu.useWebWorkers?Jl(e,{sn:t,options:{level:i},codecClass:"_zipjs_Deflater",crcType:u},n,r,0,n.size,s,a,o,l):eu(new Al,n,r,0,n.size,u,s,a,o,l)}(_,o++,c,e,f.level,v,d,u,l):v()}),l))}c?c.init(b,u):b()},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null);var n,r,o,u=0,c=0;for(r=0;r<a.length;r++)u+=46+(o=i[a[r]]).filename.length+o.comment.length;for(n=Vl(u+22),r=0;r<a.length;r++)o=i[a[r]],n.view.setUint32(c,1347092738),n.view.setUint16(c+4,5120),n.array.set(o.headerArray,c+6),n.view.setUint16(c+32,o.comment.length,!0),o.directory&&n.view.setUint8(c+38,16),n.view.setUint32(c+42,o.offset,!0),n.array.set(o.filename,c+46),n.array.set(o.comment,c+46+o.filename.length),c+=46+o.filename.length+o.comment.length;n.view.setUint32(c,1347093766),n.view.setUint16(c+8,a.length,!0),n.view.setUint16(c+10,a.length,!0),n.view.setUint32(c+12,u,!0),n.view.setUint32(c+16,s,!0),e.writeUint8Array(n.array,(function(){e.getData(t)}),l)},_worker:null};hu.useWebWorkers?uu("deflater",(function(e){c._worker=e,t(c)}),(function(e){n(e)})):t(c)}(e,t,n,r)}),n=n||cu)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null};var du,fu,pu=hu.TextWriter,mu=hu.BlobWriter,gu=hu.Data64URIWriter,_u=hu.TextReader,vu=hu.BlobReader,bu=hu.Data64URIReader,xu=hu.createReader,yu=hu.createWriter;function wu(e){var t,n=this;n.size=0,n.init=function(t){n.size=e.uncompressedSize,t()},n.readUint8Array=function(r,i,a,s){!function(r){n.data?r():e.getData(new mu,(function(e){n.data=e,t=new vu(e),r()}),null,n.checkCrc32)}((function(){t.readUint8Array(r,i,a,s)}))}}function Au(e){var t=0;return function e(n){t+=n.uncompressedSize||0,n.children.forEach(e)}(e),t}function Eu(e,t,n){var r=0;function i(){++r<e.children.length?a(e.children[r]):t()}function a(e){e.directory?Eu(e,i,n):(e.reader=new e.Reader(e.data,n),e.reader.init((function(){e.uncompressedSize=e.reader.size,i()})))}e.children.length?a(e.children[r]):t()}function Su(e){var t=e.parent.children;t.forEach((function(n,r){n.id==e.id&&t.splice(r,1)}))}function Tu(e){e.entries=[],e.root=new Fu(e)}function Mu(e,t,n,r){if(e.directory)return r?new Fu(e.fs,t,n,e):new Cu(e.fs,t,n,e);throw"Parent entry is not a directory."}function Pu(){}function Cu(e,t,n,r){var i=this;Pu.prototype.init.call(i,e,t,n,r),i.Reader=n.Reader,i.Writer=n.Writer,i.data=n.data,n.getData&&(i.getData=n.getData)}function Fu(e,t,n,r){Pu.prototype.init.call(this,e,t,n,r),this.directory=!0}function Lu(){Tu(this)}(wu.prototype=new(0,hu.Reader)).constructor=wu,wu.prototype.checkCrc32=!1,(Pu.prototype={init:function(e,t,n,r){var i=this;if(e.root&&r&&r.getChildByName(t))throw"Entry filename already exists.";n||(n={}),i.fs=e,i.name=t,i.id=e.entries.length,i.parent=r,i.children=[],i.zipVersion=n.zipVersion||20,i.uncompressedSize=0,e.entries.push(i),r&&i.parent.children.push(i)},getFileEntry:function(e,t,n,r,i){var a=this;Eu(a,(function(){!function(e,t,n,r,i,a,s){var o=0;t.directory?function e(t,n,r,i,a,l){var u=0;!function c(){var h=n.children[u];h?function(n){function r(t){o+=n.uncompressedSize||0,e(t,n,(function(){u++,c()}),i,a,l)}n.directory?t.getDirectory(n.name,{create:!0},r,a):t.getFile(n.name,{create:!0},(function(e){n.getData(new hu.FileWriter(e,hu.getMimeType(n.name)),r,(function(e){i&&i(o+e,l)}),s)}),a)}(h):r()}()}(e,t,n,r,i,a):t.getData(new hu.FileWriter(e,hu.getMimeType(t.name)),n,r,s)}(e,a,t,n,r,Au(a),i)}),r)},moveTo:function(e){var t=this;if(!e.directory)throw"Target entry is not a directory.";if(e.isDescendantOf(t))throw"Entry is a ancestor of target entry.";if(t!=e){if(e.getChildByName(t.name))throw"Entry filename already exists.";Su(t),t.parent=e,e.children.push(t)}},getFullname:function(){for(var e=this.name,t=this.parent;t;)e=(t.name?t.name+"/":"")+e,t=t.parent;return e},isDescendantOf:function(e){for(var t=this.parent;t&&t.id!=e.id;)t=t.parent;return!!t}}).constructor=Pu,Cu.prototype=du=new Pu,du.constructor=Cu,du.getData=function(e,t,n,r){var i=this;!e||e.constructor==i.Writer&&i.data?t(i.data):(i.reader||(i.reader=new i.Reader(i.data,r)),i.reader.init((function(){e.init((function(){!function(e,t,n,r,i){var a=0;!function s(){var o=524288*a;r&&r(o,e.size),o<e.size?e.readUint8Array(o,Math.min(524288,e.size-o),(function(e){t.writeUint8Array(new Uint8Array(e),(function(){a++,s()}))}),i):t.getData(n)}()}(i.reader,e,t,n,r)}),r)})))},du.getText=function(e,t,n,r){this.getData(new pu(r),e,t,n)},du.getBlob=function(e,t,n,r){this.getData(new mu(e),t,n,r)},du.getData64URI=function(e,t,n,r){this.getData(new gu(e),t,n,r)},Fu.prototype=fu=new Pu,fu.constructor=Fu,fu.addDirectory=function(e){return Mu(this,e,null,!0)},fu.addText=function(e,t){return Mu(this,e,{data:t,Reader:_u,Writer:pu})},fu.addBlob=function(e,t){return Mu(this,e,{data:t,Reader:vu,Writer:mu})},fu.addData64URI=function(e,t){return Mu(this,e,{data:t,Reader:bu,Writer:gu})},fu.addFileEntry=function(e,t,n){!function(e,t,n,r){t.isDirectory?function e(t,n,i){!function(e,t){e.isDirectory&&e.createReader().readEntries(t),e.isFile&&t([])}(n,(function(n){var a=0;!function s(){var o=n[a];o?function(n){function i(t){e(t,n,(function(){a++,s()}))}n.isDirectory&&i(t.addDirectory(n.name)),n.isFile&&n.file((function(e){var r=t.addBlob(n.name,e);r.uncompressedSize=e.size,i(r)}),r)}(o):i()}()}))}(e,t,n):t.file((function(r){e.addBlob(t.name,r),n()}),r)}(this,e,t,n)},fu.addData=function(e,t){return Mu(this,e,t)},fu.importBlob=function(e,t,n){this.importZip(new vu(e),t,n)},fu.importText=function(e,t,n){this.importZip(new _u(e),t,n)},fu.importData64URI=function(e,t,n){this.importZip(new bu(e),t,n)},fu.exportBlob=function(e,t,n){this.exportZip(new mu("application/zip"),e,t,n)},fu.exportText=function(e,t,n){this.exportZip(new pu,e,t,n)},fu.exportFileEntry=function(e,t,n,r){this.exportZip(new hu.FileWriter(e,"application/zip"),t,n,r)},fu.exportData64URI=function(e,t,n){this.exportZip(new gu("application/zip"),e,t,n)},fu.importZip=function(e,t,n){var r=this;xu(e,(function(e){e.getEntries((function(e){e.forEach((function(e){var t=r,n=e.filename.split("/"),i=n.pop();n.forEach((function(e){t=t.getChildByName(e)||new Fu(r.fs,e,null,t)})),e.directory||Mu(t,i,{data:e,Reader:wu})})),t()}))}),n)},fu.exportZip=function(e,t,n,r){var i=this;Eu(i,(function(){yu(e,(function(e){!function(e,t,n,r,i){var a=0;!function e(t,n,r,i,s){var o=0;!function l(){var u=n.children[o];u?t.add(u.getFullname(),u.reader,(function(){a+=u.uncompressedSize||0,e(t,u,(function(){o++,l()}),i,s)}),(function(e){i&&i(a+e,s)}),{directory:u.directory,version:u.zipVersion}):r()}()}(e,t,n,r,i)}(e,i,(function(){e.close(t)}),n,Au(i))}),r)}),r)},fu.getChildByName=function(e){var t,n;for(t=0;t<this.children.length;t++)if((n=this.children[t]).name==e)return n},Lu.prototype={remove:function(e){Su(e),this.entries[e.id]=null},find:function(e){var t,n=e.split("/"),r=this.root;for(t=0;r&&t<n.length;t++)r=r.getChildByName(n[t]);return r},getById:function(e){return this.entries[e]},importBlob:function(e,t,n){Tu(this),this.root.importBlob(e,t,n)},importText:function(e,t,n){Tu(this),this.root.importText(e,t,n)},importData64URI:function(e,t,n){Tu(this),this.root.importData64URI(e,t,n)},exportBlob:function(e,t,n){this.root.exportBlob(e,t,n)},exportText:function(e,t,n){this.root.exportText(e,t,n)},exportFileEntry:function(e,t,n,r){this.root.exportFileEntry(e,t,n,r)},exportData64URI:function(e,t,n){this.root.exportData64URI(e,t,n)}},hu.getMimeType=function(){return"application/octet-stream"};var Nu={FS:Lu,ZipDirectoryEntry:Fu,ZipFileEntry:Cu};hu.useWebWorkers=!1;var Iu=function(){function e(e,t){this.el=e,this.inputEl=t,this.listeners={drop:[],dropstart:[],droperror:[]},this._onDragover=this._onDragover.bind(this),this._onDrop=this._onDrop.bind(this),this._onSelect=this._onSelect.bind(this),e.addEventListener("dragover",this._onDragover,!1),e.addEventListener("drop",this._onDrop,!1),t.addEventListener("change",this._onSelect)}var t=e.prototype;return t.on=function(e,t){return this.listeners[e].push(t),this},t._emit=function(e,t){return this.listeners[e].forEach((function(e){return e(t)})),this},t.destroy=function(){var e=this.el,t=this.inputEl;e.removeEventListener("dragover",this._onDragover,!1),e.removeEventListener("drop",this._onDrop,!1),t.removeEventListener("change",this._onSelect),delete this.el,delete this.inputEl,delete this.listeners},t._onDrop=function(e){e.stopPropagation(),e.preventDefault(),this._emit("dropstart");var t=Array.from(e.dataTransfer.files||[]),n=Array.from(e.dataTransfer.items||[]);if(0!==t.length||0!==n.length)if(n.length>0){var r=n.map((function(e){return e.webkitGetAsEntry()}));r[0].name.match(/\.zip$/)?this._loadZip(n[0].getAsFile()):this._loadNextEntry(new Map,r)}else 1===t.length&&t[0].name.match(/\.zip$/)&&this._loadZip(t[0]),this._emit("drop",{files:new Map(t.map((function(e){return[e.name,e]})))});else this._fail("Required drag-and-drop APIs are not supported in this browser.")},t._onDragover=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},t._onSelect=function(e){this._emit("dropstart");var t=[].slice.call(this.inputEl.files);if(1===t.length&&this._isZip(t[0]))this._loadZip(t[0]);else{var n=new Map;t.forEach((function(e){return n.set(e.webkitRelativePath||e.name,e)})),this._emit("drop",{files:n})}},t._loadNextEntry=function(e,t){var n=this,r=t.pop();if(r)if(r.isFile)r.file((function(i){e.set(r.fullPath,i),n._loadNextEntry(e,t)}),(function(){return console.error("Could not load file: %s",r.fullPath)}));else if(r.isDirectory){var i=r.createReader();i.readEntries((function r(a){a.length?(t=t.concat(a),i.readEntries(r)):n._loadNextEntry(e,t)}))}else console.warn("Unknown asset type: "+r.fullPath),this._loadNextEntry(e,t);else this._emit("drop",{files:e})},t._loadZip=function(e){var t=this,n=[],r=new Map,i=new Nu.FS,a=function e(t){t.directory?t.children.forEach(e):"."!==t.name[0]&&n.push(new Promise((function(e){t.getData(new hu.BlobWriter,(function(n){n.name=t.name,r.set(t.getFullname(),n),e()}))})))};i.importBlob(e,(function(){a(i.root),Promise.all(n).then((function(){t._emit("drop",{files:r,archive:e})}))}))},t._isZip=function(e){return"application/zip"===e.type||e.name.match(/\.zip$/)},t._fail=function(e){this._emit("droperror",{message:e})},e}();class Ru{constructor(e){this.el=e,this.viewer=null,this.gui=null,this.viewerEl=null,this.filename=null,this.dropEl=document.querySelector(".dropzone"),this.inputEl=document.querySelector("#file-input"),this.spinnerEl=e.querySelector(".spinner"),this.validationCtrl=new hl(e),this.createDropzone(),this.createPreModel(),this.hideSpinner()}createDropzone(){const e=new Iu(this.dropEl,this.inputEl);e.on("drop",(({files:e})=>this.load(e))),e.on("dropstart",(()=>this.showSpinner())),e.on("droperror",(()=>this.hideSpinner()))}createPreModel(){const e=document.querySelector("#model-dog"),t=document.querySelector("#model-helmet"),n=document.querySelector("#model-room"),r=this;e.onclick=function(){r.showSpinner(),r.view("./models/robotPBR/robot.gltf")},t.onclick=function(){r.showSpinner(),r.view("./models/UinoHelmet/glTF/UinoHelmet.gltf")},n.onclick=function(){r.showSpinner(),r.view("./models/Room.glb")}}load(e){let t,n;Array.from(e).forEach((([e,r])=>{r.name.match(/\.(gltf|glb)$/)&&(t=r,n=e.replace(r.name,"")),this.filename=r.name})),t||this.onError("No .gltf or .glb asset found."),this.view(t,n,e)}createViewer(){return this.viewerEl=document.createElement("div"),this.viewerEl.classList.add("viewer"),this.dropEl.innerHTML="",this.dropEl.appendChild(this.viewerEl),this.viewer=new $o(this.viewerEl),this.viewer.startRender(),this.viewer}importFileJSON(){var e=document.createElement("input");e.setAttribute("id","_ef"),e.setAttribute("type","file"),e.setAttribute("style","visibility:hidden;height:0px"),document.body.appendChild(e),e.click(),e.onchange=e=>{this.readFileJSON(e).then((e=>{var t,n;console.log("import data:",e),n=e,(t=this.gui.gui).children[0].children[0].setValue(n.global.wireframe),t.children[1].children[0].setValue(n.ground.show),t.children[1].children[1].setValue(n.ground.color),t.children[1].children[2].setValue(n.ground.grid),t.children[2].children[0].setValue(n.environment.texture),t.children[2].children[1].setValue(n.environment.diffuseIntensity),t.children[2].children[2].setValue(n.environment.skyRoughness),t.children[3].children[0].setValue(n.camera.fov),t.children[3].children[1].setValue(n.camera.type),t.children[3].children[2].setValue(n.camera.outputEncoding),t.children[4].children[0].children[0].setValue(n.light.ambient.intensity),t.children[4].children[0].children[1].setValue(n.light.ambient.color),t.children[4].children[1].children[0].setValue(n.light.directional.directional1.intensity),t.children[4].children[1].children[1].setValue(n.light.directional.directional1.color),t.children[4].children[1].children[2].children[0].setValue(n.light.directional.directional1.direction.x),t.children[4].children[1].children[2].children[1].setValue(n.light.directional.directional1.direction.y),t.children[4].children[1].children[3].setValue(n.light.directional.directional1.lensflare),t.children[4].children[1].children[4].setValue(n.light.directional.directional1.shadowenable),t.children[4].children[1].children[5].setValue(n.light.directional.directional1.shadowbias),t.children[4].children[1].children[6].setValue(n.light.directional.directional1.shadowquality),t.children[4].children[2].children[0].setValue(n.light.directional.directional2.intensity),t.children[4].children[2].children[1].setValue(n.light.directional.directional2.color),t.children[4].children[2].children[2].children[0].setValue(n.light.directional.directional2.direction.x),t.children[4].children[2].children[2].children[1].setValue(n.light.directional.directional2.direction.y),t.children[4].children[2].children[3].setValue(n.light.directional.directional2.lensflare),t.children[4].children[2].children[4].setValue(n.light.directional.directional2.shadowenable),t.children[4].children[2].children[5].setValue(n.light.directional.directional2.shadowbias),t.children[4].children[2].children[6].setValue(n.light.directional.directional2.shadowquality),t.children[4].children[3].children[0].setValue(n.light.directional.cameraDirectional.intensity),t.children[4].children[3].children[1].setValue(n.light.directional.cameraDirectional.color),t.children[5].children[0].setValue(n.postEffect.MSAA),t.children[5].children[1].children[0].setValue(n.postEffect.colorCorrection.active),t.children[5].children[1].children[1].setValue(n.postEffect.colorCorrection.brightness),t.children[5].children[1].children[2].setValue(n.postEffect.colorCorrection.contrast),t.children[5].children[1].children[3].setValue(n.postEffect.colorCorrection.exposure),t.children[5].children[1].children[4].setValue(n.postEffect.colorCorrection.gamma),t.children[5].children[1].children[5].setValue(n.postEffect.colorCorrection.saturation),t.children[5].children[2].children[0].setValue(n.postEffect.bloom.active),t.children[5].children[2].children[1].setValue(n.postEffect.bloom.strength),t.children[5].children[2].children[2].setValue(n.postEffect.bloom.threshold),t.children[5].children[2].children[3].setValue(n.postEffect.bloom.blurSize),t.children[5].children[2].children[4].setValue(n.postEffect.bloom.smoothWidth),t.children[5].children[3].children[0].setValue(n.postEffect.ssao.active),t.children[5].children[3].children[1].setValue(n.postEffect.ssao.radius),t.children[5].children[3].children[2].setValue(n.postEffect.ssao.power),t.children[5].children[3].children[3].setValue(n.postEffect.ssao.bias),t.children[5].children[3].children[4].setValue(n.postEffect.ssao.intensity),t.children[5].children[3].children[5].setValue(n.postEffect.ssao.quality),t.children[5].children[4].children[0].setValue(n.postEffect.ssr.active),t.children[5].children[4].children[1].setValue(n.postEffect.ssr.maxRayDistance),t.children[5].children[4].children[2].setValue(n.postEffect.ssr.pixelStride),t.children[5].children[4].children[3].setValue(n.postEffect.ssr.pixelStrideZCutoff),t.children[5].children[4].children[4].setValue(n.postEffect.ssr.screenEdgeFadeStart),t.children[5].children[4].children[5].setValue(n.postEffect.ssr.eyeFadeStart),t.children[5].children[4].children[6].setValue(n.postEffect.ssr.eyeFadeEnd),t.children[5].children[4].children[7].setValue(n.postEffect.ssr.minGlossiness),t.children[5].children[5].children[0].setValue(n.postEffect.dof.active),t.children[5].children[5].children[1].setValue(n.postEffect.dof.focalDepth),t.children[5].children[5].children[2].setValue(n.postEffect.dof.focalLength),t.children[5].children[5].children[3].setValue(n.postEffect.dof.fstop),t.children[5].children[5].children[4].setValue(n.postEffect.dof.maxblur),t.children[5].children[5].children[5].setValue(n.postEffect.dof.threshold),t.children[5].children[5].children[6].setValue(n.postEffect.dof.gain),t.children[5].children[5].children[7].setValue(n.postEffect.dof.bias),t.children[5].children[5].children[8].setValue(n.postEffect.dof.dithering),t.children[5].children[6].children[0].setValue(n.postEffect.fxaa.active),t.children[5].children[7].children[0].setValue(n.postEffect.chromaticaberration.active),t.children[5].children[7].children[1].setValue(n.postEffect.chromaticaberration.chromaFactor),t.children[5].children[8].children[0].setValue(n.postEffect.vignetting.active),t.children[5].children[8].children[1].setValue(n.postEffect.vignetting.color),t.children[5].children[8].children[2].setValue(n.postEffect.vignetting.offset),t.children[5].children[9].children[0].setValue(n.postEffect.bluredge.active),t.children[5].children[9].children[1].setValue(n.postEffect.bluredge.offset),t.children[5].children[10].children[0].setValue(n.postEffect.film.active),t.children[5].children[10].children[1].setValue(n.postEffect.film.noiseIntensity),t.children[5].children[10].children[2].setValue(n.postEffect.film.scanlinesIntensity),t.children[5].children[10].children[3].setValue(n.postEffect.film.scanlinesCount),t.children[5].children[10].children[4].setValue(n.postEffect.film.grayscale),t.children[5].children[11].children[0].setValue(n.postEffect.glow.active),t.children[5].children[11].children[1].setValue(n.postEffect.glow.strength),t.children[5].children[11].children[2].setValue(n.postEffect.glow.radius),t.children[5].children[11].children[3].setValue(n.postEffect.glow.threshold),t.children[5].children[11].children[4].setValue(n.postEffect.glow.smoothWidth),t.children[5].children[12].children[0].setValue(n.postEffect.lensflare.active),t.children[6].children[0].setValue(n.debuggers.type),t.children[7].children[2].setValue(n.animation.timeScale)})).catch((e=>{console.log(e)}))},document.body.removeChild(e)}exportFileJSON(e){"object"==typeof e&&(e=JSON.stringify(e,null,4));const t=new Blob([e],{type:"text/json"}),n=new MouseEvent("click"),r=document.createElement("a");r.download="example.json",r.href=window.URL.createObjectURL(t),r.dataset.downloadurl=["text/json",r.download,r.href].join(":"),r.dispatchEvent(n)}readFileJSON(e){return new Promise(((t,n)=>{const r=e.target.files[0];"application/json"!==r.type&&n("Only supports uploading json file."),"undefined"==typeof FileReader&&n("FileReader not support."),e.target.value="";const i=new FileReader;i.readAsText(r),i.onerror=e=>{n("Data parsing failed(1).",e)},i.onload=()=>{const e=i.result;if(e)try{const n=JSON.parse(e);t(n)}catch(e){n("Data parsing failed(2).",e)}else n("Data parsing failed(3)",error)}}))}view(e,t,n){this.viewer&&this.viewer.clear();const r=this.viewer||this.createViewer();this.options=new jo(r);const i="string"==typeof e?e:URL.createObjectURL(e),a=()=>{this.hideSpinner(),"object"==typeof e&&URL.revokeObjectURL(i)};r.load(i,t,n).catch((e=>this.onError(e))).then((e=>{const s=this.gui||new al(r,this.options,this);this.gui=s,e.animations?this.gui.setAnimationFolder(e.animations):this.gui.animationFolder.domElement.style.display="none",this.validationCtrl.validate(e.data,i,t,n,this.viewer,e),a()}))}onError(e){let t=(e||{}).message||e.toString();t.match(/ProgressEvent/)?t="Unable to retrieve this file. Check JS console and browser network tab.":t.match(/Unexpected token/)?t=`Unable to parse file content. Verify that this file is valid. Error: "${t}"`:e&&e.target&&e.target instanceof Image&&(e="Missing texture: "+e.target.src.split("/").pop()),window.alert(t),console.error(e)}showSpinner(){this.spinnerEl.style.display=""}hideSpinner(){this.spinnerEl.style.display="none"}}document.addEventListener("DOMContentLoaded",(()=>{new Ru(document.body,location)}))})()})();